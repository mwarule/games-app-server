(self.webpackChunkgames_app=self.webpackChunkgames_app||[]).push([[179],{7823:(Ft,Be,K)=>{"use strict";K.r(Be),K.d(Be,{AuthenticationModule:()=>Qe});var d=K(6895),v=K(1002),ce=K(433),Ue=K(590),T=K(8256),fe=K(7911),m=K(805),o=K(5593),f=K(982);const h=["cb"],r=function(je,pt,ye){return{"p-checkbox-label":!0,"p-checkbox-label-active":je,"p-disabled":pt,"p-checkbox-label-focus":ye}};function a(je,pt){if(1&je){const ye=T.EpF();T.TgZ(0,"label",7),T.NdJ("click",function(yt){T.CHM(ye);const Bt=T.oxw(),dn=T.MAs(3);return T.KtG(Bt.onClick(yt,dn,!0))}),T._uU(1),T.qZA()}if(2&je){const ye=T.oxw();T.Tol(ye.labelStyleClass),T.Q6J("ngClass",T.kEZ(5,r,ye.checked(),ye.disabled,ye.focused)),T.uIk("for",ye.inputId),T.xp6(1),T.Oqu(ye.label)}}const s=function(je,pt,ye){return{"p-checkbox p-component":!0,"p-checkbox-checked":je,"p-checkbox-disabled":pt,"p-checkbox-focused":ye}},u=function(je,pt,ye){return{"p-highlight":je,"p-disabled":pt,"p-focus":ye}},p={provide:ce.JU,useExisting:(0,T.Gpc)(()=>l),multi:!0};let l=(()=>{class je{constructor(ye){this.cd=ye,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new T.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(ye,Ie,yt){ye.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(ye),yt&&Ie.focus())}updateModel(ye){let Ie;this.binary?(Ie=this.checked()?this.falseValue:this.trueValue,this.model=Ie,this.onModelChange(Ie)):(Ie=this.checked()?this.model.filter(yt=>!f.gb.equals(yt,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(Ie),this.model=Ie,this.formControl&&this.formControl.setValue(Ie)),this.onChange.emit({checked:Ie,originalEvent:ye})}handleChange(ye){this.readonly||this.updateModel(ye)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(ye){this.model=ye,this.cd.markForCheck()}registerOnChange(ye){this.onModelChange=ye}registerOnTouched(ye){this.onModelTouched=ye}setDisabledState(ye){this.disabled=ye,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:f.gb.contains(this.value,this.model)}}return je.\u0275fac=function(ye){return new(ye||je)(T.Y36(T.sBO))},je.\u0275cmp=T.Xpm({type:je,selectors:[["p-checkbox"]],viewQuery:function(ye,Ie){if(1&ye&&T.Gf(h,5),2&ye){let yt;T.iGM(yt=T.CRH())&&(Ie.inputViewChild=yt.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[T._Bn([p])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(ye,Ie){if(1&ye){const yt=T.EpF();T.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),T.NdJ("focus",function(){return Ie.onFocus()})("blur",function(){return Ie.onBlur()})("change",function(dn){return Ie.handleChange(dn)}),T.qZA()(),T.TgZ(4,"div",4),T.NdJ("click",function(dn){T.CHM(yt);const bi=T.MAs(3);return T.KtG(Ie.onClick(dn,bi,!0))}),T._UZ(5,"span",5),T.qZA()(),T.YNc(6,a,2,9,"label",6)}2&ye&&(T.Tol(Ie.styleClass),T.Q6J("ngStyle",Ie.style)("ngClass",T.kEZ(18,s,Ie.checked(),Ie.disabled,Ie.focused)),T.xp6(2),T.Q6J("readonly",Ie.readonly)("value",Ie.value)("checked",Ie.checked())("disabled",Ie.disabled),T.uIk("id",Ie.inputId)("name",Ie.name)("tabindex",Ie.tabindex)("aria-labelledby",Ie.ariaLabelledBy)("aria-label",Ie.ariaLabel)("aria-checked",Ie.checked())("required",Ie.required),T.xp6(2),T.Q6J("ngClass",T.kEZ(22,u,Ie.checked(),Ie.disabled,Ie.focused)),T.xp6(1),T.Q6J("ngClass",Ie.checked()?Ie.checkboxIcon:null),T.xp6(1),T.Q6J("ngIf",Ie.label))},dependencies:[d.mk,d.O5,d.PC],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),je})(),y=(()=>{class je{}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275mod=T.oAB({type:je}),je.\u0275inj=T.cJS({imports:[d.ez]}),je})();var S=K(1740),x=K(7340),A=K(9592);const O=["input"];function j(je,pt){if(1&je){const ye=T.EpF();T.TgZ(0,"i",5),T.NdJ("click",function(){T.CHM(ye);const yt=T.oxw();return T.KtG(yt.clear())}),T.qZA()}}function Z(je,pt){if(1&je){const ye=T.EpF();T.TgZ(0,"i",6),T.NdJ("click",function(){T.CHM(ye);const yt=T.oxw();return T.KtG(yt.onMaskToggle())}),T.ALo(1,"mapper"),T.qZA()}if(2&je){const ye=T.oxw();T.Q6J("ngClass",T.xi3(1,1,ye.unmasked,ye.toggleIconClass))}}function ue(je,pt){1&je&&T.GkF(0)}function pe(je,pt){1&je&&T.GkF(0)}function Ce(je,pt){if(1&je&&(T.ynx(0),T.YNc(1,pe,1,0,"ng-container",8),T.BQk()),2&je){const ye=T.oxw(2);T.xp6(1),T.Q6J("ngTemplateOutlet",ye.contentTemplate)}}const Se=function(je){return{width:je}};function He(je,pt){if(1&je&&(T.TgZ(0,"div",11),T._UZ(1,"div",0),T.ALo(2,"mapper"),T.qZA(),T.TgZ(3,"div",12),T._uU(4),T.qZA()),2&je){const ye=T.oxw(2);T.xp6(1),T.Q6J("ngClass",T.xi3(2,3,ye.meter,ye.strengthClass))("ngStyle",T.VKq(6,Se,ye.meter?ye.meter.width:"")),T.xp6(3),T.Oqu(ye.infoText)}}function ot(je,pt){1&je&&T.GkF(0)}const at=function(je,pt){return{showTransitionParams:je,hideTransitionParams:pt}},ke=function(je){return{value:"visible",params:je}};function Ee(je,pt){if(1&je){const ye=T.EpF();T.TgZ(0,"div",6,7),T.NdJ("click",function(yt){T.CHM(ye);const Bt=T.oxw();return T.KtG(Bt.onOverlayClick(yt))})("@overlayAnimation.start",function(yt){T.CHM(ye);const Bt=T.oxw();return T.KtG(Bt.onAnimationStart(yt))})("@overlayAnimation.done",function(yt){T.CHM(ye);const Bt=T.oxw();return T.KtG(Bt.onAnimationEnd(yt))}),T.YNc(2,ue,1,0,"ng-container",8),T.YNc(3,Ce,2,1,"ng-container",9),T.YNc(4,He,5,8,"ng-template",null,10,T.W1O),T.YNc(6,ot,1,0,"ng-container",8),T.qZA()}if(2&je){const ye=T.MAs(5),Ie=T.oxw();T.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",T.VKq(9,ke,T.WLB(6,at,Ie.showTransitionOptions,Ie.hideTransitionOptions))),T.xp6(2),T.Q6J("ngTemplateOutlet",Ie.headerTemplate),T.xp6(1),T.Q6J("ngIf",Ie.contentTemplate)("ngIfElse",ye),T.xp6(3),T.Q6J("ngTemplateOutlet",Ie.footerTemplate)}}let Le=(()=>{class je{transform(ye,Ie,...yt){return Ie(ye,...yt)}}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275pipe=T.Yjl({name:"mapper",type:je,pure:!0}),je})();const q={provide:ce.JU,useExisting:(0,T.Gpc)(()=>le),multi:!0};let le=(()=>{class je{constructor(ye,Ie,yt,Bt){this.cd=ye,this.config=Ie,this.el=yt,this.overlayService=Bt,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.showClear=!1,this.onFocus=new T.vpe,this.onBlur=new T.vpe,this.onClear=new T.vpe,this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(ye=>{switch(ye.getType()){case"content":default:this.contentTemplate=ye.template;break;case"header":this.headerTemplate=ye.template;break;case"footer":this.footerTemplate=ye.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(ye){switch(ye.toState){case"visible":this.overlay=ye.element,f.P9.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(ye){"void"===ye.toState&&f.P9.clear(ye.element)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=A.p.getOuterWidth(this.input.nativeElement)+"px",A.p.absolutePosition(this.overlay,this.input.nativeElement)):A.p.relativePosition(this.overlay,this.input.nativeElement)}onInput(ye){this.value=ye.target.value,this.onModelChange(this.value),this.onModelTouched()}onInputFocus(ye){this.focused=!0,this.feedback&&(this.overlayVisible=!0),this.onFocus.emit(ye)}onInputBlur(ye){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.onBlur.emit(ye)}onKeyDown(ye){"Escape"===ye.key&&(this.overlayVisible=!1)}onKeyUp(ye){this.feedback&&(this.updateUI(ye.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(ye){let Ie=null,yt=null;switch(this.testStrength(ye)){case 1:Ie=this.weakText(),yt={strength:"weak",width:"33.33%"};break;case 2:Ie=this.mediumText(),yt={strength:"medium",width:"66.66%"};break;case 3:Ie=this.strongText(),yt={strength:"strong",width:"100%"};break;default:Ie=this.promptText(),yt=null}this.meter=yt,this.infoText=Ie}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(ye){this.overlayService.add({originalEvent:ye,target:this.el.nativeElement})}testStrength(ye){let Ie=0;return this.strongCheckRegExp.test(ye)?Ie=3:this.mediumCheckRegExp.test(ye)?Ie=2:ye.length&&(Ie=1),Ie}writeValue(ye){this.value=void 0===ye?null:ye,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(ye){this.onModelChange=ye}registerOnTouched(ye){this.onModelTouched=ye}setDisabledState(ye){this.disabled=ye,this.cd.markForCheck()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new A.V(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!A.p.isTouchDevice()&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(ye){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":ye}}inputFieldClass(ye){return{"p-password-input":!0,"p-disabled":ye}}toggleIconClass(ye){return ye?"pi pi-eye-slash":"pi pi-eye"}strengthClass(ye){return`p-password-strength ${ye?ye.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(m.ws.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(m.ws.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(m.ws.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(m.ws.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(ye){return ye?"text":"password"}getTranslation(ye){return this.config.getTranslation(ye)}clear(){this.value=null,this.onModelChange(this.value),this.writeValue(this.value),this.onClear.emit()}ngOnDestroy(){this.overlay&&(f.P9.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return je.\u0275fac=function(ye){return new(ye||je)(T.Y36(T.sBO),T.Y36(m.b4),T.Y36(T.SBq),T.Y36(m.F0))},je.\u0275cmp=T.Xpm({type:je,selectors:[["p-password"]],contentQueries:function(ye,Ie,yt){if(1&ye&&T.Suo(yt,m.jx,4),2&ye){let Bt;T.iGM(Bt=T.CRH())&&(Ie.templates=Bt)}},viewQuery:function(ye,Ie){if(1&ye&&T.Gf(O,5),2&ye){let yt;T.iGM(yt=T.CRH())&&(Ie.input=yt.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:8,hostBindings:function(ye,Ie){2&ye&&T.ekj("p-inputwrapper-filled",Ie.filled())("p-inputwrapper-focus",Ie.focused)("p-password-clearable",Ie.showClear)("p-password-mask",Ie.toggleMask)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",label:"label",disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder",showClear:"showClear"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClear:"onClear"},features:[T._Bn([q])],decls:9,vars:27,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup","keydown"],["input",""],["class","p-password-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],[1,"p-password-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(ye,Ie){1&ye&&(T.TgZ(0,"div",0),T.ALo(1,"mapper"),T.TgZ(2,"input",1,2),T.NdJ("input",function(Bt){return Ie.onInput(Bt)})("focus",function(Bt){return Ie.onInputFocus(Bt)})("blur",function(Bt){return Ie.onInputBlur(Bt)})("keyup",function(Bt){return Ie.onKeyUp(Bt)})("keydown",function(Bt){return Ie.onKeyDown(Bt)}),T.ALo(4,"mapper"),T.ALo(5,"mapper"),T.qZA(),T.YNc(6,j,1,0,"i",3),T.YNc(7,Z,2,4,"i",4),T.YNc(8,Ee,7,11,"div",4),T.qZA()),2&ye&&(T.Tol(Ie.styleClass),T.Q6J("ngClass",T.xi3(1,18,Ie.toggleMask,Ie.containerClass))("ngStyle",Ie.style),T.xp6(2),T.Tol(Ie.inputStyleClass),T.Q6J("ngClass",T.xi3(4,21,Ie.disabled,Ie.inputFieldClass))("ngStyle",Ie.inputStyle)("value",Ie.value),T.uIk("label",Ie.label)("aria-label",Ie.ariaLabel)("aria-labelledBy",Ie.ariaLabelledBy)("id",Ie.inputId)("type",T.xi3(5,24,Ie.unmasked,Ie.inputType))("placeholder",Ie.placeholder),T.xp6(4),T.Q6J("ngIf",Ie.showClear&&null!=Ie.value),T.xp6(1),T.Q6J("ngIf",Ie.toggleMask),T.xp6(1),T.Q6J("ngIf",Ie.overlayVisible))},dependencies:[d.mk,d.O5,d.tP,d.PC,S.o,Le],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0%;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}.p-password-input::-ms-reveal,.p-password-input::-ms-clear{display:none}.p-password-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-password-clearable{position:relative}\n"],encapsulation:2,data:{animation:[(0,x.X$)("overlayAnimation",[(0,x.eR)(":enter",[(0,x.oB)({opacity:0,transform:"scaleY(0.8)"}),(0,x.jt)("{{showTransitionParams}}")]),(0,x.eR)(":leave",[(0,x.jt)("{{hideTransitionParams}}",(0,x.oB)({opacity:0}))])])]},changeDetection:0}),je})(),ae=(()=>{class je{}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275mod=T.oAB({type:je}),je.\u0275inj=T.cJS({imports:[d.ez,S.j,m.m8]}),je})();function he(je,pt){1&je&&(T.TgZ(0,"small",18),T._uU(1,"Username is required."),T.qZA())}function Fe(je,pt){if(1&je&&(T.TgZ(0,"div",16),T.YNc(1,he,2,0,"small",17),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("username"))||null==Ie.errors?null:Ie.errors.required)}}function de(je,pt){1&je&&(T.TgZ(0,"small",18),T._uU(1,"Password is required."),T.qZA())}function ee(je,pt){if(1&je&&(T.TgZ(0,"div",16),T.YNc(1,de,2,0,"small",17),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("password"))||null==Ie.errors?null:Ie.errors.required)}}const De=function(){return["/auth/register"]};class Me{constructor(pt,ye,Ie,yt,Bt){this.fb=pt,this.authService=ye,this.route=Ie,this.router=yt,this.messageService=Bt,this.loading=!1}ngOnInit(){this.initForm()}initForm(){this.form=this.fb.group({username:["",ce.kI.required],password:["",ce.kI.required]})}onSubmit(pt){!pt.invalid&&pt.valid&&(this.loading=!0,this.authService.login(pt.value.username,pt.value.password).pipe((0,Ue.P)()).subscribe({next:yt=>{yt&&setTimeout(()=>{this.loading=!1,this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/")},100)},error:yt=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Authentication Failed",detail:yt})}}))}get getUsernameValue(){return this.form.get("username")?.invalid&&(this.form.get("username")?.dirty||this.form.get("username")?.touched)}get getPasswordValue(){return this.form.get("password")?.invalid&&(this.form.get("password")?.dirty||this.form.get("password")?.touched)}}function $e(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"First Name is required."),T.qZA())}function rt(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,$e,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("firstName"))||null==Ie.errors?null:Ie.errors.required)}}function Ke(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Last Name is required."),T.qZA())}function Ct(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,Ke,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("lastName"))||null==Ie.errors?null:Ie.errors.required)}}function qe(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Username is required."),T.qZA())}function Ne(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,qe,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("username"))||null==Ie.errors?null:Ie.errors.required)}}function tt(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Email is required."),T.qZA())}function Ve(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Please enter a valid email."),T.qZA())}function Xe(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,tt,2,0,"small",21),T.YNc(2,Ve,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie,yt;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("email"))||null==Ie.errors?null:Ie.errors.required),T.xp6(1),T.Q6J("ngIf",null==(yt=ye.form.get("email"))||null==yt.errors?null:yt.errors.email)}}function lt(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Password is required."),T.qZA())}function vt(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,lt,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("password"))||null==Ie.errors?null:Ie.errors.required)}}function Mt(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Confirm Password is required."),T.qZA())}function xt(je,pt){1&je&&(T.TgZ(0,"small",22),T._uU(1,"Password and Confirm Password must match."),T.qZA())}function nt(je,pt){if(1&je&&(T.TgZ(0,"div"),T.YNc(1,Mt,2,0,"small",21),T.YNc(2,xt,2,0,"small",21),T.qZA()),2&je){const ye=T.oxw();let Ie,yt;T.xp6(1),T.Q6J("ngIf",null==(Ie=ye.form.get("confirmPassword"))||null==Ie.errors?null:Ie.errors.required),T.xp6(1),T.Q6J("ngIf",null==(yt=ye.form.get("confirmPassword"))||null==yt.errors?null:yt.errors.confirmedValidator)}}Me.\u0275fac=function(pt){return new(pt||Me)(T.Y36(ce.qu),T.Y36(fe.$),T.Y36(v.gz),T.Y36(v.F0),T.Y36(m.ez))},Me.\u0275cmp=T.Xpm({type:Me,selectors:[["app-login"]],decls:26,vars:9,consts:[[1,"text-center","mb-2"],["src","assets/layout/images/logo-dark.svg","alt","Sakai logo",1,"mb-2","w-6rem","flex-shrink-0"],[1,"text-900","text-3xl","font-medium","mb-2"],[3,"formGroup","ngSubmit"],["for","username",1,"block","text-900","text-xl","font-medium","mb-2"],["id","username","formControlName","username","type","text","placeholder","Username","pInputText","",1,"w-full","md:w-30rem","mb-2",2,"padding","1rem"],["class","mb-4",4,"ngIf"],["for","password",1,"block","text-900","font-medium","text-xl","mb-2"],["id","password","formControlName","password","placeholder","Password","styleClass","mb-2","inputStyleClass","w-full p-3 md:w-30rem",3,"feedback"],[1,"flex","align-items-center","justify-content-between","mb-4","mt-2","gap-5"],[1,"flex","align-items-center"],["id","rememberme1","styleClass","mr-2",3,"binary"],["for","rememberme1"],[1,"font-medium","no-underline","ml-2","text-right","cursor-pointer",2,"color","var(--primary-color)"],["pButton","","pRipple","","label","Sign In",1,"mb-2","w-full","p-3","text-xl",3,"loading","disabled"],[1,"font-medium","no-underline","cursor-pointer",2,"color","var(--primary-color)",3,"routerLink"],[1,"mb-4"],["class","p-error",4,"ngIf"],[1,"p-error"]],template:function(pt,ye){1&pt&&(T.TgZ(0,"div",0),T._UZ(1,"img",1),T.TgZ(2,"div",2),T._uU(3,"Sign In"),T.qZA()(),T.TgZ(4,"form",3),T.NdJ("ngSubmit",function(){return ye.onSubmit(ye.form)}),T.TgZ(5,"div")(6,"label",4),T._uU(7,"Username"),T.qZA(),T._UZ(8,"input",5),T.YNc(9,Fe,2,1,"div",6),T.TgZ(10,"label",7),T._uU(11,"Password"),T.qZA(),T._UZ(12,"p-password",8),T.YNc(13,ee,2,1,"div",6),T.TgZ(14,"div",9)(15,"div",10),T._UZ(16,"p-checkbox",11),T.TgZ(17,"label",12),T._uU(18,"Remember me"),T.qZA()(),T.TgZ(19,"a",13),T._uU(20,"Forgot password?"),T.qZA()(),T._UZ(21,"button",14),T.TgZ(22,"div"),T._uU(23," Don't have account? "),T.TgZ(24,"a",15),T._uU(25,"Register here"),T.qZA()()()()),2&pt&&(T.xp6(4),T.Q6J("formGroup",ye.form),T.xp6(5),T.Q6J("ngIf",ye.getUsernameValue),T.xp6(3),T.Q6J("feedback",!1),T.xp6(1),T.Q6J("ngIf",ye.getPasswordValue),T.xp6(3),T.Q6J("binary",!0),T.xp6(5),T.Q6J("loading",ye.loading)("disabled",ye.form.invalid),T.xp6(3),T.Q6J("routerLink",T.DdM(8,De)))},dependencies:[d.O5,v.rH,o.Hq,l,S.o,ce._Y,ce.Fj,ce.JJ,ce.JL,le,ce.sg,ce.u],styles:["[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}"]});const It=function(){return["/auth/login"]};class Lt{constructor(pt,ye,Ie,yt){this.fb=pt,this.authService=ye,this.messageService=Ie,this.router=yt,this.loading=!1}ngOnInit(){this.initForm()}initForm(){this.form=this.fb.group({firstName:["",ce.kI.required],lastName:["",ce.kI.required],username:["",ce.kI.required],email:["",[ce.kI.required,ce.kI.email]],password:["",ce.kI.required],confirmPassword:["",ce.kI.required]},{validator:("password","confirmPassword",ye=>{const yt=ye.controls.confirmPassword;yt.errors&&!yt.errors.confirmedValidator||yt.setErrors(ye.controls.password.value!==yt.value?{confirmedValidator:!0}:null)})})}onSubmit(pt){pt.valid&&this.authService.register({firstName:pt.value.firstName,lastName:pt.value.lastName,username:pt.value.username,email:pt.value.email,password:pt.value.password}).subscribe({next:Ie=>{Ie&&(this.loading=!1,this.messageService.add({severity:"success",summary:"Registration Success",detail:`${Ie.message}, You will be redirected to login.`}),setTimeout(()=>{this.router.navigateByUrl("login")},3e3))},error:Ie=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Registration Failed",detail:Ie})}})}get getFirstNameValue(){return this.form.get("firstName")?.invalid&&(this.form.get("firstName")?.dirty||this.form.get("firstName")?.touched)}get getLastNameValue(){return this.form.get("lastName")?.invalid&&(this.form.get("lastName")?.dirty||this.form.get("lastName")?.touched)}get getEmailValue(){return this.form.get("email")?.invalid&&(this.form.get("email")?.dirty||this.form.get("email")?.touched)}get getPasswordValue(){return this.form.get("password")?.invalid&&(this.form.get("password")?.dirty||this.form.get("password")?.touched)}get getUserNameValue(){return this.form.get("username")?.invalid&&(this.form.get("username")?.dirty||this.form.get("username")?.touched)}get getConfirmPasswordValue(){return this.form.get("confirmPassword")?.invalid&&(this.form.get("confirmPassword")?.dirty||this.form.get("confirmPassword")?.touched)}}Lt.\u0275fac=function(pt){return new(pt||Lt)(T.Y36(ce.qu),T.Y36(fe.$),T.Y36(m.ez),T.Y36(v.F0))},Lt.\u0275cmp=T.Xpm({type:Lt,selectors:[["app-register"]],decls:43,vars:11,consts:[[1,"text-center","mb-2"],["src","assets/layout/images/logo-dark.svg","alt","Sakai logo",1,"mb-2","w-6rem","flex-shrink-0"],[1,"text-900","text-3xl","font-medium","mb-4"],[3,"formGroup","ngSubmit"],[1,"p-formgrid","grid"],[1,"field","col"],["for","firstName",1,"block","text-900","text-xl","font-medium"],["id","firstName","formControlName","firstName","type","text","placeholder","First Name","pInputText","",1,"w-full","md:w-20rem",2,"padding","1rem"],[4,"ngIf"],["for","lastName",1,"block","text-900","text-xl","font-medium"],["id","lastName","formControlName","lastName","type","text","placeholder","Last Name","pInputText","",1,"w-full","md:w-20rem",2,"padding","1rem"],["for","username",1,"block","text-900","text-xl","font-medium"],["id","username","formControlName","username","type","text","placeholder","Username","pInputText","",1,"w-full","md:w-20rem",2,"padding","1rem"],["for","email",1,"block","text-900","text-xl","font-medium"],["id","email","formControlName","email","type","text","placeholder","Email address","pInputText","",1,"w-full","md:w-20rem",2,"padding","1rem"],["for","password",1,"block","text-900","font-medium","text-xl"],["id","password","formControlName","password","placeholder","Password","inputStyleClass","w-full p-3 md:w-20rem"],["for","confirmPassword",1,"block","text-900","text-xl","font-medium"],["id","confirmPassword","formControlName","confirmPassword","type","text","placeholder","Confirm Password","pInputText","",1,"w-full","md:w-20rem",2,"padding","1rem"],["pButton","","pRipple","","label","Register",1,"mb-2","w-full","p-3","text-xl",3,"loading","disabled"],[1,"font-medium","no-underline","cursor-pointer",2,"color","var(--primary-color)",3,"routerLink"],["class","p-error",4,"ngIf"],[1,"p-error"]],template:function(pt,ye){1&pt&&(T.TgZ(0,"div",0),T._UZ(1,"img",1),T.TgZ(2,"div",2),T._uU(3,"Create an Account"),T.qZA()(),T.TgZ(4,"form",3),T.NdJ("ngSubmit",function(){return ye.onSubmit(ye.form)}),T.TgZ(5,"div")(6,"div",4)(7,"div",5)(8,"label",6),T._uU(9,"First Name"),T.qZA(),T._UZ(10,"input",7),T.YNc(11,rt,2,1,"div",8),T.qZA(),T.TgZ(12,"div",5)(13,"label",9),T._uU(14,"Last Name"),T.qZA(),T._UZ(15,"input",10),T.YNc(16,Ct,2,1,"div",8),T.qZA(),T.TgZ(17,"div",5)(18,"label",11),T._uU(19,"UserName"),T.qZA(),T._UZ(20,"input",12),T.YNc(21,Ne,2,1,"div",8),T.qZA()(),T.TgZ(22,"div",4)(23,"div",5)(24,"label",13),T._uU(25,"Email"),T.qZA(),T._UZ(26,"input",14),T.YNc(27,Xe,3,2,"div",8),T.qZA(),T.TgZ(28,"div",5)(29,"label",15),T._uU(30,"Password"),T.qZA(),T._UZ(31,"p-password",16),T.YNc(32,vt,2,1,"div",8),T.qZA(),T.TgZ(33,"div",5)(34,"label",17),T._uU(35,"Confirm Password"),T.qZA(),T._UZ(36,"input",18),T.YNc(37,nt,3,2,"div",8),T.qZA()(),T._UZ(38,"button",19),T.TgZ(39,"div"),T._uU(40," Already have an account? "),T.TgZ(41,"a",20),T._uU(42,"Login here"),T.qZA()()()()),2&pt&&(T.xp6(4),T.Q6J("formGroup",ye.form),T.xp6(7),T.Q6J("ngIf",ye.getFirstNameValue),T.xp6(5),T.Q6J("ngIf",ye.getLastNameValue),T.xp6(5),T.Q6J("ngIf",ye.getUserNameValue),T.xp6(6),T.Q6J("ngIf",ye.getEmailValue),T.xp6(5),T.Q6J("ngIf",ye.getPasswordValue),T.xp6(5),T.Q6J("ngIf",ye.getConfirmPasswordValue),T.xp6(1),T.Q6J("loading",ye.loading)("disabled",ye.form.invalid),T.xp6(3),T.Q6J("routerLink",T.DdM(10,It)))},dependencies:[d.O5,v.rH,o.Hq,S.o,ce._Y,ce.Fj,ce.JJ,ce.JL,le,ce.sg,ce.u]});class Gt{constructor(){}}Gt.\u0275fac=function(pt){return new(pt||Gt)},Gt.\u0275cmp=T.Xpm({type:Gt,selectors:[["app-auth-layout"]],decls:5,vars:0,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"w-full","surface-card","py-6","px-5","sm:px-8",2,"border-radius","53px"]],template:function(pt,ye){1&pt&&(T.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),T._UZ(4,"router-outlet"),T.qZA()()()())},dependencies:[v.lC]});const zt=[{path:"",component:Gt,children:[{path:"login",component:Me},{path:"register",component:Lt},{path:"**",redirectTo:"/notfound"}]}];class mt{}mt.\u0275fac=function(pt){return new(pt||mt)},mt.\u0275mod=T.oAB({type:mt}),mt.\u0275inj=T.cJS({imports:[v.Bz.forChild(zt),v.Bz]});class Qe{}Qe.\u0275fac=function(pt){return new(pt||Qe)},Qe.\u0275mod=T.oAB({type:Qe}),Qe.\u0275inj=T.cJS({imports:[d.ez,mt,o.hJ,y,S.j,ce.u5,ae,ce.UX]})},7911:(Ft,Be,K)=>{"use strict";K.d(Be,{$:()=>m});var d=K(1135),v=K(4004),ce=K(2340),Ue=K(8256),T=K(1002),fe=K(529);class m{constructor(f,h){this.router=f,this.http=h,this.userSubject=new d.X(JSON.parse(localStorage.getItem("user"))),this.user=this.userSubject.asObservable()}get userValue(){return this.userSubject.value}login(f,h){return this.http.post(`${ce.N.API_URL}auth/signin`,{username:f,password:h}).pipe((0,v.U)(r=>(localStorage.setItem("user",JSON.stringify(r)),this.userSubject.next(r),r)))}logout(){localStorage.removeItem("user"),this.userSubject.next(null),this.router.navigate(["/auth/login"])}register(f){return this.http.post(`${ce.N.API_URL}auth/signup`,f)}getAll(){return this.http.get(`${ce.N.API_URL}users`)}getById(f){return this.http.get(`${ce.N.API_URL}users/${f}`)}}m.\u0275fac=function(f){return new(f||m)(Ue.LFG(T.F0),Ue.LFG(fe.eN))},m.\u0275prov=Ue.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})},6963:(Ft,Be,K)=>{"use strict";K.d(Be,{n:()=>f});var d=K(6895),v=K(529),ce=K(2843),Ue=K(262),T=K(8256),fe=K(7911);class m{constructor(r){this.authService=r}intercept(r,a){return a.handle(r).pipe((0,Ue.K)(s=>{[401,403].includes(s.status)&&this.authService.userValue&&this.authService.logout();const u=s.error?.message||s.statusText;return console.error(s),(0,ce._)(()=>u)}))}}m.\u0275fac=function(r){return new(r||m)(T.LFG(fe.$))},m.\u0275prov=T.Yz7({token:m,factory:m.\u0275fac});var o=K(5593);class f{}f.\u0275fac=function(r){return new(r||f)},f.\u0275mod=T.oAB({type:f}),f.\u0275inj=T.cJS({providers:[{provide:v.TP,useClass:m,multi:!0}],imports:[d.ez,o.hJ]})},50:(Ft,Be,K)=>{"use strict";K.r(Be),K.d(Be,{DashboardModule:()=>x});var d=K(6895),v=K(1002),ce=K(8256),Ue=K(1135),T=K(360),fe=K(2340),m=K(529);class o{constructor(O){this.http=O,this.message$=new Ue.X(""),this.socket=(0,T.io)("http://localhost:8080"),this.getNewMessage=()=>(this.socket.on("message",j=>{this.message$.next(j)}),this.message$.asObservable())}getAll(){return this.http.get(`${fe.N.API_URL}games`)}sendMessage(O){console.log("sendMessage: ",O),this.socket.emit("message",O)}}o.\u0275fac=function(O){return new(O||o)(ce.LFG(m.eN))},o.\u0275prov=ce.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"});var f=K(5593);function r(A,O){if(1&A){const j=ce.EpF();ce.TgZ(0,"div")(1,"div",1)(2,"div",2),ce._UZ(3,"img",3)(4,"div",4)(5,"div",5)(6,"hr",6),ce.TgZ(7,"button",7),ce.NdJ("click",function(){ce.CHM(j);const ue=ce.oxw();return ce.KtG(ue.onClick(ue.item))}),ce.qZA()()()()}if(2&A){const j=ce.oxw();ce.xp6(3),ce.Q6J("src",j.imagePath+j.item.image,ce.LSH)("alt",null==j.item?null:j.item.name),ce.xp6(1),ce.Q6J("innerHTML",j.item.name,ce.oJD),ce.xp6(1),ce.Q6J("innerHTML",j.item.description,ce.oJD),ce.xp6(2),ce.Q6J("disabled",!j.item.active)("label",j.buttonLabel)}}class a{constructor(O){this.router=O,this.imagePath="assets/images/",this.buttonLabel="Play"}ngOnInit(){this.buttonLabel=this.item.active?"Play":"Coming soon"}onClick(O){const j=this.getGameLink(O.name);this.router.navigate([j])}getGameLink(O){switch(O){case"Ludo King":return"ludo";case"Snakes and Ladders":return"snakes-and-ladders";default:return""}}}function s(A,O){if(1&A&&(ce.ynx(0),ce._UZ(1,"div",7),ce.BQk()),2&A){const j=O.$implicit,Z=O.index;ce.xp6(1),ce.Q6J("item",j)("index",Z)}}a.\u0275fac=function(O){return new(O||a)(ce.Y36(v.F0))},a.\u0275cmp=ce.Xpm({type:a,selectors:[["","app-game-card",""]],inputs:{item:"item",index:"index"},attrs:["app-game-card",""],decls:2,vars:1,consts:[[4,"ngIf"],[1,"p-3","h-full"],[1,"shadow-2","align-items-center","p-3","h-full","flex","flex-column","surface-card",2,"border-radius","6px"],["height","200",1,"mb-2","w-10","flex-shrink-0",3,"src","alt"],[1,"text-900","font-medium","text-xl","mb-2","clamp","clamp-1",3,"innerHTML"],[1,"text-600","text-center","clamp","clamp-2",3,"innerHTML"],[1,"my-3","mx-0","border-top-1","border-none","surface-border"],["pButton","","pRipple","",1,"p-3","w-full","mt-auto",3,"disabled","label","click"]],template:function(O,j){1&O&&(ce.ynx(0),ce.YNc(1,r,8,6,"div",0),ce.BQk()),2&O&&(ce.xp6(1),ce.Q6J("ngIf",j.item))},dependencies:[d.O5,f.Hq],styles:[".surface-card[_ngcontent-%COMP%]   .game-image[_ngcontent-%COMP%]{object-fit:scale-down}"]});class u{constructor(O){this.gameService=O,this.games=[]}ngOnInit(){this.getAllGames()}getAllGames(){this.gameService.getAll().subscribe({next:O=>{O&&(this.games=O)},error:O=>{console.log(O)}})}}u.\u0275fac=function(O){return new(O||u)(ce.Y36(o))},u.\u0275cmp=ce.Xpm({type:u,selectors:[["app-game-list"]],decls:10,vars:1,consts:[[1,"block-section"],[1,"block-header"],[1,"block-title"],[1,"block-content"],[1,"surface-ground","px-1","py-2","md:px-2","lg:px-2"],[1,"grid"],[4,"ngFor","ngForOf"],["app-game-card","",1,"col-12","lg:col-4","md:col-6",3,"item","index"]],template:function(O,j){1&O&&(ce.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span"),ce._uU(4,"Games"),ce.qZA()()(),ce.TgZ(5,"div",3)(6,"div")(7,"div",4)(8,"div",5),ce.YNc(9,s,2,2,"ng-container",6),ce.qZA()()()()()),2&O&&(ce.xp6(9),ce.Q6J("ngForOf",j.games))},dependencies:[d.sg,a]});class p{}p.\u0275fac=function(O){return new(O||p)},p.\u0275cmp=ce.Xpm({type:p,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(O,j){1&O&&ce._UZ(0,"app-game-list")},dependencies:[u]});const l=[{path:"",component:p}];class y{}y.\u0275fac=function(O){return new(O||y)},y.\u0275mod=ce.oAB({type:y}),y.\u0275inj=ce.cJS({imports:[v.Bz.forChild(l),v.Bz]});var S=K(6963);class x{}x.\u0275fac=function(O){return new(O||x)},x.\u0275mod=ce.oAB({type:x}),x.\u0275inj=ce.cJS({imports:[d.ez,y,S.n]})},2516:(Ft,Be,K)=>{"use strict";K.r(Be),K.d(Be,{LudoModule:()=>ei});var d=K(6895),v=K(8256),ce=K(982),Ue=K(1795),T=K(433);function fe(Re,se){if(1&Re&&v._UZ(0,"span",8),2&Re){const J=v.oxw(2).$implicit;v.Tol(J.icon),v.Q6J("ngClass","p-button-icon p-button-icon-left")}}function m(Re,se){if(1&Re&&(v.ynx(0),v.YNc(1,fe,1,3,"span",6),v.TgZ(2,"span",7),v._uU(3),v.qZA(),v.BQk()),2&Re){const J=v.oxw().$implicit,be=v.oxw();v.xp6(1),v.Q6J("ngIf",J.icon),v.xp6(2),v.Oqu(be.getOptionLabel(J))}}function o(Re,se){1&Re&&v.GkF(0)}const f=function(Re,se){return{$implicit:Re,index:se}};function h(Re,se){if(1&Re&&v.YNc(0,o,1,0,"ng-container",9),2&Re){const J=v.oxw(),be=J.$implicit,Je=J.index,bt=v.oxw();v.Q6J("ngTemplateOutlet",bt.itemTemplate)("ngTemplateOutletContext",v.WLB(2,f,be,Je))}}const r=function(Re,se,J){return{"p-highlight":Re,"p-disabled":se,"p-button-icon-only":J}};function a(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",2,3),v.NdJ("click",function(Je){const bt=v.CHM(J),nn=bt.$implicit,$t=bt.index,Et=v.oxw();return v.KtG(Et.onItemClick(Je,nn,$t))})("keydown.enter",function(Je){const bt=v.CHM(J),nn=bt.$implicit,$t=bt.index,Et=v.oxw();return v.KtG(Et.onItemClick(Je,nn,$t))})("blur",function(){v.CHM(J);const Je=v.oxw();return v.KtG(Je.onBlur())}),v.YNc(2,m,4,2,"ng-container",4),v.YNc(3,h,1,5,"ng-template",null,5,v.W1O),v.qZA()}if(2&Re){const J=se.$implicit,be=v.MAs(4),Je=v.oxw();v.Tol(J.styleClass),v.Q6J("ngClass",v.kEZ(10,r,Je.isSelected(J),Je.disabled||Je.isOptionDisabled(J),J.icon&&!Je.getOptionLabel(J))),v.uIk("aria-pressed",Je.isSelected(J))("title",J.title)("aria-label",J.label)("tabindex",Je.disabled?null:Je.tabindex)("aria-labelledby",Je.getOptionLabel(J)),v.xp6(2),v.Q6J("ngIf",!Je.itemTemplate)("ngIfElse",be)}}const s={provide:T.JU,useExisting:(0,v.Gpc)(()=>u),multi:!0};let u=(()=>{class Re{constructor(J){this.cd=J,this.tabindex=0,this.onOptionClick=new v.vpe,this.onChange=new v.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(J){return this.optionLabel?ce.gb.resolveFieldData(J,this.optionLabel):null!=J.label?J.label:J}getOptionValue(J){return this.optionValue?ce.gb.resolveFieldData(J,this.optionValue):this.optionLabel||void 0===J.value?J:J.value}isOptionDisabled(J){return this.optionDisabled?ce.gb.resolveFieldData(J,this.optionDisabled):void 0!==J.disabled&&J.disabled}writeValue(J){this.value=J,this.cd.markForCheck()}registerOnChange(J){this.onModelChange=J}registerOnTouched(J){this.onModelTouched=J}setDisabledState(J){this.disabled=J,this.cd.markForCheck()}onItemClick(J,be,Je){if(!this.disabled&&!this.isOptionDisabled(be)){if(this.multiple)this.isSelected(be)?this.removeOption(be):this.value=[...this.value||[],this.getOptionValue(be)],this.onModelChange(this.value),this.onChange.emit({originalEvent:J,value:this.value});else{let bt=this.getOptionValue(be);this.value!==bt&&(this.value=this.getOptionValue(be),this.onModelChange(this.value),this.onChange.emit({originalEvent:J,value:this.value}))}this.onOptionClick.emit({originalEvent:J,option:be,index:Je})}}onBlur(){this.onModelTouched()}removeOption(J){this.value=this.value.filter(be=>!ce.gb.equals(be,this.getOptionValue(J),this.dataKey))}isSelected(J){let be=!1,Je=this.getOptionValue(J);if(this.multiple){if(this.value&&this.value instanceof Array)for(let bt of this.value)if(ce.gb.equals(bt,Je,this.dataKey)){be=!0;break}}else be=ce.gb.equals(this.getOptionValue(J),this.value,this.dataKey);return be}}return Re.\u0275fac=function(J){return new(J||Re)(v.Y36(v.sBO))},Re.\u0275cmp=v.Xpm({type:Re,selectors:[["p-selectButton"]],contentQueries:function(J,be,Je){if(1&J&&v.Suo(Je,v.Rgc,5),2&J){let bt;v.iGM(bt=v.CRH())&&(be.itemTemplate=bt.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[v._Bn([s])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(J,be){1&J&&(v.TgZ(0,"div",0),v.YNc(1,a,5,14,"div",1),v.qZA()),2&J&&(v.Tol(be.styleClass),v.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",be.style),v.xp6(1),v.Q6J("ngForOf",be.options))},dependencies:[d.mk,d.sg,d.O5,d.tP,d.PC,Ue.H],styles:['.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n'],encapsulation:2,changeDetection:0}),Re})(),p=(()=>{class Re{}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=v.oAB({type:Re}),Re.\u0275inj=v.cJS({imports:[d.ez,Ue.T]}),Re})();var l=K(1002),y=K(1135),S=K(360);class x{constructor(){this.socket=(0,S.io)("http://localhost:8080/ludo",{autoConnect:!1,transports:["websocket"]}),this.ludoConnectStrem$=new y.X(""),this.gameState$=new y.X("")}connect(){const se=localStorage.getItem("user"),J=se?JSON.parse(se).accessToken:"";this.socket.auth={token:J},this.socket.connect(),this.handleErrors()}disconnect(){this.socket.disconnect()}handleErrors(){this.socket.on("connect_error",se=>{console.log(se)}),this.socket.on("error",se=>{console.log(se)})}ludoConnect(se){this.socket.emit("ludo-connect",se)}getLudoConnect(){return this.socket.on("ludo-connect",se=>{se&&this.ludoConnectStrem$.next(se)}),this.ludoConnectStrem$.asObservable()}emitGameState(se){this.socket.emit("game-state",se)}getGameState(){return this.socket.on("game-state",se=>{se&&this.gameState$.next(se)}),this.gameState$.asObservable()}ludoTurn(se){this.socket.emit("ludo-turn",se)}emitDiceValue(se){this.socket.emit("ludo-dice-value",se)}movePawn(se){this.socket.emit("move-pawn",se)}playerWon(se){this.socket.emit("player-won",se)}updatePawn(se){this.socket.emit("update-pawn",se)}updateScore(se){this.socket.emit("update-score",se)}gameOver(se){this.socket.emit("game-over",se)}startGame(){this.socket.emit("start-game")}}x.\u0275fac=function(se){return new(se||x)},x.\u0275prov=v.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var A=K(7340),O=K(9592),j=K(7579),Z=K(805);const ue=["mask"],pe=["content"],Ce=["titlebar"];function Se(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",11),v.NdJ("mousedown",function(Je){v.CHM(J);const bt=v.oxw(2);return v.KtG(bt.initResize(Je))}),v.qZA()}}const He=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function ot(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"button",18),v.NdJ("click",function(){v.CHM(J);const Je=v.oxw(3);return v.KtG(Je.maximize())})("keydown.enter",function(){v.CHM(J);const Je=v.oxw(3);return v.KtG(Je.maximize())}),v._UZ(1,"span",19),v.qZA()}if(2&Re){const J=v.oxw(3);v.Q6J("ngClass",v.DdM(2,He)),v.xp6(1),v.Q6J("ngClass",J.maximized?J.minimizeIcon:J.maximizeIcon)}}function at(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"button",20),v.NdJ("click",function(){v.CHM(J);const Je=v.oxw(3);return v.KtG(Je.hide())})("keydown.enter",function(){v.CHM(J);const Je=v.oxw(3);return v.KtG(Je.hide())}),v._UZ(1,"span",21),v.qZA()}2&Re&&v.Q6J("ngClass","p-dialog-header-icon p-dialog-header-maximize p-link")}function ke(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",12,13),v.NdJ("mousedown",function(Je){v.CHM(J);const bt=v.oxw(2);return v.KtG(bt.initDrag(Je))}),v.TgZ(2,"span",14),v._uU(3),v.qZA(),v.TgZ(4,"div",15),v.YNc(5,ot,2,3,"button",16),v.YNc(6,at,2,1,"button",17),v.qZA()()}if(2&Re){const J=v.oxw(2);v.xp6(3),v.Oqu(J.config.header),v.xp6(2),v.Q6J("ngIf",J.config.maximizable),v.xp6(1),v.Q6J("ngIf",!1!==J.config.closable)}}function Ee(Re,se){}function xe(Re,se){if(1&Re&&(v.TgZ(0,"div",22),v._uU(1),v.qZA()),2&Re){const J=v.oxw(2);v.xp6(1),v.hij(" ",J.config.footer," ")}}const Le=function(Re,se,J,be){return{"p-dialog p-dynamic-dialog p-component":!0,"p-dialog-rtl":Re,"p-dialog-resizable":se,"p-dialog-draggable":J,"p-dialog-maximized":be}},q=function(Re,se){return{transform:Re,transition:se}},le=function(Re){return{value:"visible",params:Re}};function ae(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",3,4),v.NdJ("@animation.start",function(Je){v.CHM(J);const bt=v.oxw();return v.KtG(bt.onAnimationStart(Je))})("@animation.done",function(Je){v.CHM(J);const bt=v.oxw();return v.KtG(bt.onAnimationEnd(Je))}),v.YNc(2,Se,1,0,"div",5),v.YNc(3,ke,7,3,"div",6),v.TgZ(4,"div",7,8),v.YNc(6,Ee,0,0,"ng-template",9),v.qZA(),v.YNc(7,xe,2,1,"div",10),v.qZA()}if(2&Re){const J=v.oxw();v.Tol(J.config.styleClass),v.Udp("width",J.config.width)("height",J.config.height),v.Q6J("ngClass",v.l5B(13,Le,J.config.rtl,J.config.resizable,J.config.draggable,J.maximized))("ngStyle",J.config.style)("@animation",v.VKq(21,le,v.WLB(18,q,J.transformOptions,J.config.transitionOptions||"150ms cubic-bezier(0, 0, 0.2, 1)"))),v.xp6(2),v.Q6J("ngIf",J.config.resizable),v.xp6(1),v.Q6J("ngIf",!1!==J.config.showHeader),v.xp6(1),v.Q6J("ngStyle",J.config.contentStyle),v.xp6(3),v.Q6J("ngIf",J.config.footer)}}const he=function(Re,se,J,be,Je,bt,nn,$t,Et){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter p-dialog-mask-scrollblocker":Re,"p-dialog-left":se,"p-dialog-right":J,"p-dialog-top":be,"p-dialog-bottom":Je,"p-dialog-top-left":bt,"p-dialog-top-right":nn,"p-dialog-bottom-left":$t,"p-dialog-bottom-right":Et}};let Fe=(()=>{class Re{constructor(J){this.viewContainerRef=J}}return Re.\u0275fac=function(J){return new(J||Re)(v.Y36(v.s_b))},Re.\u0275dir=v.lG2({type:Re,selectors:[["","pDynamicDialogContent",""]],hostAttrs:[1,"p-element"]}),Re})();class de{}class ee{constructor(){this._onClose=new j.x,this.onClose=this._onClose.asObservable(),this._onDestroy=new j.x,this.onDestroy=this._onDestroy.asObservable(),this._onDragStart=new j.x,this.onDragStart=this._onDragStart.asObservable(),this._onDragEnd=new j.x,this.onDragEnd=this._onDragEnd.asObservable(),this._onResizeInit=new j.x,this.onResizeInit=this._onResizeInit.asObservable(),this._onResizeEnd=new j.x,this.onResizeEnd=this._onResizeEnd.asObservable(),this._onMaximize=new j.x,this.onMaximize=this._onMaximize.asObservable()}close(se){this._onClose.next(se)}destroy(){this._onDestroy.next(null)}dragStart(se){this._onDragStart.next(se)}dragEnd(se){this._onDragEnd.next(se)}resizeInit(se){this._onResizeInit.next(se)}resizeEnd(se){this._onResizeEnd.next(se)}maximize(se){this._onMaximize.next(se)}}const De=(0,A.oQ)([(0,A.oB)({transform:"{{transform}}",opacity:0}),(0,A.jt)("{{transition}}",(0,A.oB)({transform:"none",opacity:1}))]),Me=(0,A.oQ)([(0,A.jt)("{{transition}}",(0,A.oB)({transform:"{{transform}}",opacity:0}))]);let We=(()=>{class Re{constructor(J,be,Je,bt,nn,$t,Et){this.componentFactoryResolver=J,this.cd=be,this.renderer=Je,this.config=bt,this.dialogRef=nn,this.zone=$t,this.primeNGConfig=Et,this.visible=!0,this._style={},this.transformOptions="scale(0.7)"}get minX(){return this.config.minX?this.config.minX:0}get minY(){return this.config.minY?this.config.minY:0}get keepInViewport(){return this.config.keepInViewport}get maximizable(){return this.config.maximizable}get maximizeIcon(){return this.config.maximizeIcon?this.config.maximizeIcon:"pi pi-window-maximize"}get minimizeIcon(){return this.config.minimizeIcon?this.config.minimizeIcon:"pi pi-window-minimize"}get style(){return this._style}get position(){return this.config.position}set style(J){J&&(this._style={...J},this.originalStyle=J)}get parent(){const J=Array.from(document.getElementsByClassName("p-dialog"));if(J.length>1)return J.pop()}ngAfterViewInit(){this.loadChildComponent(this.childComponentType),this.cd.detectChanges()}loadChildComponent(J){let be=this.componentFactoryResolver.resolveComponentFactory(J),Je=this.insertionPoint?.viewContainerRef;Je?.clear(),this.componentRef=Je?.createComponent(be)}moveOnTop(){!1!==this.config.autoZIndex&&(ce.P9.set("modal",this.container,(this.config.baseZIndex||0)+this.primeNGConfig.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}onAnimationStart(J){switch(J.toState){case"visible":this.container=J.element,this.wrapper=this.container.parentElement,this.moveOnTop(),this.parent&&this.unbindGlobalListeners(),this.bindGlobalListeners(),!1!==this.config.modal&&this.enableModality(),this.focus();break;case"void":this.wrapper&&!1!==this.config.modal&&O.p.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(J){"void"===J.toState&&(this.onContainerDestroy(),this.dialogRef.destroy())}onContainerDestroy(){this.unbindGlobalListeners(),this.container&&!1!==this.config.autoZIndex&&ce.P9.clear(this.container),!1!==this.config.modal&&this.disableModality(),this.container=null}close(){this.visible=!1,this.cd.markForCheck()}hide(){this.dialogRef&&this.dialogRef.close()}enableModality(){!1!==this.config.closable&&this.config.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",J=>{this.wrapper&&this.wrapper.isSameNode(J.target)&&this.hide()})),!1!==this.config.modal&&O.p.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.config.dismissableMask&&this.unbindMaskClickListener(),!1!==this.config.modal&&O.p.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}onKeydown(J){if(!this.parent&&9===J.which){J.preventDefault();let be=O.p.getFocusableElements(this.container);if(be&&be.length>0)if(be[0].ownerDocument.activeElement){let Je=be.indexOf(be[0].ownerDocument.activeElement);J.shiftKey?-1==Je||0===Je?be[be.length-1].focus():be[Je-1].focus():-1==Je||Je===be.length-1?be[0].focus():be[Je+1].focus()}else be[0].focus()}}focus(){let J=O.p.findSingle(this.container,"[autofocus]");J&&this.zone.runOutsideAngular(()=>{setTimeout(()=>J.focus(),5)})}maximize(){this.maximized=!this.maximized,this.maximized?O.p.addClass(document.body,"p-overflow-hidden"):O.p.removeClass(document.body,"p-overflow-hidden"),this.dialogRef.maximize({maximized:this.maximized})}initResize(J){this.config.resizable&&(this.resizing=!0,this.lastPageX=J.pageX,this.lastPageY=J.pageY,O.p.addClass(document.body,"p-unselectable-text"),this.dialogRef.resizeInit(J))}onResize(J){if(this.resizing){let be=J.pageX-this.lastPageX,Je=J.pageY-this.lastPageY,bt=O.p.getOuterWidth(this.container),nn=O.p.getOuterHeight(this.container),$t=O.p.getOuterHeight(this.contentViewChild.nativeElement),Et=bt+be,rn=nn+Je,pn=this.container.style.minWidth,Di=this.container.style.minHeight,Wn=this.container.getBoundingClientRect(),Kn=O.p.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(Et+=be,rn+=Je),(!pn||Et>parseInt(pn))&&Wn.left+Et<Kn.width&&(this._style.width=Et+"px",this.container.style.width=this._style.width),(!Di||rn>parseInt(Di))&&Wn.top+rn<Kn.height&&(this.contentViewChild.nativeElement.style.height=$t+rn-nn+"px",this._style.height&&(this._style.height=rn+"px",this.container.style.height=this._style.height)),this.lastPageX=J.pageX,this.lastPageY=J.pageY}}resizeEnd(J){this.resizing&&(this.resizing=!1,O.p.removeClass(document.body,"p-unselectable-text"),this.dialogRef.resizeEnd(J))}initDrag(J){O.p.hasClass(J.target,"p-dialog-header-icon")||O.p.hasClass(J.target.parentElement,"p-dialog-header-icon")||this.config.draggable&&(this.dragging=!0,this.lastPageX=J.pageX,this.lastPageY=J.pageY,this.container.style.margin="0",O.p.addClass(document.body,"p-unselectable-text"),this.dialogRef.dragStart(J))}onDrag(J){if(this.dragging){let be=O.p.getOuterWidth(this.container),Je=O.p.getOuterHeight(this.container),bt=J.pageX-this.lastPageX,nn=J.pageY-this.lastPageY,$t=this.container.getBoundingClientRect(),Et=$t.left+bt,rn=$t.top+nn,pn=O.p.getViewport();this.container.style.position="fixed",this.keepInViewport?(Et>=this.minX&&Et+be<pn.width&&(this._style.left=Et+"px",this.lastPageX=J.pageX,this.container.style.left=Et+"px"),rn>=this.minY&&rn+Je<pn.height&&(this._style.top=rn+"px",this.lastPageY=J.pageY,this.container.style.top=rn+"px")):(this.lastPageX=J.pageX,this.container.style.left=Et+"px",this.lastPageY=J.pageY,this.container.style.top=rn+"px")}}endDrag(J){this.dragging&&(this.dragging=!1,O.p.removeClass(document.body,"p-unselectable-text"),this.dialogRef.dragEnd(J),this.cd.detectChanges())}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindGlobalListeners(){this.bindDocumentKeydownListener(),!1!==this.config.closeOnEscape&&!1!==this.config.closable&&this.bindDocumentEscapeListener(),this.config.resizable&&this.bindDocumentResizeListeners(),this.config.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener())}unbindGlobalListeners(){this.unbindDocumentKeydownListener(),this.unbindDocumentEscapeListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener()}bindDocumentKeydownListener(){this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.onKeydown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener)})}unbindDocumentKeydownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.maskViewChild?this.maskViewChild.nativeElement.ownerDocument:"document","keydown",be=>{27==be.which&&parseInt(this.container.style.zIndex)==ce.P9.getCurrent()&&this.hide()})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}ngOnDestroy(){this.onContainerDestroy(),this.componentRef&&this.componentRef.destroy()}}return Re.\u0275fac=function(J){return new(J||Re)(v.Y36(v._Vd),v.Y36(v.sBO),v.Y36(v.Qsj),v.Y36(de),v.Y36(ee),v.Y36(v.R0b),v.Y36(Z.b4))},Re.\u0275cmp=v.Xpm({type:Re,selectors:[["p-dynamicDialog"]],viewQuery:function(J,be){if(1&J&&(v.Gf(Fe,5),v.Gf(ue,5),v.Gf(pe,5),v.Gf(Ce,5)),2&J){let Je;v.iGM(Je=v.CRH())&&(be.insertionPoint=Je.first),v.iGM(Je=v.CRH())&&(be.maskViewChild=Je.first),v.iGM(Je=v.CRH())&&(be.contentViewChild=Je.first),v.iGM(Je=v.CRH())&&(be.headerViewChild=Je.first)}},hostAttrs:[1,"p-element"],decls:3,vars:14,consts:[[3,"ngClass"],["mask",""],["role","dialog",3,"ngClass","ngStyle","class","width","height",4,"ngIf"],["role","dialog",3,"ngClass","ngStyle"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[1,"p-dialog-content",3,"ngStyle"],["content",""],["pDynamicDialogContent",""],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],[1,"p-dialog-title"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon","pi","pi-times"],[1,"p-dialog-footer"]],template:function(J,be){1&J&&(v.TgZ(0,"div",0,1),v.YNc(2,ae,8,23,"div",2),v.qZA()),2&J&&(v.Tol(be.config.maskStyleClass),v.Q6J("ngClass",v.rFY(4,he,[!1!==be.config.modal,"left"===be.position,"right"===be.position,"top"===be.position,"bottom"===be.position,"topleft"===be.position||"top-left"===be.position,"topright"===be.position||"top-right"===be.position,"bottomleft"===be.position||"bottom-left"===be.position,"bottomright"===be.position||"bottom-right"===be.position])),v.xp6(2),v.Q6J("ngIf",be.visible))},dependencies:function(){return[d.mk,d.O5,d.PC,Fe]},styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[(0,A.X$)("animation",[(0,A.eR)("void => visible",[(0,A._7)(De)]),(0,A.eR)("visible => void",[(0,A._7)(Me)])])]}}),Re})(),$e=(()=>{class Re{}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=v.oAB({type:Re}),Re.\u0275inj=v.cJS({imports:[d.ez]}),Re})();class rt{constructor(se,J){this._parentInjector=se,this._additionalTokens=J}get(se,J,be){return this._additionalTokens.get(se)||this._parentInjector.get(se,J)}}let Ke=(()=>{class Re{constructor(J,be,Je){this.componentFactoryResolver=J,this.appRef=be,this.injector=Je,this.dialogComponentRefMap=new Map}open(J,be){const Je=this.appendDialogComponentToBody(be);return this.dialogComponentRefMap.get(Je).instance.childComponentType=J,Je}appendDialogComponentToBody(J){const be=new WeakMap;be.set(de,J);const Je=new ee;be.set(ee,Je);const bt=Je.onClose.subscribe(()=>{this.dialogComponentRefMap.get(Je).instance.close()}),nn=Je.onDestroy.subscribe(()=>{this.removeDialogComponentFromBody(Je),nn.unsubscribe(),bt.unsubscribe()}),Et=this.componentFactoryResolver.resolveComponentFactory(We).create(new rt(this.injector,be));return this.appRef.attachView(Et.hostView),document.body.appendChild(Et.hostView.rootNodes[0]),this.dialogComponentRefMap.set(Je,Et),Je}removeDialogComponentFromBody(J){if(!J||!this.dialogComponentRefMap.has(J))return;const be=this.dialogComponentRefMap.get(J);this.appRef.detachView(be.hostView),be.destroy(),this.dialogComponentRefMap.delete(J)}}return Re.\u0275fac=function(J){return new(J||Re)(v.LFG(v._Vd),v.LFG(v.z2F),v.LFG(v.zs3))},Re.\u0275prov=v.Yz7({token:Re,factory:Re.\u0275fac}),Re})();var Ct=K(5593);class qe{constructor(){this.timer=0}}function Ne(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",2)(1,"div",3)(2,"span",4)(3,"span"),v._uU(4,"Select Players"),v.qZA()()(),v.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"p-selectButton",9),v.NdJ("ngModelChange",function(Je){v.CHM(J);const bt=v.oxw();return v.KtG(bt.selectedCount=Je)}),v.qZA()(),v.TgZ(10,"div",10)(11,"button",11),v.NdJ("click",function(){v.CHM(J);const Je=v.oxw();return v.KtG(Je.searchPlayers())}),v.qZA()()()()()()}if(2&Re){const J=v.oxw();v.xp6(9),v.Q6J("options",J.counts)("ngModel",J.selectedCount)}}function tt(Re,se){if(1&Re&&v._UZ(0,"app-ludo-searching",12),2&Re){const J=v.oxw();v.Q6J("timer",J.timer)}}qe.\u0275fac=function(se){return new(se||qe)},qe.\u0275cmp=v.Xpm({type:qe,selectors:[["app-ludo-searching"]],inputs:{timer:"timer"},decls:34,vars:1,consts:[[1,"search-container","grid","justify-content-center"],[1,"search-svg","col-12","md:col-12","sm:col-12"],["id","wrap","width","300","height","300","viewBox","0 0 300 300"],["cx","150","cy","150","r","130",2,"stroke","lightblue","stroke-width","18","fill","transparent"],["cx","150","cy","150","r","115",2,"fill","#2c3e50"],["d","M150,150 m0,-130 a 130,130 0 0,1 0,260 a 130,130 0 0,1 0,-260",2,"stroke","#2c3e50","stroke-dasharray","820","stroke-dashoffset","820","stroke-width","18","fill","transparent"],["attributeName","stroke-dashoffset","dur","2s","to","-820","repeatCount","indefinite"],["id","hourglass","d","M150,150 C60,85 240,85 150,150 C60,215 240,215 150,150 Z",2,"stroke","white","stroke-width","5","fill","white"],["id","frame","d","M100,97 L200, 97 M100,203 L200,203 M110,97 L110,142 M110,158 L110,200 M190,97 L190,142 M190,158 L190,200 M110,150 L110,150 M190,150 L190,150",2,"stroke","lightblue","stroke-width","6","stroke-linecap","round"],[0,"xlink","href","#frame","attributeName","transform","type","rotate","begin","0s","dur","3s","values","0 150 150; 0 150 150; 180 150 150","keyTimes","0; 0.8; 1","repeatCount","indefinite"],[0,"xlink","href","#hourglass","attributeName","transform","type","rotate","begin","0s","dur","3s","values","0 150 150; 0 150 150; 180 150 150","keyTimes","0; 0.8; 1","repeatCount","indefinite"],["id","upper","points","120,125 180,125 150,147",2,"fill","#2c3e50"],["attributeName","points","dur","3s","keyTimes","0; 0.8; 1","values","120,125 180,125 150,147; 150,150 150,150 150,150; 150,150 150,150 150,150","repeatCount","indefinite"],["id","line","stroke-linecap","round","stroke-dasharray","1,4","stroke-dashoffset","200.00","stroke","#2c3e50","stroke-width","2","d","M150,150 L150,198"],["attributeName","stroke-dashoffset","dur","3s","to","1.00","repeatCount","indefinite"],["attributeName","d","dur","3s","to","M150,195 L150,195","values","M150,150 L150,198; M150,150 L150,198; M150,198 L150,198; M150,195 L150,195","keyTimes","0; 0.65; 0.9; 1","repeatCount","indefinite"],["attributeName","stroke","dur","3s","keyTimes","0; 0.65; 0.8; 1","values","#2c3e50;#2c3e50;transparent;transparent","to","transparent","repeatCount","indefinite"],["id","lower"],["d","M150,180 L180,190 A28,10 0 1,1 120,190 L150,180 Z",2,"stroke","transparent","stroke-width","5","fill","#2c3e50"],["attributeName","transform","type","translate","keyTimes","0; 0.65; 1","values","0 15; 0 0; 0 0","dur","3s","repeatCount","indefinite"],[0,"xlink","href","#lower","attributeName","transform","type","rotate","begin","0s","dur","3s","values","0 150 150; 0 150 150; 180 150 150","keyTimes","0; 0.8; 1","repeatCount","indefinite"],["d","M150,150 C60,85 240,85 150,150 C60,215 240,215 150,150 Z",2,"stroke","white","stroke-width","5","fill","transparent"],["attributeName","transform","type","rotate","begin","0s","dur","3s","values","0 150 150; 0 150 150; 180 150 150","keyTimes","0; 0.8; 1","repeatCount","indefinite"],["id","frame","d","M100,97 L200, 97 M100,203 L200,203",2,"stroke","lightblue","stroke-width","6","stroke-linecap","round"],[1,"info","p-5","col-12","md:col-12","sm:col-12"],[1,"block","text-6xl","font-bold","mb-1",3,"innerHTML"],[1,"text-4xl","text-primary","font-bold","mb-3"],[1,"text-1xl","font-bold","mb-3"]],template:function(se,J){1&se&&(v.TgZ(0,"div",0)(1,"div",1),v.O4$(),v.TgZ(2,"svg",2)(3,"svg"),v._UZ(4,"circle",3)(5,"circle",4),v.TgZ(6,"path",5),v._UZ(7,"animate",6),v.qZA()(),v.TgZ(8,"svg"),v._UZ(9,"path",7)(10,"path",8)(11,"animateTransform",9)(12,"animateTransform",10),v.qZA(),v.TgZ(13,"svg")(14,"polygon",11),v._UZ(15,"animate",12),v.qZA(),v.TgZ(16,"path",13),v._UZ(17,"animate",14)(18,"animate",15)(19,"animate",16),v.qZA(),v.TgZ(20,"g",17)(21,"path",18),v._UZ(22,"animateTransform",19),v.qZA(),v._UZ(23,"animateTransform",20),v.qZA(),v.TgZ(24,"path",21),v._UZ(25,"animateTransform",22),v.qZA(),v.TgZ(26,"path",23),v._UZ(27,"animateTransform",22),v.qZA()()()(),v.kcU(),v.TgZ(28,"div",24),v._UZ(29,"div",25),v.TgZ(30,"div",26),v._uU(31,"Searching players online"),v.qZA(),v.TgZ(32,"div",27),v._uU(33,"Please do not click refresh or back button until search is finished"),v.qZA()()()),2&se&&(v.xp6(29),v.Q6J("innerHTML",J.timer,v.oJD))},styles:[".search-container[_ngcontent-%COMP%]{margin:0}.search-container[_ngcontent-%COMP%]   .search-svg[_ngcontent-%COMP%]   #wrap[_ngcontent-%COMP%]{width:100%;display:flex}.search-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center}"]});class Ve{constructor(se,J,be,Je){this.router=se,this.ludoService=J,this.ref=be,this.config=Je,this.newMessage="",this.messageList=[],this.counts=[],this.searching=!1,this.timer=30}ngOnInit(){this.counts=[{label:"2 Players",value:2},{label:"3 Players",value:3},{label:"4 Players",value:4}],this.selectedCount=this.counts[0].value,this.dialogSubscription=this.ref.onClose.subscribe(()=>{this.searching&&(this.disconnect(),this.destroy())})}searchPlayers(){this.searching=!0,this.startTimer(),this.ludoService.connect(),this.searchOnline()}startTimer(){this.timerInterval=setInterval(()=>{this.timer--,0===this.timer&&(this.disconnect(),this.destroy())},1e3)}subscribeLudoConnect(){this.ludoConnectSubscription=this.ludoService.getLudoConnect().subscribe(se=>{se&&(console.log(se),this.ludoConnectData=se,this.searching="WAITING"===this.ludoConnectData.status,"READY"===this.ludoConnectData.status&&(this.ref.close(),this.router.navigate(["/ludo/online"],{queryParams:{gameState:JSON.stringify(this.ludoConnectData)}})))})}ludoConnect(se){this.ludoService.ludoConnect(se),this.subscribeLudoConnect()}searchOnline(){this.searching=!0,this.ludoConnect({limit:this.selectedCount})}disconnect(){this.ludoService.disconnect()}ngOnDestroy(){this.destroy()}destroy(){this.destorySubscriptions(),clearInterval(this.timerInterval),this.timer=30,this.searching=!1}destorySubscriptions(){this.ludoConnectSubscription&&this.ludoConnectSubscription.unsubscribe()}}function Xe(Re,se){if(1&Re&&(v.TgZ(0,"div",11)(1,"div",12)(2,"label",13),v._uU(3),v.qZA(),v._UZ(4,"input",14),v.qZA()()),2&Re){const J=se.index;v.xp6(1),v.Q6J("formGroupName",J),v.xp6(2),v.hij("Player ",J+1,""),v.xp6(1),v.Q6J("formControlName","player"+(J+1))}}function lt(Re,se){if(1&Re&&(v.TgZ(0,"form",9),v.YNc(1,Xe,5,3,"div",10),v.qZA()),2&Re){const J=v.oxw();v.Q6J("formGroup",J.form),v.xp6(1),v.Q6J("ngForOf",J.players.controls)}}Ve.\u0275fac=function(se){return new(se||Ve)(v.Y36(l.F0),v.Y36(x),v.Y36(ee),v.Y36(de))},Ve.\u0275cmp=v.Xpm({type:Ve,selectors:[["app-ludo-config"]],decls:3,vars:2,consts:[["class","block-section",4,"ngIf","ngIfElse"],["showSearching",""],[1,"block-section"],[1,"block-header","pl-2"],[1,"block-title"],[1,"block-content"],[1,"surface-ground","text-center","px-1","py-2","md:px-2","lg:px-2"],[1,"grid","m-1"],[1,"col-12","p-0","mb-4"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange"],[1,"col-12","p-0"],["pButton","","pRipple","","label","Play",1,"mb-2","w-5","p-2","text-xl",3,"click"],[3,"timer"]],template:function(se,J){if(1&se&&(v.YNc(0,Ne,12,2,"div",0),v.YNc(1,tt,1,1,"ng-template",null,1,v.W1O)),2&se){const be=v.MAs(2);v.Q6J("ngIf",!J.searching)("ngIfElse",be)}},dependencies:[d.O5,Ct.Hq,T.JJ,T.On,u,qe]});class vt{constructor(se){this.fb=se,this.counts=[]}ngOnInit(){this.counts=[{label:"2 Players",value:2},{label:"3 Players",value:3},{label:"4 Players",value:4}],this.selectedCount=this.counts[0].value,this.initFields()}onChange(){this.setPlayers()}setPlayers(){this.removePlayers();for(let se=0;se<this.selectedCount;se++)this.addPlayer(`player${se+1}`)}initFields(){this.form=this.fb.group({players:this.fb.array([])}),this.setPlayers()}get players(){return this.form.get("players")}addPlayer(se){this.players.push(this.newPlayer(se))}newPlayer(se){return this.fb.group({[se]:this.fb.control("")})}removePlayers(){this.players.clear()}}vt.\u0275fac=function(se){return new(se||vt)(v.Y36(T.qu))},vt.\u0275cmp=v.Xpm({type:vt,selectors:[["app-ludo-pass-play"]],decls:20,vars:3,consts:[[1,"block-section"],[1,"block-header","pl-2"],[1,"block-title"],[1,"block-content"],[1,"surface-ground","px-1","py-2","md:px-2","lg:px-2"],[1,"grid","m-1"],[1,"col-12","p-0"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange","onChange"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formArrayName","players",4,"ngFor","ngForOf"],["formArrayName","players"],[3,"formGroupName"],["for","username",1,"block","text-900","text-xl","font-medium","mb-2"],["type","text","placeholder","Player Name","pInputText","",1,"w-full","md:w-30rem","mb-2",2,"padding","1rem",3,"formControlName"]],template:function(se,J){1&se&&(v.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span"),v._uU(4,"Select Players"),v.qZA()()(),v.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"p-selectButton",7),v.NdJ("ngModelChange",function(Je){return J.selectedCount=Je})("onChange",function(){return J.onChange()}),v.qZA()()()()()(),v.TgZ(10,"div",0)(11,"div",1)(12,"span",2)(13,"span"),v._uU(14,"Add Player details"),v.qZA()()(),v.TgZ(15,"div",3)(16,"div",4)(17,"div",5)(18,"div",6),v.YNc(19,lt,2,2,"form",8),v.qZA()()()()()),2&se&&(v.xp6(9),v.Q6J("options",J.counts)("ngModel",J.selectedCount),v.xp6(10),v.Q6J("ngIf",J.selectedCount))},dependencies:[d.sg,d.O5,T._Y,T.Fj,T.JJ,T.JL,T.On,u,T.sg,T.u,T.x0,T.CE],styles:[".block-section[_ngcontent-%COMP%]{margin-bottom:.25rem}"]});const Mt=function(){return{width:"10rem",height:"7rem"}};function xt(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",7)(1,"a",8),v.NdJ("click",function(){const bt=v.CHM(J).$implicit,nn=v.oxw();return v.KtG(nn.onClick(bt))}),v.TgZ(2,"div",9)(3,"div",10)(4,"div",11),v._UZ(5,"span",12)(6,"div",13),v.qZA(),v.TgZ(7,"div",14),v._UZ(8,"i",15),v.qZA()()()()()}if(2&Re){const J=se.$implicit;v.xp6(5),v.Q6J("innerHTML",J.name,v.oJD),v.xp6(1),v.Q6J("innerHTML",J.description,v.oJD),v.xp6(1),v.Q6J("ngStyle",v.DdM(5,Mt)),v.xp6(1),v.Tol(J.icon)}}class nt{constructor(se){this.dialogService=se,this.types=[{id:"1",name:"Pass N Play",description:"Play with your friends offline. You can play with 2, 3 and 4 players.",icon:"fa-people-arrows"},{id:"2",name:"Play Online",description:"Play with other players that are online. You can play with 2 or more players.",icon:"fa-computer"},{id:"3",name:"Play with friends",description:"Invite and play with your friends online in a room. You can play with 2 or more friends.",icon:"fa-person-shelter"},{id:"4",name:"Computer Bots",description:"Play with computer generated bots.",icon:"fa-robot"}]}ngOnInit(){}onClick(se){let J=Ve;return"1"===se.id&&(J=vt),this.ref=this.dialogService.open(J,{header:se.name,width:"30vw",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),!1}}nt.\u0275fac=function(se){return new(se||nt)(v.Y36(Ke))},nt.\u0275cmp=v.Xpm({type:nt,selectors:[["app-ludo-home"]],inputs:{game:"game"},decls:9,vars:1,consts:[[1,"block-section"],[1,"block-header"],[1,"block-title"],[1,"block-content"],[1,"surface-ground","px-1","py-2","md:px-2","lg:px-2"],[1,"grid","m-4"],["class","col-12 lg:col-6 xl:col-6 md:col-6 sm:col-6",4,"ngFor","ngForOf"],[1,"col-12","lg:col-6","xl:col-6","md:col-6","sm:col-6"],["href","",3,"click"],[1,"card","mb-0"],[1,"flex","justify-content-between"],[1,"w-8","mr-4"],[1,"block","text-800","font-medium","mb-3",3,"innerHTML"],[1,"text-500","font-medium","text-sm","clamp","clamp-3","mb-2",3,"innerHTML"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"fa-solid","fa-2x"]],template:function(se,J){1&se&&(v.TgZ(0,"div",0)(1,"div",1)(2,"span",2)(3,"span"),v._uU(4,"Select Game Type"),v.qZA()()(),v.TgZ(5,"div",3)(6,"div",4)(7,"div",5),v.YNc(8,xt,9,6,"div",6),v.qZA()()()()),2&se&&(v.xp6(8),v.Q6J("ngForOf",J.types))},dependencies:[d.sg,d.PC],styles:[".card[_ngcontent-%COMP%]:hover{border:1px solid #69a7e6}"]});var It=K(4482),Lt=K(5403),Gt=K(8421),zt=K(5032),Qe=K(7911);class je{get hostId(){return[`host-dice-${this.player.boardPosition}`]}constructor(se,J,be){this.authService=se,this.cdr=J,this.ludoService=be,this.rollStatus=!1,this.dataRoll=6,this.diceValueChanged=new v.vpe,this.activateDice=!1}ngOnInit(){this.initEventsAndSounds()}diceClick(){this.activateDice&&(this.rollDice(),this.diceValueChanged.emit(this.dataRoll))}rollDice(se){const J=se||1,be=se||6;this.rollStatus=this.rollStatus,this.rollStatus=!this.rollStatus,this.dataRoll=this.getRandomNumber(J,be),this.activateDice=!1}getRandomNumber(se,J){return se=Math.ceil(se),J=Math.floor(J),Math.floor(Math.random()*(J-se+1))+se}initEventsAndSounds(){}}je.\u0275fac=function(se){return new(se||je)(v.Y36(Qe.$),v.Y36(v.sBO),v.Y36(x))},je.\u0275cmp=v.Xpm({type:je,selectors:[["app-ludo-dice"]],hostVars:1,hostBindings:function(se,J){2&se&&v.Ikx("id",J.hostId)},inputs:{player:"player"},outputs:{diceValueChanged:"diceValueChanged"},decls:33,vars:5,consts:[[1,"dice-container","grid"],[1,"dice",3,"click"],[1,"arrow-container","mb-1"],[1,"arrow-icon","fa-solid","fa-arrow-down","fa-3x"],["id","die-1",1,"die-list","justify-items-center",3,"ngClass"],["data-side","1",1,"die-item"],[1,"dot"],["data-side","2",1,"die-item"],["data-side","3",1,"die-item"],["data-side","4",1,"die-item"],["data-side","5",1,"die-item"],["data-side","6",1,"die-item"],[1,"text-900","mb-3","font-medium","clamp","clamp-1",3,"innerHTML"]],template:function(se,J){1&se&&(v.TgZ(0,"div",0)(1,"div",1),v.NdJ("click",function(){return J.diceClick()}),v.TgZ(2,"div",2),v._UZ(3,"i",3),v.qZA(),v.TgZ(4,"ol",4)(5,"li",5),v._UZ(6,"span",6),v.qZA(),v.TgZ(7,"li",7),v._UZ(8,"span",6)(9,"span",6),v.qZA(),v.TgZ(10,"li",8),v._UZ(11,"span",6)(12,"span",6)(13,"span",6),v.qZA(),v.TgZ(14,"li",9),v._UZ(15,"span",6)(16,"span",6)(17,"span",6)(18,"span",6),v.qZA(),v.TgZ(19,"li",10),v._UZ(20,"span",6)(21,"span",6)(22,"span",6)(23,"span",6)(24,"span",6),v.qZA(),v.TgZ(25,"li",11),v._UZ(26,"span",6)(27,"span",6)(28,"span",6)(29,"span",6)(30,"span",6)(31,"span",6),v.qZA()()(),v._UZ(32,"div",12),v.qZA()),2&se&&(v.xp6(2),v.ekj("active",J.activateDice),v.xp6(2),v.Q6J("ngClass",J.rollStatus?"even-roll":"odd-roll"),v.uIk("data-roll",J.dataRoll),v.xp6(28),v.Q6J("innerHTML",J.player.name,v.oJD))},dependencies:[d.mk],styles:['#host-dice-1[_nghost-%COMP%]{grid-area:pd1}#host-dice-2[_nghost-%COMP%]{grid-area:pd2}#host-dice-3[_nghost-%COMP%]{grid-area:pd3}#host-dice-4[_nghost-%COMP%]{grid-area:pd4}.dice-container[_ngcontent-%COMP%]{transform:scale(.6);margin:-2.5em -1.75em;border:5px solid gainsboro;background-color:#fff;justify-content:center;flex-direction:column;align-items:center}.dice-container[_ngcontent-%COMP%]   .player-info[_ngcontent-%COMP%]{text-align:center}.dice-container[_ngcontent-%COMP%]   .arrow-container[_ngcontent-%COMP%]{transform:translateY(20px);text-align:center;visibility:hidden}.dice-container[_ngcontent-%COMP%]   .arrow-container.active[_ngcontent-%COMP%]{visibility:visible}.dice-container[_ngcontent-%COMP%]   .arrow-container.active[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_arrow-animation-down .7s linear infinite forwards}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]{padding:0 1.5em}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;list-style-type:none;transform-style:preserve-3d;width:100%;cursor:pointer;padding:.25em}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   .die-item[_ngcontent-%COMP%]{background-color:#fefefe;box-shadow:inset -.35rem .35rem .75rem #0000004d,inset .5rem -.25rem .5rem #00000026;display:grid;grid-column:1;grid-row:1;grid-template-areas:"one two three" "four five six" "seven eight nine";grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);height:65px;padding:1rem;width:65px;grid-gap:.25rem;border-radius:15px}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   .die-item[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{align-self:center;background-color:#676767;border-radius:50%;box-shadow:inset -.15rem .15rem .25rem #00000080;display:block;height:10px;justify-self:center;width:10px}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="1"][_ngcontent-%COMP%]{transform:rotate3d(0,0,0,90deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="2"][_ngcontent-%COMP%]{transform:rotate3d(-1,0,0,90deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="3"][_ngcontent-%COMP%]{transform:rotateY(90deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="4"][_ngcontent-%COMP%]{transform:rotate3d(0,-1,0,90deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]{transform:rotateX(90deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]{transform:rotateX(180deg) translateZ(30px)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="1"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:five}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="2"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:one}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="2"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(2){grid-area:nine}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="3"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:one}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="3"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(2){grid-area:five}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="3"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(3){grid-area:nine}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="4"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:one}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="4"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(2){grid-area:three}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="4"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(3){grid-area:seven}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="4"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(4){grid-area:nine}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:one}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(2){grid-area:three}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(3){grid-area:five}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(4){grid-area:seven}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="5"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(5){grid-area:nine}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(1){grid-area:one}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(2){grid-area:three}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(3){grid-area:four}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(4){grid-area:six}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(5){grid-area:seven}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list[_ngcontent-%COMP%]   [data-side="6"][_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:nth-of-type(6){grid-area:nine}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[_ngcontent-%COMP%]{transition:transform .25s}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[_ngcontent-%COMP%]{transition:transform .5s}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="1"][_ngcontent-%COMP%]{transform:rotateX(360deg) rotateY(720deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="2"][_ngcontent-%COMP%]{transform:rotateX(450deg) rotateY(720deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="3"][_ngcontent-%COMP%]{transform:rotateX(360deg) rotateY(630deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="4"][_ngcontent-%COMP%]{transform:rotateX(360deg) rotateY(810deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="5"][_ngcontent-%COMP%]{transform:rotateX(270deg) rotateY(720deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.even-roll[data-roll="6"][_ngcontent-%COMP%]{transform:rotateX(360deg) rotateY(900deg) rotate(360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="1"][_ngcontent-%COMP%]{transform:rotateX(-360deg) rotateY(-720deg) rotate(-360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="2"][_ngcontent-%COMP%]{transform:rotateX(-270deg) rotateY(-720deg) rotate(-360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="3"][_ngcontent-%COMP%]{transform:rotateX(-360deg) rotateY(-810deg) rotate(-360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="4"][_ngcontent-%COMP%]{transform:rotateX(-360deg) rotateY(-630deg) rotate(-360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="5"][_ngcontent-%COMP%]{transform:rotateX(-450deg) rotateY(-720deg) rotate(-360deg)}.dice-container[_ngcontent-%COMP%]   .dice[_ngcontent-%COMP%]   .die-list.odd-roll[data-roll="6"][_ngcontent-%COMP%]{transform:rotateX(-360deg) rotateY(-900deg) rotate(-360deg)}@keyframes _ngcontent-%COMP%_arrow-animation-down{0%{transform:translateY(-40px) scale(1)}25%{transform:translateY(-30px) scale(1)}50%{transform:translateY(-10px) scale(1.2)}75%{transform:translateY(-30px) scale(1.2)}to{transform:translateY(-40px) scale(1)}}']});var pt=K(8621);const Bt=["#c31307","#00a300","#ffc400","#008cf8"],Yt=Re=>Re.getObjects().filter(J=>J&&J.data&&"pawn"===J.data.name),dt=[[6,13],[2,8],[1,6],[6,2],[8,1],[12,6],[13,8],[8,12]],_e={1:[[2,11],[3,11],[3,12],[2,12],[6,13],[6,12],[6,11],[6,10],[6,9],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[0,7],[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,5],[6,4],[6,3],[6,2],[6,1],[6,0],[7,0],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[14,7],[14,8],[13,8],[12,8],[11,8],[10,8],[9,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[7,14],[7,13],[7,12],[7,11],[7,10],[7,9],[7,8]],2:[[2,2],[3,2],[2,3],[3,3],[1,6],[2,6],[3,6],[4,6],[5,6],[6,5],[6,4],[6,3],[6,2],[6,1],[6,0],[7,0],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[14,7],[14,8],[13,8],[12,8],[11,8],[10,8],[9,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[7,14],[6,14],[6,13],[6,12],[6,11],[6,10],[6,9],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[0,7],[1,7],[2,7],[3,7],[4,7],[5,7],[6,7]],3:[[11,2],[12,2],[12,3],[11,3],[8,1],[8,2],[8,3],[8,4],[8,5],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[14,7],[14,8],[13,8],[12,8],[11,8],[10,8],[9,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[7,14],[6,14],[6,13],[6,12],[6,11],[6,10],[6,9],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[0,7],[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,5],[6,4],[6,3],[6,2],[6,1],[6,0],[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6]],4:[[12,11],[11,11],[11,12],[12,12],[13,8],[12,8],[11,8],[10,8],[9,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[7,14],[6,14],[6,13],[6,12],[6,11],[6,10],[6,9],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[0,7],[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,5],[6,4],[6,3],[6,2],[6,1],[6,0],[7,0],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[14,7],[13,7],[12,7],[11,7],[10,7],[9,7],[8,7]]};class Ye{constructor(se){this.viewContainerRef=se}}Ye.\u0275fac=function(se){return new(se||Ye)(v.Y36(v.s_b))},Ye.\u0275dir=v.lG2({type:Ye,selectors:[["","dice",""]]});var Wt=K(9751),Ht=K(5577),_n=K(1144),Ut=K(576),Tn=K(3268);const li=["addListener","removeListener"],On=["addEventListener","removeEventListener"],Nn=["on","off"];function un(Re,se,J,be){if((0,Ut.m)(J)&&(be=J,J=void 0),be)return un(Re,se,J).pipe((0,Tn.Z)(be));const[Je,bt]=function I(Re){return(0,Ut.m)(Re.addEventListener)&&(0,Ut.m)(Re.removeEventListener)}(Re)?On.map(nn=>$t=>Re[nn](se,$t,J)):function X(Re){return(0,Ut.m)(Re.addListener)&&(0,Ut.m)(Re.removeListener)}(Re)?li.map(hn(Re,se)):function F(Re){return(0,Ut.m)(Re.on)&&(0,Ut.m)(Re.off)}(Re)?Nn.map(hn(Re,se)):[];if(!Je&&(0,_n.z)(Re))return(0,Ht.z)(nn=>un(nn,se,J))((0,Gt.Xf)(Re));if(!Je)throw new TypeError("Invalid event target");return new Wt.y(nn=>{const $t=(...Et)=>nn.next(1<Et.length?Et:Et[0]);return Je($t),()=>bt($t)})}function hn(Re,se){return J=>be=>Re[J](se,be)}class W{constructor(se,J){this.cdr=se,this.authService=J,this.players=[],this.diceValue=0,this.boardEmitter=new v.vpe,this.canvasResized=new v.vpe}ngAfterViewInit(){this.drawLudoBoard(),this.subscribeDiceValue(),this.resizeObservable$=un(window,"resize"),this.resizeSubscription$=this.resizeObservable$.subscribe(se=>{this.resize(),this.canvasResized.emit(!0)}),setTimeout(()=>{this.resize(),this.canvasResized.emit(!0)},0)}resize(){const se=document.getElementById("layout-main");let J=se.offsetWidth,be=se.offsetHeight;J>be&&(J=be),console.log("containerWidth"),console.log(J),console.log("containerHeight"),console.log(be);const Je=J/this.canvas.getWidth(),bt=this.canvas.getZoom()*Je;this.canvas.setDimensions({width:J,height:J}),this.canvas.setViewportTransform([bt,0,0,bt,0,0])}get myPositionOnBoard(){return this.players.findIndex(se=>se.id===this.loggedInUser?.id)}drawLudoBoard(){var Re;this.initCanvas(),(Re=this.canvas,new Promise((se,J)=>{pt.fabric.loadSVGFromURL("./../../../../assets/images/ludo/ludo-board.svg",function(be,Je){let bt=pt.fabric.util.groupSVGElements(be,Je);bt.set({selectable:!1,width:1e3,height:1e3,scaleX:.56,scaleY:.56,left:-17,top:-17}),Re.add(bt),Re.renderAll(),se(!0)})})).then(()=>{this.setBoardColors(),this.drawPawns().then(()=>{this.movementAudio=new Audio("./../../../assets/audio/move.mp3"),this.movementAudio.playbackRate=2})})}subscribeDiceValue(){this.diceValueObservable&&this.diceValueObservable.subscribe(se=>{se&&(this.diceValue=se.value,se.check&&this.checkPossibleMoves(),this.cdr.markForCheck())})}setBoardColors(){let se=[...Bt],J=this.players.map($t=>$t.color),be=se.filter($t=>!J.includes($t));const bt=this.canvas.getObjects()[0]._objects;for(let $t=1;$t<=4;$t++){const Et=bt.filter(pn=>pn.id&&pn.id===`house-${$t}`);let rn;if(Et.length>0){const pn=this.players.find(Di=>Di.boardPosition==$t);pn?rn=pn.color:(rn=be[0],be.shift()),Et.forEach(Di=>{Di.set({fill:rn})})}}this.canvas.renderAll()}initCanvas(){this.canvas=new pt.fabric.Canvas("canvas",{width:526,height:526}),this.canvas.hoverCursor="pointer",this.canvas.selection=!1}drawPawns(){return new Promise((se,J)=>{let be=[];this.players.forEach((Je,bt)=>{let nn=[];for(let $t=0;$t<4;$t++)nn.push({id:`${$t+1}`,playerId:Je.id,color:Je.color,initialPosition:{x:35*_e[Je.boardPosition][$t][0]+8,y:35*_e[Je.boardPosition][$t][1]},position:0});be.push(((Re,se)=>new Promise((J,be)=>{se&&(se.forEach(Je=>{Je&&pt.fabric.loadSVGFromString('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg" version="1.1" width="60"\nheight="80" viewBox="0 0 800 1200">\n<g id="layer1">\n  <path id="highlighter" fill="#6f8a91"\n    d="M 629.946 949.798 C 630.809 1079.158 416.819 1160.693 244.765 1096.568 C 164.127 1066.511 114.568 1010.424 115.074 949.798 C 114.213 820.44 328.205 738.899 500.258 803.03 C 580.894 833.088 630.454 889.174 629.946 949.798 Z"\n    stroke="black" stroke-dasharray="50,50" stroke-dashoffset="0" stroke-width="50"\n    transform="matrix(0.999996, 0.002941, -0.002941, 0.999996, 2.794966, -1.091444)"></path>\n  <path id="highlighter-sec" fill="#6f8a91"\n    d="M 541.57 950.327 C 542.14 1025.42 400.988 1072.753 287.498 1035.527 C 234.309 1018.078 201.619 985.52 201.953 950.327 C 201.384 875.231 342.536 827.897 456.026 865.124 C 509.216 882.574 541.906 915.133 541.57 950.327 Z"\n    stroke="#741717" stroke-width="35"></path>\n  <path id="path-1" fill="#b4b2b2" stroke="black" stroke-width="10"\n    d="m373.3 58.058c-183.43 0.258-332.05 149.04-332.05 332.53 0 121.52 65.173 227.8 162.48 285.82 94.942 70.715 159.22 180.26 169.37 305.13l0.19675 0.33729 0.0843-0.14058 0.0562 0.14058 0.19675-0.33729c10.16-124.88 74.43-234.42 169.38-305.13 97.312-58.012 162.48-164.3 162.48-285.82 0-183.49-148.62-332.27-332.05-332.53-0.0469-0.000063-0.0937 0.000045-0.14053 0z" />\n  <path id="path-2" stroke="black" stroke-width="20" fill="#dcd9d9"\n    d="m467.14 220.93a145.71 145.71 0 1 1 -291.43 0 145.71 145.71 0 1 1 291.43 0z"\n    transform="matrix(1.5292 0 0 1.5292 -118.15 51.446)" />\n  <path id="pawn" fill="#ec0303" d="m467.14 220.93a145.71 145.71 0 1 1 -291.43 0 145.71 145.71 0 1 1 291.43 0z"\n    transform="matrix(1.4997 0 0 1.4752 -108.69 55.502)" />\n</g>\n</svg>\n\n',function(bt,nn){let $t=pt.fabric.util.groupSVGElements(bt,nn);$t.set({left:Je?.initialPosition.x,top:Je?.initialPosition.y,width:40,height:55,scaleX:.45,scaleY:.45,selectable:!1,data:{id:Je?.id,playerId:Je?.playerId,name:"pawn",initialPosition:Je?.initialPosition,position:Je?.position},fill:Je?.color}),bt.forEach(Et=>{"pawn"===Et.id&&Et.set({fill:Je?.color}),"highlighter"===Et.id&&(Et.data={},Et.set({strokeWidth:0,top:Et.top+1.5,left:Et.left+1.5}))}),Re.add($t),Re.renderAll(),J(!0)})}),J(!0))}))(this.canvas,nn))}),Promise.allSettled(be).then(()=>{se(!0)})})}get loggedInUser(){return this.authService.userValue}emitAction(se,J){this.boardEmitter.emit({action:se,value:J})}checkPossibleMoves(){const se=((Re,se)=>this.canvas.getObjects().filter(be=>be&&be.data&&"pawn"===be.data.name&&be.data.playerId===se))(0,this.currentPlayer.id);let J;J=se.filter(6===this.diceValue?be=>0===be.data.position||be.data.position<=60&&be.data.position+this.diceValue<=60:be=>0!==be.data.position&&be.data.position<=60&&be.data.position+this.diceValue<=60),0!==J.length?(1===J.length&&(this.emitAction("movePawn",J[0].data),this.movePawn(J[0]).then(be=>{if(this.emitAction("updatePawn",J[0].data),60===J[0].data.position){if(60===J[0].data.position){if(this.currentPlayer.score+=1,this.emitAction("updateScore",this.currentPlayer),this.currentPlayer.score<4)return void this.emitAction("currentTurn");if(4===this.currentPlayer.score)return this.displayPlayerWin(this.currentPlayer),this.emitAction("winner",this.currentPlayer.id),void this.emitAction(this.winnings?"gameOver":"nextTurn")}}else this.emitAction("nextTurn")})),J.length>1&&this.highlightPawns(J)):this.emitAction("nextTurn")}get winners(){return this.players.filter(se=>4===se.score)}get winnings(){return this.winners.length===this.players.length-1}displayPlayerWin(se){const Je=[[36.5,350],[37,37],[349.5,37],[350,350]][se.boardPosition-1],bt=new pt.fabric.Text("Winner",{fill:"black",left:Je[0]+15,top:Je[1]+15+35,width:140,fontSize:30}),nn=new pt.fabric.Rect({left:Je[0],top:Je[1],width:138,height:138,fill:"darkgray"});this.canvas.add(nn),this.canvas.add(bt),this.canvas.renderAll()}highlightPawns(se,J=!0){se.forEach(be=>{if(be){const bt=be._objects[0];J?(bt.set({strokeWidth:50,stroke:"black"}),be.on("mousedown",this.pawnClicked.bind(this,be)),bt.data.animationRequest||(bt.data.animationRequest=requestAnimationFrame(this.animatePawnsHighlighters.bind(this,bt)))):(bt.data.animationRequest&&(cancelAnimationFrame(bt.data.animationRequest),bt.data.animationRequest=null),be.off(),be.__eventListeners=[],bt.set({strokeWidth:0,stroke:"white"}))}}),this.canvas.renderAll()}animatePawnsHighlighters(se,J){se.set({strokeDashOffset:.7*J}),this.canvas.renderAll(),se.data.animationRequest=requestAnimationFrame(this.animatePawnsHighlighters.bind(this,se))}unhighlightAllPawns(){const se=Yt(this.canvas);this.highlightPawns(se,!1)}clearAnimation(se){cancelAnimationFrame(se.data.animationRequest),se.data.animationRequest=void 0}checkKill(se,J){return new Promise(be=>{const Je=dt.find(nn=>nn[0]===J[0]&&nn[1]===J[1]);let bt=[];Je||(bt=Yt(this.canvas).filter($t=>{const Et=this.players.find(pn=>pn.id===$t.data.playerId),rn=_e[Et.boardPosition][$t.data.position];return JSON.stringify(J)==JSON.stringify(rn)&&Et.id!==se.data.playerId})),1===bt.length?(this.emitAction("killPawn",bt[0].data),this.animateKill(bt[0]).then(nn=>{this.emitAction("updatePawn",bt[0].data),cancelAnimationFrame(se.data.animationRequest),se.data.animationRequest=void 0,be(!0)})):be(!1)})}animateKill(se){return new Promise(J=>{const be=se.data&&se.data.playerId,Je=this.players.find($t=>$t.id===be);let bt=this;se.data.animationRequest=requestAnimationFrame(function nn(){const Et=_e[Je.boardPosition][se.data.position];se.set({left:35*Et[0]+8,top:35*Et[1]}),se.setCoords(),bt.canvas.renderAll(),se.data.position>4?(se.data.position--,setTimeout(()=>{se.data.animationRequest=requestAnimationFrame(nn)},30)):(se.set({left:se.data.initialPosition.x,top:se.data.initialPosition.y}),se.data.position=0,se.setCoords(),bt.canvas.renderAll(),J(!0))})})}pawnClicked(se){this.emitAction("movePawn",se.data),this.unhighlightAllPawns(),this.movePawn(se).then(J=>{this.emitAction("updatePawn",se.data),this.clearAnimation(se);const be=this.players.find(bt=>bt.id===se.data.playerId);this.checkKill(se,_e[be.boardPosition][se.data.position]).then(bt=>{bt?bt&&this.emitAction("currentTurn"):60===se.data.position?(this.currentPlayer.score+=1,this.emitAction("updateScore",this.currentPlayer),this.emitAction("currentTurn")):this.emitAction(6===this.diceValue?"currentTurn":"nextTurn")})})}movePawn(se){let J=se.data.position,be=0===J?4:J+this.diceValue;return new Promise(Je=>{if(se){let $t=function(){if(J=0===J?4:J+1,J<=be){let Et=_e[nn.boardPosition][J];se.animate({left:35*Et[0]+8,top:35*Et[1]},{duration:250,onChange:bt.canvas.renderAll.bind(bt.canvas),easing:pt.fabric.util.ease.easeInOutBounce}),setTimeout(()=>{se.data.animationRequest=requestAnimationFrame($t)},250)}else se.data.position=be,se.setCoords(),bt.canvas.renderAll(),Je(!0)},bt=this;const nn=bt.players.find(Et=>Et.id===se.data.playerId);se.data.animationRequest=requestAnimationFrame($t)}})}}W.\u0275fac=function(se){return new(se||W)(v.Y36(v.sBO),v.Y36(Qe.$))},W.\u0275cmp=v.Xpm({type:W,selectors:[["app-ludo-board"]],inputs:{players:"players",diceValueObservable:"diceValueObservable",currentPlayer:"currentPlayer"},outputs:{boardEmitter:"boardEmitter",canvasResized:"canvasResized"},decls:1,vars:0,consts:[["id","canvas"]],template:function(se,J){1&se&&v._UZ(0,"canvas",0)},styles:["[_nghost-%COMP%]{grid-area:b}"],changeDetection:0});const me=["boardComponent"];function ze(Re,se){}function st(Re,se){if(1&Re){const J=v.EpF();v.TgZ(0,"div",2),v.YNc(1,ze,0,0,"ng-template",3),v.TgZ(2,"app-ludo-board",4,5),v.NdJ("boardEmitter",function(Je){v.CHM(J);const bt=v.oxw();return v.KtG(bt.onBoardEmitter(Je))}),v.qZA()()}if(2&Re){const J=v.oxw();v.xp6(2),v.Q6J("currentPlayer",J.currentPlayer)("diceValueObservable",J.diceValueSubject)("players",J.players)}}function Xt(Re,se){if(1&Re&&(v.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3",9),v._uU(4,"Ludo King - Online Multiplayer"),v.qZA(),v._UZ(5,"span",10),v.qZA()()()),2&Re){const J=v.oxw();v.xp6(5),v.Q6J("innerHTML",J.message,v.oJD)}}class ln{constructor(se,J,be,Je,bt){this.authService=se,this.ludoService=J,this.route=be,this.cdr=Je,this.router=bt,this.destroy$=new j.x,this.diceValueSubject=new j.x,this.diceRefs=[],this.hasClass=!1,this.message=""}ngOnInit(){}checkState(){this.route.queryParams.subscribe(se=>{const be=JSON.parse(se.gameState);be&&be.id&&be.players.length>0&&"READY"===be.status?(this.gameState=be,this.cdr.detectChanges(),this.checkGameStatus()):this.router.navigate(["/"])})}checkGameStatus(){const se=this.gameState.status;if("READY"===se){let J=5,be=setInterval(()=>{this.message=`Your game will start in ${J} seconds.`,J--,0===J&&(clearInterval(be),this.startGame())},1e3);this.subscribeGameState()}else"GAME_OVER"===se&&(this.message="The game has ended. Please visit home page to play another game.")}loadDices(){const se=this.dice.viewContainerRef;se.clear(),this.players.forEach(J=>{const be=se.createComponent(je);be.instance.player=J,this.diceRefs.push(be),be.instance.diceValueChanged.subscribe(Je=>{this.diceClicked(Je)}),be.changeDetectorRef.detectChanges()})}activateDice(se){const J=this.diceRefs.find(be=>be.instance.player.id===se);J&&(J.instance.activateDice=!0)}onBoardEmitter(se){switch(se.action){case"currentTurn":return void this.activateDice(this.currentPlayer.id);case"nextTurn":return void this.ludoService.ludoTurn(this.turn);case"movePawn":{const be={...se.value,kill:!1};return void this.ludoService.movePawn(be)}case"killPawn":{const be={...se.value,kill:!0};return void this.ludoService.movePawn(be)}case"updatePawn":return void this.ludoService.updatePawn(se.value);case"updateScore":return void this.ludoService.updateScore(se.value);case"winner":return void this.ludoService.playerWon(se.value);case"gameOver":return void this.ludoService.gameOver(this.gameState.id)}}ngAfterViewInit(){this.checkState()}startGame(){this.ludoService.startGame()}subscribeGameState(){this.ludoService.getGameState().pipe(function mt(Re){return(0,It.e)((se,J)=>{(0,Gt.Xf)(Re).subscribe((0,Lt.x)(J,()=>J.complete(),zt.Z)),!J.closed&&se.subscribe(J)})}(this.destroy$)).subscribe(se=>{se&&(this.gameState=se,this.initPlayerBoardPosition(),this.diceRefs.length||setTimeout(()=>{this.loadDices()},0),setTimeout(()=>{this.onGameStateChanged()},0))})}set turn(se){this.gameState.turn=se}handleDiceValue(){if(this.gameState.diceValue){this.diceValueSubject.next({value:this.diceValue,check:!1});const se=this.diceRefs.find(J=>J.instance.player.id===this.currentPlayer.id);se&&se.instance.rollDice(this.diceValue)}}diceClicked(se){this.diceValue=se,this.ludoService.emitDiceValue(se),this.diceValueSubject.next({value:this.diceValue,check:!0})}set diceValue(se){this.gameState.diceValue=se}get diceValue(){return this.gameState?this.gameState.diceValue:0}get myTurn(){return this.currentPlayer.id===this.authService.userValue?.id}onGameStateChanged(){console.log(this.gameState);const se=this.gameState.status;"STARTED"===se?this.checkAction(this.gameState.action):"GAME_OVER"===se&&console.log("GAME OVER")}checkAction(se){const J=se&&se.key?se.key:null;if(J)switch(J){case"TURN":return void this.handleTurn();case"DICE":return void this.handleDiceValue();case"MOVE_PAWN":return void this.handleMovePawn();case"KILL_PAWN":return void this.handleMovePawn(!0);case"PLAYER_WON":this.handlePlayerWon()}}handlePlayerWon(){const se=this.gameState.action.value;if(se){const J=this.players.find(be=>be.id===se);J&&this.boardComponent.displayPlayerWin(J)}}handleTurn(){this.currentPlayer=this.players.find(se=>se.id===this.gameState.turn),this.myTurn&&this.activateDice(this.currentPlayer.id)}handleMovePawn(se=!1){const J=this.gameState.action.value,be=se?"animateKill":"movePawn";if(J){const Je=this.boardComponent.canvas.getObjects().find(bt=>bt.data&&bt.data.id===J.id&&bt.data.playerId===J.playerId);this.boardComponent[be](Je).then(bt=>{console.log("pawn moved/killed")})}}emitGameState(){this.ludoService.emitGameState(this.gameState)}get players(){return this.gameState&&this.gameState.players?this.gameState.players:[]}set players(se){this.gameState.players=se}get loggedInUser(){return this.authService.userValue}get turn(){return this.gameState.turn}initPlayerBoardPosition(){let se=1;const J=this.players.findIndex(be=>be.id===this.loggedInUser?.id);J>-1&&(this.players[J].boardPosition=se),se=2;for(let be=J+1;be<4;be++)this.players[be]&&(this.players[be].boardPosition=this.players.length>2?se:3),se++;for(let be=0;be<J;be++)this.players[be].boardPosition=this.players.length>2?se:3,se++;this.players=this.players}}ln.\u0275fac=function(se){return new(se||ln)(v.Y36(Qe.$),v.Y36(x),v.Y36(l.gz),v.Y36(v.sBO),v.Y36(l.F0))},ln.\u0275cmp=v.Xpm({type:ln,selectors:[["app-ludo-online"]],viewQuery:function(se,J){if(1&se&&(v.Gf(me,5),v.Gf(Ye,5)),2&se){let be;v.iGM(be=v.CRH())&&(J.boardComponent=be.first),v.iGM(be=v.CRH())&&(J.dice=be.first)}},decls:2,vars:2,consts:[["class","main-container","id","ludo-container",4,"ngIf"],["class","no-state",4,"ngIf"],["id","ludo-container",1,"main-container"],["dice",""],[3,"currentPlayer","diceValueObservable","players","boardEmitter"],["boardComponent",""],[1,"no-state"],[1,"col-12","mt-8","mb-8","p-2","md:p-8",2,"border-radius","20px","background","linear-gradient(0deg, rgba(255, 255,\n    255, 0.6), rgba(255, 255, 255, 0.6)), radial-gradient(77.36% 256.97% at\n    77.36% 57.52%, #EFE1AF 0%, #C3DCFA 100%)"],[1,"flex","flex-column","justify-content-center","align-items-center","text-center","px-3","py-3","md:py-0"],[1,"text-gray-900","mb-2"],[1,"text-gray-600","text-2xl",3,"innerHTML"]],template:function(se,J){1&se&&(v.YNc(0,st,4,3,"div",0),v.YNc(1,Xt,6,1,"div",1)),2&se&&(v.Q6J("ngIf",J.gameState&&"STARTED"===J.gameState.status),v.xp6(1),v.Q6J("ngIf",J.gameState&&"READY"===J.gameState.status))},dependencies:[d.O5,W,Ye],styles:['.main-container[_ngcontent-%COMP%]{display:grid;grid-template-areas:". . . . . ." "pd2 b b b b pd3" ". b b b b ." ". b b b b ." "pd1 b b b b pd4" ". . . . . .";grid-auto-columns:max-content;justify-content:center}.layout-main[_ngcontent-%COMP%]{margin:0 -1.5em}@media screen and (orientation: portrait){.main-container[_ngcontent-%COMP%]{grid-template-areas:". pd2 . . pd3 ." ". b b b b ." ". b b b b ." ". b b b b ." ". b b b b ." ". pd1 . . pd4 ."}}']});const Xn=[{path:"",component:nt},{path:"online",component:ln}];class Pn{}Pn.\u0275fac=function(se){return new(se||Pn)},Pn.\u0275mod=v.oAB({type:Pn}),Pn.\u0275inj=v.cJS({imports:[l.Bz.forChild(Xn),l.Bz]});let Gn=(()=>{class Re{}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=v.oAB({type:Re}),Re.\u0275inj=v.cJS({imports:[d.ez]}),Re})();var yi=K(613);class ei{}ei.\u0275fac=function(se){return new(se||ei)},ei.\u0275mod=v.oAB({type:ei}),ei.\u0275inj=v.cJS({providers:[Ke,x],imports:[d.ez,Pn,Ct.hJ,Gn,$e,yi.cc,T.u5,p,T.UX]})},2340:(Ft,Be,K)=>{"use strict";K.d(Be,{N:()=>d});const d={API_URL:"https://games-server-ek9r.onrender.com/api/",production:!0}},3750:(Ft,Be,K)=>{"use strict";var d=K(1481),v=K(8256),ce=K(1002),Ue=K(7911);class T{constructor(C,_){this.router=C,this.authService=_}canActivate(C,_){return!!this.authService.userValue||(this.router.navigate(["/auth/login"],{queryParams:{returnUrl:_.url}}),!1)}}T.\u0275fac=function(C){return new(C||T)(v.LFG(ce.F0),v.LFG(Ue.$))},T.\u0275prov=v.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});class fe{}fe.\u0275fac=function(C){return new(C||fe)},fe.\u0275cmp=v.Xpm({type:fe,selectors:[["app-not-found"]],decls:11,vars:0,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],["src","assets/layout/images/logo-dark.svg","alt","Sakai logo",1,"mb-5","w-6rem","flex-shrink-0"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, rgba(33, 150, 243, 0.4) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"w-full","surface-card","py-8","px-5","sm:px-8","flex","flex-column","align-items-center",2,"border-radius","53px"],[1,"text-blue-500","font-bold","text-3xl"],[1,"text-900","font-bold","text-3xl","lg:text-5xl","mb-2"],[1,"text-600","mb-5"]],template:function(C,_){1&C&&(v.TgZ(0,"div",0)(1,"div",1),v._UZ(2,"img",2),v.TgZ(3,"div",3)(4,"div",4)(5,"span",5),v._uU(6,"404"),v.qZA(),v.TgZ(7,"h1",6),v._uU(8,"Not Found"),v.qZA(),v.TgZ(9,"div",7),v._uU(10,"Requested resource is not available."),v.qZA()()()()())}});var m=K(9300),o=K(7579);class f{constructor(){this.config={ripple:!1,inputStyle:"outlined",menuMode:"static",colorScheme:"light",theme:"lara-light-indigo",scale:12},this.state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1},this.configUpdate=new o.x,this.overlayOpen=new o.x,this.configUpdate$=this.configUpdate.asObservable(),this.overlayOpen$=this.overlayOpen.asObservable()}onMenuToggle(){this.isOverlay()&&(this.state.overlayMenuActive=!this.state.overlayMenuActive,this.state.overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.state.staticMenuDesktopInactive=!this.state.staticMenuDesktopInactive:(this.state.staticMenuMobileActive=!this.state.staticMenuMobileActive,this.state.staticMenuMobileActive&&this.overlayOpen.next(null))}showProfileSidebar(){this.state.profileSidebarVisible=!this.state.profileSidebarVisible,this.state.profileSidebarVisible&&this.overlayOpen.next(null)}showConfigSidebar(){this.state.configSidebarVisible=!0}isOverlay(){return"overlay"===this.config.menuMode}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this.configUpdate.next(this.config)}}f.\u0275fac=function(C){return new(C||f)},f.\u0275prov=v.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});var h=K(6895),r=K(7340);class a{constructor(){this.menuSource=new o.x,this.resetSource=new o.x,this.menuSource$=this.menuSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onMenuStateChange(C){this.menuSource.next(C)}reset(){this.resetSource.next(!0)}}a.\u0275fac=function(C){return new(C||a)},a.\u0275prov=v.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"});var s=K(1795);function p(H,C){if(1&H&&(v.TgZ(0,"div",4),v._uU(1),v.qZA()),2&H){const _=v.oxw();v.xp6(1),v.hij(" ",_.item.label," ")}}function l(H,C){1&H&&v._UZ(0,"i",9)}function y(H,C){if(1&H){const _=v.EpF();v.TgZ(0,"a",5),v.NdJ("click",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.itemClick($))}),v._UZ(1,"i",6),v.TgZ(2,"span",7),v._uU(3),v.qZA(),v.YNc(4,l,1,0,"i",8),v.qZA()}if(2&H){const _=v.oxw();v.Q6J("ngClass",_.item.class),v.uIk("href",_.item.url,v.LSH)("target",_.item.target),v.xp6(1),v.Q6J("ngClass",_.item.icon),v.xp6(2),v.Oqu(_.item.label),v.xp6(1),v.Q6J("ngIf",_.item.items)}}function S(H,C){1&H&&v._UZ(0,"i",9)}const x=function(){return{paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"}};function A(H,C){if(1&H){const _=v.EpF();v.TgZ(0,"a",10),v.NdJ("click",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.itemClick($))}),v._UZ(1,"i",6),v.TgZ(2,"span",7),v._uU(3),v.qZA(),v.YNc(4,S,1,0,"i",8),v.qZA()}if(2&H){const _=v.oxw();v.Q6J("ngClass",_.item.class)("routerLink",_.item.routerLink)("routerLinkActiveOptions",_.item.routerLinkActiveOptions||v.DdM(14,x))("fragment",_.item.fragment)("queryParamsHandling",_.item.queryParamsHandling)("preserveFragment",_.item.preserveFragment)("skipLocationChange",_.item.skipLocationChange)("replaceUrl",_.item.replaceUrl)("state",_.item.state)("queryParams",_.item.queryParams),v.uIk("target",_.item.target),v.xp6(1),v.Q6J("ngClass",_.item.icon),v.xp6(2),v.Oqu(_.item.label),v.xp6(1),v.Q6J("ngIf",_.item.items)}}function O(H,C){if(1&H&&v._UZ(0,"li",12),2&H){const _=C.$implicit,R=C.index,$=v.oxw(2);v.Tol(_.badgeClass),v.Q6J("item",_)("index",R)("parentKey",$.key)}}function j(H,C){if(1&H&&(v.TgZ(0,"ul"),v.YNc(1,O,1,5,"ng-template",11),v.qZA()),2&H){const _=v.oxw();v.Q6J("@children",_.submenuAnimation),v.xp6(1),v.Q6J("ngForOf",_.item.items)}}class Z{constructor(C,_,R,$){this.layoutService=C,this.cd=_,this.router=R,this.menuService=$,this.active=!1,this.key="",this.menuSourceSubscription=this.menuService.menuSource$.subscribe(ie=>{Promise.resolve(null).then(()=>{ie.routeEvent?this.active=!(ie.key!==this.key&&!ie.key.startsWith(this.key+"-")):ie.key!==this.key&&!ie.key.startsWith(this.key+"-")&&(this.active=!1)})}),this.menuResetSubscription=this.menuService.resetSource$.subscribe(()=>{this.active=!1}),this.router.events.pipe((0,m.h)(ie=>ie instanceof ce.m2)).subscribe(ie=>{this.item.routerLink&&this.updateActiveStateFromRoute()})}ngOnInit(){this.key=this.parentKey?this.parentKey+"-"+this.index:String(this.index),this.item.routerLink&&this.updateActiveStateFromRoute()}updateActiveStateFromRoute(){this.router.isActive(this.item.routerLink[0],{paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"})&&this.menuService.onMenuStateChange({key:this.key,routeEvent:!0})}itemClick(C){this.item.disabled?C.preventDefault():(this.item.command&&this.item.command({originalEvent:C,item:this.item}),this.item.items&&(this.active=!this.active),this.menuService.onMenuStateChange({key:this.key}))}get submenuAnimation(){return this.root||this.active?"expanded":"collapsed"}get activeClass(){return this.active&&!this.root}ngOnDestroy(){this.menuSourceSubscription&&this.menuSourceSubscription.unsubscribe(),this.menuResetSubscription&&this.menuResetSubscription.unsubscribe()}}function ue(H,C){if(1&H&&v._UZ(0,"li",6),2&H){const _=v.oxw(),$=_.index;v.Q6J("item",_.$implicit)("index",$)("root",!0)}}function pe(H,C){1&H&&v._UZ(0,"li",7)}function Ce(H,C){if(1&H&&(v.ynx(0),v.YNc(1,ue,1,3,"li",4),v.YNc(2,pe,1,0,"li",5),v.BQk()),2&H){const _=C.$implicit;v.xp6(1),v.Q6J("ngIf",!_.separator),v.xp6(1),v.Q6J("ngIf",_.separator)}}Z.\u0275fac=function(C){return new(C||Z)(v.Y36(f),v.Y36(v.sBO),v.Y36(ce.F0),v.Y36(a))},Z.\u0275cmp=v.Xpm({type:Z,selectors:[["","app-menuitem",""]],hostVars:4,hostBindings:function(C,_){2&C&&v.ekj("layout-root-menuitem",_.root)("active-menuitem",_.activeClass)},inputs:{item:"item",index:"index",root:"root",parentKey:"parentKey"},attrs:["app-menuitem",""],decls:5,vars:4,consts:[["class","layout-menuitem-root-text",4,"ngIf"],["tabindex","0","pRipple","",3,"ngClass","click",4,"ngIf"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams","click",4,"ngIf"],[4,"ngIf"],[1,"layout-menuitem-root-text"],["tabindex","0","pRipple","",3,"ngClass","click"],[1,"layout-menuitem-icon",3,"ngClass"],[1,"layout-menuitem-text"],["class","pi pi-fw pi-angle-down layout-submenu-toggler",4,"ngIf"],[1,"pi","pi-fw","pi-angle-down","layout-submenu-toggler"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams","click"],["ngFor","",3,"ngForOf"],["app-menuitem","",3,"item","index","parentKey"]],template:function(C,_){1&C&&(v.ynx(0),v.YNc(1,p,2,1,"div",0),v.YNc(2,y,5,6,"a",1),v.YNc(3,A,5,15,"a",2),v.YNc(4,j,2,2,"ul",3),v.BQk()),2&C&&(v.xp6(1),v.Q6J("ngIf",_.root&&!1!==_.item.visible),v.xp6(1),v.Q6J("ngIf",(!_.item.routerLink||_.item.items)&&!1!==_.item.visible),v.xp6(1),v.Q6J("ngIf",_.item.routerLink&&!_.item.items&&!1!==_.item.visible),v.xp6(1),v.Q6J("ngIf",_.item.items&&!1!==_.item.visible))},dependencies:[h.mk,h.sg,h.O5,s.H,ce.rH,ce.Od,Z],data:{animation:[(0,r.X$)("children",[(0,r.SB)("collapsed",(0,r.oB)({height:"0"})),(0,r.SB)("expanded",(0,r.oB)({height:"*"})),(0,r.eR)("collapsed <=> expanded",(0,r.jt)("400ms cubic-bezier(0.86, 0, 0.07, 1)"))])]}});class Se{constructor(C){this.layoutService=C,this.model=[]}ngOnInit(){this.model=[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-fw pi-home",routerLink:["/"]}]},{label:"UI Components",items:[{label:"Form Layout",icon:"pi pi-fw pi-id-card",routerLink:["/uikit/formlayout"]},{label:"Input",icon:"pi pi-fw pi-check-square",routerLink:["/uikit/input"]},{label:"Float Label",icon:"pi pi-fw pi-bookmark",routerLink:["/uikit/floatlabel"]},{label:"Invalid State",icon:"pi pi-fw pi-exclamation-circle",routerLink:["/uikit/invalidstate"]},{label:"Button",icon:"pi pi-fw pi-box",routerLink:["/uikit/button"]},{label:"Table",icon:"pi pi-fw pi-table",routerLink:["/uikit/table"]},{label:"List",icon:"pi pi-fw pi-list",routerLink:["/uikit/list"]},{label:"Tree",icon:"pi pi-fw pi-share-alt",routerLink:["/uikit/tree"]},{label:"Panel",icon:"pi pi-fw pi-tablet",routerLink:["/uikit/panel"]},{label:"Overlay",icon:"pi pi-fw pi-clone",routerLink:["/uikit/overlay"]},{label:"Media",icon:"pi pi-fw pi-image",routerLink:["/uikit/media"]},{label:"Menu",icon:"pi pi-fw pi-bars",routerLink:["/uikit/menu"],routerLinkActiveOptions:{paths:"subset",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"}},{label:"Message",icon:"pi pi-fw pi-comment",routerLink:["/uikit/message"]},{label:"File",icon:"pi pi-fw pi-file",routerLink:["/uikit/file"]},{label:"Chart",icon:"pi pi-fw pi-chart-bar",routerLink:["/uikit/charts"]},{label:"Misc",icon:"pi pi-fw pi-circle",routerLink:["/uikit/misc"]}]},{label:"Prime Blocks",items:[{label:"Free Blocks",icon:"pi pi-fw pi-eye",routerLink:["/blocks"],badge:"NEW"},{label:"All Blocks",icon:"pi pi-fw pi-globe",url:["https://www.primefaces.org/primeblocks-ng"],target:"_blank"}]},{label:"Utilities",items:[{label:"PrimeIcons",icon:"pi pi-fw pi-prime",routerLink:["/utilities/icons"]},{label:"PrimeFlex",icon:"pi pi-fw pi-desktop",url:["https://www.primefaces.org/primeflex/"],target:"_blank"}]},{label:"Pages",icon:"pi pi-fw pi-briefcase",items:[{label:"Landing",icon:"pi pi-fw pi-globe",routerLink:["/landing"]},{label:"Auth",icon:"pi pi-fw pi-user",items:[{label:"Login",icon:"pi pi-fw pi-sign-in",routerLink:["/auth/login"]},{label:"Error",icon:"pi pi-fw pi-times-circle",routerLink:["/auth/error"]},{label:"Access Denied",icon:"pi pi-fw pi-lock",routerLink:["/auth/access"]}]},{label:"Crud",icon:"pi pi-fw pi-pencil",routerLink:["/pages/crud"]},{label:"Timeline",icon:"pi pi-fw pi-calendar",routerLink:["/pages/timeline"]},{label:"Not Found",icon:"pi pi-fw pi-exclamation-circle",routerLink:["/notfound"]},{label:"Empty",icon:"pi pi-fw pi-circle-off",routerLink:["/pages/empty"]}]},{label:"Hierarchy",items:[{label:"Submenu 1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.1.1",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 1.1.2",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 1.1.3",icon:"pi pi-fw pi-bookmark"}]},{label:"Submenu 1.2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.2.1",icon:"pi pi-fw pi-bookmark"}]}]},{label:"Submenu 2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.1.1",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 2.1.2",icon:"pi pi-fw pi-bookmark"}]},{label:"Submenu 2.2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.2.1",icon:"pi pi-fw pi-bookmark"}]}]}]},{label:"Get Started",items:[{label:"Documentation",icon:"pi pi-fw pi-question",routerLink:["/documentation"]},{label:"View Source",icon:"pi pi-fw pi-search",url:["https://github.com/primefaces/sakai-ng"],target:"_blank"}]}]}}Se.\u0275fac=function(C){return new(C||Se)(v.Y36(f))},Se.\u0275cmp=v.Xpm({type:Se,selectors:[["app-menu"]],decls:5,vars:2,consts:[[1,"layout-menu"],[4,"ngFor","ngForOf"],["href","https://www.primefaces.org/primeblocks-ng/#/"],["alt","Prime Blocks",1,"w-full","mt-3",3,"src"],["app-menuitem","",3,"item","index","root",4,"ngIf"],["class","menu-separator",4,"ngIf"],["app-menuitem","",3,"item","index","root"],[1,"menu-separator"]],template:function(C,_){1&C&&(v.TgZ(0,"ul",0),v.YNc(1,Ce,3,2,"ng-container",1),v.TgZ(2,"li")(3,"a",2),v._UZ(4,"img",3),v.qZA()()()),2&C&&(v.xp6(1),v.Q6J("ngForOf",_.model),v.xp6(3),v.MGl("src","assets/layout/images/","light"===_.layoutService.config.colorScheme?"banner-primeblocks":"banner-primeblocks-dark",".png",v.LSH))},dependencies:[h.sg,h.O5,Z]});class He{constructor(C,_){this.layoutService=C,this.el=_}}He.\u0275fac=function(C){return new(C||He)(v.Y36(f),v.Y36(v.SBq))},He.\u0275cmp=v.Xpm({type:He,selectors:[["app-sidebar"]],decls:1,vars:0,template:function(C,_){1&C&&v._UZ(0,"app-menu")},dependencies:[Se]});const ot=["menubutton"],at=["topbarmenubutton"],ke=["topbarmenu"],Ee=function(H){return{"layout-topbar-menu-mobile-active":H}};class xe{constructor(C,_){this.layoutService=C,this.authService=_}logout(){this.authService.logout()}get userName(){return this.authService.userValue?.username}}xe.\u0275fac=function(C){return new(C||xe)(v.Y36(f),v.Y36(Ue.$))},xe.\u0275cmp=v.Xpm({type:xe,selectors:[["app-topbar"]],viewQuery:function(C,_){if(1&C&&(v.Gf(ot,5),v.Gf(at,5),v.Gf(ke,5)),2&C){let R;v.iGM(R=v.CRH())&&(_.menuButton=R.first),v.iGM(R=v.CRH())&&(_.topbarMenuButton=R.first),v.iGM(R=v.CRH())&&(_.menu=R.first)}},decls:30,vars:6,consts:[[1,"layout-topbar"],["routerLink","",1,"layout-topbar-logo"],["alt","logo",3,"src"],[1,"p-link","layout-menu-button","layout-topbar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],[1,"p-link","layout-topbar-menu-button","layout-topbar-button",3,"click"],["topbarmenubutton",""],[1,"pi","pi-ellipsis-v"],[1,"layout-topbar-menu",3,"ngClass"],["topbarmenu",""],[1,"layout-topbar-button",3,"innerHTML"],[1,"p-link","layout-topbar-button"],[1,"pi","pi-calendar"],[1,"pi","pi-user"],[1,"p-link","layout-topbar-button",3,"routerLink"],[1,"pi","pi-cog"],[1,"p-link","layout-topbar-button",3,"click"]],template:function(C,_){1&C&&(v.TgZ(0,"div",0)(1,"a",1),v._UZ(2,"img",2),v.TgZ(3,"span"),v._uU(4,"Games App"),v.qZA()(),v.TgZ(5,"button",3,4),v.NdJ("click",function(){return _.layoutService.onMenuToggle()}),v._UZ(7,"i",5),v.qZA(),v.TgZ(8,"button",6,7),v.NdJ("click",function(){return _.layoutService.showProfileSidebar()}),v._UZ(10,"i",8),v.qZA(),v.TgZ(11,"div",9,10),v._UZ(13,"div",11),v.TgZ(14,"button",12),v._UZ(15,"i",13),v.TgZ(16,"span"),v._uU(17,"Calendar"),v.qZA()(),v.TgZ(18,"button",12),v._UZ(19,"i",14),v.TgZ(20,"span"),v._uU(21,"Profile"),v.qZA()(),v.TgZ(22,"button",15),v._UZ(23,"i",16),v.TgZ(24,"span"),v._uU(25,"Settings"),v.qZA()(),v.TgZ(26,"button",17),v.NdJ("click",function(){return _.logout()}),v._UZ(27,"i",16),v.TgZ(28,"span"),v._uU(29,"Logout"),v.qZA()()()()),2&C&&(v.xp6(2),v.MGl("src","assets/layout/images/","light"===_.layoutService.config.colorScheme?"logo-dark":"logo-white",".svg",v.LSH),v.xp6(9),v.Q6J("ngClass",v.VKq(4,Ee,_.layoutService.state.profileSidebarVisible)),v.xp6(2),v.Q6J("innerHTML",_.userName,v.oJD),v.xp6(9),v.Q6J("routerLink","/documentation"))},dependencies:[h.mk,ce.rH]});class Le{constructor(C){this.layoutService=C}}Le.\u0275fac=function(C){return new(C||Le)(v.Y36(f))},Le.\u0275cmp=v.Xpm({type:Le,selectors:[["app-footer"]],decls:5,vars:1,consts:[[1,"layout-footer"],["alt","Logo","height","20",1,"mr-2",3,"src"],[1,"font-medium","ml-2"]],template:function(C,_){1&C&&(v.TgZ(0,"div",0),v._UZ(1,"img",1),v._uU(2," by "),v.TgZ(3,"span",2),v._uU(4,"Games App"),v.qZA()()),2&C&&(v.xp6(1),v.MGl("src","assets/layout/images/","light"===_.layoutService.config.colorScheme?"logo-dark":"logo-white",".svg",v.LSH))}});class q{constructor(C,_,R){this.layoutService=C,this.renderer=_,this.router=R,this.overlayMenuOpenSubscription=this.layoutService.overlayOpen$.subscribe(()=>{this.menuOutsideClickListener||(this.menuOutsideClickListener=this.renderer.listen("document","click",$=>{!(this.appSidebar.el.nativeElement.isSameNode($.target)||this.appSidebar.el.nativeElement.contains($.target)||this.appTopbar.menuButton.nativeElement.isSameNode($.target)||this.appTopbar.menuButton.nativeElement.contains($.target))&&this.hideMenu()})),this.profileMenuOutsideClickListener||(this.profileMenuOutsideClickListener=this.renderer.listen("document","click",$=>{!(this.appTopbar.menu.nativeElement.isSameNode($.target)||this.appTopbar.menu.nativeElement.contains($.target)||this.appTopbar.topbarMenuButton.nativeElement.isSameNode($.target)||this.appTopbar.topbarMenuButton.nativeElement.contains($.target))&&this.hideProfileMenu()})),this.layoutService.state.staticMenuMobileActive&&this.blockBodyScroll()}),this.router.events.pipe((0,m.h)($=>$ instanceof ce.m2)).subscribe(()=>{this.hideMenu(),this.hideProfileMenu()})}hideMenu(){this.layoutService.state.overlayMenuActive=!1,this.layoutService.state.staticMenuMobileActive=!1,this.layoutService.state.menuHoverActive=!1,this.menuOutsideClickListener&&(this.menuOutsideClickListener(),this.menuOutsideClickListener=null),this.unblockBodyScroll()}hideProfileMenu(){this.layoutService.state.profileSidebarVisible=!1,this.profileMenuOutsideClickListener&&(this.profileMenuOutsideClickListener(),this.profileMenuOutsideClickListener=null)}blockBodyScroll(){document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"}unblockBodyScroll(){document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")}get containerClass(){return{"layout-theme-light":"light"===this.layoutService.config.colorScheme,"layout-theme-dark":"dark"===this.layoutService.config.colorScheme,"layout-overlay":"overlay"===this.layoutService.config.menuMode,"layout-static":"static"===this.layoutService.config.menuMode,"layout-static-inactive":this.layoutService.state.staticMenuDesktopInactive&&"static"===this.layoutService.config.menuMode,"layout-overlay-active":this.layoutService.state.overlayMenuActive,"layout-mobile-active":this.layoutService.state.staticMenuMobileActive,"p-input-filled":"filled"===this.layoutService.config.inputStyle,"p-ripple-disabled":!this.layoutService.config.ripple}}ngOnDestroy(){this.overlayMenuOpenSubscription&&this.overlayMenuOpenSubscription.unsubscribe(),this.menuOutsideClickListener&&this.menuOutsideClickListener()}}q.\u0275fac=function(C){return new(C||q)(v.Y36(f),v.Y36(v.Qsj),v.Y36(ce.F0))},q.\u0275cmp=v.Xpm({type:q,selectors:[["app-app-layout"]],viewQuery:function(C,_){if(1&C&&(v.Gf(He,5),v.Gf(xe,5)),2&C){let R;v.iGM(R=v.CRH())&&(_.appSidebar=R.first),v.iGM(R=v.CRH())&&(_.appTopbar=R.first)}},decls:9,vars:1,consts:[[1,"layout-wrapper",3,"ngClass"],[1,"layout-sidebar"],[1,"layout-main-container"],["id","layout-main",1,"layout-main"],[1,"layout-mask"]],template:function(C,_){1&C&&(v.TgZ(0,"div",0),v._UZ(1,"app-topbar"),v.TgZ(2,"div",1),v._UZ(3,"app-sidebar"),v.qZA(),v.TgZ(4,"div",2)(5,"div",3),v._UZ(6,"router-outlet"),v.qZA(),v._UZ(7,"app-footer"),v.qZA(),v._UZ(8,"div",4),v.qZA()),2&C&&v.Q6J("ngClass",_.containerClass)},dependencies:[h.mk,ce.lC,Le,He,xe]});const le=[{path:"",component:q,children:[{path:"",loadChildren:()=>Promise.resolve().then(K.bind(K,50)).then(H=>H.DashboardModule),canActivate:[T]},{path:"ludo",loadChildren:()=>Promise.resolve().then(K.bind(K,2516)).then(H=>H.LudoModule),canActivate:[T]}]},{path:"auth",loadChildren:()=>Promise.resolve().then(K.bind(K,7823)).then(H=>H.AuthenticationModule)},{path:"notfound",component:fe},{path:"**",redirectTo:""}];class ae{}ae.\u0275fac=function(C){return new(C||ae)},ae.\u0275mod=v.oAB({type:ae}),ae.\u0275inj=v.cJS({imports:[ce.Bz.forRoot(le,{scrollPositionRestoration:"enabled",anchorScrolling:"enabled",onSameUrlNavigation:"reload"}),ce.Bz]});var he=K(805),Fe=K(982);const de=["container"],ee=function(H,C,_,R){return{"pi-info-circle":H,"pi-exclamation-triangle":C,"pi-times-circle":_,"pi-check":R}};function De(H,C){if(1&H&&(v.ynx(0),v._UZ(1,"span",6),v.TgZ(2,"div",7)(3,"div",8),v._uU(4),v.qZA(),v.TgZ(5,"div",9),v._uU(6),v.qZA()(),v.BQk()),2&H){const _=v.oxw();v.xp6(1),v.Tol("p-toast-message-icon pi"+(_.message.icon?" "+_.message.icon:"")),v.Q6J("ngClass",v.l5B(5,ee,"info"==_.message.severity,"warn"==_.message.severity,"error"==_.message.severity,"success"==_.message.severity)),v.xp6(3),v.Oqu(_.message.summary),v.xp6(2),v.Oqu(_.message.detail)}}function Me(H,C){1&H&&v.GkF(0)}function We(H,C){if(1&H){const _=v.EpF();v.TgZ(0,"button",10),v.NdJ("click",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.onCloseIconClick($))})("keydown.enter",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.onCloseIconClick($))}),v._UZ(1,"span",11),v.qZA()}}const $e=function(H){return[H,"p-toast-message"]},rt=function(H,C,_,R){return{showTransformParams:H,hideTransformParams:C,showTransitionParams:_,hideTransitionParams:R}},Ke=function(H){return{value:"visible",params:H}},Ct=function(H){return{$implicit:H}};function qe(H,C){if(1&H){const _=v.EpF();v.TgZ(0,"p-toastItem",3),v.NdJ("onClose",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.onMessageClose($))})("@toastAnimation.start",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.onAnimationStart($))})("@toastAnimation.done",function($){v.CHM(_);const ie=v.oxw();return v.KtG(ie.onAnimationEnd($))}),v.qZA()}if(2&H){const _=C.$implicit,R=C.index,$=v.oxw();v.Q6J("message",_)("index",R)("template",$.template)("@toastAnimation",void 0)("showTransformOptions",$.showTransformOptions)("hideTransformOptions",$.hideTransformOptions)("showTransitionOptions",$.showTransitionOptions)("hideTransitionOptions",$.hideTransitionOptions)}}let Ne=(()=>{class H{constructor(_){this.zone=_,this.onClose=new v.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(_){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),_.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return H.\u0275fac=function(_){return new(_||H)(v.Y36(v.R0b))},H.\u0275cmp=v.Xpm({type:H,selectors:[["p-toastItem"]],viewQuery:function(_,R){if(1&_&&v.Gf(de,5),2&_){let $;v.iGM($=v.CRH())&&(R.containerViewChild=$.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(_,R){1&_&&(v.TgZ(0,"div",0,1),v.NdJ("mouseenter",function(){return R.onMouseEnter()})("mouseleave",function(){return R.onMouseLeave()}),v.TgZ(2,"div",2),v.YNc(3,De,7,10,"ng-container",3),v.YNc(4,Me,1,0,"ng-container",4),v.YNc(5,We,2,0,"button",5),v.qZA()()),2&_&&(v.Tol(R.message.styleClass),v.Q6J("ngClass",v.VKq(10,$e,"p-toast-message-"+R.message.severity))("@messageState",v.VKq(17,Ke,v.l5B(12,rt,R.showTransformOptions,R.hideTransformOptions,R.showTransitionOptions,R.hideTransitionOptions))),v.uIk("id",R.message.id),v.xp6(2),v.Q6J("ngClass",R.message.contentStyleClass),v.xp6(1),v.Q6J("ngIf",!R.template),v.xp6(1),v.Q6J("ngTemplateOutlet",R.template)("ngTemplateOutletContext",v.VKq(19,Ct,R.message)),v.xp6(1),v.Q6J("ngIf",!1!==R.message.closable))},dependencies:[h.mk,h.O5,h.tP,s.H],encapsulation:2,data:{animation:[(0,r.X$)("messageState",[(0,r.SB)("visible",(0,r.oB)({transform:"translateY(0)",opacity:1})),(0,r.eR)("void => *",[(0,r.oB)({transform:"{{showTransformParams}}",opacity:0}),(0,r.jt)("{{showTransitionParams}}")]),(0,r.eR)("* => void",[(0,r.jt)("{{hideTransitionParams}}",(0,r.oB)({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),H})(),tt=(()=>{class H{constructor(_,R,$){this.messageService=_,this.cd=R,this.config=$,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new v.vpe,this.id=(0,Fe.Th)()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(_=>{if(_)if(_ instanceof Array){const R=_.filter($=>this.canAdd($));this.add(R)}else this.canAdd(_)&&this.add([_])}),this.clearSubscription=this.messageService.clearObserver.subscribe(_=>{_?this.key===_&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(_){this.messages=this.messages?[...this.messages,..._]:[..._],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,..._]:[..._]),this.cd.markForCheck()}canAdd(_){let R=this.key===_.key;return R&&this.preventOpenDuplicates&&(R=!this.containsMessage(this.messages,_)),R&&this.preventDuplicates&&(R=!this.containsMessage(this.messagesArchieve,_)),R}containsMessage(_,R){return!!_&&null!=_.find($=>$.summary===R.summary&&$.detail==R.detail&&$.severity===R.severity)}ngAfterContentInit(){this.templates.forEach(_=>{_.getType(),this.template=_.template})}onMessageClose(_){this.messages.splice(_.index,1),this.onClose.emit({message:_.message}),this.cd.detectChanges()}onAnimationStart(_){"void"===_.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Fe.P9.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(_){"void"===_.toState&&this.autoZIndex&&Fe.gb.isEmpty(this.messages)&&Fe.P9.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let _="";for(let R in this.breakpoints){let $="";for(let ie in this.breakpoints[R])$+=ie+":"+this.breakpoints[R][ie]+" !important;";_+=`\n                    @media screen and (max-width: ${R}) {\n                        .p-toast[${this.id}] {\n                           ${$}\n                        }\n                    }\n                `}this.styleElement.innerHTML=_}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Fe.P9.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return H.\u0275fac=function(_){return new(_||H)(v.Y36(he.ez),v.Y36(v.sBO),v.Y36(he.b4))},H.\u0275cmp=v.Xpm({type:H,selectors:[["p-toast"]],contentQueries:function(_,R,$){if(1&_&&v.Suo($,he.jx,4),2&_){let ie;v.iGM(ie=v.CRH())&&(R.templates=ie)}},viewQuery:function(_,R){if(1&_&&v.Gf(de,5),2&_){let $;v.iGM($=v.CRH())&&(R.containerViewChild=$.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(_,R){1&_&&(v.TgZ(0,"div",0,1),v.YNc(2,qe,1,8,"p-toastItem",2),v.qZA()),2&_&&(v.Tol(R.styleClass),v.Q6J("ngClass","p-toast p-component p-toast-"+R.position)("ngStyle",R.style),v.xp6(2),v.Q6J("ngForOf",R.messages))},dependencies:[h.mk,h.sg,h.PC,Ne],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[(0,r.X$)("toastAnimation",[(0,r.eR)(":enter, :leave",[(0,r.IO)("@*",(0,r.pV)())])])]},changeDetection:0}),H})(),Ve=(()=>{class H{}return H.\u0275fac=function(_){return new(_||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[h.ez,s.T,he.m8]}),H})();class Xe{constructor(){this.title="games-app"}}function vt(H){return new v.vHH(3e3,!1)}function hn(){return typeof window<"u"&&typeof window.document<"u"}function X(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function F(H){switch(H.length){case 0:return new r.ZN;case 1:return H[0];default:return new r.ZE(H)}}function I(H,C,_,R,$=new Map,ie=new Map){const we=[],Te=[];let Ze=-1,ut=null;if(R.forEach(Tt=>{const Nt=Tt.get("offset"),cn=Nt==Ze,yn=cn&&ut||new Map;Tt.forEach((Jt,qt)=>{let wn=qt,Rn=Jt;if("offset"!==qt)switch(wn=C.normalizePropertyName(wn,we),Rn){case r.k1:Rn=$.get(qt);break;case r.l3:Rn=ie.get(qt);break;default:Rn=C.normalizeStyleValue(qt,wn,Rn,we)}yn.set(wn,Rn)}),cn||Te.push(yn),ut=yn,Ze=Nt}),we.length)throw function _e(H){return new v.vHH(3502,!1)}();return Te}function W(H,C,_,R){switch(C){case"start":H.onStart(()=>R(_&&me(_,"start",H)));break;case"done":H.onDone(()=>R(_&&me(_,"done",H)));break;case"destroy":H.onDestroy(()=>R(_&&me(_,"destroy",H)))}}function me(H,C,_){const ie=ze(H.element,H.triggerName,H.fromState,H.toState,C||H.phaseName,_.totalTime??H.totalTime,!!_.disabled),we=H._data;return null!=we&&(ie._data=we),ie}function ze(H,C,_,R,$="",ie=0,we){return{element:H,triggerName:C,fromState:_,toState:R,phaseName:$,totalTime:ie,disabled:!!we}}function st(H,C,_){let R=H.get(C);return R||H.set(C,R=_),R}function Xt(H){const C=H.indexOf(":");return[H.substring(1,C),H.slice(C+1)]}Xe.\u0275fac=function(C){return new(C||Xe)},Xe.\u0275cmp=v.Xpm({type:Xe,selectors:[["app-root"]],decls:2,vars:0,template:function(C,_){1&C&&v._UZ(0,"p-toast")(1,"router-outlet")},dependencies:[ce.lC,tt]});let ln=(H,C)=>!1,Xn=(H,C,_)=>[],Pn=null;function ci(H){const C=H.parentNode||H.host;return C===Pn?null:C}(X()||typeof Element<"u")&&(hn()?(Pn=(()=>document.documentElement)(),ln=(H,C)=>{for(;C;){if(C===H)return!0;C=ci(C)}return!1}):ln=(H,C)=>H.contains(C),Xn=(H,C,_)=>{if(_)return Array.from(H.querySelectorAll(C));const R=H.querySelector(C);return R?[R]:[]});let ei=null,Re=!1;const Je=ln,bt=Xn;let $t=(()=>{class H{validateStyleProperty(_){return function se(H){ei||(ei=function be(){return typeof document<"u"?document.body:null}()||{},Re=!!ei.style&&"WebkitAppearance"in ei.style);let C=!0;return ei.style&&!function yi(H){return"ebkit"==H.substring(1,6)}(H)&&(C=H in ei.style,!C&&Re&&(C="Webkit"+H.charAt(0).toUpperCase()+H.slice(1)in ei.style)),C}(_)}matchesElement(_,R){return!1}containsElement(_,R){return Je(_,R)}getParentElement(_){return ci(_)}query(_,R,$){return bt(_,R,$)}computeStyle(_,R,$){return $||""}animate(_,R,$,ie,we,Te=[],Ze){return new r.ZN($,ie)}}return H.\u0275fac=function(_){return new(_||H)},H.\u0275prov=v.Yz7({token:H,factory:H.\u0275fac}),H})(),Et=(()=>{class H{}return H.NOOP=new $t,H})();const rn=1e3,Wn="ng-enter",Kn="ng-leave",At="ng-trigger",Zt=".ng-trigger",Hn="ng-animating",qn=".ng-animating";function Zn(H){if("number"==typeof H)return H;const C=H.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:Un(parseFloat(C[1]),C[2])}function Un(H,C){return"s"===C?H*rn:H}function Pi(H,C,_){return H.hasOwnProperty("duration")?H:function Mn(H,C,_){let $,ie=0,we="";if("string"==typeof H){const Te=H.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Te)return C.push(vt()),{duration:0,delay:0,easing:""};$=Un(parseFloat(Te[1]),Te[2]);const Ze=Te[3];null!=Ze&&(ie=Un(parseFloat(Ze),Te[4]));const ut=Te[5];ut&&(we=ut)}else $=H;if(!_){let Te=!1,Ze=C.length;$<0&&(C.push(function Mt(){return new v.vHH(3100,!1)}()),Te=!0),ie<0&&(C.push(function xt(){return new v.vHH(3101,!1)}()),Te=!0),Te&&C.splice(Ze,0,vt())}return{duration:$,delay:ie,easing:we}}(H,C,_)}function ui(H,C={}){return Object.keys(H).forEach(_=>{C[_]=H[_]}),C}function Ki(H){const C=new Map;return Object.keys(H).forEach(_=>{C.set(_,H[_])}),C}function di(H,C=new Map,_){if(_)for(let[R,$]of _)C.set(R,$);for(let[R,$]of H)C.set(R,$);return C}function ns(H,C,_){return _?C+":"+_+";":""}function ni(H){let C="";for(let _=0;_<H.style.length;_++){const R=H.style.item(_);C+=ns(0,R,H.style.getPropertyValue(R))}for(const _ in H.style)H.style.hasOwnProperty(_)&&!_.startsWith("_")&&(C+=ns(0,yr(_),H.style[_]));H.setAttribute("style",C)}function kn(H,C,_){H.style&&(C.forEach((R,$)=>{const ie=rs($);_&&!_.has($)&&_.set($,H.style[ie]),H.style[ie]=R}),X()&&ni(H))}function Mi(H,C){H.style&&(C.forEach((_,R)=>{const $=rs(R);H.style[$]=""}),X()&&ni(H))}function Vi(H){return Array.isArray(H)?1==H.length?H[0]:(0,r.vP)(H):H}const zi=new RegExp("{{\\s*(.+?)\\s*}}","g");function Nr(H){let C=[];if("string"==typeof H){let _;for(;_=zi.exec(H);)C.push(_[1]);zi.lastIndex=0}return C}function An(H,C,_){const R=H.toString(),$=R.replace(zi,(ie,we)=>{let Te=C[we];return null==Te&&(_.push(function It(H){return new v.vHH(3003,!1)}()),Te=""),Te.toString()});return $==R?H:$}function Br(H){const C=[];let _=H.next();for(;!_.done;)C.push(_.value),_=H.next();return C}const is=/-+([a-z0-9])/g;function rs(H){return H.replace(is,(...C)=>C[1].toUpperCase())}function yr(H){return H.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function In(H,C,_){switch(C.type){case 7:return H.visitTrigger(C,_);case 0:return H.visitState(C,_);case 1:return H.visitTransition(C,_);case 2:return H.visitSequence(C,_);case 3:return H.visitGroup(C,_);case 4:return H.visitAnimate(C,_);case 5:return H.visitKeyframes(C,_);case 6:return H.visitStyle(C,_);case 8:return H.visitReference(C,_);case 9:return H.visitAnimateChild(C,_);case 10:return H.visitAnimateRef(C,_);case 11:return H.visitQuery(C,_);case 12:return H.visitStagger(C,_);default:throw function Lt(H){return new v.vHH(3004,!1)}()}}function bs(H,C){return window.getComputedStyle(H)[C]}const jr="*";function Cr(H,C){const _=[];return"string"==typeof H?H.split(/\s*,\s*/).forEach(R=>function Hi(H,C,_){if(":"==H[0]){const Ze=function eo(H,C){switch(H){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(_,R)=>parseFloat(R)>parseFloat(_);case":decrement":return(_,R)=>parseFloat(R)<parseFloat(_);default:return C.push(function jn(H){return new v.vHH(3016,!1)}()),"* => *"}}(H,_);if("function"==typeof Ze)return void C.push(Ze);H=Ze}const R=H.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==R||R.length<4)return _.push(function wi(H){return new v.vHH(3015,!1)}()),C;const $=R[1],ie=R[2],we=R[3];C.push(zr($,we));"<"==ie[0]&&!($==jr&&we==jr)&&C.push(zr(we,$))}(R,_,C)):_.push(H),_}const Ur=new Set(["true","1"]),br=new Set(["false","0"]);function zr(H,C){const _=Ur.has(H)||br.has(H),R=Ur.has(C)||br.has(C);return($,ie)=>{let we=H==jr||H==$,Te=C==jr||C==ie;return!we&&_&&"boolean"==typeof $&&(we=$?Ur.has(H):br.has(H)),!Te&&R&&"boolean"==typeof ie&&(Te=ie?Ur.has(C):br.has(C)),we&&Te}}const os=new RegExp("s*:selfs*,?","g");function Gr(H,C,_,R){return new to(H).build(C,_,R)}class to{constructor(C){this._driver=C}build(C,_,R){const $=new Hs(_);return this._resetContextStyleTimingState($),In(this,Vi(C),$)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,_){let R=_.queryCount=0,$=_.depCount=0;const ie=[],we=[];return"@"==C.name.charAt(0)&&_.errors.push(function zt(){return new v.vHH(3006,!1)}()),C.definitions.forEach(Te=>{if(this._resetContextStyleTimingState(_),0==Te.type){const Ze=Te,ut=Ze.name;ut.toString().split(/\s*,\s*/).forEach(Tt=>{Ze.name=Tt,ie.push(this.visitState(Ze,_))}),Ze.name=ut}else if(1==Te.type){const Ze=this.visitTransition(Te,_);R+=Ze.queryCount,$+=Ze.depCount,we.push(Ze)}else _.errors.push(function mt(){return new v.vHH(3007,!1)}())}),{type:7,name:C.name,states:ie,transitions:we,queryCount:R,depCount:$,options:null}}visitState(C,_){const R=this.visitStyle(C.styles,_),$=C.options&&C.options.params||null;if(R.containsDynamicStyles){const ie=new Set,we=$||{};R.styles.forEach(Te=>{Te instanceof Map&&Te.forEach(Ze=>{Nr(Ze).forEach(ut=>{we.hasOwnProperty(ut)||ie.add(ut)})})}),ie.size&&(Br(ie.values()),_.errors.push(function Qe(H,C){return new v.vHH(3008,!1)}()))}return{type:0,name:C.name,style:R,options:$?{params:$}:null}}visitTransition(C,_){_.queryCount=0,_.depCount=0;const R=In(this,Vi(C.animation),_);return{type:1,matchers:Cr(C.expr,_.errors),animation:R,queryCount:_.queryCount,depCount:_.depCount,options:Gi(C.options)}}visitSequence(C,_){return{type:2,steps:C.steps.map(R=>In(this,R,_)),options:Gi(C.options)}}visitGroup(C,_){const R=_.currentTime;let $=0;const ie=C.steps.map(we=>{_.currentTime=R;const Te=In(this,we,_);return $=Math.max($,_.currentTime),Te});return _.currentTime=$,{type:3,steps:ie,options:Gi(C.options)}}visitAnimate(C,_){const R=function $r(H,C){if(H.hasOwnProperty("duration"))return H;if("number"==typeof H)return Wi(Pi(H,C).duration,0,"");const _=H;if(_.split(/\s+/).some(ie=>"{"==ie.charAt(0)&&"{"==ie.charAt(1))){const ie=Wi(0,0,"");return ie.dynamic=!0,ie.strValue=_,ie}const $=Pi(_,C);return Wi($.duration,$.delay,$.easing)}(C.timings,_.errors);_.currentAnimateTimings=R;let $,ie=C.styles?C.styles:(0,r.oB)({});if(5==ie.type)$=this.visitKeyframes(ie,_);else{let we=C.styles,Te=!1;if(!we){Te=!0;const ut={};R.easing&&(ut.easing=R.easing),we=(0,r.oB)(ut)}_.currentTime+=R.duration+R.delay;const Ze=this.visitStyle(we,_);Ze.isEmptyStep=Te,$=Ze}return _.currentAnimateTimings=null,{type:4,timings:R,style:$,options:null}}visitStyle(C,_){const R=this._makeStyleAst(C,_);return this._validateStyleAst(R,_),R}_makeStyleAst(C,_){const R=[],$=Array.isArray(C.styles)?C.styles:[C.styles];for(let Te of $)"string"==typeof Te?Te===r.l3?R.push(Te):_.errors.push(new v.vHH(3002,!1)):R.push(Ki(Te));let ie=!1,we=null;return R.forEach(Te=>{if(Te instanceof Map&&(Te.has("easing")&&(we=Te.get("easing"),Te.delete("easing")),!ie))for(let Ze of Te.values())if(Ze.toString().indexOf("{{")>=0){ie=!0;break}}),{type:6,styles:R,easing:we,offset:C.offset,containsDynamicStyles:ie,options:null}}_validateStyleAst(C,_){const R=_.currentAnimateTimings;let $=_.currentTime,ie=_.currentTime;R&&ie>0&&(ie-=R.duration+R.delay),C.styles.forEach(we=>{"string"!=typeof we&&we.forEach((Te,Ze)=>{const ut=_.collectedStyles.get(_.currentQuerySelector),Tt=ut.get(Ze);let Nt=!0;Tt&&(ie!=$&&ie>=Tt.startTime&&$<=Tt.endTime&&(_.errors.push(function ye(H,C,_,R,$){return new v.vHH(3010,!1)}()),Nt=!1),ie=Tt.startTime),Nt&&ut.set(Ze,{startTime:ie,endTime:$}),_.options&&function Ii(H,C,_){const R=C.params||{},$=Nr(H);$.length&&$.forEach(ie=>{R.hasOwnProperty(ie)||_.push(function nt(H){return new v.vHH(3001,!1)}())})}(Te,_.options,_.errors)})})}visitKeyframes(C,_){const R={type:5,styles:[],options:null};if(!_.currentAnimateTimings)return _.errors.push(function Ie(){return new v.vHH(3011,!1)}()),R;let ie=0;const we=[];let Te=!1,Ze=!1,ut=0;const Tt=C.steps.map(Rn=>{const Jn=this._makeStyleAst(Rn,_);let Li=null!=Jn.offset?Jn.offset:function Wr(H){if("string"==typeof H)return null;let C=null;if(Array.isArray(H))H.forEach(_=>{if(_ instanceof Map&&_.has("offset")){const R=_;C=parseFloat(R.get("offset")),R.delete("offset")}});else if(H instanceof Map&&H.has("offset")){const _=H;C=parseFloat(_.get("offset")),_.delete("offset")}return C}(Jn.styles),ri=0;return null!=Li&&(ie++,ri=Jn.offset=Li),Ze=Ze||ri<0||ri>1,Te=Te||ri<ut,ut=ri,we.push(ri),Jn});Ze&&_.errors.push(function yt(){return new v.vHH(3012,!1)}()),Te&&_.errors.push(function Bt(){return new v.vHH(3200,!1)}());const Nt=C.steps.length;let cn=0;ie>0&&ie<Nt?_.errors.push(function dn(){return new v.vHH(3202,!1)}()):0==ie&&(cn=1/(Nt-1));const yn=Nt-1,Jt=_.currentTime,qt=_.currentAnimateTimings,wn=qt.duration;return Tt.forEach((Rn,Jn)=>{const Li=cn>0?Jn==yn?1:cn*Jn:we[Jn],ri=Li*wn;_.currentTime=Jt+qt.delay+ri,qt.duration=ri,this._validateStyleAst(Rn,_),Rn.offset=Li,R.styles.push(Rn)}),R}visitReference(C,_){return{type:8,animation:In(this,Vi(C.animation),_),options:Gi(C.options)}}visitAnimateChild(C,_){return _.depCount++,{type:9,options:Gi(C.options)}}visitAnimateRef(C,_){return{type:10,animation:this.visitReference(C.animation,_),options:Gi(C.options)}}visitQuery(C,_){const R=_.currentQuerySelector,$=C.options||{};_.queryCount++,_.currentQuery=C;const[ie,we]=function as(H){const C=!!H.split(/\s*,\s*/).find(_=>":self"==_);return C&&(H=H.replace(os,"")),H=H.replace(/@\*/g,Zt).replace(/@\w+/g,_=>Zt+"-"+_.slice(1)).replace(/:animating/g,qn),[H,C]}(C.selector);_.currentQuerySelector=R.length?R+" "+ie:ie,st(_.collectedStyles,_.currentQuerySelector,new Map);const Te=In(this,Vi(C.animation),_);return _.currentQuery=null,_.currentQuerySelector=R,{type:11,selector:ie,limit:$.limit||0,optional:!!$.optional,includeSelf:we,animation:Te,originalSelector:C.selector,options:Gi(C.options)}}visitStagger(C,_){_.currentQuery||_.errors.push(function bi(){return new v.vHH(3013,!1)}());const R="full"===C.timings?{duration:0,delay:0,easing:"full"}:Pi(C.timings,_.errors,!0);return{type:12,animation:In(this,Vi(C.animation),_),timings:R,options:null}}}class Hs{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gi(H){return H?(H=ui(H)).params&&(H.params=function Vo(H){return H?ui(H):null}(H.params)):H={},H}function Wi(H,C,_){return{duration:H,delay:C,easing:_}}function Ss(H,C,_,R,$,ie,we=null,Te=!1){return{type:1,element:H,keyframes:C,preStyleProps:_,postStyleProps:R,duration:$,delay:ie,totalTime:$+ie,easing:we,subTimeline:Te}}class Ri{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,_){let R=this._map.get(C);R||this._map.set(C,R=[]),R.push(..._)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const ls=new RegExp(":enter","g"),cs=new RegExp(":leave","g");function or(H,C,_,R,$,ie=new Map,we=new Map,Te,Ze,ut=[]){return(new wr).buildKeyframes(H,C,_,R,$,ie,we,Te,Ze,ut)}class wr{buildKeyframes(C,_,R,$,ie,we,Te,Ze,ut,Tt=[]){ut=ut||new Ri;const Nt=new ar(C,_,ut,$,ie,Tt,[]);Nt.options=Ze;const cn=Ze.delay?Zn(Ze.delay):0;Nt.currentTimeline.delayNextStep(cn),Nt.currentTimeline.setStyles([we],null,Nt.errors,Ze),In(this,R,Nt);const yn=Nt.timelines.filter(Jt=>Jt.containsAnimation());if(yn.length&&Te.size){let Jt;for(let qt=yn.length-1;qt>=0;qt--){const wn=yn[qt];if(wn.element===_){Jt=wn;break}}Jt&&!Jt.allowOnlyTimelineStyles()&&Jt.setStyles([Te],null,Nt.errors,Ze)}return yn.length?yn.map(Jt=>Jt.buildKeyframes()):[Ss(_,[],[],[],0,cn,"",!1)]}visitTrigger(C,_){}visitState(C,_){}visitTransition(C,_){}visitAnimateChild(C,_){const R=_.subInstructions.get(_.element);if(R){const $=_.createSubContext(C.options),ie=_.currentTimeline.currentTime,we=this._visitSubInstructions(R,$,$.options);ie!=we&&_.transformIntoNewTimeline(we)}_.previousNode=C}visitAnimateRef(C,_){const R=_.createSubContext(C.options);R.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],_,R),this.visitReference(C.animation,R),_.transformIntoNewTimeline(R.currentTimeline.currentTime),_.previousNode=C}_applyAnimationRefDelays(C,_,R){for(const $ of C){const ie=$?.delay;if(ie){const we="number"==typeof ie?ie:Zn(An(ie,$?.params??{},_.errors));R.delayNextStep(we)}}}_visitSubInstructions(C,_,R){let ie=_.currentTimeline.currentTime;const we=null!=R.duration?Zn(R.duration):null,Te=null!=R.delay?Zn(R.delay):null;return 0!==we&&C.forEach(Ze=>{const ut=_.appendInstructionToTimeline(Ze,we,Te);ie=Math.max(ie,ut.duration+ut.delay)}),ie}visitReference(C,_){_.updateOptions(C.options,!0),In(this,C.animation,_),_.previousNode=C}visitSequence(C,_){const R=_.subContextCount;let $=_;const ie=C.options;if(ie&&(ie.params||ie.delay)&&($=_.createSubContext(ie),$.transformIntoNewTimeline(),null!=ie.delay)){6==$.previousNode.type&&($.currentTimeline.snapshotCurrentStyles(),$.previousNode=Xr);const we=Zn(ie.delay);$.delayNextStep(we)}C.steps.length&&(C.steps.forEach(we=>In(this,we,$)),$.currentTimeline.applyStylesToKeyframe(),$.subContextCount>R&&$.transformIntoNewTimeline()),_.previousNode=C}visitGroup(C,_){const R=[];let $=_.currentTimeline.currentTime;const ie=C.options&&C.options.delay?Zn(C.options.delay):0;C.steps.forEach(we=>{const Te=_.createSubContext(C.options);ie&&Te.delayNextStep(ie),In(this,we,Te),$=Math.max($,Te.currentTimeline.currentTime),R.push(Te.currentTimeline)}),R.forEach(we=>_.currentTimeline.mergeTimelineCollectedStyles(we)),_.transformIntoNewTimeline($),_.previousNode=C}_visitTiming(C,_){if(C.dynamic){const R=C.strValue;return Pi(_.params?An(R,_.params,_.errors):R,_.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,_){const R=_.currentAnimateTimings=this._visitTiming(C.timings,_),$=_.currentTimeline;R.delay&&(_.incrementTime(R.delay),$.snapshotCurrentStyles());const ie=C.style;5==ie.type?this.visitKeyframes(ie,_):(_.incrementTime(R.duration),this.visitStyle(ie,_),$.applyStylesToKeyframe()),_.currentAnimateTimings=null,_.previousNode=C}visitStyle(C,_){const R=_.currentTimeline,$=_.currentAnimateTimings;!$&&R.hasCurrentStyleProperties()&&R.forwardFrame();const ie=$&&$.easing||C.easing;C.isEmptyStep?R.applyEmptyStep(ie):R.setStyles(C.styles,ie,_.errors,_.options),_.previousNode=C}visitKeyframes(C,_){const R=_.currentAnimateTimings,$=_.currentTimeline.duration,ie=R.duration,Te=_.createSubContext().currentTimeline;Te.easing=R.easing,C.styles.forEach(Ze=>{Te.forwardTime((Ze.offset||0)*ie),Te.setStyles(Ze.styles,Ze.easing,_.errors,_.options),Te.applyStylesToKeyframe()}),_.currentTimeline.mergeTimelineCollectedStyles(Te),_.transformIntoNewTimeline($+ie),_.previousNode=C}visitQuery(C,_){const R=_.currentTimeline.currentTime,$=C.options||{},ie=$.delay?Zn($.delay):0;ie&&(6===_.previousNode.type||0==R&&_.currentTimeline.hasCurrentStyleProperties())&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=Xr);let we=R;const Te=_.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!$.optional,_.errors);_.currentQueryTotal=Te.length;let Ze=null;Te.forEach((ut,Tt)=>{_.currentQueryIndex=Tt;const Nt=_.createSubContext(C.options,ut);ie&&Nt.delayNextStep(ie),ut===_.element&&(Ze=Nt.currentTimeline),In(this,C.animation,Nt),Nt.currentTimeline.applyStylesToKeyframe(),we=Math.max(we,Nt.currentTimeline.currentTime)}),_.currentQueryIndex=0,_.currentQueryTotal=0,_.transformIntoNewTimeline(we),Ze&&(_.currentTimeline.mergeTimelineCollectedStyles(Ze),_.currentTimeline.snapshotCurrentStyles()),_.previousNode=C}visitStagger(C,_){const R=_.parentContext,$=_.currentTimeline,ie=C.timings,we=Math.abs(ie.duration),Te=we*(_.currentQueryTotal-1);let Ze=we*_.currentQueryIndex;switch(ie.duration<0?"reverse":ie.easing){case"reverse":Ze=Te-Ze;break;case"full":Ze=R.currentStaggerTime}const Tt=_.currentTimeline;Ze&&Tt.delayNextStep(Ze);const Nt=Tt.currentTime;In(this,C.animation,_),_.previousNode=C,R.currentStaggerTime=$.currentTime-Nt+($.startTime-R.currentTimeline.startTime)}}const Xr={};class ar{constructor(C,_,R,$,ie,we,Te,Ze){this._driver=C,this.element=_,this.subInstructions=R,this._enterClassName=$,this._leaveClassName=ie,this.errors=we,this.timelines=Te,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ze||new qr(this._driver,_,0),Te.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,_){if(!C)return;const R=C;let $=this.options;null!=R.duration&&($.duration=Zn(R.duration)),null!=R.delay&&($.delay=Zn(R.delay));const ie=R.params;if(ie){let we=$.params;we||(we=this.options.params={}),Object.keys(ie).forEach(Te=>{(!_||!we.hasOwnProperty(Te))&&(we[Te]=An(ie[Te],we,this.errors))})}}_copyOptions(){const C={};if(this.options){const _=this.options.params;if(_){const R=C.params={};Object.keys(_).forEach($=>{R[$]=_[$]})}}return C}createSubContext(C=null,_,R){const $=_||this.element,ie=new ar(this._driver,$,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork($,R||0));return ie.previousNode=this.previousNode,ie.currentAnimateTimings=this.currentAnimateTimings,ie.options=this._copyOptions(),ie.updateOptions(C),ie.currentQueryIndex=this.currentQueryIndex,ie.currentQueryTotal=this.currentQueryTotal,ie.parentContext=this,this.subContextCount++,ie}transformIntoNewTimeline(C){return this.previousNode=Xr,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,_,R){const $={duration:_??C.duration,delay:this.currentTimeline.currentTime+(R??0)+C.delay,easing:""},ie=new ki(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,$,C.stretchStartingKeyframe);return this.timelines.push(ie),$}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,_,R,$,ie,we){let Te=[];if($&&Te.push(this.element),C.length>0){C=(C=C.replace(ls,"."+this._enterClassName)).replace(cs,"."+this._leaveClassName);let ut=this._driver.query(this.element,C,1!=R);0!==R&&(ut=R<0?ut.slice(ut.length+R,ut.length):ut.slice(0,R)),Te.push(...ut)}return!ie&&0==Te.length&&we.push(function En(H){return new v.vHH(3014,!1)}()),Te}}class qr{constructor(C,_,R,$){this._driver=C,this.element=_,this.startTime=R,this._elementTimelineStylesLookup=$,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(_),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(_,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const _=1===this._keyframes.size&&this._pendingStyles.size;this.duration||_?(this.forwardTime(this.currentTime+C),_&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,_){return this.applyStylesToKeyframe(),new qr(this._driver,C,_||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,_){this._localTimelineStyles.set(C,_),this._globalTimelineStyles.set(C,_),this._styleSummary.set(C,{time:this.currentTime,value:_})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[_,R]of this._globalTimelineStyles)this._backFill.set(_,R||r.l3),this._currentKeyframe.set(_,r.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,_,R,$){_&&this._previousKeyframe.set("easing",_);const ie=$&&$.params||{},we=function Ds(H,C){const _=new Map;let R;return H.forEach($=>{if("*"===$){R=R||C.keys();for(let ie of R)_.set(ie,r.l3)}else di($,_)}),_}(C,this._globalTimelineStyles);for(let[Te,Ze]of we){const ut=An(Ze,ie,R);this._pendingStyles.set(Te,ut),this._localTimelineStyles.has(Te)||this._backFill.set(Te,this._globalTimelineStyles.get(Te)??r.l3),this._updateStyle(Te,ut)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,_)=>{this._currentKeyframe.set(_,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,_)=>{this._currentKeyframe.has(_)||this._currentKeyframe.set(_,C)}))}snapshotCurrentStyles(){for(let[C,_]of this._localTimelineStyles)this._pendingStyles.set(C,_),this._updateStyle(C,_)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let _ in this._currentKeyframe)C.push(_);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((_,R)=>{const $=this._styleSummary.get(R);(!$||_.time>$.time)&&this._updateStyle(R,_.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,_=new Set,R=1===this._keyframes.size&&0===this.duration;let $=[];this._keyframes.forEach((Te,Ze)=>{const ut=di(Te,new Map,this._backFill);ut.forEach((Tt,Nt)=>{Tt===r.k1?C.add(Nt):Tt===r.l3&&_.add(Nt)}),R||ut.set("offset",Ze/this.duration),$.push(ut)});const ie=C.size?Br(C.values()):[],we=_.size?Br(_.values()):[];if(R){const Te=$[0],Ze=new Map(Te);Te.set("offset",0),Ze.set("offset",1),$=[Te,Ze]}return Ss(this.element,$,ie,we,this.duration,this.startTime,this.easing,!1)}}class ki extends qr{constructor(C,_,R,$,ie,we,Te=!1){super(C,_,we.delay),this.keyframes=R,this.preStyleProps=$,this.postStyleProps=ie,this._stretchStartingKeyframe=Te,this.timings={duration:we.duration,delay:we.delay,easing:we.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:_,duration:R,easing:$}=this.timings;if(this._stretchStartingKeyframe&&_){const ie=[],we=R+_,Te=_/we,Ze=di(C[0]);Ze.set("offset",0),ie.push(Ze);const ut=di(C[0]);ut.set("offset",Or(Te)),ie.push(ut);const Tt=C.length-1;for(let Nt=1;Nt<=Tt;Nt++){let cn=di(C[Nt]);const yn=cn.get("offset");cn.set("offset",Or((_+yn*R)/we)),ie.push(cn)}R=we,_=0,$="",C=ie}return Ss(this.element,C,this.preStyleProps,this.postStyleProps,R,_,$,!0)}}function Or(H,C=3){const _=Math.pow(10,C-1);return Math.round(H*_)/_}class Es{}const zn=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class us extends Es{normalizePropertyName(C,_){return rs(C)}normalizeStyleValue(C,_,R,$){let ie="";const we=R.toString().trim();if(zn.has(_)&&0!==R&&"0"!==R)if("number"==typeof R)ie="px";else{const Te=R.match(/^[+-]?[\d\.]+([a-z]*)$/);Te&&0==Te[1].length&&$.push(function Gt(H,C){return new v.vHH(3005,!1)}())}return we+ie}}function Qi(H,C,_,R,$,ie,we,Te,Ze,ut,Tt,Nt,cn){return{type:0,element:H,triggerName:C,isRemovalTransition:$,fromState:_,fromStyles:ie,toState:R,toStyles:we,timelines:Te,queriedElements:Ze,preStyleProps:ut,postStyleProps:Tt,totalTime:Nt,errors:cn}}const lr={};class Ei{constructor(C,_,R){this._triggerName=C,this.ast=_,this._stateStyles=R}match(C,_,R,$){return function cr(H,C,_,R,$){return H.some(ie=>ie(C,_,R,$))}(this.ast.matchers,C,_,R,$)}buildStyles(C,_,R){let $=this._stateStyles.get("*");return void 0!==C&&($=this._stateStyles.get(C?.toString())||$),$?$.buildStyles(_,R):new Map}build(C,_,R,$,ie,we,Te,Ze,ut,Tt){const Nt=[],cn=this.ast.options&&this.ast.options.params||lr,Jt=this.buildStyles(R,Te&&Te.params||lr,Nt),qt=Ze&&Ze.params||lr,wn=this.buildStyles($,qt,Nt),Rn=new Set,Jn=new Map,Li=new Map,ri="void"===$,er={params:no(qt,cn),delay:this.ast.options?.delay},gr=Tt?[]:or(C,_,this.ast.animation,ie,we,Jt,wn,er,ut,Nt);let Ni=0;if(gr.forEach(Qr=>{Ni=Math.max(Qr.duration+Qr.delay,Ni)}),Nt.length)return Qi(_,this._triggerName,R,$,ri,Jt,wn,[],[],Jn,Li,Ni,Nt);gr.forEach(Qr=>{const kr=Qr.element,Ca=st(Jn,kr,new Set);Qr.preStyleProps.forEach(Ys=>Ca.add(Ys));const xo=st(Li,kr,new Set);Qr.postStyleProps.forEach(Ys=>xo.add(Ys)),kr!==_&&Rn.add(kr)});const xn=Br(Rn.values());return Qi(_,this._triggerName,R,$,ri,Jt,wn,gr,xn,Jn,Li,Ni)}}function no(H,C){const _=ui(C);for(const R in H)H.hasOwnProperty(R)&&null!=H[R]&&(_[R]=H[R]);return _}class ur{constructor(C,_,R){this.styles=C,this.defaultParams=_,this.normalizer=R}buildStyles(C,_){const R=new Map,$=ui(this.defaultParams);return Object.keys(C).forEach(ie=>{const we=C[ie];null!==we&&($[ie]=we)}),this.styles.styles.forEach(ie=>{"string"!=typeof ie&&ie.forEach((we,Te)=>{we&&(we=An(we,$,_));const Ze=this.normalizer.normalizePropertyName(Te,_);we=this.normalizer.normalizeStyleValue(Te,Ze,we,_),R.set(Te,we)})}),R}}class Dr{constructor(C,_,R){this.name=C,this.ast=_,this._normalizer=R,this.transitionFactories=[],this.states=new Map,_.states.forEach($=>{this.states.set($.name,new ur($.style,$.options&&$.options.params||{},R))}),U(this.states,"true","1"),U(this.states,"false","0"),_.transitions.forEach($=>{this.transitionFactories.push(new Ei(C,$,this.states))}),this.fallbackTransition=function sn(H,C,_){return new Ei(H,{type:1,animation:{type:2,steps:[],options:null},matchers:[(we,Te)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,_,R,$){return this.transitionFactories.find(we=>we.match(C,_,R,$))||null}matchStyles(C,_,R){return this.fallbackTransition.buildStyles(C,_,R)}}function U(H,C,_){H.has(C)?H.has(_)||H.set(_,H.get(C)):H.has(_)&&H.set(C,H.get(_))}const V=new Ri;class N{constructor(C,_,R){this.bodyNode=C,this._driver=_,this._normalizer=R,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,_){const R=[],$=[],ie=Gr(this._driver,_,R,$);if(R.length)throw function Oe(H){return new v.vHH(3503,!1)}();this._animations.set(C,ie)}_buildPlayer(C,_,R){const $=C.element,ie=I(0,this._normalizer,0,C.keyframes,_,R);return this._driver.animate($,ie,C.duration,C.delay,C.easing,[],!0)}create(C,_,R={}){const $=[],ie=this._animations.get(C);let we;const Te=new Map;if(ie?(we=or(this._driver,_,ie,Wn,Kn,new Map,new Map,R,V,$),we.forEach(Tt=>{const Nt=st(Te,Tt.element,new Map);Tt.postStyleProps.forEach(cn=>Nt.set(cn,null))})):($.push(function _t(){return new v.vHH(3300,!1)}()),we=[]),$.length)throw function Ye(H){return new v.vHH(3504,!1)}();Te.forEach((Tt,Nt)=>{Tt.forEach((cn,yn)=>{Tt.set(yn,this._driver.computeStyle(Nt,yn,r.l3))})});const ut=F(we.map(Tt=>{const Nt=Te.get(Tt.element);return this._buildPlayer(Tt,new Map,Nt)}));return this._playersById.set(C,ut),ut.onDestroy(()=>this.destroy(C)),this.players.push(ut),ut}destroy(C){const _=this._getPlayer(C);_.destroy(),this._playersById.delete(C);const R=this.players.indexOf(_);R>=0&&this.players.splice(R,1)}_getPlayer(C){const _=this._playersById.get(C);if(!_)throw function Wt(H){return new v.vHH(3301,!1)}();return _}listen(C,_,R,$){const ie=ze(_,"","","");return W(this._getPlayer(C),R,ie,$),()=>{}}command(C,_,R,$){if("register"==R)return void this.register(C,$[0]);if("create"==R)return void this.create(C,_,$[0]||{});const ie=this._getPlayer(C);switch(R){case"play":ie.play();break;case"pause":ie.pause();break;case"reset":ie.reset();break;case"restart":ie.restart();break;case"finish":ie.finish();break;case"init":ie.init();break;case"setPosition":ie.setPosition(parseFloat($[0]));break;case"destroy":this.destroy(C)}}}const re="ng-animate-queued",Rt="ng-animate-disabled",gn=[],Pr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sn="__ng_removed";class hr{get params(){return this.options.params}constructor(C,_=""){this.namespaceId=_;const R=C&&C.hasOwnProperty("value");if(this.value=function Co(H){return H??null}(R?C.value:C),R){const ie=ui(C);delete ie.value,this.options=ie}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const _=C.params;if(_){const R=this.options.params;Object.keys(_).forEach($=>{null==R[$]&&(R[$]=_[$])})}}}const Yi="void",_i=new hr(Yi);class io{constructor(C,_,R){this.id=C,this.hostElement=_,this._engine=R,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,ji(_,this._hostClassName)}listen(C,_,R,$){if(!this._triggers.has(_))throw function Ht(H,C){return new v.vHH(3302,!1)}();if(null==R||0==R.length)throw function _n(H){return new v.vHH(3303,!1)}();if(!function fr(H){return"start"==H||"done"==H}(R))throw function Ut(H,C){return new v.vHH(3400,!1)}();const ie=st(this._elementListeners,C,[]),we={name:_,phase:R,callback:$};ie.push(we);const Te=st(this._engine.statesByElement,C,new Map);return Te.has(_)||(ji(C,At),ji(C,At+"-"+_),Te.set(_,_i)),()=>{this._engine.afterFlush(()=>{const Ze=ie.indexOf(we);Ze>=0&&ie.splice(Ze,1),this._triggers.has(_)||Te.delete(_)})}}register(C,_){return!this._triggers.has(C)&&(this._triggers.set(C,_),!0)}_getTrigger(C){const _=this._triggers.get(C);if(!_)throw function Tn(H){return new v.vHH(3401,!1)}();return _}trigger(C,_,R,$=!0){const ie=this._getTrigger(_),we=new Ts(this.id,_,C);let Te=this._engine.statesByElement.get(C);Te||(ji(C,At),ji(C,At+"-"+_),this._engine.statesByElement.set(C,Te=new Map));let Ze=Te.get(_);const ut=new hr(R,this.id);if(!(R&&R.hasOwnProperty("value"))&&Ze&&ut.absorbOptions(Ze.options),Te.set(_,ut),Ze||(Ze=_i),ut.value!==Yi&&Ze.value===ut.value){if(!function so(H,C){const _=Object.keys(H),R=Object.keys(C);if(_.length!=R.length)return!1;for(let $=0;$<_.length;$++){const ie=_[$];if(!C.hasOwnProperty(ie)||H[ie]!==C[ie])return!1}return!0}(Ze.params,ut.params)){const qt=[],wn=ie.matchStyles(Ze.value,Ze.params,qt),Rn=ie.matchStyles(ut.value,ut.params,qt);qt.length?this._engine.reportError(qt):this._engine.afterFlush(()=>{Mi(C,wn),kn(C,Rn)})}return}const cn=st(this._engine.playersByElement,C,[]);cn.forEach(qt=>{qt.namespaceId==this.id&&qt.triggerName==_&&qt.queued&&qt.destroy()});let yn=ie.matchTransition(Ze.value,ut.value,C,ut.params),Jt=!1;if(!yn){if(!$)return;yn=ie.fallbackTransition,Jt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:_,transition:yn,fromState:Ze,toState:ut,player:we,isFallbackTransition:Jt}),Jt||(ji(C,re),we.onStart(()=>{Er(C,re)})),we.onDone(()=>{let qt=this.players.indexOf(we);qt>=0&&this.players.splice(qt,1);const wn=this._engine.playersByElement.get(C);if(wn){let Rn=wn.indexOf(we);Rn>=0&&wn.splice(Rn,1)}}),this.players.push(we),cn.push(we),we}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(_=>_.delete(C)),this._elementListeners.forEach((_,R)=>{this._elementListeners.set(R,_.filter($=>$.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const _=this._engine.playersByElement.get(C);_&&(_.forEach(R=>R.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,_){const R=this._engine.driver.query(C,Zt,!0);R.forEach($=>{if($[Sn])return;const ie=this._engine.fetchNamespacesByElement($);ie.size?ie.forEach(we=>we.triggerLeaveAnimation($,_,!1,!0)):this.clearElementCache($)}),this._engine.afterFlushAnimationsDone(()=>R.forEach($=>this.clearElementCache($)))}triggerLeaveAnimation(C,_,R,$){const ie=this._engine.statesByElement.get(C),we=new Map;if(ie){const Te=[];if(ie.forEach((Ze,ut)=>{if(we.set(ut,Ze.value),this._triggers.has(ut)){const Tt=this.trigger(C,ut,Yi,$);Tt&&Te.push(Tt)}}),Te.length)return this._engine.markElementAsRemoved(this.id,C,!0,_,we),R&&F(Te).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const _=this._elementListeners.get(C),R=this._engine.statesByElement.get(C);if(_&&R){const $=new Set;_.forEach(ie=>{const we=ie.name;if($.has(we))return;$.add(we);const Ze=this._triggers.get(we).fallbackTransition,ut=R.get(we)||_i,Tt=new hr(Yi),Nt=new Ts(this.id,we,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:we,transition:Ze,fromState:ut,toState:Tt,player:Nt,isFallbackTransition:!0})})}}removeNode(C,_){const R=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,_),this.triggerLeaveAnimation(C,_,!0))return;let $=!1;if(R.totalAnimations){const ie=R.players.length?R.playersByQueriedElement.get(C):[];if(ie&&ie.length)$=!0;else{let we=C;for(;we=we.parentNode;)if(R.statesByElement.get(we)){$=!0;break}}}if(this.prepareLeaveAnimationListeners(C),$)R.markElementAsRemoved(this.id,C,!1,_);else{const ie=C[Sn];(!ie||ie===Pr)&&(R.afterFlush(()=>this.clearElementCache(C)),R.destroyInnerAnimations(C),R._onRemovalComplete(C,_))}}insertNode(C,_){ji(C,this._hostClassName)}drainQueuedTransitions(C){const _=[];return this._queue.forEach(R=>{const $=R.player;if($.destroyed)return;const ie=R.element,we=this._elementListeners.get(ie);we&&we.forEach(Te=>{if(Te.name==R.triggerName){const Ze=ze(ie,R.triggerName,R.fromState.value,R.toState.value);Ze._data=C,W(R.player,Te.phase,Ze,Te.callback)}}),$.markedForDestroy?this._engine.afterFlush(()=>{$.destroy()}):_.push(R)}),this._queue=[],_.sort((R,$)=>{const ie=R.transition.ast.depCount,we=$.transition.ast.depCount;return 0==ie||0==we?ie-we:this._engine.driver.containsElement(R.element,$.element)?1:-1})}destroy(C){this.players.forEach(_=>_.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}elementContainsData(C){let _=!1;return this._elementListeners.has(C)&&(_=!0),_=!!this._queue.find(R=>R.element===C)||_,_}}class ro{_onRemovalComplete(C,_){this.onRemovalComplete(C,_)}constructor(C,_,R){this.bodyNode=C,this.driver=_,this._normalizer=R,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=($,ie)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(_=>{_.players.forEach(R=>{R.queued&&C.push(R)})}),C}createNamespace(C,_){const R=new io(C,_,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,_)?this._balanceNamespaceList(R,_):(this.newHostElements.set(_,R),this.collectEnterElement(_)),this._namespaceLookup[C]=R}_balanceNamespaceList(C,_){const R=this._namespaceList,$=this.namespacesByHostElement;if(R.length-1>=0){let we=!1,Te=this.driver.getParentElement(_);for(;Te;){const Ze=$.get(Te);if(Ze){const ut=R.indexOf(Ze);R.splice(ut+1,0,C),we=!0;break}Te=this.driver.getParentElement(Te)}we||R.unshift(C)}else R.push(C);return $.set(_,C),C}register(C,_){let R=this._namespaceLookup[C];return R||(R=this.createNamespace(C,_)),R}registerTrigger(C,_,R){let $=this._namespaceLookup[C];$&&$.register(_,R)&&this.totalAnimations++}destroy(C,_){if(!C)return;const R=this._fetchNamespace(C);this.afterFlush(()=>{this.namespacesByHostElement.delete(R.hostElement),delete this._namespaceLookup[C];const $=this._namespaceList.indexOf(R);$>=0&&this._namespaceList.splice($,1)}),this.afterFlushAnimationsDone(()=>R.destroy(_))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const _=new Set,R=this.statesByElement.get(C);if(R)for(let $ of R.values())if($.namespaceId){const ie=this._fetchNamespace($.namespaceId);ie&&_.add(ie)}return _}trigger(C,_,R,$){if(pi(_)){const ie=this._fetchNamespace(C);if(ie)return ie.trigger(_,R,$),!0}return!1}insertNode(C,_,R,$){if(!pi(_))return;const ie=_[Sn];if(ie&&ie.setForRemoval){ie.setForRemoval=!1,ie.setForMove=!0;const we=this.collectedLeaveElements.indexOf(_);we>=0&&this.collectedLeaveElements.splice(we,1)}if(C){const we=this._fetchNamespace(C);we&&we.insertNode(_,R)}$&&this.collectEnterElement(_)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,_){_?this.disabledNodes.has(C)||(this.disabledNodes.add(C),ji(C,Rt)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),Er(C,Rt))}removeNode(C,_,R,$){if(pi(_)){const ie=C?this._fetchNamespace(C):null;if(ie?ie.removeNode(_,$):this.markElementAsRemoved(C,_,!1,$),R){const we=this.namespacesByHostElement.get(_);we&&we.id!==C&&we.removeNode(_,$)}}else this._onRemovalComplete(_,$)}markElementAsRemoved(C,_,R,$,ie){this.collectedLeaveElements.push(_),_[Sn]={namespaceId:C,setForRemoval:$,hasAnimation:R,removedBeforeQueried:!1,previousTriggersValues:ie}}listen(C,_,R,$,ie){return pi(_)?this._fetchNamespace(C).listen(_,R,$,ie):()=>{}}_buildInstruction(C,_,R,$,ie){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,R,$,C.fromState.options,C.toState.options,_,ie)}destroyInnerAnimations(C){let _=this.driver.query(C,Zt,!0);_.forEach(R=>this.destroyActiveAnimationsForElement(R)),0!=this.playersByQueriedElement.size&&(_=this.driver.query(C,qn,!0),_.forEach(R=>this.finishActiveQueriedAnimationOnElement(R)))}destroyActiveAnimationsForElement(C){const _=this.playersByElement.get(C);_&&_.forEach(R=>{R.queued?R.markedForDestroy=!0:R.destroy()})}finishActiveQueriedAnimationOnElement(C){const _=this.playersByQueriedElement.get(C);_&&_.forEach(R=>R.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return F(this.players).onDone(()=>C());C()})}processLeaveNode(C){const _=C[Sn];if(_&&_.setForRemoval){if(C[Sn]=Pr,_.namespaceId){this.destroyInnerAnimations(C);const R=this._fetchNamespace(_.namespaceId);R&&R.clearElementCache(C)}this._onRemovalComplete(C,_.setForRemoval)}C.classList?.contains(Rt)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(R=>{this.markElementAsDisabled(R,!1)})}flush(C=-1){let _=[];if(this.newHostElements.size&&(this.newHostElements.forEach((R,$)=>this._balanceNamespaceList(R,$)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let R=0;R<this.collectedEnterElements.length;R++)ji(this.collectedEnterElements[R],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const R=[];try{_=this._flushAnimations(R,C)}finally{for(let $=0;$<R.length;$++)R[$]()}}else for(let R=0;R<this.collectedLeaveElements.length;R++)this.processLeaveNode(this.collectedLeaveElements[R]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(R=>R()),this._flushFns=[],this._whenQuietFns.length){const R=this._whenQuietFns;this._whenQuietFns=[],_.length?F(_).onDone(()=>{R.forEach($=>$())}):R.forEach($=>$())}}reportError(C){throw function li(H){return new v.vHH(3402,!1)}()}_flushAnimations(C,_){const R=new Ri,$=[],ie=new Map,we=[],Te=new Map,Ze=new Map,ut=new Map,Tt=new Set;this.disabledNodes.forEach(jt=>{Tt.add(jt);const Kt=this.driver.query(jt,".ng-animate-queued",!0);for(let on=0;on<Kt.length;on++)Tt.add(Kt[on])});const Nt=this.bodyNode,cn=Array.from(this.statesByElement.keys()),yn=Xi(cn,this.collectedEnterElements),Jt=new Map;let qt=0;yn.forEach((jt,Kt)=>{const on=Wn+qt++;Jt.set(Kt,on),jt.forEach(tn=>ji(tn,on))});const wn=[],Rn=new Set,Jn=new Set;for(let jt=0;jt<this.collectedLeaveElements.length;jt++){const Kt=this.collectedLeaveElements[jt],on=Kt[Sn];on&&on.setForRemoval&&(wn.push(Kt),Rn.add(Kt),on.hasAnimation?this.driver.query(Kt,".ng-star-inserted",!0).forEach(tn=>Rn.add(tn)):Jn.add(Kt))}const Li=new Map,ri=Xi(cn,Array.from(Rn));ri.forEach((jt,Kt)=>{const on=Kn+qt++;Li.set(Kt,on),jt.forEach(tn=>ji(tn,on))}),C.push(()=>{yn.forEach((jt,Kt)=>{const on=Jt.get(Kt);jt.forEach(tn=>Er(tn,on))}),ri.forEach((jt,Kt)=>{const on=Li.get(Kt);jt.forEach(tn=>Er(tn,on))}),wn.forEach(jt=>{this.processLeaveNode(jt)})});const er=[],gr=[];for(let jt=this._namespaceList.length-1;jt>=0;jt--)this._namespaceList[jt].drainQueuedTransitions(_).forEach(on=>{const tn=on.player,si=on.element;if(er.push(tn),this.collectedEnterElements.length){const oi=si[Sn];if(oi&&oi.setForMove){if(oi.previousTriggersValues&&oi.previousTriggersValues.has(on.triggerName)){const Is=oi.previousTriggersValues.get(on.triggerName),D=this.statesByElement.get(on.element);if(D&&D.has(on.triggerName)){const E=D.get(on.triggerName);E.value=Is,D.set(on.triggerName,E)}}return void tn.destroy()}}const Ui=!Nt||!this.driver.containsElement(Nt,si),Zi=Li.get(si),vi=Jt.get(si),Ln=this._buildInstruction(on,R,vi,Zi,Ui);if(Ln.errors&&Ln.errors.length)return void gr.push(Ln);if(Ui)return tn.onStart(()=>Mi(si,Ln.fromStyles)),tn.onDestroy(()=>kn(si,Ln.toStyles)),void $.push(tn);if(on.isFallbackTransition)return tn.onStart(()=>Mi(si,Ln.fromStyles)),tn.onDestroy(()=>kn(si,Ln.toStyles)),void $.push(tn);const Mo=[];Ln.timelines.forEach(oi=>{oi.stretchStartingKeyframe=!0,this.disabledNodes.has(oi.element)||Mo.push(oi)}),Ln.timelines=Mo,R.append(si,Ln.timelines),we.push({instruction:Ln,player:tn,element:si}),Ln.queriedElements.forEach(oi=>st(Te,oi,[]).push(tn)),Ln.preStyleProps.forEach((oi,Is)=>{if(oi.size){let D=Ze.get(Is);D||Ze.set(Is,D=new Set),oi.forEach((E,b)=>D.add(b))}}),Ln.postStyleProps.forEach((oi,Is)=>{let D=ut.get(Is);D||ut.set(Is,D=new Set),oi.forEach((E,b)=>D.add(b))})});if(gr.length){const jt=[];gr.forEach(Kt=>{jt.push(function Nn(H,C){return new v.vHH(3505,!1)}())}),er.forEach(Kt=>Kt.destroy()),this.reportError(jt)}const Ni=new Map,xn=new Map;we.forEach(jt=>{const Kt=jt.element;R.has(Kt)&&(xn.set(Kt,Kt),this._beforeAnimationBuild(jt.player.namespaceId,jt.instruction,Ni))}),$.forEach(jt=>{const Kt=jt.element;this._getPreviousPlayers(Kt,!1,jt.namespaceId,jt.triggerName,null).forEach(tn=>{st(Ni,Kt,[]).push(tn),tn.destroy()})});const Qr=wn.filter(jt=>oo(jt,Ze,ut)),kr=new Map;Kr(kr,this.driver,Jn,ut,r.l3).forEach(jt=>{oo(jt,Ze,ut)&&Qr.push(jt)});const xo=new Map;yn.forEach((jt,Kt)=>{Kr(xo,this.driver,new Set(jt),Ze,r.k1)}),Qr.forEach(jt=>{const Kt=kr.get(jt),on=xo.get(jt);kr.set(jt,new Map([...Array.from(Kt?.entries()??[]),...Array.from(on?.entries()??[])]))});const Ys=[],$a=[],Xs={};we.forEach(jt=>{const{element:Kt,player:on,instruction:tn}=jt;if(R.has(Kt)){if(Tt.has(Kt))return on.onDestroy(()=>kn(Kt,tn.toStyles)),on.disabled=!0,on.overrideTotalTime(tn.totalTime),void $.push(on);let si=Xs;if(xn.size>1){let Zi=Kt;const vi=[];for(;Zi=Zi.parentNode;){const Ln=xn.get(Zi);if(Ln){si=Ln;break}vi.push(Zi)}vi.forEach(Ln=>xn.set(Ln,si))}const Ui=this._buildAnimation(on.namespaceId,tn,Ni,ie,xo,kr);if(on.setRealPlayer(Ui),si===Xs)Ys.push(on);else{const Zi=this.playersByElement.get(si);Zi&&Zi.length&&(on.parentPlayer=F(Zi)),$.push(on)}}else Mi(Kt,tn.fromStyles),on.onDestroy(()=>kn(Kt,tn.toStyles)),$a.push(on),Tt.has(Kt)&&$.push(on)}),$a.forEach(jt=>{const Kt=ie.get(jt.element);if(Kt&&Kt.length){const on=F(Kt);jt.setRealPlayer(on)}}),$.forEach(jt=>{jt.parentPlayer?jt.syncPlayerEvents(jt.parentPlayer):jt.destroy()});for(let jt=0;jt<wn.length;jt++){const Kt=wn[jt],on=Kt[Sn];if(Er(Kt,Kn),on&&on.hasAnimation)continue;let tn=[];if(Te.size){let Ui=Te.get(Kt);Ui&&Ui.length&&tn.push(...Ui);let Zi=this.driver.query(Kt,qn,!0);for(let vi=0;vi<Zi.length;vi++){let Ln=Te.get(Zi[vi]);Ln&&Ln.length&&tn.push(...Ln)}}const si=tn.filter(Ui=>!Ui.destroyed);si.length?zs(this,Kt,si):this.processLeaveNode(Kt)}return wn.length=0,Ys.forEach(jt=>{this.players.push(jt),jt.onDone(()=>{jt.destroy();const Kt=this.players.indexOf(jt);this.players.splice(Kt,1)}),jt.play()}),Ys}elementContainsData(C,_){let R=!1;const $=_[Sn];return $&&$.setForRemoval&&(R=!0),this.playersByElement.has(_)&&(R=!0),this.playersByQueriedElement.has(_)&&(R=!0),this.statesByElement.has(_)&&(R=!0),this._fetchNamespace(C).elementContainsData(_)||R}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,_,R,$,ie){let we=[];if(_){const Te=this.playersByQueriedElement.get(C);Te&&(we=Te)}else{const Te=this.playersByElement.get(C);if(Te){const Ze=!ie||ie==Yi;Te.forEach(ut=>{ut.queued||!Ze&&ut.triggerName!=$||we.push(ut)})}}return(R||$)&&(we=we.filter(Te=>!(R&&R!=Te.namespaceId||$&&$!=Te.triggerName))),we}_beforeAnimationBuild(C,_,R){const ie=_.element,we=_.isRemovalTransition?void 0:C,Te=_.isRemovalTransition?void 0:_.triggerName;for(const Ze of _.timelines){const ut=Ze.element,Tt=ut!==ie,Nt=st(R,ut,[]);this._getPreviousPlayers(ut,Tt,we,Te,_.toState).forEach(yn=>{const Jt=yn.getRealPlayer();Jt.beforeDestroy&&Jt.beforeDestroy(),yn.destroy(),Nt.push(yn)})}Mi(ie,_.fromStyles)}_buildAnimation(C,_,R,$,ie,we){const Te=_.triggerName,Ze=_.element,ut=[],Tt=new Set,Nt=new Set,cn=_.timelines.map(Jt=>{const qt=Jt.element;Tt.add(qt);const wn=qt[Sn];if(wn&&wn.removedBeforeQueried)return new r.ZN(Jt.duration,Jt.delay);const Rn=qt!==Ze,Jn=function Ho(H){const C=[];return Gs(H,C),C}((R.get(qt)||gn).map(Ni=>Ni.getRealPlayer())).filter(Ni=>!!Ni.element&&Ni.element===qt),Li=ie.get(qt),ri=we.get(qt),er=I(0,this._normalizer,0,Jt.keyframes,Li,ri),gr=this._buildPlayer(Jt,er,Jn);if(Jt.subTimeline&&$&&Nt.add(qt),Rn){const Ni=new Ts(C,Te,qt);Ni.setRealPlayer(gr),ut.push(Ni)}return gr});ut.forEach(Jt=>{st(this.playersByQueriedElement,Jt.element,[]).push(Jt),Jt.onDone(()=>function _o(H,C,_){let R=H.get(C);if(R){if(R.length){const $=R.indexOf(_);R.splice($,1)}0==R.length&&H.delete(C)}return R}(this.playersByQueriedElement,Jt.element,Jt))}),Tt.forEach(Jt=>ji(Jt,Hn));const yn=F(cn);return yn.onDestroy(()=>{Tt.forEach(Jt=>Er(Jt,Hn)),kn(Ze,_.toStyles)}),Nt.forEach(Jt=>{st($,Jt,[]).push(yn)}),yn}_buildPlayer(C,_,R){return _.length>0?this.driver.animate(C.element,_,C.duration,C.delay,C.easing,R):new r.ZN(C.duration,C.delay)}}class Ts{constructor(C,_,R){this.namespaceId=C,this.triggerName=_,this.element=R,this._player=new r.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((_,R)=>{_.forEach($=>W(C,R,void 0,$))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const _=this._player;_.triggerCallback&&C.onStart(()=>_.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,_){st(this._queuedCallbacks,C,[]).push(_)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const _=this._player;_.triggerCallback&&_.triggerCallback(C)}}function pi(H){return H&&1===H.nodeType}function ds(H,C){const _=H.style.display;return H.style.display=C??"none",_}function Kr(H,C,_,R,$){const ie=[];_.forEach(Ze=>ie.push(ds(Ze)));const we=[];R.forEach((Ze,ut)=>{const Tt=new Map;Ze.forEach(Nt=>{const cn=C.computeStyle(ut,Nt,$);Tt.set(Nt,cn),(!cn||0==cn.length)&&(ut[Sn]=dr,we.push(ut))}),H.set(ut,Tt)});let Te=0;return _.forEach(Ze=>ds(Ze,ie[Te++])),we}function Xi(H,C){const _=new Map;if(H.forEach(Te=>_.set(Te,[])),0==C.length)return _;const R=1,$=new Set(C),ie=new Map;function we(Te){if(!Te)return R;let Ze=ie.get(Te);if(Ze)return Ze;const ut=Te.parentNode;return Ze=_.has(ut)?ut:$.has(ut)?R:we(ut),ie.set(Te,Ze),Ze}return C.forEach(Te=>{const Ze=we(Te);Ze!==R&&_.get(Ze).push(Te)}),_}function ji(H,C){H.classList?.add(C)}function Er(H,C){H.classList?.remove(C)}function zs(H,C,_){F(_).onDone(()=>H.processLeaveNode(C))}function Gs(H,C){for(let _=0;_<H.length;_++){const R=H[_];R instanceof r.ZE?Gs(R.players,C):C.push(R)}}function oo(H,C,_){const R=_.get(H);if(!R)return!1;let $=C.get(H);return $?R.forEach(ie=>$.add(ie)):C.set(H,R),_.delete(H),!0}class Tr{constructor(C,_,R){this.bodyNode=C,this._driver=_,this._normalizer=R,this._triggerCache={},this.onRemovalComplete=($,ie)=>{},this._transitionEngine=new ro(C,_,R),this._timelineEngine=new N(C,_,R),this._transitionEngine.onRemovalComplete=($,ie)=>this.onRemovalComplete($,ie)}registerTrigger(C,_,R,$,ie){const we=C+"-"+$;let Te=this._triggerCache[we];if(!Te){const Ze=[],ut=[],Tt=Gr(this._driver,ie,Ze,ut);if(Ze.length)throw function dt(H,C){return new v.vHH(3404,!1)}();Te=function Sr(H,C,_){return new Dr(H,C,_)}($,Tt,this._normalizer),this._triggerCache[we]=Te}this._transitionEngine.registerTrigger(_,$,Te)}register(C,_){this._transitionEngine.register(C,_)}destroy(C,_){this._transitionEngine.destroy(C,_)}onInsert(C,_,R,$){this._transitionEngine.insertNode(C,_,R,$)}onRemove(C,_,R,$){this._transitionEngine.removeNode(C,_,$||!1,R)}disableAnimations(C,_){this._transitionEngine.markElementAsDisabled(C,_)}process(C,_,R,$){if("@"==R.charAt(0)){const[ie,we]=Xt(R);this._timelineEngine.command(ie,_,we,$)}else this._transitionEngine.trigger(C,_,R,$)}listen(C,_,R,$,ie){if("@"==R.charAt(0)){const[we,Te]=Xt(R);return this._timelineEngine.listen(we,_,Te,ie)}return this._transitionEngine.listen(C,_,R,$,ie)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let lo=(()=>{class H{constructor(_,R,$){this._element=_,this._startStyles=R,this._endStyles=$,this._state=0;let ie=H.initialStylesByElement.get(_);ie||H.initialStylesByElement.set(_,ie=new Map),this._initialStyles=ie}start(){this._state<1&&(this._startStyles&&kn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kn(this._element,this._initialStyles),this._endStyles&&(kn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(H.initialStylesByElement.delete(this._element),this._startStyles&&(Mi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mi(this._element,this._endStyles),this._endStyles=null),kn(this._element,this._initialStyles),this._state=3)}}return H.initialStylesByElement=new WeakMap,H})();function xr(H){let C=null;return H.forEach((_,R)=>{(function hs(H){return"display"===H||"position"===H})(R)&&(C=C||new Map,C.set(R,_))}),C}class Ws{constructor(C,_,R,$){this.element=C,this.keyframes=_,this.options=R,this._specialStyles=$,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=R.duration,this._delay=R.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const _=[];return C.forEach(R=>{_.push(Object.fromEntries(R))}),_}_triggerWebAnimation(C,_,R){return C.animate(this._convertKeyframesToObject(_),R)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((R,$)=>{"offset"!==$&&C.set($,this._finished?R:bs(this.element,$))}),this.currentSnapshot=C}triggerCallback(C){const _="start"===C?this._onStartFns:this._onDoneFns;_.forEach(R=>R()),_.length=0}}class fs{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,_){return!1}containsElement(C,_){return Je(C,_)}getParentElement(C){return ci(C)}query(C,_,R){return bt(C,_,R)}computeStyle(C,_,R){return window.getComputedStyle(C)[_]}animate(C,_,R,$,ie,we=[]){const Ze={duration:R,delay:$,fill:0==$?"both":"forwards"};ie&&(Ze.easing=ie);const ut=new Map,Tt=we.filter(yn=>yn instanceof Ws);(function Vr(H,C){return 0===H||0===C})(R,$)&&Tt.forEach(yn=>{yn.currentSnapshot.forEach((Jt,qt)=>ut.set(qt,Jt))});let Nt=function Qt(H){return H.length?H[0]instanceof Map?H:H.map(C=>Ki(C)):[]}(_).map(yn=>di(yn));Nt=function rr(H,C,_){if(_.size&&C.length){let R=C[0],$=[];if(_.forEach((ie,we)=>{R.has(we)||$.push(we),R.set(we,ie)}),$.length)for(let ie=1;ie<C.length;ie++){let we=C[ie];$.forEach(Te=>we.set(Te,bs(H,Te)))}}return C}(C,Nt,ut);const cn=function ao(H,C){let _=null,R=null;return Array.isArray(C)&&C.length?(_=xr(C[0]),C.length>1&&(R=xr(C[C.length-1]))):C instanceof Map&&(_=xr(C)),_||R?new lo(H,_,R):null}(C,Nt);return new Ws(C,Nt,Ze,cn)}}let co=(()=>{class H extends r._j{constructor(_,R){super(),this._nextAnimationId=0,this._renderer=_.createRenderer(R.body,{id:"0",encapsulation:v.ifc.None,styles:[],data:{animation:[]}})}build(_){const R=this._nextAnimationId.toString();this._nextAnimationId++;const $=Array.isArray(_)?(0,r.vP)(_):_;return bo(this._renderer,null,R,"register",[$]),new uo(R,this._renderer)}}return H.\u0275fac=function(_){return new(_||H)(v.LFG(v.FYo),v.LFG(h.K0))},H.\u0275prov=v.Yz7({token:H,factory:H.\u0275fac}),H})();class uo extends r.LC{constructor(C,_){super(),this._id=C,this._renderer=_}create(C,_){return new jo(this._id,C,_||{},this._renderer)}}class jo{constructor(C,_,R,$){this.id=C,this.element=_,this._renderer=$,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",R)}_listen(C,_){return this._renderer.listen(this.element,`@@${this.id}:${C}`,_)}_command(C,..._){return bo(this._renderer,this.element,this.id,C,_)}onDone(C){this._listen("done",C)}onStart(C){this._listen("start",C)}onDestroy(C){this._listen("destroy",C)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(C){this._command("setPosition",C)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bo(H,C,_,R,$){return H.setProperty(C,`@@${_}:${R}`,$)}const Ir="@.disabled";let $n=(()=>{class H{constructor(_,R,$){this.delegate=_,this.engine=R,this._zone=$,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),R.onRemovalComplete=(ie,we)=>{const Te=we?.parentNode(ie);Te&&we.removeChild(Te,ie)}}createRenderer(_,R){const ie=this.delegate.createRenderer(_,R);if(!(_&&R&&R.data&&R.data.animation)){let Tt=this._rendererCache.get(ie);return Tt||(Tt=new ho("",ie,this.engine,()=>this._rendererCache.delete(ie)),this._rendererCache.set(ie,Tt)),Tt}const we=R.id,Te=R.id+"-"+this._currentId;this._currentId++,this.engine.register(Te,_);const Ze=Tt=>{Array.isArray(Tt)?Tt.forEach(Ze):this.engine.registerTrigger(we,Te,_,Tt.name,Tt)};return R.data.animation.forEach(Ze),new k(this,Te,ie,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(_,R,$){_>=0&&_<this._microtaskId?this._zone.run(()=>R($)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ie=>{const[we,Te]=ie;we(Te)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([R,$]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return H.\u0275fac=function(_){return new(_||H)(v.LFG(v.FYo),v.LFG(Tr),v.LFG(v.R0b))},H.\u0275prov=v.Yz7({token:H,factory:H.\u0275fac}),H})();class ho{constructor(C,_,R,$){this.namespaceId=C,this.delegate=_,this.engine=R,this._onDestroy=$,this.destroyNode=this.delegate.destroyNode?ie=>_.destroyNode(ie):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(C,_){return this.delegate.createElement(C,_)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,_){this.delegate.appendChild(C,_),this.engine.onInsert(this.namespaceId,_,C,!1)}insertBefore(C,_,R,$=!0){this.delegate.insertBefore(C,_,R),this.engine.onInsert(this.namespaceId,_,C,$)}removeChild(C,_,R){this.engine.onRemove(this.namespaceId,_,this.delegate,R)}selectRootElement(C,_){return this.delegate.selectRootElement(C,_)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,_,R,$){this.delegate.setAttribute(C,_,R,$)}removeAttribute(C,_,R){this.delegate.removeAttribute(C,_,R)}addClass(C,_){this.delegate.addClass(C,_)}removeClass(C,_){this.delegate.removeClass(C,_)}setStyle(C,_,R,$){this.delegate.setStyle(C,_,R,$)}removeStyle(C,_,R){this.delegate.removeStyle(C,_,R)}setProperty(C,_,R){"@"==_.charAt(0)&&_==Ir?this.disableAnimations(C,!!R):this.delegate.setProperty(C,_,R)}setValue(C,_){this.delegate.setValue(C,_)}listen(C,_,R){return this.delegate.listen(C,_,R)}disableAnimations(C,_){this.engine.disableAnimations(C,_)}}class k extends ho{constructor(C,_,R,$,ie){super(_,R,$,ie),this.factory=C,this.namespaceId=_}setProperty(C,_,R){"@"==_.charAt(0)?"."==_.charAt(1)&&_==Ir?this.disableAnimations(C,R=void 0===R||!!R):this.engine.process(this.namespaceId,C,_.slice(1),R):this.delegate.setProperty(C,_,R)}listen(C,_,R){if("@"==_.charAt(0)){const $=function Y(H){switch(H){case"body":return document.body;case"document":return document;case"window":return window;default:return H}}(C);let ie=_.slice(1),we="";return"@"!=ie.charAt(0)&&([ie,we]=function B(H){const C=H.indexOf(".");return[H.substring(0,C),H.slice(C+1)]}(ie)),this.engine.listen(this.namespaceId,$,ie,we,Te=>{this.factory.scheduleListenerCallback(Te._data||-1,R,Te)})}return this.delegate.listen(C,_,R)}}const ht=[{provide:r._j,useClass:co},{provide:Es,useFactory:function ve(){return new us}},{provide:Tr,useClass:(()=>{class H extends Tr{constructor(_,R,$,ie){super(_.body,R,$)}ngOnDestroy(){this.flush()}}return H.\u0275fac=function(_){return new(_||H)(v.LFG(h.K0),v.LFG(Et),v.LFG(Es),v.LFG(v.z2F))},H.\u0275prov=v.Yz7({token:H,factory:H.\u0275fac}),H})()},{provide:v.FYo,useFactory:function it(H,C,_){return new $n(H,C,_)},deps:[d.se,Tr,v.R0b]}],kt=[{provide:Et,useFactory:()=>new fs},{provide:v.QbO,useValue:"BrowserAnimations"},...ht],bn=[{provide:Et,useClass:$t},{provide:v.QbO,useValue:"NoopAnimations"},...ht];let Dn=(()=>{class H{static withConfig(_){return{ngModule:H,providers:_.disableAnimations?bn:kt}}}return H.\u0275fac=function(_){return new(_||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({providers:kt,imports:[d.b2]}),H})();var Vn=K(7823),mi=K(529),pr=K(50),Ji=K(433),Rr=K(1740);(0,r.oQ)([(0,r.oB)({transform:"{{transform}}",opacity:0}),(0,r.jt)("{{transition}}")]),(0,r.oQ)([(0,r.jt)("{{transition}}",(0,r.oB)({transform:"{{transform}}",opacity:0}))]);let po=(()=>{class H{}return H.\u0275fac=function(_){return new(_||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[h.ez,s.T]}),H})(),zo=(()=>{class H{}return H.\u0275fac=function(_){return new(_||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[h.ez,he.m8]}),H})();var ya=K(613);const qi=function(H,C,_){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":H,"p-disabled":C,"p-focus":_}},_a={provide:Ji.JU,useExisting:(0,v.Gpc)(()=>go),multi:!0};let go=(()=>{class H{constructor(_){this.cd=_,this.trueValue=!0,this.falseValue=!1,this.onChange=new v.vpe,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(_,R){!this.disabled&&!this.readonly&&(_.preventDefault(),this.toggle(_),R.focus())}onInputChange(_){this.readonly||this.updateModel(_,_.target.checked)}toggle(_){this.updateModel(_,!this.checked())}updateModel(_,R){this.modelValue=R?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:_,checked:this.modelValue})}onFocus(_){this.focused=!0}onBlur(_){this.focused=!1,this.onModelTouched()}writeValue(_){this.modelValue=_,this.cd.markForCheck()}registerOnChange(_){this.onModelChange=_}registerOnTouched(_){this.onModelTouched=_}setDisabledState(_){this.disabled=_,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return H.\u0275fac=function(_){return new(_||H)(v.Y36(v.sBO))},H.\u0275cmp=v.Xpm({type:H,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[v._Bn([_a])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(_,R){if(1&_){const $=v.EpF();v.TgZ(0,"div",0),v.NdJ("click",function(we){v.CHM($);const Te=v.MAs(3);return v.KtG(R.onClick(we,Te))}),v.TgZ(1,"div",1)(2,"input",2,3),v.NdJ("change",function(we){return R.onInputChange(we)})("focus",function(we){return R.onFocus(we)})("blur",function(we){return R.onBlur(we)}),v.qZA()(),v._UZ(4,"span",4),v.qZA()}2&_&&(v.Tol(R.styleClass),v.Q6J("ngClass",v.kEZ(12,qi,R.checked(),R.disabled,R.focused))("ngStyle",R.style),v.xp6(2),v.Q6J("checked",R.checked())("disabled",R.disabled),v.uIk("aria-label",R.ariaLabel)("id",R.inputId)("name",R.name)("tabindex",R.tabindex)("aria-checked",R.checked())("aria-labelledby",R.ariaLabelledBy))},dependencies:[h.mk,h.PC],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),H})(),$s=(()=>{class H{}return H.\u0275fac=function(_){return new(_||H)},H.\u0275mod=v.oAB({type:H}),H.\u0275inj=v.cJS({imports:[h.ez]}),H})();class ms{}ms.\u0275fac=function(C){return new(C||ms)},ms.\u0275mod=v.oAB({type:ms}),ms.\u0275inj=v.cJS({imports:[h.ez,d.b2,Ji.u5,mi.JF,Dn,Rr.j,po,zo,ya.cc,$s,s.T,ce.Bz]});var Eo=K(6963),To=K(2516);class Ps{}Ps.\u0275fac=function(C){return new(C||Ps)},Ps.\u0275mod=v.oAB({type:Ps,bootstrap:[Xe]}),Ps.\u0275inj=v.cJS({providers:[he.ez],imports:[h.ez,d.b2,ae,Vn.AuthenticationModule,Dn,mi.JF,pr.DashboardModule,Ve,ms,Eo.n,To.LudoModule]}),K(2340).N.production&&(0,v.G48)(),d.q6().bootstrapModule(Ps).catch(H=>console.error(H))},8621:(Ft,Be,K)=>{var m,o,f,h,r,a,d=d||{version:"5.3.0"};if(Be.fabric=d,typeof document<"u"&&typeof window<"u")d.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),d.window=window;else{var ce=new(K(4960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;d.document=ce.document,d.jsdomImplForWrapper=K(6759).implForWrapper,d.nodeCanvas=K(6272).Canvas,d.window=ce,DOMParser=d.window.DOMParser}function T(m,o){var f=m.canvas,h=o.targetCanvas,r=h.getContext("2d");r.translate(0,h.height),r.scale(1,-1),r.drawImage(f,0,f.height-h.height,h.width,h.height,0,0,h.width,h.height)}function fe(m,o){var h=o.targetCanvas.getContext("2d"),r=o.destinationWidth,a=o.destinationHeight,s=r*a*4,u=new Uint8Array(this.imageBuffer,0,s),p=new Uint8ClampedArray(this.imageBuffer,0,s);m.readPixels(0,0,r,a,m.RGBA,m.UNSIGNED_BYTE,u);var l=new ImageData(p,r,a);h.putImageData(l,0,0)}d.isTouchSupported="ontouchstart"in d.window||"ontouchstart"in d.document||d.window&&d.window.navigator&&d.window.navigator.maxTouchPoints>0,d.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",d.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],d.DPI=96,d.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",d.commaWsp="(?:\\s+,?\\s*|,\\s*)",d.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,d.reNonWord=/[ \n\.,;!\?\-]/,d.fontPaths={},d.iMatrix=[1,0,0,1,0,0],d.svgNS="http://www.w3.org/2000/svg",d.perfLimitSizeTotal=2097152,d.maxCacheSideLimit=4096,d.minCacheSideLimit=256,d.charWidthsCache={},d.textureSize=2048,d.disableStyleCopyPaste=!1,d.enableGLFiltering=!0,d.devicePixelRatio=d.window.devicePixelRatio||d.window.webkitDevicePixelRatio||d.window.mozDevicePixelRatio||1,d.browserShadowBlurConstant=1,d.arcToSegmentsCache={},d.boundsOfCurveCache={},d.cachesBoundsOfCurve=!0,d.forceGLPutImageData=!1,d.initFilterBackend=function(){return d.enableGLFiltering&&d.isWebglSupported&&d.isWebglSupported(d.textureSize)?(console.log("max texture size: "+d.maxTextureSize),new d.WebglFilterBackend({tileSize:d.textureSize})):d.Canvas2dFilterBackend?new d.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=d),function(){function m(s,u){if(this.__eventListeners[s]){var p=this.__eventListeners[s];u?p[p.indexOf(u)]=!1:d.util.array.fill(p,!1)}}function f(s,u){var p=function(){u.apply(this,arguments),this.off(s,p)}.bind(this);this.on(s,p)}d.Observable={fire:function a(s,u){if(!this.__eventListeners)return this;var p=this.__eventListeners[s];if(!p)return this;for(var l=0,y=p.length;l<y;l++)p[l]&&p[l].call(this,u||{});return this.__eventListeners[s]=p.filter(function(S){return!1!==S}),this},on:function o(s,u){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var p in s)this.on(p,s[p]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(u);return this},once:function h(s,u){if(1===arguments.length)for(var p in s)f.call(this,p,s[p]);else f.call(this,s,u);return this},off:function r(s,u){if(!this.__eventListeners)return this;if(0===arguments.length)for(s in this.__eventListeners)m.call(this,s);else if(1===arguments.length&&"object"==typeof arguments[0])for(var p in s)m.call(this,p,s[p]);else m.call(this,s,u);return this}}}(),d.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var m=0,o=arguments.length;m<o;m++)this._onObjectAdded(arguments[m]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(m,o,f){var h=this._objects;return f?h[o]=m:h.splice(o,0,m),this._onObjectAdded&&this._onObjectAdded(m),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o,m=this._objects,f=!1,h=0,r=arguments.length;h<r;h++)-1!==(o=m.indexOf(arguments[h]))&&(f=!0,m.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&f&&this.requestRenderAll(),this},forEachObject:function(m,o){for(var f=this.getObjects(),h=0,r=f.length;h<r;h++)m.call(o,f[h],h,f);return this},getObjects:function(m){return typeof m>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===m})},item:function(m){return this._objects[m]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(m,o){return this._objects.indexOf(m)>-1||!!o&&this._objects.some(function(f){return"function"==typeof f.contains&&f.contains(m,!0)})},complexity:function(){return this._objects.reduce(function(m,o){return m+(o.complexity?o.complexity():0)},0)}},d.CommonMethods={_setOptions:function(m){for(var o in m)this.set(o,m[o])},_initGradient:function(m,o){m&&m.colorStops&&!(m instanceof d.Gradient)&&this.set(o,new d.Gradient(m))},_initPattern:function(m,o,f){!m||!m.source||m instanceof d.Pattern?f&&f():this.set(o,new d.Pattern(m,f))},_setObject:function(m){for(var o in m)this._set(o,m[o])},set:function(m,o){return"object"==typeof m?this._setObject(m):this._set(m,o),this},_set:function(m,o){this[m]=o},toggle:function(m){var o=this.get(m);return"boolean"==typeof o&&this.set(m,!o),this},get:function(m){return this[m]}},m=Be,o=Math.sqrt,f=Math.atan2,h=Math.pow,r=Math.PI/180,a=Math.PI/2,d.util={cos:function(s){if(0===s)return 1;switch(s<0&&(s=-s),s/a){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(0===s)return 0;var p=1;switch(s<0&&(p=-1),s/a){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(s)},removeFromArray:function(s,u){var p=s.indexOf(u);return-1!==p&&s.splice(p,1),s},getRandomInt:function(s,u){return Math.floor(Math.random()*(u-s+1))+s},degreesToRadians:function(s){return s*r},radiansToDegrees:function(s){return s/r},rotatePoint:function(s,u,p){var l=new d.Point(s.x-u.x,s.y-u.y),y=d.util.rotateVector(l,p);return new d.Point(y.x,y.y).addEquals(u)},rotateVector:function(s,u){var p=d.util.sin(u),l=d.util.cos(u);return{x:s.x*l-s.y*p,y:s.x*p+s.y*l}},createVector:function(s,u){return new d.Point(u.x-s.x,u.y-s.y)},calcAngleBetweenVectors:function(s,u){return Math.acos((s.x*u.x+s.y*u.y)/(Math.hypot(s.x,s.y)*Math.hypot(u.x,u.y)))},getHatVector:function(s){return new d.Point(s.x,s.y).multiply(1/Math.hypot(s.x,s.y))},getBisector:function(s,u,p){var l=d.util.createVector(s,u),y=d.util.createVector(s,p),S=d.util.calcAngleBetweenVectors(l,y),x=d.util.calcAngleBetweenVectors(d.util.rotateVector(l,S),y);return{vector:d.util.getHatVector(d.util.rotateVector(l,S*(0===x?1:-1)/2)),angle:S}},projectStrokeOnPoints:function(s,u,p){var l=[],y=u.strokeWidth/2,S=u.strokeUniform?new d.Point(1/u.scaleX,1/u.scaleY):new d.Point(1,1),x=function(A){var O=y/Math.hypot(A.x,A.y);return new d.Point(A.x*O*S.x,A.y*O*S.y)};return s.length<=1||s.forEach(function(A,O){var Z,ue,j=new d.Point(A.x,A.y);0===O?(ue=s[O+1],Z=p?x(d.util.createVector(ue,j)).addEquals(j):s[s.length-1]):O===s.length-1?(Z=s[O-1],ue=p?x(d.util.createVector(Z,j)).addEquals(j):s[0]):(Z=s[O-1],ue=s[O+1]);var He,ot,pe=d.util.getBisector(j,Z,ue),Ce=pe.vector;if("miter"===u.strokeLineJoin&&(He=-y/Math.sin(pe.angle/2),ot=new d.Point(Ce.x*He*S.x,Ce.y*He*S.y),Math.hypot(ot.x,ot.y)/y<=u.strokeMiterLimit))return l.push(j.add(ot)),void l.push(j.subtract(ot));He=-y*Math.SQRT2,ot=new d.Point(Ce.x*He*S.x,Ce.y*He*S.y),l.push(j.add(ot)),l.push(j.subtract(ot))}),l},transformPoint:function(s,u,p){return p?new d.Point(u[0]*s.x+u[2]*s.y,u[1]*s.x+u[3]*s.y):new d.Point(u[0]*s.x+u[2]*s.y+u[4],u[1]*s.x+u[3]*s.y+u[5])},makeBoundingBoxFromPoints:function(s,u){if(u)for(var p=0;p<s.length;p++)s[p]=d.util.transformPoint(s[p],u);var l=[s[0].x,s[1].x,s[2].x,s[3].x],y=d.util.array.min(l),x=d.util.array.max(l)-y,A=[s[0].y,s[1].y,s[2].y,s[3].y],O=d.util.array.min(A);return{left:y,top:O,width:x,height:d.util.array.max(A)-O}},invertTransform:function(s){var u=1/(s[0]*s[3]-s[1]*s[2]),p=[u*s[3],-u*s[1],-u*s[2],u*s[0]],l=d.util.transformPoint({x:s[4],y:s[5]},p,!0);return p[4]=-l.x,p[5]=-l.y,p},toFixed:function(s,u){return parseFloat(Number(s).toFixed(u))},parseUnit:function(s,u){var p=/\D{0,2}$/.exec(s),l=parseFloat(s);switch(u||(u=d.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return l*d.DPI/25.4;case"cm":return l*d.DPI/2.54;case"in":return l*d.DPI;case"pt":return l*d.DPI/72;case"pc":return l*d.DPI/72*12;case"em":return l*u;default:return l}},falseFunction:function(){return!1},getKlass:function(s,u){return s=d.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),d.util.resolveNamespace(u)[s]},getSvgAttributes:function(s){var u=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"])}return u},resolveNamespace:function(s){if(!s)return d;var l,u=s.split("."),p=u.length,y=m||d.window;for(l=0;l<p;++l)y=y[u[l]];return y},loadImage:function(s,u,p,l){if(s){var y=d.util.createImage(),S=function(){u&&u.call(p,y,!1),y=y.onload=y.onerror=null};y.onload=S,y.onerror=function(){d.log("Error loading "+y.src),u&&u.call(p,null,!0),y=y.onload=y.onerror=null},0!==s.indexOf("data")&&null!=l&&(y.crossOrigin=l),"data:image/svg"===s.substring(0,14)&&(y.onload=null,d.util.loadImageInDom(y,S)),y.src=s}else u&&u.call(p,s)},loadImageInDom:function(s,u){var p=d.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(s),d.document.querySelector("body").appendChild(p),s.onload=function(){u(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(s,u,p,l){var y=[],S=0,x=(s=s||[]).length;function A(){++S===x&&u&&u(y.filter(function(O){return O}))}x?s.forEach(function(O,j){O&&O.type?d.util.getKlass(O.type,p).fromObject(O,function(ue,pe){pe||(y[j]=ue),l&&l(O,ue,pe),A()}):A()}):u&&u(y)},enlivenObjectEnlivables:function(s,u,p){var l=d.Object.ENLIVEN_PROPS.filter(function(y){return!!s[y]});d.util.enlivenObjects(l.map(function(y){return s[y]}),function(y){var S={};l.forEach(function(x,A){S[x]=y[A],u&&(u[x]=y[A])}),p&&p(S)})},enlivenPatterns:function(s,u){function p(){++y===S&&u&&u(l)}var l=[],y=0,S=(s=s||[]).length;S?s.forEach(function(x,A){x&&x.source?new d.Pattern(x,function(O){l[A]=O,p()}):(l[A]=x,p())}):u&&u(l)},groupSVGElements:function(s,u,p){var l;return s&&1===s.length?(typeof p<"u"&&(s[0].sourcePath=p),s[0]):(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),l=new d.Group(s,u),typeof p<"u"&&(l.sourcePath=p),l)},populateWithProperties:function(s,u,p){if(p&&Array.isArray(p))for(var l=0,y=p.length;l<y;l++)p[l]in s&&(u[p[l]]=s[p[l]])},createCanvasElement:function(){return d.document.createElement("canvas")},copyCanvasElement:function(s){var u=d.util.createCanvasElement();return u.width=s.width,u.height=s.height,u.getContext("2d").drawImage(s,0,0),u},toDataURL:function(s,u,p){return s.toDataURL("image/"+u,p)},createImage:function(){return d.document.createElement("img")},multiplyTransformMatrices:function(s,u,p){return[s[0]*u[0]+s[2]*u[1],s[1]*u[0]+s[3]*u[1],s[0]*u[2]+s[2]*u[3],s[1]*u[2]+s[3]*u[3],p?0:s[0]*u[4]+s[2]*u[5]+s[4],p?0:s[1]*u[4]+s[3]*u[5]+s[5]]},qrDecompose:function(s){var u=f(s[1],s[0]),p=h(s[0],2)+h(s[1],2),l=o(p),y=(s[0]*s[3]-s[2]*s[1])/l,S=f(s[0]*s[2]+s[1]*s[3],p);return{angle:u/r,scaleX:l,scaleY:y,skewX:S/r,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return d.iMatrix.concat();var u=d.util.degreesToRadians(s.angle),p=d.util.cos(u),l=d.util.sin(u);return[p,l,-l,p,0,0]},calcDimensionsMatrix:function(s){var u=typeof s.scaleX>"u"?1:s.scaleX,p=typeof s.scaleY>"u"?1:s.scaleY,l=[s.flipX?-u:u,0,0,s.flipY?-p:p,0,0],y=d.util.multiplyTransformMatrices,S=d.util.degreesToRadians;return s.skewX&&(l=y(l,[1,0,Math.tan(S(s.skewX)),1],!0)),s.skewY&&(l=y(l,[1,Math.tan(S(s.skewY)),0,1],!0)),l},composeMatrix:function(s){var u=[1,0,0,1,s.translateX||0,s.translateY||0],p=d.util.multiplyTransformMatrices;return s.angle&&(u=p(u,d.util.calcRotateMatrix(s))),(1!==s.scaleX||1!==s.scaleY||s.skewX||s.skewY||s.flipX||s.flipY)&&(u=p(u,d.util.calcDimensionsMatrix(s))),u},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,u,p,l){l>0&&(u>l?u-=l:u=0,p>l?p-=l:p=0);var S,y=!0,A=s.getImageData(u,p,2*l||1,2*l||1),O=A.data.length;for(S=3;S<O&&0!=(y=A.data[S]<=0);S+=4);return A=null,y},parsePreserveAspectRatioAttribute:function(s){var S,u="meet",y=s.split(" ");return y&&y.length&&("meet"!==(u=y.pop())&&"slice"!==u?(S=u,u="meet"):y.length&&(S=y.pop())),{meetOrSlice:u,alignX:"none"!==S?S.slice(1,4):"none",alignY:"none"!==S?S.slice(5,8):"none"}},clearFabricFontCache:function(s){(s=(s||"").toLowerCase())?d.charWidthsCache[s]&&delete d.charWidthsCache[s]:d.charWidthsCache={}},limitDimsByArea:function(s,u){var p=Math.sqrt(u*s),l=Math.floor(u/p);return{x:Math.floor(p),y:l}},capValue:function(s,u,p){return Math.max(s,Math.min(u,p))},findScaleToFit:function(s,u){return Math.min(u.width/s.width,u.height/s.height)},findScaleToCover:function(s,u){return Math.max(u.width/s.width,u.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(u){return d.util.toFixed(u,d.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,u){var p=d.util.invertTransform(u),l=d.util.multiplyTransformMatrices(p,s.calcOwnMatrix());d.util.applyTransformToObject(s,l)},addTransformToObject:function(s,u){d.util.applyTransformToObject(s,d.util.multiplyTransformMatrices(u,s.calcOwnMatrix()))},applyTransformToObject:function(s,u){var p=d.util.qrDecompose(u),l=new d.Point(p.translateX,p.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",p.scaleX),s.set("scaleY",p.scaleY),s.skewX=p.skewX,s.skewY=p.skewY,s.angle=p.angle,s.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(s,u,p){var l=s/2,y=u/2,S=[{x:-l,y:-y},{x:l,y:-y},{x:-l,y},{x:l,y}],x=d.util.calcDimensionsMatrix(p),A=d.util.makeBoundingBoxFromPoints(S,x);return{x:A.width,y:A.height}},mergeClipPaths:function(s,u){var p=s,l=u;p.inverted&&!l.inverted&&(p=u,l=s),d.util.applyTransformToObject(l,d.util.multiplyTransformMatrices(d.util.invertTransform(p.calcTransformMatrix()),l.calcTransformMatrix()));var y=p.inverted&&l.inverted;return y&&(p.inverted=l.inverted=!1),new d.Group([p],{clipPath:l,inverted:y})},hasStyleChanged:function(s,u,p){return p=p||!1,s.fill!==u.fill||s.stroke!==u.stroke||s.strokeWidth!==u.strokeWidth||s.fontSize!==u.fontSize||s.fontFamily!==u.fontFamily||s.fontWeight!==u.fontWeight||s.fontStyle!==u.fontStyle||s.textBackgroundColor!==u.textBackgroundColor||s.deltaY!==u.deltaY||p&&(s.overline!==u.overline||s.underline!==u.underline||s.linethrough!==u.linethrough)},stylesToArray:function(p,u){p=d.util.object.clone(p,!0);for(var l=u.split("\n"),y=-1,S={},x=[],A=0;A<l.length;A++)if(p[A])for(var O=0;O<l[A].length;O++){y++;var j=p[A][O];j&&Object.keys(j).length>0&&(d.util.hasStyleChanged(S,j,!0)?x.push({start:y,end:y+1,style:j}):x[x.length-1].end++),S=j||{}}else y+=l[A].length;return x},stylesFromArray:function(s,u){if(!Array.isArray(s))return s;for(var p=u.split("\n"),l=-1,y=0,S={},x=0;x<p.length;x++)for(var A=0;A<p[x].length;A++)l++,s[y]&&s[y].start<=l&&l<s[y].end&&(S[x]=S[x]||{},S[x][A]=Object.assign({},s[y].style),l===s[y].end-1&&y++);return S}},function(){var m=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},f={m:"l",M:"L"};function h(q,le,ae,he,Fe,de,ee,De,Me,We,$e){var rt=d.util.cos(q),Ke=d.util.sin(q),Ct=d.util.cos(le),qe=d.util.sin(le),Ne=ae*Fe*Ct-he*de*qe+ee,tt=he*Fe*Ct+ae*de*qe+De;return["C",We+Me*(-ae*Fe*Ke-he*de*rt),$e+Me*(-he*Fe*Ke+ae*de*rt),Ne+Me*(ae*Fe*qe+he*de*Ct),tt+Me*(he*Fe*qe-ae*de*Ct),Ne,tt]}function a(q,le,ae,he){var Fe=Math.atan2(le,q),de=Math.atan2(he,ae);return de>=Fe?de-Fe:2*Math.PI-(Fe-de)}function u(q,le,ae){for(var $e=function r(q,le,ae,he,Fe,de,ee){var De=Math.PI,Me=ee*De/180,We=d.util.sin(Me),$e=d.util.cos(Me),rt=0,Ke=0,Ct=-$e*q*.5-We*le*.5,qe=-$e*le*.5+We*q*.5,Ne=(ae=Math.abs(ae))*ae,tt=(he=Math.abs(he))*he,Ve=qe*qe,Xe=Ct*Ct,lt=Ne*tt-Ne*Ve-tt*Xe,vt=0;if(lt<0){var Mt=Math.sqrt(1-lt/(Ne*tt));ae*=Mt,he*=Mt}else vt=(Fe===de?-1:1)*Math.sqrt(lt/(Ne*Ve+tt*Xe));var xt=vt*ae*qe/he,nt=-vt*he*Ct/ae,It=$e*xt-We*nt+.5*q,Lt=We*xt+$e*nt+.5*le,Gt=a(1,0,(Ct-xt)/ae,(qe-nt)/he),zt=a((Ct-xt)/ae,(qe-nt)/he,(-Ct-xt)/ae,(-qe-nt)/he);0===de&&zt>0?zt-=2*De:1===de&&zt<0&&(zt+=2*De);for(var mt=Math.ceil(Math.abs(zt/De*2)),Qe=[],je=zt/mt,pt=8/3*Math.sin(je/4)*Math.sin(je/4)/Math.sin(je/2),ye=Gt+je,Ie=0;Ie<mt;Ie++)Qe[Ie]=h(Gt,ye,$e,We,ae,he,It,Lt,pt,rt,Ke),rt=Qe[Ie][5],Ke=Qe[Ie][6],Gt=ye,ye+=je;return Qe}(ae[6]-q,ae[7]-le,ae[1],ae[2],ae[4],ae[5],ae[3]),rt=0,Ke=$e.length;rt<Ke;rt++)$e[rt][1]+=q,$e[rt][2]+=le,$e[rt][3]+=q,$e[rt][4]+=le,$e[rt][5]+=q,$e[rt][6]+=le;return $e}function l(q,le,ae,he){return Math.sqrt((ae-q)*(ae-q)+(he-le)*(he-le))}function O(q,le,ae,he,Fe,de,ee,De){return function(Me){var We=function y(q){return q*q*q}(Me),$e=function S(q){return 3*q*q*(1-q)}(Me),rt=function x(q){return 3*q*(1-q)*(1-q)}(Me),Ke=function A(q){return(1-q)*(1-q)*(1-q)}(Me);return{x:ee*We+Fe*$e+ae*rt+q*Ke,y:De*We+de*$e+he*rt+le*Ke}}}function j(q,le,ae,he,Fe,de,ee,De){return function(Me){var We=1-Me;return Math.atan2(3*We*We*(he-le)+6*We*Me*(de-he)+3*Me*Me*(De-de),3*We*We*(ae-q)+6*We*Me*(Fe-ae)+3*Me*Me*(ee-Fe))}}function Ce(q,le,ae,he,Fe,de){return function(ee){var De=function Z(q){return q*q}(ee),Me=function ue(q){return 2*q*(1-q)}(ee),We=function pe(q){return(1-q)*(1-q)}(ee);return{x:Fe*De+ae*Me+q*We,y:de*De+he*Me+le*We}}}function Se(q,le,ae,he,Fe,de){return function(ee){var De=1-ee;return Math.atan2(2*De*(he-le)+2*ee*(de-he),2*De*(ae-q)+2*ee*(Fe-ae))}}function He(q,le,ae){var Fe,ee,he={x:le,y:ae},de=0;for(ee=1;ee<=100;ee+=1)Fe=q(ee/100),de+=l(he.x,he.y,Fe.x,Fe.y),he=Fe;return de}function at(q){for(var he,We,$e,rt,le=0,ae=q.length,Fe=0,de=0,ee=0,De=0,Me=[],Ke=0;Ke<ae;Ke++){switch($e={x:Fe,y:de,command:(he=q[Ke])[0]},he[0]){case"M":$e.length=0,ee=Fe=he[1],De=de=he[2];break;case"L":$e.length=l(Fe,de,he[1],he[2]),Fe=he[1],de=he[2];break;case"C":We=O(Fe,de,he[1],he[2],he[3],he[4],he[5],he[6]),rt=j(Fe,de,he[1],he[2],he[3],he[4],he[5],he[6]),$e.iterator=We,$e.angleFinder=rt,$e.length=He(We,Fe,de),Fe=he[5],de=he[6];break;case"Q":We=Ce(Fe,de,he[1],he[2],he[3],he[4]),rt=Se(Fe,de,he[1],he[2],he[3],he[4]),$e.iterator=We,$e.angleFinder=rt,$e.length=He(We,Fe,de),Fe=he[3],de=he[4];break;case"Z":case"z":$e.destX=ee,$e.destY=De,$e.length=l(Fe,de,ee,De),Fe=ee,de=De}le+=$e.length,Me.push($e)}return Me.push({length:le,x:Fe,y:de}),Me}d.util.joinPath=function(q){return q.map(function(le){return le.join(" ")}).join(" ")},d.util.parsePath=function Ee(q){var he,Fe,rt,Ke,Ct,le=[],ae=[],de=d.rePathCommand,ee="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",De="("+ee+")"+d.commaWsp,Me="([01])"+d.commaWsp+"?",$e=new RegExp(De+"?"+De+"?"+De+Me+Me+De+"?("+ee+")","g");if(!q||!q.match)return le;for(var Ne,qe=0,tt=(Ct=q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;qe<tt;qe++){Ke=(he=Ct[qe]).slice(1).trim(),ae.length=0;var Ve=he.charAt(0);if(Ne=[Ve],"a"===Ve.toLowerCase())for(var Xe;Xe=$e.exec(Ke);)for(var lt=1;lt<Xe.length;lt++)ae.push(Xe[lt]);else for(;rt=de.exec(Ke);)ae.push(rt[0]);lt=0;for(var vt=ae.length;lt<vt;lt++)Fe=parseFloat(ae[lt]),isNaN(Fe)||Ne.push(Fe);var Mt=o[Ve.toLowerCase()],xt=f[Ve]||Ve;if(Ne.length-1>Mt)for(var nt=1,It=Ne.length;nt<It;nt+=Mt)le.push([Ve].concat(Ne.slice(nt,nt+Mt))),Ve=xt;else le.push(Ne)}return le},d.util.makePathSimpler=function p(q){var ee,De,Me,$e,rt,Ke,le=0,ae=0,he=q.length,Fe=0,de=0,We=[];for(De=0;De<he;++De){switch(Me=!1,(ee=q[De].slice(0))[0]){case"l":ee[0]="L",ee[1]+=le,ee[2]+=ae;case"L":le=ee[1],ae=ee[2];break;case"h":ee[1]+=le;case"H":ee[0]="L",ee[2]=ae,le=ee[1];break;case"v":ee[1]+=ae;case"V":ee[0]="L",ae=ee[1],ee[1]=le,ee[2]=ae;break;case"m":ee[0]="M",ee[1]+=le,ee[2]+=ae;case"M":le=ee[1],ae=ee[2],Fe=ee[1],de=ee[2];break;case"c":ee[0]="C",ee[1]+=le,ee[2]+=ae,ee[3]+=le,ee[4]+=ae,ee[5]+=le,ee[6]+=ae;case"C":rt=ee[3],Ke=ee[4],le=ee[5],ae=ee[6];break;case"s":ee[0]="S",ee[1]+=le,ee[2]+=ae,ee[3]+=le,ee[4]+=ae;case"S":"C"===$e?(rt=2*le-rt,Ke=2*ae-Ke):(rt=le,Ke=ae),le=ee[3],ae=ee[4],ee[0]="C",ee[5]=ee[3],ee[6]=ee[4],ee[3]=ee[1],ee[4]=ee[2],ee[1]=rt,ee[2]=Ke,rt=ee[3],Ke=ee[4];break;case"q":ee[0]="Q",ee[1]+=le,ee[2]+=ae,ee[3]+=le,ee[4]+=ae;case"Q":rt=ee[1],Ke=ee[2],le=ee[3],ae=ee[4];break;case"t":ee[0]="T",ee[1]+=le,ee[2]+=ae;case"T":"Q"===$e?(rt=2*le-rt,Ke=2*ae-Ke):(rt=le,Ke=ae),ee[0]="Q",le=ee[1],ae=ee[2],ee[1]=rt,ee[2]=Ke,ee[3]=le,ee[4]=ae;break;case"a":ee[0]="A",ee[6]+=le,ee[7]+=ae;case"A":Me=!0,We=We.concat(u(le,ae,ee)),le=ee[6],ae=ee[7];break;case"z":case"Z":le=Fe,ae=de}Me||We.push(ee),$e=ee[0]}return We},d.util.getSmoothPathFromPoints=function xe(q,le){var he,ae=[],Fe=new d.Point(q[0].x,q[0].y),de=new d.Point(q[1].x,q[1].y),ee=q.length,De=1,Me=0,We=ee>2;for(We&&(De=q[2].x<de.x?-1:q[2].x===de.x?0:1,Me=q[2].y<de.y?-1:q[2].y===de.y?0:1),ae.push(["M",Fe.x-De*(le=le||0),Fe.y-Me*le]),he=1;he<ee;he++){if(!Fe.eq(de)){var $e=Fe.midPointFrom(de);ae.push(["Q",Fe.x,Fe.y,$e.x,$e.y])}Fe=q[he],he+1<q.length&&(de=q[he+1])}return We&&(De=Fe.x>q[he-2].x?1:Fe.x===q[he-2].x?0:-1,Me=Fe.y>q[he-2].y?1:Fe.y===q[he-2].y?0:-1),ae.push(["L",Fe.x+De*le,Fe.y+Me*le]),ae},d.util.getPathSegmentsInfo=at,d.util.getBoundsOfCurve=function s(q,le,ae,he,Fe,de,ee,De){var Me;if(d.cachesBoundsOfCurve&&(Me=m.call(arguments),d.boundsOfCurveCache[Me]))return d.boundsOfCurveCache[Me];var Ne,tt,Ve,Xe,lt,vt,Mt,xt,We=Math.sqrt,$e=Math.min,rt=Math.max,Ke=Math.abs,Ct=[],qe=[[],[]];tt=6*q-12*ae+6*Fe,Ne=-3*q+9*ae-9*Fe+3*ee,Ve=3*ae-3*q;for(var nt=0;nt<2;++nt)if(nt>0&&(tt=6*le-12*he+6*de,Ne=-3*le+9*he-9*de+3*De,Ve=3*he-3*le),Ke(Ne)<1e-12){if(Ke(tt)<1e-12)continue;0<(Xe=-Ve/tt)&&Xe<1&&Ct.push(Xe)}else!((Mt=tt*tt-4*Ve*Ne)<0)&&(0<(lt=(-tt+(xt=We(Mt)))/(2*Ne))&&lt<1&&Ct.push(lt),0<(vt=(-tt-xt)/(2*Ne))&&vt<1&&Ct.push(vt));for(var mt,Gt=Ct.length,zt=Gt;Gt--;)qe[0][Gt]=(mt=1-(Xe=Ct[Gt]))*mt*mt*q+3*mt*mt*Xe*ae+3*mt*Xe*Xe*Fe+Xe*Xe*Xe*ee,qe[1][Gt]=mt*mt*mt*le+3*mt*mt*Xe*he+3*mt*Xe*Xe*de+Xe*Xe*Xe*De;qe[0][zt]=q,qe[1][zt]=le,qe[0][zt+1]=ee,qe[1][zt+1]=De;var Qe=[{x:$e.apply(null,qe[0]),y:$e.apply(null,qe[1])},{x:rt.apply(null,qe[0]),y:rt.apply(null,qe[1])}];return d.cachesBoundsOfCurve&&(d.boundsOfCurveCache[Me]=Qe),Qe},d.util.getPointOnPath=function ke(q,le,ae){ae||(ae=at(q));for(var he=0;le-ae[he].length>0&&he<ae.length-2;)le-=ae[he].length,he++;var Me,Fe=ae[he],de=le/Fe.length,De=q[he];switch(Fe.command){case"M":return{x:Fe.x,y:Fe.y,angle:0};case"Z":case"z":return(Me=new d.Point(Fe.x,Fe.y).lerp(new d.Point(Fe.destX,Fe.destY),de)).angle=Math.atan2(Fe.destY-Fe.y,Fe.destX-Fe.x),Me;case"L":return(Me=new d.Point(Fe.x,Fe.y).lerp(new d.Point(De[1],De[2]),de)).angle=Math.atan2(De[2]-Fe.y,De[1]-Fe.x),Me;case"C":case"Q":return function ot(q,le){for(var ee,De,$e,ae=0,he=0,Fe=q.iterator,de={x:q.x,y:q.y},Me=.01,We=q.angleFinder;he<le&&Me>1e-4;)ee=Fe(ae),$e=ae,(De=l(de.x,de.y,ee.x,ee.y))+he>le?(ae-=Me,Me/=2):(de=ee,ae+=Me,he+=De);return ee.angle=We($e),ee}(Fe,le)}},d.util.transformPath=function Le(q,le,ae){return ae&&(le=d.util.multiplyTransformMatrices(le,[1,0,0,1,-ae.x,-ae.y])),q.map(function(he){for(var Fe=he.slice(0),de={},ee=1;ee<he.length-1;ee+=2)de.x=he[ee],de.y=he[ee+1],de=d.util.transformPoint(de,le),Fe[ee]=de.x,Fe[ee+1]=de.y;return Fe})}}(),function(){var m=Array.prototype.slice;function a(s,u,p){if(s&&0!==s.length){var l=s.length-1,y=u?s[l][u]:s[l];if(u)for(;l--;)p(s[l][u],y)&&(y=s[l][u]);else for(;l--;)p(s[l],y)&&(y=s[l]);return y}}d.util.array={fill:function r(s,u){for(var p=s.length;p--;)s[p]=u;return s},invoke:function o(s,u){for(var p=m.call(arguments,2),l=[],y=0,S=s.length;y<S;y++)l[y]=p.length?s[y][u].apply(s[y],p):s[y][u].call(s[y]);return l},min:function h(s,u){return a(s,u,function(p,l){return p<l})},max:function f(s,u){return a(s,u,function(p,l){return p>=l})}}}(),function(){function m(f,h,r){if(r)if(!d.isLikelyNode&&h instanceof Element)f=h;else if(h instanceof Array){f=[];for(var a=0,s=h.length;a<s;a++)f[a]=m({},h[a],r)}else if(h&&"object"==typeof h)for(var u in h)"canvas"===u||"group"===u?f[u]=null:h.hasOwnProperty(u)&&(f[u]=m({},h[u],r));else f=h;else for(var u in h)f[u]=h[u];return f}d.util.object={extend:m,clone:function o(f,h){return m({},f,h)}},d.util.object.extend(d.util,d.Observable)}(),function(){function r(a,s){var u=a.charCodeAt(s);if(isNaN(u))return"";if(u<55296||u>57343)return a.charAt(s);if(55296<=u&&u<=56319){if(a.length<=s+1)throw"High surrogate without following low surrogate";var p=a.charCodeAt(s+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return a.charAt(s)+a.charAt(s+1)}if(0===s)throw"Low surrogate without preceding high surrogate";var l=a.charCodeAt(s-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}d.util.string={camelize:function m(a){return a.replace(/-+(.)?/g,function(s,u){return u?u.toUpperCase():""})},capitalize:function o(a,s){return a.charAt(0).toUpperCase()+(s?a.slice(1):a.slice(1).toLowerCase())},escapeXml:function f(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function h(a){var u,s=0,p=[];for(s=0;s<a.length;s++)!1!==(u=r(a,s))&&p.push(u);return p}}}(),function(){var m=Array.prototype.slice,o=function(){},f=function(){for(var u in{toString:1})if("toString"===u)return!1;return!0}(),h=function(u,p,l){for(var y in p)u.prototype[y]=y in u.prototype&&"function"==typeof u.prototype[y]&&(p[y]+"").indexOf("callSuper")>-1?function(S){return function(){var x=this.constructor.superclass;this.constructor.superclass=l;var A=p[S].apply(this,arguments);if(this.constructor.superclass=x,"initialize"!==S)return A}}(y):p[y],f&&(p.toString!==Object.prototype.toString&&(u.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=p.valueOf))};function r(){}function a(u){for(var p=null,l=this;l.constructor.superclass;){var y=l.constructor.superclass.prototype[u];if(l[u]!==y){p=y;break}l=l.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,m.call(arguments,1)):p.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}d.util.createClass=function s(){var u=null,p=m.call(arguments,0);function l(){this.initialize.apply(this,arguments)}"function"==typeof p[0]&&(u=p.shift()),l.superclass=u,l.subclasses=[],u&&(r.prototype=u.prototype,l.prototype=new r,u.subclasses.push(l));for(var y=0,S=p.length;y<S;y++)h(l,p[y],u);return l.prototype.initialize||(l.prototype.initialize=o),l.prototype.constructor=l,l.prototype.callSuper=a,l}}(),function(){var m=!!d.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];d.util.addListener=function(h,r,a,s){h&&h.addEventListener(r,a,!m&&s)},d.util.removeListener=function(h,r,a,s){h&&h.removeEventListener(r,a,!m&&s)},d.util.getPointer=function(h){var a=d.util.getScrollLeftTop(h.target),s=function f(h){var r=h.changedTouches;return r&&r[0]?r[0]:h}(h);return{x:s.clientX+a.left,y:s.clientY+a.top}},d.util.isTouchEvent=function(h){return o.indexOf(h.type)>-1||"touch"===h.pointerType}}(),function(){var o=d.document.createElement("div"),r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(s){return s};"string"==typeof o.style.opacity?a=function(s,u){return s.style.opacity=u,s}:"string"==typeof o.style.filter&&(a=function(s,u){var p=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(p.zoom=1),r.test(p.filter)?p.filter=p.filter.replace(r,u=u>=.9999?"":"alpha(opacity="+100*u+")"):p.filter+=" alpha(opacity="+100*u+")",s}),d.util.setStyle=function m(s,u){var p=s.style;if(!p)return s;if("string"==typeof u)return s.style.cssText+=";"+u,u.indexOf("opacity")>-1?a(s,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var l in u)"opacity"===l?a(s,u[l]):p.setProperty("float"===l||"cssFloat"===l?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":l,u[l]);return s}}(),function(){var f,l,A,O,m=Array.prototype.slice,h=function(A){return m.call(A,0)};try{f=h(d.document.childNodes)instanceof Array}catch{}function r(A,O){var j=d.document.createElement(A);for(var Z in O)"class"===Z?j.className=O[Z]:"for"===Z?j.htmlFor=O[Z]:j.setAttribute(Z,O[Z]);return j}function u(A){for(var O=0,j=0,Z=d.document.documentElement,ue=d.document.body||{scrollLeft:0,scrollTop:0};A&&(A.parentNode||A.host)&&((A=A.parentNode||A.host)===d.document?(O=ue.scrollLeft||Z.scrollLeft||0,j=ue.scrollTop||Z.scrollTop||0):(O+=A.scrollLeft||0,j+=A.scrollTop||0),1!==A.nodeType||"fixed"!==A.style.position););return{left:O,top:j}}f||(h=function(A){for(var O=new Array(A.length),j=A.length;j--;)O[j]=A[j];return O}),l=d.document.defaultView&&d.document.defaultView.getComputedStyle?function(A,O){var j=d.document.defaultView.getComputedStyle(A,null);return j?j[O]:void 0}:function(A,O){var j=A.style[O];return!j&&A.currentStyle&&(j=A.currentStyle[O]),j},O="userSelect"in(A=d.document.documentElement.style)?"userSelect":"MozUserSelect"in A?"MozUserSelect":"WebkitUserSelect"in A?"WebkitUserSelect":"KhtmlUserSelect"in A?"KhtmlUserSelect":"",d.util.makeElementUnselectable=function j(ue){return typeof ue.onselectstart<"u"&&(ue.onselectstart=d.util.falseFunction),O?ue.style[O]="none":"string"==typeof ue.unselectable&&(ue.unselectable="on"),ue},d.util.makeElementSelectable=function Z(ue){return typeof ue.onselectstart<"u"&&(ue.onselectstart=null),O?ue.style[O]="":"string"==typeof ue.unselectable&&(ue.unselectable=""),ue},d.util.setImageSmoothing=function x(A,O){A.imageSmoothingEnabled=A.imageSmoothingEnabled||A.webkitImageSmoothingEnabled||A.mozImageSmoothingEnabled||A.msImageSmoothingEnabled||A.oImageSmoothingEnabled,A.imageSmoothingEnabled=O},d.util.getById=function o(A){return"string"==typeof A?d.document.getElementById(A):A},d.util.toArray=h,d.util.addClass=function a(A,O){A&&-1===(" "+A.className+" ").indexOf(" "+O+" ")&&(A.className+=(A.className?" ":"")+O)},d.util.makeElement=r,d.util.wrapElement=function s(A,O,j){return"string"==typeof O&&(O=r(O,j)),A.parentNode&&A.parentNode.replaceChild(O,A),O.appendChild(A),O},d.util.getScrollLeftTop=u,d.util.getElementOffset=function p(A){var O,pe,j=A&&A.ownerDocument,Z={left:0,top:0},ue={left:0,top:0},Ce={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!j)return ue;for(var Se in Ce)ue[Ce[Se]]+=parseInt(l(A,Se),10)||0;return O=j.documentElement,typeof A.getBoundingClientRect<"u"&&(Z=A.getBoundingClientRect()),pe=u(A),{left:Z.left+pe.left-(O.clientLeft||0)+ue.left,top:Z.top+pe.top-(O.clientTop||0)+ue.top}},d.util.getNodeCanvas=function y(A){var O=d.jsdomImplForWrapper(A);return O._canvas||O._image},d.util.cleanUpJsdomNode=function S(A){if(d.isLikelyNode){var O=d.jsdomImplForWrapper(A);O&&(O._image=null,O._canvas=null,O._currentSrc=null,O._attributes=null,O._classList=null)}}}(),function(){function o(){}d.util.request=function f(h,r){r||(r={});var a=r.method?r.method.toUpperCase():"GET",s=r.onComplete||function(){},u=new d.window.XMLHttpRequest,p=r.body||r.parameters;return u.onreadystatechange=function(){4===u.readyState&&(s(u),u.onreadystatechange=o)},"GET"===a&&(p=null,"string"==typeof r.parameters&&(h=function m(h,r){return h+(/\?/.test(h)?"&":"?")+r}(h,r.parameters))),u.open(a,h,!0),("POST"===a||"PUT"===a)&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(p),u}}(),d.log=console.log,d.warn=console.warn,function(){var m=d.util.object.extend,o=d.util.object.clone,f=[];function h(){return!1}function r(y,S,x,A){return-x*Math.cos(y/A*(Math.PI/2))+x+S}d.util.object.extend(f,{cancelAll:function(){var y=this.splice(0);return y.forEach(function(S){S.cancel()}),y},cancelByCanvas:function(y){if(!y)return[];var S=this.filter(function(x){return"object"==typeof x.target&&x.target.canvas===y});return S.forEach(function(x){x.cancel()}),S},cancelByTarget:function(y){var S=this.findAnimationsByTarget(y);return S.forEach(function(x){x.cancel()}),S},findAnimationIndex:function(y){return this.indexOf(this.findAnimation(y))},findAnimation:function(y){return this.find(function(S){return S.cancel===y})},findAnimationsByTarget:function(y){return y?this.filter(function(S){return S.target===y}):[]}});var s=d.window.requestAnimationFrame||d.window.webkitRequestAnimationFrame||d.window.mozRequestAnimationFrame||d.window.oRequestAnimationFrame||d.window.msRequestAnimationFrame||function(y){return d.window.setTimeout(y,1e3/60)},u=d.window.cancelAnimationFrame||d.window.clearTimeout;function p(){return s.apply(d.window,arguments)}d.util.animate=function a(y){y||(y={});var x,S=!1,A=function(){var O=d.runningAnimations.indexOf(x);return O>-1&&d.runningAnimations.splice(O,1)[0]};return x=m(o(y),{cancel:function(){return S=!0,A()},currentValue:"startValue"in y?y.startValue:0,completionRate:0,durationRate:0}),d.runningAnimations.push(x),p(function(O){var pe,j=O||+new Date,Z=y.duration||500,ue=j+Z,Ce=y.onChange||h,Se=y.abort||h,He=y.onComplete||h,ot=y.easing||r,at="startValue"in y&&y.startValue.length>0,ke="startValue"in y?y.startValue:0,Ee="endValue"in y?y.endValue:100,xe=y.byValue||(at?ke.map(function(Le,q){return Ee[q]-ke[q]}):Ee-ke);y.onStart&&y.onStart(),function Le(q){var le=(pe=q||+new Date)>ue?Z:pe-j,ae=le/Z,he=at?ke.map(function(de,ee){return ot(le,ke[ee],xe[ee],Z)}):ot(le,ke,xe,Z),Fe=Math.abs(at?(he[0]-ke[0])/xe[0]:(he-ke)/xe);if(x.currentValue=at?he.slice():he,x.completionRate=Fe,x.durationRate=ae,!S){if(Se(he,Fe,ae))return void A();if(pe>ue)return x.currentValue=at?Ee.slice():Ee,x.completionRate=1,x.durationRate=1,Ce(at?Ee.slice():Ee,1,1),He(Ee,1,1),void A();Ce(he,Fe,ae),p(Le)}}(j)}),x.cancel},d.util.requestAnimFrame=p,d.util.cancelAnimFrame=function l(){return u.apply(d.window,arguments)},d.runningAnimations=f}(),function(){function m(f,h,r){var a="rgba("+parseInt(f[0]+r*(h[0]-f[0]),10)+","+parseInt(f[1]+r*(h[1]-f[1]),10)+","+parseInt(f[2]+r*(h[2]-f[2]),10);return(a+=","+(f&&h?parseFloat(f[3]+r*(h[3]-f[3])):1))+")"}d.util.animateColor=function o(f,h,r,a){var s=new d.Color(f).getSource(),u=new d.Color(h).getSource(),p=a.onComplete,l=a.onChange;return d.util.animate(d.util.object.extend(a=a||{},{duration:r||500,startValue:s,endValue:u,byValue:u,easing:function(y,S,x,A){return m(S,x,a.colorEasing?a.colorEasing(y,A):1-Math.cos(y/A*(Math.PI/2)))},onComplete:function(y,S,x){if(p)return p(m(u,u,0),S,x)},onChange:function(y,S,x){if(l){if(Array.isArray(y))return l(m(y,y,0),S,x);l(y,S,x)}}}))}}(),function(){function m(q,le,ae,he){return q<Math.abs(le)?(q=le,he=ae/4):he=0===le&&0===q?ae/(2*Math.PI)*Math.asin(1):ae/(2*Math.PI)*Math.asin(le/q),{a:q,c:le,p:ae,s:he}}function o(q,le,ae){return q.a*Math.pow(2,10*(le-=1))*Math.sin((le*ae-q.s)*(2*Math.PI)/q.p)}function Ee(q,le,ae,he){return ae-xe(he-q,0,ae,he)+le}function xe(q,le,ae,he){return(q/=he)<1/2.75?ae*(7.5625*q*q)+le:q<2/2.75?ae*(7.5625*(q-=1.5/2.75)*q+.75)+le:q<2.5/2.75?ae*(7.5625*(q-=2.25/2.75)*q+.9375)+le:ae*(7.5625*(q-=2.625/2.75)*q+.984375)+le}d.util.ease={easeInQuad:function(q,le,ae,he){return ae*(q/=he)*q+le},easeOutQuad:function(q,le,ae,he){return-ae*(q/=he)*(q-2)+le},easeInOutQuad:function(q,le,ae,he){return(q/=he/2)<1?ae/2*q*q+le:-ae/2*(--q*(q-2)-1)+le},easeInCubic:function(q,le,ae,he){return ae*(q/=he)*q*q+le},easeOutCubic:function f(q,le,ae,he){return ae*((q=q/he-1)*q*q+1)+le},easeInOutCubic:function h(q,le,ae,he){return(q/=he/2)<1?ae/2*q*q*q+le:ae/2*((q-=2)*q*q+2)+le},easeInQuart:function r(q,le,ae,he){return ae*(q/=he)*q*q*q+le},easeOutQuart:function a(q,le,ae,he){return-ae*((q=q/he-1)*q*q*q-1)+le},easeInOutQuart:function s(q,le,ae,he){return(q/=he/2)<1?ae/2*q*q*q*q+le:-ae/2*((q-=2)*q*q*q-2)+le},easeInQuint:function u(q,le,ae,he){return ae*(q/=he)*q*q*q*q+le},easeOutQuint:function p(q,le,ae,he){return ae*((q=q/he-1)*q*q*q*q+1)+le},easeInOutQuint:function l(q,le,ae,he){return(q/=he/2)<1?ae/2*q*q*q*q*q+le:ae/2*((q-=2)*q*q*q*q+2)+le},easeInSine:function y(q,le,ae,he){return-ae*Math.cos(q/he*(Math.PI/2))+ae+le},easeOutSine:function S(q,le,ae,he){return ae*Math.sin(q/he*(Math.PI/2))+le},easeInOutSine:function x(q,le,ae,he){return-ae/2*(Math.cos(Math.PI*q/he)-1)+le},easeInExpo:function A(q,le,ae,he){return 0===q?le:ae*Math.pow(2,10*(q/he-1))+le},easeOutExpo:function O(q,le,ae,he){return q===he?le+ae:ae*(1-Math.pow(2,-10*q/he))+le},easeInOutExpo:function j(q,le,ae,he){return 0===q?le:q===he?le+ae:(q/=he/2)<1?ae/2*Math.pow(2,10*(q-1))+le:ae/2*(2-Math.pow(2,-10*--q))+le},easeInCirc:function Z(q,le,ae,he){return-ae*(Math.sqrt(1-(q/=he)*q)-1)+le},easeOutCirc:function ue(q,le,ae,he){return ae*Math.sqrt(1-(q=q/he-1)*q)+le},easeInOutCirc:function pe(q,le,ae,he){return(q/=he/2)<1?-ae/2*(Math.sqrt(1-q*q)-1)+le:ae/2*(Math.sqrt(1-(q-=2)*q)+1)+le},easeInElastic:function Ce(q,le,ae,he){var de=0;return 0===q?le:1==(q/=he)?le+ae:(de||(de=.3*he),-o(m(ae,ae,de,1.70158),q,he)+le)},easeOutElastic:function Se(q,le,ae,he){var de=0;if(0===q)return le;if(1==(q/=he))return le+ae;de||(de=.3*he);var De=m(ae,ae,de,1.70158);return De.a*Math.pow(2,-10*q)*Math.sin((q*he-De.s)*(2*Math.PI)/De.p)+De.c+le},easeInOutElastic:function He(q,le,ae,he){var de=0;if(0===q)return le;if(2==(q/=he/2))return le+ae;de||(de=he*(.3*1.5));var De=m(ae,ae,de,1.70158);return q<1?-.5*o(De,q,he)+le:De.a*Math.pow(2,-10*(q-=1))*Math.sin((q*he-De.s)*(2*Math.PI)/De.p)*.5+De.c+le},easeInBack:function ot(q,le,ae,he,Fe){return void 0===Fe&&(Fe=1.70158),ae*(q/=he)*q*((Fe+1)*q-Fe)+le},easeOutBack:function at(q,le,ae,he,Fe){return void 0===Fe&&(Fe=1.70158),ae*((q=q/he-1)*q*((Fe+1)*q+Fe)+1)+le},easeInOutBack:function ke(q,le,ae,he,Fe){return void 0===Fe&&(Fe=1.70158),(q/=he/2)<1?ae/2*(q*q*((1+(Fe*=1.525))*q-Fe))+le:ae/2*((q-=2)*q*((1+(Fe*=1.525))*q+Fe)+2)+le},easeInBounce:Ee,easeOutBounce:xe,easeInOutBounce:function Le(q,le,ae,he){return q<he/2?.5*Ee(2*q,0,ae,he)+le:.5*xe(2*q-he,0,ae,he)+.5*ae+le}}}(),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.util.object.clone,r=o.util.toFixed,a=o.util.parseUnit,s=o.util.multiplyTransformMatrices,S={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},x={stroke:"strokeOpacity",fill:"fillOpacity"},A="font-size",O="clip-path";function j(de){return de in S?S[de]:de}function Z(de,ee,De,Me){var $e,We=Array.isArray(ee);if("fill"!==de&&"stroke"!==de||"none"!==ee){if("strokeUniform"===de)return"non-scaling-stroke"===ee;if("strokeDashArray"===de)ee="none"===ee?null:ee.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===de)ee=De&&De.transformMatrix?s(De.transformMatrix,o.parseTransformAttribute(ee)):o.parseTransformAttribute(ee);else if("visible"===de)ee="none"!==ee&&"hidden"!==ee,De&&!1===De.visible&&(ee=!1);else if("opacity"===de)ee=parseFloat(ee),De&&typeof De.opacity<"u"&&(ee*=De.opacity);else if("textAnchor"===de)ee="start"===ee?"left":"end"===ee?"right":"center";else if("charSpacing"===de)$e=a(ee,Me)/Me*1e3;else if("paintFirst"===de){var rt=ee.indexOf("fill"),Ke=ee.indexOf("stroke");ee="fill",(rt>-1&&Ke>-1&&Ke<rt||-1===rt&&Ke>-1)&&(ee="stroke")}else{if("href"===de||"xlink:href"===de||"font"===de)return ee;if("imageSmoothing"===de)return"optimizeQuality"===ee;$e=We?ee.map(a):a(ee,Me)}}else ee="";return!We&&isNaN($e)?ee:$e}function ue(de){return new RegExp("^("+de.join("|")+")\\b","i")}function Ce(de,ee){var We,$e,rt,Me=[];for($e=0,rt=ee.length;$e<rt;$e++)We=de.getElementsByTagName(ee[$e]),Me=Me.concat(Array.prototype.slice.call(We));return Me}function at(de,ee){var De,Me=!0;return(De=Ee(de,ee.pop()))&&ee.length&&(Me=function ke(de,ee){for(var De,Me=!0;de.parentNode&&1===de.parentNode.nodeType&&ee.length;)Me&&(De=ee.pop()),Me=Ee(de=de.parentNode,De);return 0===ee.length}(de,ee)),De&&Me&&0===ee.length}function Ee(de,ee){var $e,rt,De=de.nodeName,Me=de.getAttribute("class"),We=de.getAttribute("id");if($e=new RegExp("^"+De,"i"),ee=ee.replace($e,""),We&&ee.length&&($e=new RegExp("#"+We+"(?![a-zA-Z\\-]+)","i"),ee=ee.replace($e,"")),Me&&ee.length)for(rt=(Me=Me.split(" ")).length;rt--;)$e=new RegExp("\\."+Me[rt]+"(?![a-zA-Z\\-]+)","i"),ee=ee.replace($e,"");return 0===ee.length}function xe(de,ee){var De;if(de.getElementById&&(De=de.getElementById(ee)),De)return De;var Me,We,$e,rt=de.getElementsByTagName("*");for(We=0,$e=rt.length;We<$e;We++)if(ee===(Me=rt[We]).getAttribute("id"))return Me}o.svgValidTagNamesRegEx=ue(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),o.svgViewBoxElementsRegEx=ue(["symbol","image","marker","pattern","view","svg"]),o.svgInvalidAncestorsRegEx=ue(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),o.svgValidParentsRegEx=ue(["symbol","g","a","svg","clipPath","defs"]),o.cssRules={},o.gradientDefs={},o.clipPaths={},o.parseTransformAttribute=function(){function De(nt,It,Lt){nt[Lt]=Math.tan(o.util.degreesToRadians(It[0]))}var We=o.iMatrix,$e=o.reNum,rt=o.commaWsp,Xe="(?:(?:(matrix)\\s*\\(\\s*("+$e+")"+rt+"("+$e+")"+rt+"("+$e+")"+rt+"("+$e+")"+rt+"("+$e+")"+rt+"("+$e+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+$e+")(?:"+rt+"("+$e+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+$e+")(?:"+rt+"("+$e+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+$e+")(?:"+rt+"("+$e+")"+rt+"("+$e+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+$e+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+$e+")\\s*\\)))",Mt=new RegExp("^\\s*(?:(?:"+Xe+"(?:"+rt+"*"+Xe+")*)?)\\s*$"),xt=new RegExp(Xe,"g");return function(nt){var It=We.concat(),Lt=[];if(!nt||nt&&!Mt.test(nt))return It;nt.replace(xt,function(zt){var mt=new RegExp(Xe).exec(zt).filter(function(pt){return!!pt}),Qe=mt[1],je=mt.slice(2).map(parseFloat);switch(Qe){case"translate":!function Me(nt,It){nt[4]=It[0],2===It.length&&(nt[5]=It[1])}(It,je);break;case"rotate":je[0]=o.util.degreesToRadians(je[0]),function de(nt,It){var Lt=o.util.cos(It[0]),Gt=o.util.sin(It[0]),zt=0,mt=0;3===It.length&&(zt=It[1],mt=It[2]),nt[0]=Lt,nt[1]=Gt,nt[2]=-Gt,nt[3]=Lt,nt[4]=zt-(Lt*zt-Gt*mt),nt[5]=mt-(Gt*zt+Lt*mt)}(It,je);break;case"scale":!function ee(nt,It){var Gt=2===It.length?It[1]:It[0];nt[0]=It[0],nt[3]=Gt}(It,je);break;case"skewX":De(It,je,2);break;case"skewY":De(It,je,1);break;case"matrix":It=je}Lt.push(It.concat()),It=We.concat()});for(var Gt=Lt[0];Lt.length>1;)Lt.shift(),Gt=o.util.multiplyTransformMatrices(Gt,Lt[0]);return Gt}}();var q=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function le(de){if(!o.svgViewBoxElementsRegEx.test(de.nodeName))return{};var We,$e,rt,Ke,Ct,qe,ee=de.getAttribute("viewBox"),De=1,Me=1,Ne=de.getAttribute("width"),tt=de.getAttribute("height"),Ve=de.getAttribute("x")||0,Xe=de.getAttribute("y")||0,lt=de.getAttribute("preserveAspectRatio")||"",vt=!ee||!(ee=ee.match(q)),Mt=!Ne||!tt||"100%"===Ne||"100%"===tt,xt=vt&&Mt,nt={},It="",Lt=0,Gt=0;if(nt.width=0,nt.height=0,nt.toBeParsed=xt,vt&&(Ve||Xe)&&de.parentNode&&"#document"!==de.parentNode.nodeName&&(It=" translate("+a(Ve)+" "+a(Xe)+") ",Ct=(de.getAttribute("transform")||"")+It,de.setAttribute("transform",Ct),de.removeAttribute("x"),de.removeAttribute("y")),xt)return nt;if(vt)return nt.width=a(Ne),nt.height=a(tt),nt;if(We=-parseFloat(ee[1]),$e=-parseFloat(ee[2]),rt=parseFloat(ee[3]),Ke=parseFloat(ee[4]),nt.minX=We,nt.minY=$e,nt.viewBoxWidth=rt,nt.viewBoxHeight=Ke,Mt?(nt.width=rt,nt.height=Ke):(nt.width=a(Ne),nt.height=a(tt),De=nt.width/rt,Me=nt.height/Ke),"none"!==(lt=o.util.parsePreserveAspectRatioAttribute(lt)).alignX&&("meet"===lt.meetOrSlice&&(Me=De=De>Me?Me:De),"slice"===lt.meetOrSlice&&(Me=De=De>Me?De:Me),Lt=nt.width-rt*De,Gt=nt.height-Ke*De,"Mid"===lt.alignX&&(Lt/=2),"Mid"===lt.alignY&&(Gt/=2),"Min"===lt.alignX&&(Lt=0),"Min"===lt.alignY&&(Gt=0)),1===De&&1===Me&&0===We&&0===$e&&0===Ve&&0===Xe)return nt;if((Ve||Xe)&&"#document"!==de.parentNode.nodeName&&(It=" translate("+a(Ve)+" "+a(Xe)+") "),Ct=It+" matrix("+De+" 0 0 "+Me+" "+(We*De+Lt)+" "+($e*Me+Gt)+") ","svg"===de.nodeName){for(qe=de.ownerDocument.createElementNS(o.svgNS,"g");de.firstChild;)qe.appendChild(de.firstChild);de.appendChild(qe)}else(qe=de).removeAttribute("x"),qe.removeAttribute("y"),Ct=qe.getAttribute("transform")+Ct;return qe.setAttribute("transform",Ct),nt}function he(de,ee){var Me="xlink:href",$e=xe(de,ee.getAttribute(Me).slice(1));if($e&&$e.getAttribute(Me)&&he(de,$e),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(Ke){$e&&!ee.hasAttribute(Ke)&&$e.hasAttribute(Ke)&&ee.setAttribute(Ke,$e.getAttribute(Ke))}),!ee.children.length)for(var rt=$e.cloneNode(!0);rt.firstChild;)ee.appendChild(rt.firstChild);ee.removeAttribute(Me)}o.parseSVGDocument=function(de,ee,De,Me){if(de){!function Le(de){for(var ee=Ce(de,["use","svg:use"]),De=0;ee.length&&De<ee.length;){var Me=ee[De],We=Me.getAttribute("xlink:href")||Me.getAttribute("href");if(null===We)return;var Ve,Xe,lt,vt,$e=We.slice(1),rt=Me.getAttribute("x")||0,Ke=Me.getAttribute("y")||0,Ct=xe(de,$e).cloneNode(!0),qe=(Ct.getAttribute("transform")||"")+" translate("+rt+", "+Ke+")",tt=ee.length,Mt=o.svgNS;if(le(Ct),/^svg$/i.test(Ct.nodeName)){var xt=Ct.ownerDocument.createElementNS(Mt,"g");for(Xe=0,vt=(lt=Ct.attributes).length;Xe<vt;Xe++)Ve=lt.item(Xe),xt.setAttributeNS(Mt,Ve.nodeName,Ve.nodeValue);for(;Ct.firstChild;)xt.appendChild(Ct.firstChild);Ct=xt}for(Xe=0,vt=(lt=Me.attributes).length;Xe<vt;Xe++)"x"!==(Ve=lt.item(Xe)).nodeName&&"y"!==Ve.nodeName&&"xlink:href"!==Ve.nodeName&&"href"!==Ve.nodeName&&("transform"===Ve.nodeName?qe=Ve.nodeValue+" "+qe:Ct.setAttribute(Ve.nodeName,Ve.nodeValue));Ct.setAttribute("transform",qe),Ct.setAttribute("instantiated_by_use","1"),Ct.removeAttribute("id"),Me.parentNode.replaceChild(Ct,Me),ee.length===tt&&De++}}(de);var $e,rt,We=o.Object.__uid++,Ke=le(de),Ct=o.util.toArray(de.getElementsByTagName("*"));if(Ke.crossOrigin=Me&&Me.crossOrigin,Ke.svgUid=We,0===Ct.length&&o.isLikelyNode){var qe=[];for($e=0,rt=(Ct=de.selectNodes('//*[name(.)!="svg"]')).length;$e<rt;$e++)qe[$e]=Ct[$e];Ct=qe}var Ne=Ct.filter(function(Ve){return le(Ve),o.svgValidTagNamesRegEx.test(Ve.nodeName.replace("svg:",""))&&!function ae(de,ee){for(;de&&(de=de.parentNode);)if(de.nodeName&&ee.test(de.nodeName.replace("svg:",""))&&!de.getAttribute("instantiated_by_use"))return!0;return!1}(Ve,o.svgInvalidAncestorsRegEx)});if(!Ne||Ne&&!Ne.length)return void(ee&&ee([],{}));var tt={};Ct.filter(function(Ve){return"clipPath"===Ve.nodeName.replace("svg:","")}).forEach(function(Ve){var Xe=Ve.getAttribute("id");tt[Xe]=o.util.toArray(Ve.getElementsByTagName("*")).filter(function(lt){return o.svgValidTagNamesRegEx.test(lt.nodeName.replace("svg:",""))})}),o.gradientDefs[We]=o.getGradientDefs(de),o.cssRules[We]=o.getCSSRules(de),o.clipPaths[We]=tt,o.parseElements(Ne,function(Ve,Xe){ee&&(ee(Ve,Ke,Xe,Ct),delete o.gradientDefs[We],delete o.cssRules[We],delete o.clipPaths[We])},h(Ke),De,Me)}};var Fe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");f(o,{parseFontDeclaration:function(de,ee){var De=de.match(Fe);if(De){var Me=De[1],We=De[3],$e=De[4],rt=De[5],Ke=De[6];Me&&(ee.fontStyle=Me),We&&(ee.fontWeight=isNaN(parseFloat(We))?We:parseFloat(We)),$e&&(ee.fontSize=a($e)),Ke&&(ee.fontFamily=Ke),rt&&(ee.lineHeight="normal"===rt?1:rt)}},getGradientDefs:function(de){var Me,De=Ce(de,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),We=0,$e={};for(We=De.length;We--;)(Me=De[We]).getAttribute("xlink:href")&&he(de,Me),$e[Me.getAttribute("id")]=Me;return $e},parseAttributes:function(de,ee,De){if(de){var Me,$e,rt,We={};typeof De>"u"&&(De=de.getAttribute("svgUid")),de.parentNode&&o.svgValidParentsRegEx.test(de.parentNode.nodeName)&&(We=o.parseAttributes(de.parentNode,ee,De));var Ke=ee.reduce(function(lt,vt){return(Me=de.getAttribute(vt))&&(lt[vt]=Me),lt},{}),Ct=f(function ot(de,ee){var De={};for(var Me in o.cssRules[ee])if(at(de,Me.split(" ")))for(var We in o.cssRules[ee][Me])De[We]=o.cssRules[ee][Me][We];return De}(de,De),o.parseStyleAttribute(de));Ke=f(Ke,Ct),Ct[O]&&de.setAttribute(O,Ct[O]),$e=rt=We.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,Ke[A]&&(Ke[A]=$e=a(Ke[A],rt));var qe,Ne,tt={};for(var Ve in Ke)Ne=Z(qe=j(Ve),Ke[Ve],We,$e),tt[qe]=Ne;tt&&tt.font&&o.parseFontDeclaration(tt.font,tt);var Xe=f(We,tt);return o.svgValidParentsRegEx.test(de.nodeName)?Xe:function pe(de){for(var ee in x)if(!(typeof de[x[ee]]>"u"||""===de[ee])){if(typeof de[ee]>"u"){if(!o.Object.prototype[ee])continue;de[ee]=o.Object.prototype[ee]}if(0!==de[ee].indexOf("url(")){var De=new o.Color(de[ee]);de[ee]=De.setAlpha(r(De.getAlpha()*de[x[ee]],2)).toRgba()}}return de}(Xe)}},parseElements:function(de,ee,De,Me,We){new o.ElementsParser(de,ee,De,Me,We).parse()},parseStyleAttribute:function(de){var ee={},De=de.getAttribute("style");return De&&("string"==typeof De?function Se(de,ee){var De,Me;de.replace(/;\s*$/,"").split(";").forEach(function(We){var $e=We.split(":");De=$e[0].trim().toLowerCase(),Me=$e[1].trim(),ee[De]=Me})}(De,ee):function He(de,ee){for(var We in de)typeof de[We]>"u"||(ee[We.toLowerCase()]=de[We])}(De,ee)),ee},parsePointsAttribute:function(de){if(!de)return null;var De,Me,ee=[];for(De=0,Me=(de=(de=de.replace(/,/g," ").trim()).split(/\s+/)).length;De<Me;De+=2)ee.push({x:parseFloat(de[De]),y:parseFloat(de[De+1])});return ee},getCSSRules:function(de){var De,Me,ee=de.getElementsByTagName("style"),We={};for(De=0,Me=ee.length;De<Me;De++){var rt=ee[De].textContent;""!==(rt=rt.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&rt.split("}").filter(function(Ke){return Ke.trim()}).forEach(function(Ke){var Ct=Ke.split("{"),qe={},tt=Ct[1].trim().split(";").filter(function(vt){return vt.trim()});for(De=0,Me=tt.length;De<Me;De++){var Ve=tt[De].split(":"),Xe=Ve[0].trim(),lt=Ve[1].trim();qe[Xe]=lt}(Ke=Ct[0].trim()).split(",").forEach(function(vt){""!==(vt=vt.replace(/^svg/i,"").trim())&&(We[vt]?o.util.object.extend(We[vt],qe):We[vt]=o.util.object.clone(qe))})})}return We},loadSVGFromURL:function(de,ee,De,Me){de=de.replace(/^\n\s*/,"").trim(),new o.util.request(de,{method:"get",onComplete:function We($e){var rt=$e.responseXML;if(!rt||!rt.documentElement)return ee&&ee(null),!1;o.parseSVGDocument(rt.documentElement,function(Ke,Ct,qe,Ne){ee&&ee(Ke,Ct,qe,Ne)},De,Me)}})},loadSVGFromString:function(de,ee,De,Me){var $e=(new o.window.DOMParser).parseFromString(de.trim(),"text/xml");o.parseSVGDocument($e.documentElement,function(rt,Ke,Ct,qe){ee(rt,Ke,Ct,qe)},De,Me)}})}(Be),d.ElementsParser=function(m,o,f,h,r,a){this.elements=m,this.callback=o,this.options=f,this.reviver=h,this.svgUid=f&&f.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(m){m.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},m.createObjects=function(){var o=this;this.elements.forEach(function(f,h){f.setAttribute("svgUid",o.svgUid),o.createObject(f,h)})},m.findTag=function(o){return d[d.util.string.capitalize(o.tagName.replace("svg:",""))]},m.createObject=function(o,f){var h=this.findTag(o);if(h&&h.fromElement)try{h.fromElement(o,this.createCallback(f,o),this.options)}catch(r){d.log(r)}else this.checkIfDone()},m.createCallback=function(o,f){var h=this;return function(r){var a;h.resolveGradient(r,f,"fill"),h.resolveGradient(r,f,"stroke"),r instanceof d.Image&&r._originalElement&&(a=r.parsePreserveAspectRatioAttribute(f)),r._removeTransformMatrix(a),h.resolveClipPath(r,f),h.reviver&&h.reviver(f,r),h.instances[o]=r,h.checkIfDone()}},m.extractPropertyDefinition=function(o,f,h){var r=o[f],a=this.regexUrl;if(a.test(r)){a.lastIndex=0;var s=a.exec(r)[1];return a.lastIndex=0,d[h][this.svgUid][s]}},m.resolveGradient=function(o,f,h){var r=this.extractPropertyDefinition(o,h,"gradientDefs");if(r){var a=f.getAttribute(h+"-opacity"),s=d.Gradient.fromElement(r,o,a,this.options);o.set(h,s)}},m.createClipPathCallback=function(o,f){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,f.push(h)}},m.resolveClipPath=function(o,f){var r,s,u,p,h=this.extractPropertyDefinition(o,"clipPath","clipPaths");if(h){u=[],s=d.util.invertTransform(o.calcTransformMatrix());for(var y=h[0].parentNode,S=f;S.parentNode&&S.getAttribute("clip-path")!==o.clipPath;)S=S.parentNode;S.parentNode.appendChild(y);for(var x=0;x<h.length;x++)this.findTag(r=h[x]).fromElement(r,this.createClipPathCallback(o,u),this.options);h=1===u.length?u[0]:new d.Group(u),p=d.util.multiplyTransformMatrices(s,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,S);var l=d.util.qrDecompose(p);h.flipX=!1,h.flipY=!1,h.set("scaleX",l.scaleX),h.set("scaleY",l.scaleY),h.angle=l.angle,h.skewX=l.skewX,h.skewY=0,h.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),o.clipPath=h}else delete o.clipPath},m.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(o){return null!=o}),this.callback(this.instances,this.elements))}}(d.ElementsParser.prototype),function(m){"use strict";var o=m.fabric||(m.fabric={});function f(h,r){this.x=h,this.y=r}o.Point?o.warn("fabric.Point is already defined"):(o.Point=f,f.prototype={type:"point",constructor:f,add:function(h){return new f(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new f(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new f(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new f(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new f(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new f(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new f(this.x+(h.x-this.x)*r,this.y+(h.y-this.y)*r)},distanceFrom:function(h){var r=this.x-h.x,a=this.y-h.y;return Math.sqrt(r*r+a*a)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new f(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new f(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,r){return this.x=h,this.y=r,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var r=this.x,a=this.y;this.x=h.x,this.y=h.y,h.x=r,h.y=a},clone:function(){return new f(this.x,this.y)}})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={});function f(h){this.status=h,this.points=[]}o.Intersection?o.warn("fabric.Intersection is already defined"):(o.Intersection=f,o.Intersection.prototype={constructor:f,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},o.Intersection.intersectLineLine=function(h,r,a,s){var u,p=(s.x-a.x)*(h.y-a.y)-(s.y-a.y)*(h.x-a.x),l=(r.x-h.x)*(h.y-a.y)-(r.y-h.y)*(h.x-a.x),y=(s.y-a.y)*(r.x-h.x)-(s.x-a.x)*(r.y-h.y);if(0!==y){var S=p/y,x=l/y;0<=S&&S<=1&&0<=x&&x<=1?(u=new f("Intersection")).appendPoint(new o.Point(h.x+S*(r.x-h.x),h.y+S*(r.y-h.y))):u=new f}else u=new f(0===p||0===l?"Coincident":"Parallel");return u},o.Intersection.intersectLinePolygon=function(h,r,a){var y,S,s=new f,u=a.length;for(S=0;S<u;S++)y=f.intersectLineLine(h,r,a[S],a[(S+1)%u]),s.appendPoints(y.points);return s.points.length>0&&(s.status="Intersection"),s},o.Intersection.intersectPolygonPolygon=function(h,r){var u,a=new f,s=h.length;for(u=0;u<s;u++){var y=f.intersectLinePolygon(h[u],h[(u+1)%s],r);a.appendPoints(y.points)}return a.points.length>0&&(a.status="Intersection"),a},o.Intersection.intersectPolygonRectangle=function(h,r,a){var s=r.min(a),u=r.max(a),p=new o.Point(u.x,s.y),l=new o.Point(s.x,u.y),y=f.intersectLinePolygon(s,p,h),S=f.intersectLinePolygon(p,u,h),x=f.intersectLinePolygon(u,l,h),A=f.intersectLinePolygon(l,s,h),O=new f;return O.appendPoints(y.points),O.appendPoints(S.points),O.appendPoints(x.points),O.appendPoints(A.points),O.points.length>0&&(O.status="Intersection"),O})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={});function f(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}function h(r,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?r+6*(a-r)*s:s<.5?a:s<2/3?r+(a-r)*(2/3-s)*6:r}o.Color?o.warn("fabric.Color is already defined."):(o.Color=f,o.Color.prototype={_tryParsingColor:function(r){var a;r in f.colorNameMap&&(r=f.colorNameMap[r]),"transparent"===r&&(a=[255,255,255,0]),a||(a=f.sourceFromHex(r)),a||(a=f.sourceFromRgb(r)),a||(a=f.sourceFromHsl(r)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(r,a,s){var u,p,l,y=o.util.array.max([r/=255,a/=255,s/=255]),S=o.util.array.min([r,a,s]);if(l=(y+S)/2,y===S)u=p=0;else{var x=y-S;switch(p=l>.5?x/(2-y-S):x/(y+S),y){case r:u=(a-s)/x+(a<s?6:0);break;case a:u=(s-r)/x+2;break;case s:u=(r-a)/x+4}u/=6}return[Math.round(360*u),Math.round(100*p),Math.round(100*l)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),a=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var r=this.getSource(),a=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+r[3]+")"},toHex:function(){var a,s,u,r=this.getSource();return a=1===(a=r[0].toString(16)).length?"0"+a:a,s=1===(s=r[1].toString(16)).length?"0"+s:s,u=1===(u=r[2].toString(16)).length?"0"+u:u,a.toUpperCase()+s.toUpperCase()+u.toUpperCase()},toHexa:function(){var a,r=this.getSource();return a=1===(a=(a=Math.round(255*r[3])).toString(16)).length?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var a=this.getSource();return a[3]=r,this.setSource(a),this},toGrayscale:function(){var r=this.getSource(),a=parseInt((.3*r[0]+.59*r[1]+.11*r[2]).toFixed(0),10);return this.setSource([a,a,a,r[3]]),this},toBlackWhite:function(r){var a=this.getSource(),s=(.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),u=a[3];return r=r||127,s=Number(s)<Number(r)?0:255,this.setSource([s,s,s,u]),this},overlayWith:function(r){r instanceof f||(r=new f(r));var y,a=[],s=this.getAlpha(),p=this.getSource(),l=r.getSource();for(y=0;y<3;y++)a.push(Math.round(.5*p[y]+.5*l[y]));return a[3]=s,this.setSource(a),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},o.Color.fromRgb=function(r){return f.fromSource(f.sourceFromRgb(r))},o.Color.sourceFromRgb=function(r){var a=r.match(f.reRGBa);if(a){var s=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),u=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),p=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(s,10),parseInt(u,10),parseInt(p,10),a[4]?parseFloat(a[4]):1]}},o.Color.fromRgba=f.fromRgb,o.Color.fromHsl=function(r){return f.fromSource(f.sourceFromHsl(r))},o.Color.sourceFromHsl=function(r){var a=r.match(f.reHSLa);if(a){var l,y,S,s=(parseFloat(a[1])%360+360)%360/360,u=parseFloat(a[2])/(/%$/.test(a[2])?100:1),p=parseFloat(a[3])/(/%$/.test(a[3])?100:1);if(0===u)l=y=S=p;else{var x=p<=.5?p*(u+1):p+u-p*u,A=2*p-x;l=h(A,x,s+1/3),y=h(A,x,s),S=h(A,x,s-1/3)}return[Math.round(255*l),Math.round(255*y),Math.round(255*S),a[4]?parseFloat(a[4]):1]}},o.Color.fromHsla=f.fromHsl,o.Color.fromHex=function(r){return f.fromSource(f.sourceFromHex(r))},o.Color.sourceFromHex=function(r){if(r.match(f.reHex)){var a=r.slice(r.indexOf("#")+1),s=3===a.length||4===a.length,u=8===a.length||4===a.length,p=s?a.charAt(0)+a.charAt(0):a.substring(0,2),l=s?a.charAt(1)+a.charAt(1):a.substring(2,4),y=s?a.charAt(2)+a.charAt(2):a.substring(4,6),S=u?s?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(p,16),parseInt(l,16),parseInt(y,16),parseFloat((parseInt(S,16)/255).toFixed(2))]}},o.Color.fromSource=function(r){var a=new f;return a.setSource(r),a})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],r={},a="left",s="top",u="right",p="bottom",l="center",y={top:p,bottom:s,left:u,right:a,center:l},S=o.util.radiansToDegrees,x=Math.sign||function(qe){return(qe>0)-(qe<0)||+qe};function A(qe,Ne){var tt=qe.angle+S(Math.atan2(Ne.y,Ne.x))+360;return Math.round(tt%360/45)}function O(qe,Ne){var tt=Ne.transform.target,Ve=tt.canvas,Xe=o.util.object.clone(Ne);Xe.target=tt,Ve&&Ve.fire("object:"+qe,Xe),tt.fire(qe,Ne)}function j(qe,Ne){var tt=Ne.canvas,Xe=qe[tt.uniScaleKey];return tt.uniformScaling&&!Xe||!tt.uniformScaling&&Xe}function Z(qe){return qe.originX===l&&qe.originY===l}function ue(qe,Ne,tt){var Ve=qe.lockScalingX,Xe=qe.lockScalingY;return!!(Ve&&Xe||!Ne&&(Ve||Xe)&&tt||Ve&&"x"===Ne||Xe&&"y"===Ne)}function at(qe,Ne,tt,Ve){return{e:qe,transform:Ne,pointer:{x:tt,y:Ve}}}function ke(qe){return function(Ne,tt,Ve,Xe){var lt=tt.target,vt=lt.getCenterPoint(),Mt=lt.translateToOriginPoint(vt,tt.originX,tt.originY),xt=qe(Ne,tt,Ve,Xe);return lt.setPositionByOrigin(Mt,tt.originX,tt.originY),xt}}function Ee(qe,Ne){return function(tt,Ve,Xe,lt){var vt=Ne(tt,Ve,Xe,lt);return vt&&O(qe,at(tt,Ve,Xe,lt)),vt}}function xe(qe,Ne,tt,Ve,Xe){var lt=qe.target,vt=lt.controls[qe.corner],Mt=lt.canvas.getZoom(),xt=lt.padding/Mt,nt=lt.toLocalPoint(new o.Point(Ve,Xe),Ne,tt);return nt.x>=xt&&(nt.x-=xt),nt.x<=-xt&&(nt.x+=xt),nt.y>=xt&&(nt.y-=xt),nt.y<=xt&&(nt.y+=xt),nt.x-=vt.offsetX,nt.y-=vt.offsetY,nt}function Le(qe){return qe.flipX!==qe.flipY}function q(qe,Ne,tt,Ve,Xe){if(0!==qe[Ne]){var lt=qe._getTransformedDimensions()[Ve];qe.set(tt,Xe/lt*qe[tt])}}function le(qe,Ne,tt,Ve){var nt,Xe=Ne.target,lt=Xe._getTransformedDimensions(0,Xe.skewY),vt=xe(Ne,Ne.originX,Ne.originY,tt,Ve),Mt=Math.abs(2*vt.x)-lt.x,xt=Xe.skewX;Mt<2?nt=0:(nt=S(Math.atan2(Mt/Xe.scaleX,lt.y/Xe.scaleY)),Ne.originX===a&&Ne.originY===p&&(nt=-nt),Ne.originX===u&&Ne.originY===s&&(nt=-nt),Le(Xe)&&(nt=-nt));var It=xt!==nt;if(It){var Lt=Xe._getTransformedDimensions().y;Xe.set("skewX",nt),q(Xe,"skewY","scaleY","y",Lt)}return It}function ae(qe,Ne,tt,Ve){var nt,Xe=Ne.target,lt=Xe._getTransformedDimensions(Xe.skewX,0),vt=xe(Ne,Ne.originX,Ne.originY,tt,Ve),Mt=Math.abs(2*vt.y)-lt.y,xt=Xe.skewY;Mt<2?nt=0:(nt=S(Math.atan2(Mt/Xe.scaleY,lt.x/Xe.scaleX)),Ne.originX===a&&Ne.originY===p&&(nt=-nt),Ne.originX===u&&Ne.originY===s&&(nt=-nt),Le(Xe)&&(nt=-nt));var It=xt!==nt;if(It){var Lt=Xe._getTransformedDimensions().x;Xe.set("skewY",nt),q(Xe,"skewX","scaleX","x",Lt)}return It}function ee(qe,Ne,tt,Ve,Xe){var nt,It,Lt,Gt,Qe,je,lt=Ne.target,vt=lt.lockScalingX,Mt=lt.lockScalingY,xt=(Xe=Xe||{}).by,zt=j(qe,lt),mt=ue(lt,xt,zt),pt=Ne.gestureScale;if(mt)return!1;if(pt)It=Ne.scaleX*pt,Lt=Ne.scaleY*pt;else{if(nt=xe(Ne,Ne.originX,Ne.originY,tt,Ve),Qe="y"!==xt?x(nt.x):1,je="x"!==xt?x(nt.y):1,Ne.signX||(Ne.signX=Qe),Ne.signY||(Ne.signY=je),lt.lockScalingFlip&&(Ne.signX!==Qe||Ne.signY!==je))return!1;if(Gt=lt._getTransformedDimensions(),zt&&!xt){var ye=Math.abs(nt.x)+Math.abs(nt.y),Ie=Ne.original,Bt=ye/(Math.abs(Gt.x*Ie.scaleX/lt.scaleX)+Math.abs(Gt.y*Ie.scaleY/lt.scaleY));It=Ie.scaleX*Bt,Lt=Ie.scaleY*Bt}else It=Math.abs(nt.x*lt.scaleX/Gt.x),Lt=Math.abs(nt.y*lt.scaleY/Gt.y);Z(Ne)&&(It*=2,Lt*=2),Ne.signX!==Qe&&"y"!==xt&&(Ne.originX=y[Ne.originX],It*=-1,Ne.signX=Qe),Ne.signY!==je&&"x"!==xt&&(Ne.originY=y[Ne.originY],Lt*=-1,Ne.signY=je)}var dn=lt.scaleX,bi=lt.scaleY;return xt?("x"===xt&&lt.set("scaleX",It),"y"===xt&&lt.set("scaleY",Lt)):(!vt&&lt.set("scaleX",It),!Mt&&lt.set("scaleY",Lt)),dn!==lt.scaleX||bi!==lt.scaleY}r.scaleCursorStyleHandler=function pe(qe,Ne,tt){var Xe=j(qe,tt),lt="";if(0!==Ne.x&&0===Ne.y?lt="x":0===Ne.x&&0!==Ne.y&&(lt="y"),ue(tt,lt,Xe))return"not-allowed";var vt=A(tt,Ne);return f[vt]+"-resize"},r.skewCursorStyleHandler=function Ce(qe,Ne,tt){if(0!==Ne.x&&tt.lockSkewingY||0!==Ne.y&&tt.lockSkewingX)return"not-allowed";var Xe=A(tt,Ne)%4;return h[Xe]+"-resize"},r.scaleSkewCursorStyleHandler=function Se(qe,Ne,tt){return qe[tt.canvas.altActionKey]?r.skewCursorStyleHandler(qe,Ne,tt):r.scaleCursorStyleHandler(qe,Ne,tt)},r.rotationWithSnapping=Ee("rotating",ke(function de(qe,Ne,tt,Ve){var Xe=Ne,lt=Xe.target,vt=lt.translateToOriginPoint(lt.getCenterPoint(),Xe.originX,Xe.originY);if(lt.lockRotation)return!1;var It,Mt=Math.atan2(Xe.ey-vt.y,Xe.ex-vt.x),xt=Math.atan2(Ve-vt.y,tt-vt.x),nt=S(xt-Mt+Xe.theta);if(lt.snapAngle>0){var Lt=lt.snapAngle,Gt=lt.snapThreshold||Lt,zt=Math.ceil(nt/Lt)*Lt,mt=Math.floor(nt/Lt)*Lt;Math.abs(nt-mt)<Gt?nt=mt:Math.abs(nt-zt)<Gt&&(nt=zt)}return nt<0&&(nt=360+nt),It=lt.angle!==(nt%=360),lt.angle=nt,It})),r.scalingEqually=Ee("scaling",ke(function De(qe,Ne,tt,Ve){return ee(qe,Ne,tt,Ve)})),r.scalingX=Ee("scaling",ke(function Me(qe,Ne,tt,Ve){return ee(qe,Ne,tt,Ve,{by:"x"})})),r.scalingY=Ee("scaling",ke(function We(qe,Ne,tt,Ve){return ee(qe,Ne,tt,Ve,{by:"y"})})),r.scalingYOrSkewingX=function $e(qe,Ne,tt,Ve){return qe[Ne.target.canvas.altActionKey]?r.skewHandlerX(qe,Ne,tt,Ve):r.scalingY(qe,Ne,tt,Ve)},r.scalingXOrSkewingY=function rt(qe,Ne,tt,Ve){return qe[Ne.target.canvas.altActionKey]?r.skewHandlerY(qe,Ne,tt,Ve):r.scalingX(qe,Ne,tt,Ve)},r.changeWidth=Ee("resizing",ke(function Ke(qe,Ne,tt,Ve){var Xe=Ne.target,lt=xe(Ne,Ne.originX,Ne.originY,tt,Ve),vt=Xe.strokeWidth/(Xe.strokeUniform?Xe.scaleX:1),Mt=Z(Ne)?2:1,xt=Xe.width,nt=Math.abs(lt.x*Mt/Xe.scaleX)-vt;return Xe.set("width",Math.max(nt,0)),xt!==nt})),r.skewHandlerX=function he(qe,Ne,tt,Ve){var vt,Xe=Ne.target,lt=Xe.skewX,Mt=Ne.originY;return!Xe.lockSkewingX&&(0===lt?vt=xe(Ne,l,l,tt,Ve).x>0?a:u:(lt>0&&(vt=Mt===s?a:u),lt<0&&(vt=Mt===s?u:a),Le(Xe)&&(vt=vt===a?u:a)),Ne.originX=vt,Ee("skewing",ke(le))(qe,Ne,tt,Ve))},r.skewHandlerY=function Fe(qe,Ne,tt,Ve){var vt,Xe=Ne.target,lt=Xe.skewY,Mt=Ne.originX;return!Xe.lockSkewingY&&(0===lt?vt=xe(Ne,l,l,tt,Ve).y>0?s:p:(lt>0&&(vt=Mt===a?s:p),lt<0&&(vt=Mt===a?p:s),Le(Xe)&&(vt=vt===s?p:s)),Ne.originY=vt,Ee("skewing",ke(ae))(qe,Ne,tt,Ve))},r.dragHandler=function Ct(qe,Ne,tt,Ve){var Xe=Ne.target,lt=tt-Ne.offsetX,vt=Ve-Ne.offsetY,Mt=!Xe.get("lockMovementX")&&Xe.left!==lt,xt=!Xe.get("lockMovementY")&&Xe.top!==vt;return Mt&&Xe.set("left",lt),xt&&Xe.set("top",vt),(Mt||xt)&&O("moving",at(qe,Ne,tt,Ve)),Mt||xt},r.scaleOrSkewActionName=function He(qe,Ne,tt){var Ve=qe[tt.canvas.altActionKey];return 0===Ne.x?Ve?"skewX":"scaleY":0===Ne.y?Ve?"skewY":"scaleX":void 0},r.rotationStyleHandler=function ot(qe,Ne,tt){return tt.lockRotation?"not-allowed":Ne.cursorStyle},r.fireEvent=O,r.wrapWithFixedAnchor=ke,r.wrapWithFireEvent=Ee,r.getLocalPoint=xe,o.controlsUtils=r}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.degreesToRadians,h=o.controlsUtils;h.renderCircleControl=function r(s,u,p,l,y){l=l||{};var pe,S=this.sizeX||l.cornerSize||y.cornerSize,x=this.sizeY||l.cornerSize||y.cornerSize,A=typeof l.transparentCorners<"u"?l.transparentCorners:y.transparentCorners,O=A?"stroke":"fill",j=!A&&(l.cornerStrokeColor||y.cornerStrokeColor),Z=u,ue=p;s.save(),s.fillStyle=l.cornerColor||y.cornerColor,s.strokeStyle=l.cornerStrokeColor||y.cornerStrokeColor,S>x?(pe=S,s.scale(1,x/S),ue=p*S/x):x>S?(pe=x,s.scale(S/x,1),Z=u*x/S):pe=S,s.lineWidth=1,s.beginPath(),s.arc(Z,ue,pe/2,0,2*Math.PI,!1),s[O](),j&&s.stroke(),s.restore()},h.renderSquareControl=function a(s,u,p,l,y){l=l||{};var S=this.sizeX||l.cornerSize||y.cornerSize,x=this.sizeY||l.cornerSize||y.cornerSize,A=typeof l.transparentCorners<"u"?l.transparentCorners:y.transparentCorners,O=A?"stroke":"fill",j=!A&&(l.cornerStrokeColor||y.cornerStrokeColor),Z=S/2,ue=x/2;s.save(),s.fillStyle=l.cornerColor||y.cornerColor,s.strokeStyle=l.cornerStrokeColor||y.cornerStrokeColor,s.lineWidth=1,s.translate(u,p),s.rotate(f(y.angle)),s[O+"Rect"](-Z,-ue,S,x),j&&s.strokeRect(-Z,-ue,S,x),s.restore()}}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={});o.Control=function f(h){for(var r in h)this[r]=h[r]},o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,r){return r.cursorStyle},getActionName:function(h,r){return r.actionName},getVisibility:function(h,r){var a=h._controlsVisibility;return a&&typeof a[r]<"u"?a[r]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,r){return o.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},r)},calcCornerCoords:function(h,r,a,s,u){var p,l,y,S,x=u?this.touchSizeX:this.sizeX,A=u?this.touchSizeY:this.sizeY;if(x&&A&&x!==A){var O=Math.atan2(A,x),j=Math.sqrt(x*x+A*A)/2,Z=O-o.util.degreesToRadians(h),ue=Math.PI/2-O-o.util.degreesToRadians(h);p=j*o.util.cos(Z),l=j*o.util.sin(Z),y=j*o.util.cos(ue),S=j*o.util.sin(ue)}else j=.7071067812*(x&&A?x:r),Z=o.util.degreesToRadians(45-h),p=y=j*o.util.cos(Z),l=S=j*o.util.sin(Z);return{tl:{x:a-S,y:s-y},tr:{x:a+p,y:s-l},bl:{x:a-p,y:s+l},br:{x:a+S,y:s+y}}},render:function(h,r,a,s,u){"circle"===((s=s||{}).cornerStyle||u.cornerStyle)?o.controlsUtils.renderCircleControl.call(this,h,r,a,s,u):o.controlsUtils.renderSquareControl.call(this,h,r,a,s,u)}}}(Be),function(){function m(a,s){var l,y,S,x,u=a.getAttribute("style"),p=a.getAttribute("offset")||0;if(p=(p=parseFloat(p)/(/%$/.test(p)?100:1))<0?0:p>1?1:p,u){var A=u.split(/\s*;\s*/);for(""===A[A.length-1]&&A.pop(),x=A.length;x--;){var O=A[x].split(/\s*:\s*/),j=O[0].trim(),Z=O[1].trim();"stop-color"===j?l=Z:"stop-opacity"===j&&(S=Z)}}return l||(l=a.getAttribute("stop-color")||"rgb(0,0,0)"),S||(S=a.getAttribute("stop-opacity")),y=(l=new d.Color(l)).getAlpha(),S=isNaN(parseFloat(S))?1:parseFloat(S),S*=y*s,{offset:p,color:l.toRgb(),opacity:S}}var h=d.util.object.clone;d.Gradient=d.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var s,u=this;Object.keys(a).forEach(function(p){u[p]=a[p]}),this.id?this.id+="_"+d.Object.__uid++:this.id=d.Object.__uid++,s={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},"radial"===this.type&&(s.r1=a.coords.r1||0,s.r2=a.coords.r2||0),this.coords=s,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var s in a){var u=new d.Color(a[s]);this.colorStops.push({offset:parseFloat(s),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(a){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return d.util.populateWithProperties(this,s,a),s},toSVG:function(a,y){var p,l,S,x,u=h(this.coords,!0),A=(y=y||{},h(this.colorStops,!0)),O=u.r1>u.r2,j=this.gradientTransform?this.gradientTransform.concat():d.iMatrix.concat(),Z=-this.offsetX,ue=-this.offsetY,pe=!!y.additionalTransform,Ce="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(A.sort(function(ke,Ee){return ke.offset-Ee.offset}),"objectBoundingBox"===Ce?(Z/=a.width,ue/=a.height):(Z+=a.width/2,ue+=a.height/2),"path"===a.type&&"percentage"!==this.gradientUnits&&(Z-=a.pathOffset.x,ue-=a.pathOffset.y),j[4]-=Z,j[5]-=ue,x='id="SVGID_'+this.id+'" gradientUnits="'+Ce+'"',x+=' gradientTransform="'+(pe?y.additionalTransform+" ":"")+d.util.matrixToSVG(j)+'" ',"linear"===this.type?S=["<linearGradient ",x,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,'">\n']:"radial"===this.type&&(S=["<radialGradient ",x,' cx="',O?u.x1:u.x2,'" cy="',O?u.y1:u.y2,'" r="',O?u.r1:u.r2,'" fx="',O?u.x2:u.x1,'" fy="',O?u.y2:u.y1,'">\n']),"radial"===this.type){if(O)for((A=A.concat()).reverse(),p=0,l=A.length;p<l;p++)A[p].offset=1-A[p].offset;var Se=Math.min(u.r1,u.r2);if(Se>0){var ot=Se/Math.max(u.r1,u.r2);for(p=0,l=A.length;p<l;p++)A[p].offset+=ot*(1-A[p].offset)}}for(p=0,l=A.length;p<l;p++){var at=A[p];S.push("<stop ",'offset="',100*at.offset+"%",'" style="stop-color:',at.color,typeof at.opacity<"u"?";stop-opacity: "+at.opacity:";",'"/>\n')}return S.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),S.join("")},toLive:function(a){var s,p,l,u=d.util.object.clone(this.coords);if(this.type){for("linear"===this.type?s=a.createLinearGradient(u.x1,u.y1,u.x2,u.y2):"radial"===this.type&&(s=a.createRadialGradient(u.x1,u.y1,u.r1,u.x2,u.y2,u.r2)),p=0,l=this.colorStops.length;p<l;p++){var y=this.colorStops[p].color,S=this.colorStops[p].opacity,x=this.colorStops[p].offset;typeof S<"u"&&(y=new d.Color(y).setAlpha(S).toRgba()),s.addColorStop(x,y)}return s}}}),d.util.object.extend(d.Gradient,{fromElement:function(a,s,u,p){var l=parseFloat(u)/(/%$/.test(u)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var S,j,Z,Ce,y=a.getElementsByTagName("stop"),x="userSpaceOnUse"===a.getAttribute("gradientUnits")?"pixels":"percentage",A=a.getAttribute("gradientTransform")||"",O=[],ue=0,pe=0;for("linearGradient"===a.nodeName||"LINEARGRADIENT"===a.nodeName?(S="linear",j=function o(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}(a)):(S="radial",j=function f(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}(a)),Z=y.length;Z--;)O.push(m(y[Z],l));return Ce=d.parseTransformAttribute(A),function r(a,s,u,p){var l,y;Object.keys(s).forEach(function(S){"Infinity"===(l=s[S])?y=1:"-Infinity"===l?y=0:(y=parseFloat(s[S],10),"string"==typeof l&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(y*=.01,"pixels"===p&&(("x1"===S||"x2"===S||"r2"===S)&&(y*=u.viewBoxWidth||u.width),("y1"===S||"y2"===S)&&(y*=u.viewBoxHeight||u.height)))),s[S]=y})}(0,j,p,x),"pixels"===x&&(ue=-s.left,pe=-s.top),new d.Gradient({id:a.getAttribute("id"),type:S,coords:j,colorStops:O,gradientUnits:x,gradientTransform:Ce,offsetX:ue,offsetY:pe})}})}(),function(){"use strict";var m=d.util.toFixed;d.Pattern=d.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,f){if(o||(o={}),this.id=d.Object.__uid++,this.setOptions(o),!o.source||o.source&&"string"!=typeof o.source)f&&f(this);else{var h=this;this.source=d.util.createImage(),d.util.loadImage(o.source,function(r,a){h.source=r,f&&f(h,a)},null,this.crossOrigin)}},toObject:function(o){var h,r,f=d.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?h=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(h=this.source.toDataURL()),r={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:m(this.offsetX,f),offsetY:m(this.offsetY,f),patternTransform:this.patternTransform?this.patternTransform.concat():null},d.util.populateWithProperties(this,r,o),r},toSVG:function(o){var f="function"==typeof this.source?this.source():this.source,h=f.width/o.width,r=f.height/o.height,a=this.offsetX/o.width,s=this.offsetY/o.height,u="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(r=1,s&&(r+=Math.abs(s))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(h=1,a&&(h+=Math.abs(a))),f.src?u=f.src:f.toDataURL&&(u=f.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+s+'" width="'+h+'" height="'+r+'">\n<image x="0" y="0" width="'+f.width+'" height="'+f.height+'" xlink:href="'+u+'"></image>\n</pattern>\n'},setOptions:function(o){for(var f in o)this[f]=o[f]},toLive:function(o){var f=this.source;return!f||typeof f.src<"u"&&(!f.complete||0===f.naturalWidth||0===f.naturalHeight)?"":o.createPattern(f,this.repeat)}})}(),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.toFixed;o.Shadow?o.warn("fabric.Shadow is already defined."):(o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){for(var r in"string"==typeof h&&(h=this._parseShadow(h)),h)this[r]=h[r];this.id=o.Object.__uid++},_parseShadow:function(h){var r=h.trim(),a=o.Shadow.reOffsetsAndBlur.exec(r)||[];return{color:(r.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var r=40,a=40,s=o.Object.NUM_FRACTION_DIGITS,u=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-h.angle)),l=new o.Color(this.color);return h.width&&h.height&&(r=100*f((Math.abs(u.x)+this.blur)/h.width,s)+20,a=100*f((Math.abs(u.y)+this.blur)/h.height,s)+20),h.flipX&&(u.x*=-1),h.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+f(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+f(u.x,s)+'" dy="'+f(u.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+l.toRgb()+'" flood-opacity="'+l.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},r=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==r[a]&&(h[a]=this[a])},this),h}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(Be),function(){"use strict";if(d.StaticCanvas)d.warn("fabric.StaticCanvas is already defined.");else{var m=d.util.object.extend,o=d.util.getElementOffset,f=d.util.removeFromArray,h=d.util.toFixed,r=d.util.transformPoint,a=d.util.invertTransform,s=d.util.getNodeCanvas,u=d.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");d.StaticCanvas=d.util.createClass(d.CommonMethods,{initialize:function(l,y){y||(y={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,y)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:d.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,y){var S=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(y),this.interactive||this._initRetinaScaling(),y.overlayImage&&this.setOverlayImage(y.overlayImage,S),y.backgroundImage&&this.setBackgroundImage(y.backgroundImage,S),y.backgroundColor&&this.setBackgroundColor(y.backgroundColor,S),y.overlayColor&&this.setOverlayColor(y.overlayColor,S),this.calcOffset()},_isRetinaScaling:function(){return d.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,d.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=d.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,y,S){y.setAttribute("width",this.width*l),y.setAttribute("height",this.height*l),S.scale(l,l)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(l,y,S){return this.__setBgOverlayImage("overlayImage",l,y,S)},setBackgroundImage:function(l,y,S){return this.__setBgOverlayImage("backgroundImage",l,y,S)},setOverlayColor:function(l,y){return this.__setBgOverlayColor("overlayColor",l,y)},setBackgroundColor:function(l,y){return this.__setBgOverlayColor("backgroundColor",l,y)},__setBgOverlayImage:function(l,y,S,x){return"string"==typeof y?d.util.loadImage(y,function(A,O){if(A){var j=new d.Image(A,x);this[l]=j,j.canvas=this}S&&S(A,O)},this,x&&x.crossOrigin):(x&&y.setOptions(x),this[l]=y,y&&(y.canvas=this),S&&S(y,!1)),this},__setBgOverlayColor:function(l,y,S){return this[l]=y,this._initGradient(y,l),this._initPattern(y,l,S),this},_createCanvasElement:function(){var l=u();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw p;return l},_initOptions:function(l){var y=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(y.width,10)||0,this.height=this.height||parseInt(y.height,10)||0,this.lowerCanvasEl.style&&(y.width=this.width,y.height=this.height,y.style.width=this.width+"px",y.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){this.lowerCanvasEl=l&&l.getContext?l:d.util.getById(l)||this._createCanvasElement(),d.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,y){return this.setDimensions({width:l},y)},setHeight:function(l,y){return this.setDimensions({height:l},y)},setDimensions:function(l,y){var S;for(var x in y=y||{},l)S=l[x],y.cssOnly||(this._setBackstoreDimension(x,l[x]),S+="px",this.hasLostContext=!0),y.backstoreOnly||this._setCssDimension(x,S);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),y.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,y){return this.lowerCanvasEl[l]=y,this.upperCanvasEl&&(this.upperCanvasEl[l]=y),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=y),this[l]=y,this},_setCssDimension:function(l,y){return this.lowerCanvasEl.style[l]=y,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=y),this.wrapperEl&&(this.wrapperEl.style[l]=y),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var A,O,j,y=this._activeObject,S=this.backgroundImage,x=this.overlayImage;for(this.viewportTransform=l,O=0,j=this._objects.length;O<j;O++)(A=this._objects[O]).group||A.setCoords(!0);return y&&y.setCoords(),S&&S.setCoords(!0),x&&x.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,y){var S=l,x=this.viewportTransform.slice(0);l=r(l,a(this.viewportTransform)),x[0]=y,x[3]=y;var A=r(l,x);return x[4]+=S.x-A.x,x[5]+=S.y-A.y,this.setViewportTransform(x)},setZoom:function(l){return this.zoomToPoint(new d.Point(0,0),l),this},absolutePan:function(l){var y=this.viewportTransform.slice(0);return y[4]=-l.x,y[5]=-l.y,this.setViewportTransform(y)},relativePan:function(l){return this.absolutePan(new d.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=d.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},y=this.width,S=this.height,x=a(this.viewportTransform);return l.tl=r({x:0,y:0},x),l.br=r({x:y,y:S},x),l.tr=new d.Point(l.br.x,l.tl.y),l.bl=new d.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(d.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,y){var S=this.viewportTransform,x=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),d.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._renderObjects(l,y),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),x&&(x.canvas=this,x.shouldCache(),x._transformDone=!0,x.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var y=this.viewportTransform,S=this.clipPath;l.save(),l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),l.globalCompositeOperation="destination-in",S.transform(l),l.scale(1/S.zoomX,1/S.zoomY),l.drawImage(S._cacheCanvas,-S.cacheTranslationX,-S.cacheTranslationY),l.restore()},_renderObjects:function(l,y){var S,x;for(S=0,x=y.length;S<x;++S)y[S]&&y[S].render(l)},_renderBackgroundOrOverlay:function(l,y){var S=this[y+"Color"],x=this[y+"Image"],A=this.viewportTransform,O=this[y+"Vpt"];if(S||x){if(S){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=S.toLive?S.toLive(l,this):S,O&&l.transform(A[0],A[1],A[2],A[3],A[4],A[5]),l.transform(1,0,0,1,S.offsetX||0,S.offsetY||0);var j=S.gradientTransform||S.patternTransform;j&&l.transform(j[0],j[1],j[2],j[3],j[4],j[5]),l.fill(),l.restore()}x&&(l.save(),O&&l.transform(A[0],A[1],A[2],A[3],A[4],A[5]),x.render(l),l.restore())}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new d.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new d.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new d.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var y=this.getCenterPoint();return this._centerObject(l,y)},viewportCenterObject:function(l){var y=this.getVpCenter();return this._centerObject(l,y)},viewportCenterObjectH:function(l){var y=this.getVpCenter();return this._centerObject(l,new d.Point(y.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var y=this.getVpCenter();return this._centerObject(l,new d.Point(l.getCenterPoint().x,y.y))},getVpCenter:function(){var l=this.getCenterPoint(),y=a(this.viewportTransform);return r(l,y)},_centerObject:function(l,y){return l.setPositionByOrigin(y,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,y){var S=this.clipPath,x={version:d.version,objects:this._toObjects(l,y)};return S&&!S.excludeFromExport&&(x.clipPath=this._toObject(this.clipPath,l,y)),m(x,this.__serializeBgOverlay(l,y)),d.util.populateWithProperties(this,x,y),x},_toObjects:function(l,y){return this._objects.filter(function(S){return!S.excludeFromExport}).map(function(S){return this._toObject(S,l,y)},this)},_toObject:function(l,y,S){var x;this.includeDefaultValues||(x=l.includeDefaultValues,l.includeDefaultValues=!1);var A=l[y](S);return this.includeDefaultValues||(l.includeDefaultValues=x),A},__serializeBgOverlay:function(l,y){var S={},x=this.backgroundImage,A=this.overlayImage,O=this.backgroundColor,j=this.overlayColor;return O&&O.toObject?O.excludeFromExport||(S.background=O.toObject(y)):O&&(S.background=O),j&&j.toObject?j.excludeFromExport||(S.overlay=j.toObject(y)):j&&(S.overlay=j),x&&!x.excludeFromExport&&(S.backgroundImage=this._toObject(x,l,y)),A&&!A.excludeFromExport&&(S.overlayImage=this._toObject(A,l,y)),S},svgViewportTransformation:!0,toSVG:function(l,y){l||(l={}),l.reviver=y;var S=[];return this._setSVGPreamble(S,l),this._setSVGHeader(S,l),this.clipPath&&S.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(S,"background"),this._setSVGBgOverlayImage(S,"backgroundImage",y),this._setSVGObjects(S,y),this.clipPath&&S.push("</g>\n"),this._setSVGBgOverlayColor(S,"overlay"),this._setSVGBgOverlayImage(S,"overlayImage",y),S.push("</svg>"),S.join("")},_setSVGPreamble:function(l,y){y.suppressPreamble||l.push('<?xml version="1.0" encoding="',y.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(l,y){var A,S=y.width||this.width,x=y.height||this.height,O='viewBox="0 0 '+this.width+" "+this.height+'" ',j=d.Object.NUM_FRACTION_DIGITS;y.viewBox?O='viewBox="'+y.viewBox.x+" "+y.viewBox.y+" "+y.viewBox.width+" "+y.viewBox.height+'" ':this.svgViewportTransformation&&(O='viewBox="'+h(-(A=this.viewportTransform)[4]/A[0],j)+" "+h(-A[5]/A[3],j)+" "+h(this.width/A[0],j)+" "+h(this.height/A[3],j)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',S,'" ','height="',x,'" ',O,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",d.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(y),"</defs>\n")},createSVGClipPathMarkup:function(l){var y=this.clipPath;return y?(y.clipPathId="CLIPPATH_"+d.Object.__uid++,'<clipPath id="'+y.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(l.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var l=this;return["background","overlay"].map(function(S){var x=l[S+"Color"];if(x&&x.toLive){var A=l[S+"Vpt"],O=l.viewportTransform;return x.toSVG({width:l.width/(A?O[0]:1),height:l.height/(A?O[3]:1)},{additionalTransform:A?d.util.matrixToSVG(O):""})}}).join("")},createSVGFontFacesMarkup:function(){var S,x,A,O,j,ue,pe,Ce,l="",y={},Se=d.fontPaths,He=[];for(this._objects.forEach(function at(ke){He.push(ke),ke._objects&&ke._objects.forEach(at)}),pe=0,Ce=He.length;pe<Ce;pe++)if(x=(S=He[pe]).fontFamily,-1!==S.type.indexOf("text")&&!y[x]&&Se[x]&&(y[x]=!0,S.styles))for(j in A=S.styles)for(ue in O=A[j])!y[x=O[ue].fontFamily]&&Se[x]&&(y[x]=!0);for(var ot in y)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",ot,"';\n","\t\t\tsrc: url('",Se[ot],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(l,y){var S,x,A,O=this._objects;for(x=0,A=O.length;x<A;x++)!(S=O[x]).excludeFromExport&&this._setSVGObject(l,S,y)},_setSVGObject:function(l,y,S){l.push(y.toSVG(S))},_setSVGBgOverlayImage:function(l,y,S){this[y]&&!this[y].excludeFromExport&&this[y].toSVG&&l.push(this[y].toSVG(S))},_setSVGBgOverlayColor:function(l,y){var S=this[y+"Color"],A=this.width,O=this.height;if(S)if(S.toLive){var j=S.repeat,Z=d.util.invertTransform(this.viewportTransform),pe=this[y+"Vpt"]?d.util.matrixToSVG(Z):"";l.push('<rect transform="'+pe+" translate(",A/2,",",O/2,')"',' x="',S.offsetX-A/2,'" y="',S.offsetY-O/2,'" ','width="',"repeat-y"===j||"no-repeat"===j?S.source.width:A,'" height="',"repeat-x"===j||"no-repeat"===j?S.source.height:O,'" fill="url(#SVGID_'+S.id+')"',"></rect>\n")}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',S,'"',"></rect>\n")},sendToBack:function(l){if(!l)return this;var S,x,A,y=this._activeObject;if(l===y&&"activeSelection"===l.type)for(S=(A=y._objects).length;S--;)f(this._objects,x=A[S]),this._objects.unshift(x);else f(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var S,x,A,y=this._activeObject;if(l===y&&"activeSelection"===l.type)for(A=y._objects,S=0;S<A.length;S++)f(this._objects,x=A[S]),this._objects.push(x);else f(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,y){if(!l)return this;var x,A,O,j,Z,S=this._activeObject,ue=0;if(l===S&&"activeSelection"===l.type)for(Z=S._objects,x=0;x<Z.length;x++)(O=this._objects.indexOf(A=Z[x]))>0+ue&&(j=O-1,f(this._objects,A),this._objects.splice(j,0,A)),ue++;else 0!==(O=this._objects.indexOf(l))&&(j=this._findNewLowerIndex(l,O,y),f(this._objects,l),this._objects.splice(j,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,y,S){var x,A;if(S){for(x=y,A=y-1;A>=0;--A)if(l.intersectsWithObject(this._objects[A])||l.isContainedWithinObject(this._objects[A])||this._objects[A].isContainedWithinObject(l)){x=A;break}}else x=y-1;return x},bringForward:function(l,y){if(!l)return this;var x,A,O,j,Z,S=this._activeObject,ue=0;if(l===S&&"activeSelection"===l.type)for(x=(Z=S._objects).length;x--;)(O=this._objects.indexOf(A=Z[x]))<this._objects.length-1-ue&&(j=O+1,f(this._objects,A),this._objects.splice(j,0,A)),ue++;else(O=this._objects.indexOf(l))!==this._objects.length-1&&(j=this._findNewUpperIndex(l,O,y),f(this._objects,l),this._objects.splice(j,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,y,S){var x,A,O;if(S){for(x=y,A=y+1,O=this._objects.length;A<O;++A)if(l.intersectsWithObject(this._objects[A])||l.isContainedWithinObject(this._objects[A])||this._objects[A].isContainedWithinObject(l)){x=A;break}}else x=y+1;return x},moveTo:function(l,y){return f(this._objects,l),this._objects.splice(y,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(d.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),d.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),d.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),m(d.StaticCanvas.prototype,d.Observable),m(d.StaticCanvas.prototype,d.Collection),m(d.StaticCanvas.prototype,d.DataURLExporter),m(d.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var y=u();if(!y||!y.getContext)return null;var S=y.getContext("2d");return S&&"setLineDash"===l?typeof S.setLineDash<"u":null}}),d.StaticCanvas.prototype.toJSON=d.StaticCanvas.prototype.toObject,d.isLikelyNode&&(d.StaticCanvas.prototype.createPNGStream=function(){var l=s(this.lowerCanvasEl);return l&&l.createPNGStream()},d.StaticCanvas.prototype.createJPEGStream=function(l){var y=s(this.lowerCanvasEl);return y&&y.createJPEGStream(l)})}}(),d.BaseBrush=d.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(m){m.strokeStyle=this.color,m.lineWidth=this.width,m.lineCap=this.strokeLineCap,m.miterLimit=this.strokeMiterLimit,m.lineJoin=this.strokeLineJoin,m.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(m){var o=this.canvas.viewportTransform;m.save(),m.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var m=this.canvas,o=this.shadow,f=m.contextTop,h=m.getZoom();m&&m._isRetinaScaling()&&(h*=d.devicePixelRatio),f.shadowColor=o.color,f.shadowBlur=o.blur*h,f.shadowOffsetX=o.offsetX*h,f.shadowOffsetY=o.offsetY*h}},needsFullRender:function(){return new d.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var m=this.canvas.contextTop;m.shadowColor="",m.shadowBlur=m.shadowOffsetX=m.shadowOffsetY=0},_isOutSideCanvas:function(m){return m.x<0||m.x>this.canvas.getWidth()||m.y<0||m.y>this.canvas.getHeight()}}),d.PencilBrush=d.util.createClass(d.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(m){this.canvas=m,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(m,o,f){var h=o.midPointFrom(f);return m.quadraticCurveTo(o.x,o.y,h.x,h.y),h},onMouseDown:function(m,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(m),this._captureDrawingPath(m),this._render())},onMouseMove:function(m,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(m))&&this._captureDrawingPath(m)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var f=this._points,h=f.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,f[h-2],f[h-1],!0),r.stroke(),r.restore()}},onMouseUp:function(m){return!this.canvas._isMainEvent(m.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(m){var o=new d.Point(m.x,m.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(m){return!(this._points.length>1&&m.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(m),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(m){var o=new d.Point(m.x,m.y);return this._addPoint(o)},_render:function(m){var o,f,h=this._points[0],r=this._points[1];if(this._saveAndTransform(m=m||this.canvas.contextTop),m.beginPath(),2===this._points.length&&h.x===r.x&&h.y===r.y){var a=this.width/1e3;h=new d.Point(h.x,h.y),r=new d.Point(r.x,r.y),h.x-=a,r.x+=a}for(m.moveTo(h.x,h.y),o=1,f=this._points.length;o<f;o++)this._drawSegment(m,h,r),h=this._points[o],r=this._points[o+1];m.lineTo(h.x,h.y),m.stroke(),m.restore()},convertPointsToSVGPath:function(m){return d.util.getSmoothPathFromPoints(m,this.width/1e3)},_isEmptySVGPath:function(m){return"M 0 0 Q 0 0 0 0 L 0 0"===d.util.joinPath(m)},createPath:function(m){var o=new d.Path(m,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new d.Shadow(this.shadow)),o},decimatePoints:function(m,o){if(m.length<=2)return m;var r,f=this.canvas.getZoom(),h=Math.pow(o/f,2),a=m.length-1,s=m[0],u=[s];for(r=1;r<a-1;r++)Math.pow(s.x-m[r].x,2)+Math.pow(s.y-m[r].y,2)>=h&&u.push(s=m[r]);return u.push(m[a]),u},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o))this.canvas.requestRenderAll();else{var f=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.requestRenderAll(),f.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:f})}}}),d.CircleBrush=d.util.createClass(d.BaseBrush,{width:10,initialize:function(m){this.canvas=m,this.points=[]},drawDot:function(m){var o=this.addPoint(m),f=this.canvas.contextTop;this._saveAndTransform(f),this.dot(f,o),f.restore()},dot:function(m,o){m.fillStyle=o.fill,m.beginPath(),m.arc(o.x,o.y,o.radius,0,2*Math.PI,!1),m.closePath(),m.fill()},onMouseDown:function(m){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(m)},_render:function(){var o,f,m=this.canvas.contextTop,h=this.points;for(this._saveAndTransform(m),o=0,f=h.length;o<f;o++)this.dot(m,h[o]);m.restore()},onMouseMove:function(m){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(m)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(m),this._render()):this.drawDot(m))},onMouseUp:function(){var o,f,m=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var h=[];for(o=0,f=this.points.length;o<f;o++){var r=this.points[o],a=new d.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(a.shadow=new d.Shadow(this.shadow)),h.push(a)}var s=new d.Group(h);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=m,this.canvas.requestRenderAll()},addPoint:function(m){var o=new d.Point(m.x,m.y),f=d.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new d.Color(this.color).setAlpha(d.util.getRandomInt(0,100)/100).toRgba();return o.radius=f,o.fill=h,this.points.push(o),o}}),d.SprayBrush=d.util.createClass(d.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(m){this.canvas=m,this.sprayChunks=[]},onMouseDown:function(m){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(m),this.render(this.sprayChunkPoints)},onMouseMove:function(m){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(m)||(this.addSprayChunk(m),this.render(this.sprayChunkPoints))},onMouseUp:function(){var m=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],f=0,h=this.sprayChunks.length;f<h;f++)for(var r=this.sprayChunks[f],a=0,s=r.length;a<s;a++){var u=new d.Rect({width:r[a].width,height:r[a].width,left:r[a].x+1,top:r[a].y+1,originX:"center",originY:"center",fill:this.color});o.push(u)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var p=new d.Group(o);this.shadow&&p.set("shadow",new d.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=m,this.canvas.requestRenderAll()},_getOptimizedRects:function(m){var f,h,r,o={};for(h=0,r=m.length;h<r;h++)o[f=m[h].left+""+m[h].top]||(o[f]=m[h]);var a=[];for(f in o)a.push(o[f]);return a},render:function(m){var f,h,o=this.canvas.contextTop;for(o.fillStyle=this.color,this._saveAndTransform(o),f=0,h=m.length;f<h;f++){var r=m[f];typeof r.opacity<"u"&&(o.globalAlpha=r.opacity),o.fillRect(r.x,r.y,r.width,r.width)}o.restore()},_render:function(){var o,f,m=this.canvas.contextTop;for(m.fillStyle=this.color,this._saveAndTransform(m),o=0,f=this.sprayChunks.length;o<f;o++)this.render(this.sprayChunks[o]);m.restore()},addSprayChunk:function(m){this.sprayChunkPoints=[];var o,f,h,a,r=this.width/2;for(a=0;a<this.density;a++){o=d.util.getRandomInt(m.x-r,m.x+r),f=d.util.getRandomInt(m.y-r,m.y+r),h=this.dotWidthVariance?d.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new d.Point(o,f);s.width=h,this.randomOpacity&&(s.opacity=d.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),d.PatternBrush=d.util.createClass(d.PencilBrush,{getPatternSrc:function(){var f=d.util.createCanvasElement(),h=f.getContext("2d");return f.width=f.height=25,h.fillStyle=this.color,h.beginPath(),h.arc(10,10,10,0,2*Math.PI,!1),h.closePath(),h.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(m){return m.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(m){this.callSuper("_setBrushStyles",m),m.strokeStyle=this.getPattern(m)},createPath:function(m){var o=this.callSuper("createPath",m),f=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new d.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-f.x,offsetY:-f.y}),o}}),function(){var m=d.util.getPointer,o=d.util.degreesToRadians,f=d.util.isTouchEvent;for(var h in d.Canvas=d.util.createClass(d.StaticCanvas,{initialize:function(r,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=d.PencilBrush&&new d.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a,s,u,r=this.getActiveObjects();if(r.length>0&&!this.preserveObjectStacking){s=[],u=[];for(var p=0,l=this._objects.length;p<l;p++)-1===r.indexOf(a=this._objects[p])?s.push(a):u.push(a);r.length>1&&(this._activeObject._objects=u),s.push.apply(s,u)}else s=this._objects;return s},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,a){var s=r.calcTransformMatrix(),u=d.util.invertTransform(s),p=this.restorePointerVpt(a);return d.util.transformPoint(p,u)},isTargetTransparent:function(r,a,s){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var u=this._normalizePointer(r,{x:a,y:s}),p=Math.max(r.cacheTranslationX+u.x*r.zoomX,0),l=Math.max(r.cacheTranslationY+u.y*r.zoomY,0);return d.util.isTransparent(r._cacheContext,Math.round(p),Math.round(l),this.targetFindTolerance)}var y=this.contextCache,S=r.selectionBackgroundColor,x=this.viewportTransform;return r.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(x[0],x[1],x[2],x[3],x[4],x[5]),r.render(y),y.restore(),r.selectionBackgroundColor=S,d.util.isTransparent(y,a,s,this.targetFindTolerance)},_isSelectionKeyPressed:function(r){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(s){return!0===r[s]}):r[this.selectionKey]},_shouldClearSelection:function(r,a){var s=this.getActiveObjects(),u=this._activeObject;return!a||a&&u&&s.length>1&&-1===s.indexOf(a)&&u!==a&&!this._isSelectionKeyPressed(r)||a&&!a.evented||a&&!a.selectable&&u&&u!==a},_shouldCenterTransform:function(r,a,s){var u;if(r)return"scale"===a||"scaleX"===a||"scaleY"===a||"resizing"===a?u=this.centeredScaling||r.centeredScaling:"rotate"===a&&(u=this.centeredRotation||r.centeredRotation),u?!s:s},_getOriginFromCorner:function(r,a){var s={x:r.originX,y:r.originY};return"ml"===a||"tl"===a||"bl"===a?s.x="right":("mr"===a||"tr"===a||"br"===a)&&(s.x="left"),"tl"===a||"mt"===a||"tr"===a?s.y="bottom":("bl"===a||"mb"===a||"br"===a)&&(s.y="top"),s},_getActionFromCorner:function(r,a,s,u){if(!a||!r)return"drag";var p=u.controls[a];return p.getActionName(s,p,u)},_setupCurrentTransform:function(r,a,s){if(a){var u=this.getPointer(r),p=a.__corner,l=a.controls[p],y=s&&p?l.getActionHandler(r,a,l):d.controlsUtils.dragHandler,S=this._getActionFromCorner(s,p,r,a),x=this._getOriginFromCorner(a,p),A=r[this.centeredKey],O={target:a,action:S,actionHandler:y,corner:p,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:u.x-a.left,offsetY:u.y-a.top,originX:x.x,originY:x.y,ex:u.x,ey:u.y,lastX:u.x,lastY:u.y,theta:o(a.angle),width:a.width*a.scaleX,shiftKey:r.shiftKey,altKey:A,original:d.util.saveObjectTransform(a)};this._shouldCenterTransform(a,S,A)&&(O.originX="center",O.originY="center"),O.original.originX=x.x,O.original.originY=x.y,this._currentTransform=O,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var a=this._groupSelector,s=new d.Point(a.ex,a.ey),u=d.util.transformPoint(s,this.viewportTransform),p=new d.Point(a.ex+a.left,a.ey+a.top),l=d.util.transformPoint(p,this.viewportTransform),y=Math.min(u.x,l.x),S=Math.min(u.y,l.y),x=Math.max(u.x,l.x),A=Math.max(u.y,l.y),O=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(y,S,x-y,A-S)),this.selectionLineWidth&&this.selectionBorderColor&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,y+=O,S+=O,x-=O,A-=O,d.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(y,S,x-y,A-S))},findTarget:function(r,a){if(!this.skipTargetFind){var y,S,u=this.getPointer(r,!0),p=this._activeObject,l=this.getActiveObjects(),x=f(r),A=l.length>1&&!a||1===l.length;if(this.targets=[],A&&p._findTargetCorner(u,x)||l.length>1&&!a&&p===this._searchPossibleTargets([p],u))return p;if(1===l.length&&p===this._searchPossibleTargets([p],u)){if(!this.preserveObjectStacking)return p;y=p,S=this.targets,this.targets=[]}var O=this._searchPossibleTargets(this._objects,u);return r[this.altSelectionKey]&&O&&y&&O!==y&&(O=y,this.targets=S),O}},_checkTarget:function(r,a,s){if(a&&a.visible&&a.evented&&a.containsPoint(r)){if(!this.perPixelTargetFind&&!a.perPixelTargetFind||a.isEditing)return!0;if(!this.isTargetTransparent(a,s.x,s.y))return!0}},_searchPossibleTargets:function(r,a){for(var s,p,u=r.length;u--;){var l=r[u],y=l.group?this._normalizePointer(l.group,a):a;if(this._checkTarget(y,l,a)){(s=r[u]).subTargetCheck&&s instanceof d.Group&&(p=this._searchPossibleTargets(s._objects,a))&&this.targets.push(p);break}}return s},restorePointerVpt:function(r){return d.util.transformPoint(r,d.util.invertTransform(this.viewportTransform))},getPointer:function(r,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var S,s=m(r),u=this.upperCanvasEl,p=u.getBoundingClientRect(),l=p.width||0,y=p.height||0;(!l||!y)&&("top"in p&&"bottom"in p&&(y=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(l=Math.abs(p.right-p.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,a||(s=this.restorePointerVpt(s));var x=this.getRetinaScaling();return 1!==x&&(s.x/=x,s.y/=x),{x:s.x*(S=0===l||0===y?{width:1,height:1}:{width:u.width/l,height:u.height/y}).width,y:s.y*S.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),d.util.addClass(s,"upper-canvas "+r),this.wrapperEl.appendChild(s),this._copyCanvasStyle(a,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=d.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),d.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),d.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var a=this.width||r.width,s=this.height||r.height;d.util.setStyle(r,{position:"absolute",width:a+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=a,r.height=s,d.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,a){a.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?"activeSelection"===r.type&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,a){var s=!1,u=this.getActiveObjects(),p=[],l=[];r.forEach(function(y){-1===u.indexOf(y)&&(s=!0,y.fire("deselected",{e:a,target:y}),l.push(y))}),u.forEach(function(y){-1===r.indexOf(y)&&(s=!0,y.fire("selected",{e:a,target:y}),p.push(y))}),r.length>0&&u.length>0?s&&this.fire("selection:updated",{e:a,selected:p,deselected:l}):u.length>0?this.fire("selection:created",{e:a,selected:p}):r.length>0&&this.fire("selection:cleared",{e:a,deselected:l})},setActiveObject:function(r,a){var s=this.getActiveObjects();return this._setActiveObject(r,a),this._fireSelectionEvents(s,a),this},_setActiveObject:function(r,a){return!(this._activeObject===r||!this._discardActiveObject(a,r)||r.onSelect({e:a})||(this._activeObject=r,0))},_discardActiveObject:function(r,a){var s=this._activeObject;if(s){if(s.onDeselect({e:r,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var a=this.getActiveObjects(),s=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:s,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(a,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(a){d.util.cleanUpJsdomNode(this[a]),this[a]=void 0}.bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,d.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var a=this._activeObject;a&&a._renderControls(r)},_toObject:function(r,a,s){var u=this._realizeGroupTransformOnObject(r),p=this.callSuper("_toObject",r,a,s);return this._unwindGroupTransformOnObject(r,u),p},_realizeGroupTransformOnObject:function(r){if(r.group&&"activeSelection"===r.group.type&&this._activeObject===r.group){var s={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(u){s[u]=r[u]}),d.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),s}return null},_unwindGroupTransformOnObject:function(r,a){a&&r.set(a)},_setSVGObject:function(r,a,s){var u=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",r,a,s),this._unwindGroupTransformOnObject(a,u)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),d.StaticCanvas.prototype.setViewportTransform.call(this,r)}}),d.StaticCanvas)"prototype"!==h&&(d.Canvas[h]=d.StaticCanvas[h])}(),function(){var m=d.util.addListener,o=d.util.removeListener,a={passive:!1};function s(u,p){return u.button&&u.button===p-1}d.util.object.extend(d.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(m,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(u,p){var l=this.upperCanvasEl,y=this._getEventPrefix();u(d.window,"resize",this._onResize),u(l,y+"down",this._onMouseDown),u(l,y+"move",this._onMouseMove,a),u(l,y+"out",this._onMouseOut),u(l,y+"enter",this._onMouseEnter),u(l,"wheel",this._onMouseWheel),u(l,"contextmenu",this._onContextMenu),u(l,"dblclick",this._onDoubleClick),u(l,"dragover",this._onDragOver),u(l,"dragenter",this._onDragEnter),u(l,"dragleave",this._onDragLeave),u(l,"drop",this._onDrop),this.enablePointerEvents||u(l,"touchstart",this._onTouchStart,a),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](l,"gesture",this._onGesture),eventjs[p](l,"drag",this._onDrag),eventjs[p](l,"orientation",this._onOrientationChange),eventjs[p](l,"shake",this._onShake),eventjs[p](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var u=this._getEventPrefix();o(d.document,u+"up",this._onMouseUp),o(d.document,"touchend",this._onTouchEnd,a),o(d.document,u+"move",this._onMouseMove,a),o(d.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(u,p){this.__onTransformGesture&&this.__onTransformGesture(u,p)},_onDrag:function(u,p){this.__onDrag&&this.__onDrag(u,p)},_onMouseWheel:function(u){this.__onMouseWheel(u)},_onMouseOut:function(u){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:u}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:u});var l=this;this._hoveredTargets.forEach(function(y){l.fire("mouse:out",{target:p,e:u}),y&&p.fire("mouseout",{e:u})}),this._hoveredTargets=[]},_onMouseEnter:function(u){!this._currentTransform&&!this.findTarget(u)&&(this.fire("mouse:over",{target:null,e:u}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(u,p){this.__onOrientationChange&&this.__onOrientationChange(u,p)},_onShake:function(u,p){this.__onShake&&this.__onShake(u,p)},_onLongPress:function(u,p){this.__onLongPress&&this.__onLongPress(u,p)},_onDragOver:function(u){u.preventDefault();var p=this._simpleEventHandler("dragover",u);this._fireEnterLeaveEvents(p,u)},_onDrop:function(u){return this._simpleEventHandler("drop:before",u),this._simpleEventHandler("drop",u)},_onContextMenu:function(u){return this.stopContextMenu&&(u.stopPropagation(),u.preventDefault()),!1},_onDoubleClick:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"dblclick"),this._resetTransformEventData(u)},getPointerId:function(u){var p=u.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?u.pointerId:-1},_isMainEvent:function(u){return!0===u.isPrimary||!1!==u.isPrimary&&("touchend"===u.type&&0===u.touches.length||!u.changedTouches||u.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(u){u.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(u)),this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();m(d.document,"touchend",this._onTouchEnd,a),m(d.document,"touchmove",this._onMouseMove,a),o(p,l+"down",this._onMouseDown)},_onMouseDown:function(u){this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();o(p,l+"move",this._onMouseMove,a),m(d.document,l+"up",this._onMouseUp),m(d.document,l+"move",this._onMouseMove,a)},_onTouchEnd:function(u){if(!(u.touches.length>0)){this.__onMouseUp(u),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();o(d.document,"touchend",this._onTouchEnd,a),o(d.document,"touchmove",this._onMouseMove,a);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){m(l.upperCanvasEl,p+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(u){this.__onMouseUp(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(u)&&(o(d.document,l+"up",this._onMouseUp),o(d.document,l+"move",this._onMouseMove,a),m(p,l+"move",this._onMouseMove,a))},_onMouseMove:function(u){!this.allowTouchScrolling&&u.preventDefault&&u.preventDefault(),this.__onMouseMove(u)},_onResize:function(){this.calcOffset()},_shouldRender:function(u){var p=this._activeObject;return!!(!!p!=!!u||p&&u&&p!==u)},__onMouseUp:function(u){var p,l=this._currentTransform,y=this._groupSelector,S=!1,x=!y||0===y.left&&0===y.top;if(this._cacheTransformEventData(u),p=this._target,this._handleEvent(u,"up:before"),s(u,3))this.fireRightClick&&this._handleEvent(u,"up",3,x);else{if(s(u,2))return this.fireMiddleClick&&this._handleEvent(u,"up",2,x),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(u);else if(this._isMainEvent(u)){if(l&&(this._finalizeCurrentTransform(u),S=l.actionPerformed),!x){var A=p===this._activeObject;this._maybeGroupObjects(u),S||(S=this._shouldRender(p)||!A&&p===this._activeObject)}var O,j;if(p){if(O=p._findTargetCorner(this.getPointer(u,!0),d.util.isTouchEvent(u)),p.selectable&&p!==this._activeObject&&"up"===p.activeOn)this.setActiveObject(p,u),S=!0;else{var Z=p.controls[O],ue=Z&&Z.getMouseUpHandler(u,p,Z);ue&&ue(u,l,(j=this.getPointer(u)).x,j.y)}p.isMoving=!1}if(l&&(l.target!==p||l.corner!==O)){var pe=l.target&&l.target.controls[l.corner],Ce=pe&&pe.getMouseUpHandler(u,p,Z);j=j||this.getPointer(u),Ce&&Ce(u,l,j.x,j.y)}this._setCursorFromEvent(u,p),this._handleEvent(u,"up",1,x),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),S?this.requestRenderAll():x||this.renderTop()}}},_simpleEventHandler:function(u,p){var l=this.findTarget(p),y=this.targets,S={e:p,target:l,subTargets:y};if(this.fire(u,S),l&&l.fire(u,S),!y)return l;for(var x=0;x<y.length;x++)y[x].fire(u,S);return l},_handleEvent:function(u,p,l,y){var S=this._target,x=this.targets||[],A={e:u,target:S,subTargets:x,button:l||1,isClick:y||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===p&&(A.currentTarget=this.findTarget(u),A.currentSubTargets=this.targets),this.fire("mouse:"+p,A),S&&S.fire("mouse"+p,A);for(var O=0;O<x.length;O++)x[O].fire("mouse"+p,A)},_finalizeCurrentTransform:function(u){var p=this._currentTransform,l=p.target,y={e:u,target:l,transform:p,action:p.action};l._scaling&&(l._scaling=!1),l.setCoords(),(p.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",y)},_onMouseDownInDrawingMode:function(u){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(u).requestRenderAll();var p=this.getPointer(u);this.freeDrawingBrush.onMouseDown(p,{e:u,pointer:p}),this._handleEvent(u,"down")},_onMouseMoveInDrawingMode:function(u){if(this._isCurrentlyDrawing){var p=this.getPointer(u);this.freeDrawingBrush.onMouseMove(p,{e:u,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(u,"move")},_onMouseUpInDrawingMode:function(u){var p=this.getPointer(u);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:u,pointer:p}),this._handleEvent(u,"up")},__onMouseDown:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"down:before");var p=this._target;if(s(u,3))this.fireRightClick&&this._handleEvent(u,"down",3);else if(s(u,2))this.fireMiddleClick&&this._handleEvent(u,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(u);else if(this._isMainEvent(u)&&!this._currentTransform){this._previousPointer=l=this._pointer;var y=this._shouldRender(p),S=this._shouldGroup(u,p);if(this._shouldClearSelection(u,p)?this.discardActiveObject(u):S&&(this._handleGrouping(u,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var x=p===this._activeObject;p.selectable&&"down"===p.activeOn&&this.setActiveObject(p,u);var A=p._findTargetCorner(this.getPointer(u,!0),d.util.isTouchEvent(u));if(p.__corner=A,p===this._activeObject&&(A||!S)){this._setupCurrentTransform(u,p,x);var O=p.controls[A],l=this.getPointer(u),j=O&&O.getMouseDownHandler(u,p,O);j&&j(u,this._currentTransform,l.x,l.y)}}this._handleEvent(u,"down"),(y||S)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(u){this._resetTransformEventData(),this._pointer=this.getPointer(u,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(u)||null},_beforeTransform:function(u){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:u,transform:p})},__onMouseMove:function(u){var p,l;if(this._handleEvent(u,"move:before"),this._cacheTransformEventData(u),this.isDrawingMode)this._onMouseMoveInDrawingMode(u);else if(this._isMainEvent(u)){var y=this._groupSelector;y?(y.left=(l=this._absolutePointer).x-y.ex,y.top=l.y-y.ey,this.renderTop()):this._currentTransform?this._transformObject(u):(p=this.findTarget(u)||null,this._setCursorFromEvent(u,p),this._fireOverOutEvents(p,u)),this._handleEvent(u,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(u,p){var l=this._hoveredTarget,y=this._hoveredTargets,S=this.targets,x=Math.max(y.length,S.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var A=0;A<x;A++)this.fireSyntheticInOutEvents(S[A],p,{oldTarget:y[A],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(u,p){var l=this._draggedoverTarget,y=this._hoveredTargets,S=this.targets,x=Math.max(y.length,S.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var A=0;A<x;A++)this.fireSyntheticInOutEvents(S[A],p,{oldTarget:y[A],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=u},fireSyntheticInOutEvents:function(u,p,l){var y,S,O,x=l.oldTarget,j=x!==u,Z=l.canvasEvtIn,ue=l.canvasEvtOut;j&&(y={e:p,target:u,previousTarget:x},S={e:p,target:x,nextTarget:u}),O=u&&j,x&&j&&(ue&&this.fire(ue,S),x.fire(l.evtOut,S)),O&&(Z&&this.fire(Z,y),u.fire(l.evtIn,y))},__onMouseWheel:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"wheel"),this._resetTransformEventData()},_transformObject:function(u){var p=this.getPointer(u),l=this._currentTransform;l.reset=!1,l.shiftKey=u.shiftKey,l.altKey=u[this.centeredKey],this._performTransformAction(u,l,p),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(u,p,l){var x=p.action,A=!1,O=p.actionHandler;O&&(A=O(u,p,l.x,l.y)),"drag"===x&&A&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||A},_fire:d.controlsUtils.fireEvent,_setCursorFromEvent:function(u,p){if(!p)return this.setCursor(this.defaultCursor),!1;var l=p.hoverCursor||this.hoverCursor,y=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,S=(!y||!y.contains(p))&&p._findTargetCorner(this.getPointer(u,!0));S?this.setCursor(this.getCornerCursor(S,p,u)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(x){l=x.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(u,p,l){var y=p.controls[u];return y.cursorStyleHandler(l,y,p)}})}(),function(){var m=Math.min,o=Math.max;d.util.object.extend(d.Canvas.prototype,{_shouldGroup:function(f,h){var r=this._activeObject;return r&&this._isSelectionKeyPressed(f)&&h&&h.selectable&&this.selection&&(r!==h||"activeSelection"===r.type)&&!h.onSelect({e:f})},_handleGrouping:function(f,h){var r=this._activeObject;r.__corner||h===r&&(!(h=this.findTarget(f,!0))||!h.selectable)||(r&&"activeSelection"===r.type?this._updateActiveSelection(h,f):this._createActiveSelection(h,f))},_updateActiveSelection:function(f,h){var r=this._activeObject,a=r._objects.slice(0);r.contains(f)?(r.removeWithUpdate(f),this._hoveredTarget=f,this._hoveredTargets=this.targets.concat(),1===r.size()&&this._setActiveObject(r.item(0),h)):(r.addWithUpdate(f),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,h)},_createActiveSelection:function(f,h){var r=this.getActiveObjects(),a=this._createGroup(f);this._hoveredTarget=a,this._setActiveObject(a,h),this._fireSelectionEvents(r,h)},_createGroup:function(f){var h=this._objects,a=h.indexOf(this._activeObject)<h.indexOf(f)?[this._activeObject,f]:[f,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new d.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(f){var r,h=this._collectObjects(f);1===h.length?this.setActiveObject(h[0],f):h.length>1&&(r=new d.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(r,f))},_collectObjects:function(f){for(var r,h=[],a=this._groupSelector.ex,s=this._groupSelector.ey,u=a+this._groupSelector.left,p=s+this._groupSelector.top,l=new d.Point(m(a,u),m(s,p)),y=new d.Point(o(a,u),o(s,p)),S=!this.selectionFullyContained,x=a===u&&s===p,A=this._objects.length;A--&&!((r=this._objects[A])&&r.selectable&&r.visible&&(S&&r.intersectsWithRect(l,y,!0)||r.isContainedWithinRect(l,y,!0)||S&&r.containsPoint(l,null,!0)||S&&r.containsPoint(y,null,!0))&&(h.push(r),x)););return h.length>1&&(h=h.filter(function(O){return!O.onSelect({e:f})})),h},_maybeGroupObjects:function(f){this.selection&&this._groupSelector&&this._groupSelectedObjects(f),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),d.util.object.extend(d.StaticCanvas.prototype,{toDataURL:function(m){m||(m={});var o=m.format||"png",f=m.quality||1,h=(m.multiplier||1)*(m.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(h,m);return d.util.toDataURL(r,o,f)},toCanvasElement:function(m,o){var f=((o=o||{}).width||this.width)*(m=m||1),h=(o.height||this.height)*m,r=this.getZoom(),a=this.width,s=this.height,u=r*m,p=this.viewportTransform,S=this.interactive,x=[u,0,0,u,(p[4]-(o.left||0))*m,(p[5]-(o.top||0))*m],A=this.enableRetinaScaling,O=d.util.createCanvasElement(),j=this.contextTop;return O.width=f,O.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=x,this.width=f,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(O.getContext("2d"),this._objects),this.viewportTransform=p,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=S,this.enableRetinaScaling=A,this.contextTop=j,O}}),d.util.object.extend(d.StaticCanvas.prototype,{loadFromJSON:function(m,o,f){if(m){var h="string"==typeof m?JSON.parse(m):d.util.object.clone(m),r=this,a=h.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(u){r.clear(),r._setBgOverlay(h,function(){a?r._enlivenObjects([a],function(p){r.clipPath=p[0],r.__setupCanvas.call(r,h,u,s,o)}):r.__setupCanvas.call(r,h,u,s,o)})},f),this}},__setupCanvas:function(m,o,f,h){var r=this;o.forEach(function(a,s){r.insertAt(a,s)}),this.renderOnAddRemove=f,delete m.objects,delete m.backgroundImage,delete m.overlayImage,delete m.background,delete m.overlay,this._setOptions(m),this.renderAll(),h&&h()},_setBgOverlay:function(m,o){var f={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(m.backgroundImage||m.overlayImage||m.background||m.overlay){var h=function(){f.backgroundImage&&f.overlayImage&&f.backgroundColor&&f.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",m.backgroundImage,f,h),this.__setBgOverlay("overlayImage",m.overlayImage,f,h),this.__setBgOverlay("backgroundColor",m.background,f,h),this.__setBgOverlay("overlayColor",m.overlay,f,h)}else o&&o()},__setBgOverlay:function(m,o,f,h){var r=this;if(!o)return f[m]=!0,void(h&&h());"backgroundImage"===m||"overlayImage"===m?d.util.enlivenObjects([o],function(a){r[m]=a[0],f[m]=!0,h&&h()}):this["set"+d.util.string.capitalize(m,!0)](o,function(){f[m]=!0,h&&h()})},_enlivenObjects:function(m,o,f){m&&0!==m.length?d.util.enlivenObjects(m,function(h){o&&o(h)},null,f):o&&o([])},_toDataURL:function(m,o){this.clone(function(f){o(f.toDataURL(m))})},_toDataURLWithMultiplier:function(m,o,f){this.clone(function(h){f(h.toDataURLWithMultiplier(m,o))})},clone:function(m,o){var f=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(h){h.loadFromJSON(f,function(){m&&m(h)})})},cloneWithoutData:function(m){var o=d.util.createCanvasElement();o.width=this.width,o.height=this.height;var f=new d.Canvas(o);this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),m&&m(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):m&&m(f)}}),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.util.object.clone,r=o.util.toFixed,a=o.util.string.capitalize,s=o.util.degreesToRadians;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!o.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var y=o.perfLimitSizeTotal,S=l.width,x=l.height,A=o.maxCacheSideLimit,O=o.minCacheSideLimit;if(S<=A&&x<=A&&S*x<=y)return S<O&&(l.width=O),x<O&&(l.height=O),l;var Z=o.util.limitDimsByArea(S/x,y),ue=o.util.capValue,pe=ue(O,Z.x,A),Ce=ue(O,Z.y,A);return S>pe&&(l.zoomX/=S/pe,l.width=pe,l.capped=!0),x>Ce&&(l.zoomY/=x/Ce,l.height=Ce,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),y=this._getTransformedDimensions(0,0),S=y.x*l.scaleX/this.scaleX,x=y.y*l.scaleY/this.scaleY;return{width:S+2,height:x+2,zoomX:l.scaleX,zoomY:l.scaleY,x:S,y:x}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var S=l._currentTransform.action;if(this===l._currentTransform.target&&S.slice&&"scale"===S.slice(0,5))return!1}var ue,pe,x=this._cacheCanvas,A=this._limitCacheSize(this._getCacheCanvasDimensions()),O=o.minCacheSideLimit,j=A.width,Z=A.height,Ce=A.zoomX,Se=A.zoomY,He=j!==this.cacheWidth||Z!==this.cacheHeight,at=He||this.zoomX!==Ce||this.zoomY!==Se,ke=0,Ee=0,xe=!1;if(He){var Le=this._cacheCanvas.width,q=this._cacheCanvas.height,le=j>Le||Z>q;xe=le||(j<.9*Le||Z<.9*q)&&Le>O&&q>O,le&&!A.capped&&(j>O||Z>O)&&(ke=.1*j,Ee=.1*Z)}return this instanceof o.Text&&this.path&&(at=!0,xe=!0,ke+=this.getHeightOfLine(0)*this.zoomX,Ee+=this.getHeightOfLine(0)*this.zoomY),!!at&&(xe?(x.width=Math.ceil(j+ke),x.height=Math.ceil(Z+Ee)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,x.width,x.height)),ue=A.x/2,pe=A.y/2,this.cacheTranslationX=Math.round(x.width/2-ue)+ue,this.cacheTranslationY=Math.round(x.height/2-pe)+pe,this.cacheWidth=j,this.cacheHeight=Z,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Ce,Se),this.zoomX=Ce,this.zoomY=Se,!0)},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var S=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop));l.transform(S[0],S[1],S[2],S[3],S[4],S[5])},toObject:function(l){var y=o.Object.NUM_FRACTION_DIGITS,S={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:r(this.left,y),top:r(this.top,y),width:r(this.width,y),height:r(this.height,y),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,y),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,y),scaleX:r(this.scaleX,y),scaleY:r(this.scaleY,y),angle:r(this.angle,y),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,y),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,y),skewY:r(this.skewY,y)};return this.clipPath&&!this.clipPath.excludeFromExport&&(S.clipPath=this.clipPath.toObject(l),S.clipPath.inverted=this.clipPath.inverted,S.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,S,l),this.includeDefaultValues||(S=this._removeDefaultValues(S)),S},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var y=o.util.getKlass(l.type).prototype;return y.stateProperties.forEach(function(x){"left"===x||"top"===x||(l[x]===y[x]&&delete l[x],Array.isArray(l[x])&&Array.isArray(y[x])&&0===l[x].length&&0===y[x].length&&delete l[x])}),l},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),y=l.scaleX,S=l.scaleY;if(this.canvas){var x=this.canvas.getZoom(),A=this.canvas.getRetinaScaling();y*=x*A,S*=x*A}return{scaleX:y,scaleY:S}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,y){var x=this[l]!==y,A=!1;return("scaleX"===l||"scaleY"===l)&&(y=this._constrainScale(y)),"scaleX"===l&&y<0?(this.flipX=!this.flipX,y*=-1):"scaleY"===l&&y<0?(this.flipY=!this.flipY,y*=-1):"shadow"!==l||!y||y instanceof o.Shadow?"dirty"===l&&this.group&&this.group.set("dirty",y):y=new o.Shadow(y),this[l]=y,x&&(A=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,A&&this.group.set("dirty",!0)):A&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(l,y){if(l.save(),l.globalCompositeOperation=y.inverted?"destination-out":"destination-in",y.absolutePositioned){var S=o.util.invertTransform(this.calcTransformMatrix());l.transform(S[0],S[1],S[2],S[3],S[4],S[5])}y.transform(l),l.scale(1/y.zoomX,1/y.zoomY),l.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),l.restore()},drawObject:function(l,y){var S=this.fill,x=this.stroke;y?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=S,this.stroke=x},_drawClipPath:function(l,y){y&&(y.canvas=this.canvas,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,y))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var y=this.cacheWidth/this.zoomX,S=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-y/2,-S/2,y,S)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var y=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-y.x/2,-y.y/2,y.x,y.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,y){var S=y.stroke;S&&(l.lineWidth=y.strokeWidth,l.lineCap=y.strokeLineCap,l.lineDashOffset=y.strokeDashOffset,l.lineJoin=y.strokeLineJoin,l.miterLimit=y.strokeMiterLimit,S.toLive?"percentage"===S.gradientUnits||S.gradientTransform||S.patternTransform?this._applyPatternForTransformedGradient(l,S):(l.strokeStyle=S.toLive(l,this),this._applyPatternGradientTransform(l,S)):l.strokeStyle=y.stroke)},_setFillStyles:function(l,y){var S=y.fill;S&&(S.toLive?(l.fillStyle=S.toLive(l,this),this._applyPatternGradientTransform(l,y.fill)):l.fillStyle=S)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,y){!y||0===y.length||(1&y.length&&y.push.apply(y,y),l.setLineDash(y))},_renderControls:function(l,y){var A,O,j,S=this.getViewportTransform(),x=this.calcTransformMatrix();O=typeof(y=y||{}).hasBorders<"u"?y.hasBorders:this.hasBorders,j=typeof y.hasControls<"u"?y.hasControls:this.hasControls,x=o.util.multiplyTransformMatrices(S,x),A=o.util.qrDecompose(x),l.save(),l.translate(A.translateX,A.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(A.angle-=180),l.rotate(s(this.group?A.angle:this.angle)),y.forActiveSelection||this.group?O&&this.drawBordersInGroup(l,A,y):O&&this.drawBorders(l,y),j&&this.drawControls(l,y),l.restore()},_setShadow:function(l){if(this.shadow){var x,y=this.shadow,S=this.canvas,A=S&&S.viewportTransform[0]||1,O=S&&S.viewportTransform[3]||1;x=y.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),S&&S._isRetinaScaling()&&(A*=o.devicePixelRatio,O*=o.devicePixelRatio),l.shadowColor=y.color,l.shadowBlur=y.blur*o.browserShadowBlurConstant*(A+O)*(x.scaleX+x.scaleY)/4,l.shadowOffsetX=y.offsetX*A*x.scaleX,l.shadowOffsetY=y.offsetY*O*x.scaleY}},_removeShadow:function(l){this.shadow&&(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,y){if(!y||!y.toLive)return{offsetX:0,offsetY:0};var S=y.gradientTransform||y.patternTransform,x=-this.width/2+y.offsetX||0,A=-this.height/2+y.offsetY||0;return"percentage"===y.gradientUnits?l.transform(this.width,0,0,this.height,x,A):l.transform(1,0,0,1,x,A),S&&l.transform(S[0],S[1],S[2],S[3],S[4],S[5]),{offsetX:x,offsetY:A}},_renderPaintInOrder:function(l){"stroke"===this.paintFirst?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){this.fill&&(l.save(),this._setFillStyles(l,this),"evenodd"===this.fillRule?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var y=this.getObjectScaling();l.scale(1/y.scaleX,1/y.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,y){var A,S=this._limitCacheSize(this._getCacheCanvasDimensions()),x=o.util.createCanvasElement(),O=this.canvas.getRetinaScaling(),j=S.x/this.scaleX/O,Z=S.y/this.scaleY/O;x.width=j,x.height=Z,(A=x.getContext("2d")).beginPath(),A.moveTo(0,0),A.lineTo(j,0),A.lineTo(j,Z),A.lineTo(0,Z),A.closePath(),A.translate(j/2,Z/2),A.scale(S.zoomX/this.scaleX/O,S.zoomY/this.scaleY/O),this._applyPatternGradientTransform(A,y),A.fillStyle=y.toLive(l),A.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(O*this.scaleX/S.zoomX,O*this.scaleY/S.zoomY),l.strokeStyle=A.createPattern(x,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var y=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),y=o.util.transformPoint(y,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,y.x+=l.offsetLeft,y.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(y,"center","center")},clone:function(l,y){var S=this.toObject(y);this.constructor.fromObject?this.constructor.fromObject(S,l):o.Object._fromObject("Object",S,l)},cloneAsImage:function(l,y){var S=this.toCanvasElement(y);return l&&l(new o.Image(S)),this},toCanvasElement:function(l){l||(l={});var y=o.util,S=y.saveObjectTransform(this),x=this.group,A=this.shadow,O=Math.abs,j=(l.multiplier||1)*(l.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,l.withoutTransform&&y.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var Ce,He,at,Z=o.util.createCanvasElement(),ue=this.getBoundingRect(!0,!0),pe=this.shadow,Se={x:0,y:0};pe&&(He=pe.blur,Ce=pe.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),Se.x=2*Math.round(O(pe.offsetX)+He)*O(Ce.scaleX),Se.y=2*Math.round(O(pe.offsetY)+He)*O(Ce.scaleY)),at=ue.height+Se.y,Z.width=Math.ceil(ue.width+Se.x),Z.height=Math.ceil(at);var ke=new o.StaticCanvas(Z,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===l.format&&(ke.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(ke.width/2,ke.height/2),"center","center");var Ee=this.canvas;ke.add(this);var xe=ke.toCanvasElement(j||1,l);return this.shadow=A,this.set("canvas",Ee),x&&(this.group=x),this.set(S).setCoords(),ke._objects=[],ke.dispose(),ke=null,xe},toDataURL:function(l){return l||(l={}),o.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var y=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return y&&this._setOriginToCenter(),this.set("angle",l),y&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,y){y=y||this.canvas.getPointer(l);var S=new o.Point(y.x,y.y),x=this._getLeftTopCoords();return this.angle&&(S=o.util.rotatePoint(S,x,s(-this.angle))),{x:S.x-x.x,y:S.y-x.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),f(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(l,y,S,x){var A=o[l];y=h(y,!0),o.util.enlivenPatterns([y.fill,y.stroke],function(O){typeof O[0]<"u"&&(y.fill=O[0]),typeof O[1]<"u"&&(y.stroke=O[1]),o.util.enlivenObjectEnlivables(y,y,function(){var j=x?new A(y[x],y):new A(y);S&&S(j)})})},o.Object.__uid=0)}(Be),function(){var m=d.util.degreesToRadians,o={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5};d.util.object.extend(d.Object.prototype,{translateToGivenOrigin:function(h,r,a,s,u){var y,S,x,p=h.x,l=h.y;return"string"==typeof r?r=o[r]:r-=.5,"string"==typeof s?s=o[s]:s-=.5,"string"==typeof a?a=f[a]:a-=.5,"string"==typeof u?u=f[u]:u-=.5,S=u-a,((y=s-r)||S)&&(x=this._getTransformedDimensions(),p=h.x+y*x.x,l=h.y+S*x.y),new d.Point(p,l)},translateToCenterPoint:function(h,r,a){var s=this.translateToGivenOrigin(h,r,a,"center","center");return this.angle?d.util.rotatePoint(s,h,m(this.angle)):s},translateToOriginPoint:function(h,r,a){var s=this.translateToGivenOrigin(h,"center","center",r,a);return this.angle?d.util.rotatePoint(s,h,m(this.angle)):s},getCenterPoint:function(){var h=new d.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,r){var a=this.getCenterPoint();return this.translateToOriginPoint(a,h,r)},toLocalPoint:function(h,r,a){var u,p,s=this.getCenterPoint();return u=typeof r<"u"&&typeof a<"u"?this.translateToGivenOrigin(s,"center","center",r,a):new d.Point(this.left,this.top),p=new d.Point(h.x,h.y),this.angle&&(p=d.util.rotatePoint(p,s,-m(this.angle))),p.subtractEquals(u)},setPositionByOrigin:function(h,r,a){var s=this.translateToCenterPoint(h,r,a),u=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(h){var p,l,r=m(this.angle),a=this.getScaledWidth(),s=d.util.cos(r)*a,u=d.util.sin(r)*a;this.left+=s*((l="string"==typeof h?o[h]:h-.5)-(p="string"==typeof this.originX?o[this.originX]:this.originX-.5)),this.top+=u*(l-p),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var o=d.util,f=o.degreesToRadians,h=o.multiplyTransformMatrices,r=o.transformPoint;o.object.extend(d.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,s){return s?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,s){return function m(a){return[new d.Point(a.tl.x,a.tl.y),new d.Point(a.tr.x,a.tr.y),new d.Point(a.br.x,a.br.y),new d.Point(a.bl.x,a.bl.y)]}(this._getCoords(a,s))},intersectsWithRect:function(a,s,u,p){var l=this.getCoords(u,p);return"Intersection"===d.Intersection.intersectPolygonRectangle(l,a,s).status},intersectsWithObject:function(a,s,u){return"Intersection"===d.Intersection.intersectPolygonPolygon(this.getCoords(s,u),a.getCoords(s,u)).status||a.isContainedWithinObject(this,s,u)||this.isContainedWithinObject(a,s,u)},isContainedWithinObject:function(a,s,u){for(var p=this.getCoords(s,u),y=0,S=a._getImageLines(s?a.aCoords:a.lineCoords);y<4;y++)if(!a.containsPoint(p[y],S))return!1;return!0},isContainedWithinRect:function(a,s,u,p){var l=this.getBoundingRect(u,p);return l.left>=a.x&&l.left+l.width<=s.x&&l.top>=a.y&&l.top+l.height<=s.y},containsPoint:function(a,y,u,p){var l=this._getCoords(u,p),S=(y=y||this._getImageLines(l),this._findCrossPoints(a,y));return 0!==S&&S%2==1},isOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;return!(!this.getCoords(!0,a).some(function(l){return l.x<=u.x&&l.x>=s.x&&l.y<=u.y&&l.y>=s.y})&&!this.intersectsWithRect(s,u,!0,a))||this._containsCenterOfCanvas(s,u,a)},_containsCenterOfCanvas:function(a,s,u){return!!this.containsPoint({x:(a.x+s.x)/2,y:(a.y+s.y)/2},null,!0,u)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;return!!this.intersectsWithRect(s,u,!0,a)||this.getCoords(!0,a).every(function(l){return(l.x>=u.x||l.x<=s.x)&&(l.y>=u.y||l.y<=s.y)})&&this._containsCenterOfCanvas(s,u,a)},_getImageLines:function(a){return{topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}}},_findCrossPoints:function(a,s){var p,l,y,S,A,x=0;for(var O in s)if(!((A=s[O]).o.y<a.y&&A.d.y<a.y||A.o.y>=a.y&&A.d.y>=a.y||(A.o.x===A.d.x&&A.o.x>=a.x?S=A.o.x:(p=(A.d.y-A.o.y)/(A.d.x-A.o.x),l=a.y-0*a.x,y=A.o.y-p*A.o.x,S=-(l-y)/(0-p)),S>=a.x&&(x+=1),2!==x)))break;return x},getBoundingRect:function(a,s){var u=this.getCoords(a,s);return o.makeBoundingBoxFromPoints(u)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:0===a?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,s){var u=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(a/this.width/u)},scaleToHeight:function(a,s){var u=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(a/this.height/u)},calcLineCoords:function(){var a=this.getViewportTransform(),s=this.padding,u=f(this.angle),y=o.cos(u)*s,S=o.sin(u)*s,x=y+S,A=y-S,O=this.calcACoords(),j={tl:r(O.tl,a),tr:r(O.tr,a),bl:r(O.bl,a),br:r(O.br,a)};return s&&(j.tl.x-=A,j.tl.y-=x,j.tr.x+=x,j.tr.y-=A,j.bl.x-=x,j.bl.y+=A,j.br.x+=A,j.br.y+=x),j},calcOCoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=this.getViewportTransform(),p=h(u,s),l=h(p,a),y=(l=h(l,[1/u[0],0,0,1/u[3],0,0]),this._calculateCurrentDimensions()),S={};return this.forEachControl(function(x,A,O){S[A]=x.positionHandler(y,l,O)}),S},calcACoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=h(s,a),p=this._getTransformedDimensions(),l=p.x/2,y=p.y/2;return{tl:r({x:-l,y:-y},u),tr:r({x:l,y:-y},u),bl:r({x:-l,y},u),br:r({x:l,y},u)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var s="_",u="";return!a&&this.group&&(u=this.group.transformMatrixKey(a)+s),u+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var s=this.calcOwnMatrix();if(a||!this.group)return s;var u=this.transformMatrixKey(a),p=this.matrixCache||(this.matrixCache={});return p.key===u?p.value:(this.group&&(s=h(this.group.calcTransformMatrix(!1),s)),p.key=u,p.value=s,s)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===a)return s.value;var u=this._calcTranslateMatrix(),p={angle:this.angle,translateX:u[4],translateY:u[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=a,s.value=o.composeMatrix(p),s.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth;return{x:this.width+a,y:this.height+a}},_getTransformedDimensions:function(a,s){typeof a>"u"&&(a=this.skewX),typeof s>"u"&&(s=this.skewY);var u,p,l,y=0===a&&0===s;if(this.strokeUniform?(p=this.width,l=this.height):(p=(u=this._getNonTransformedDimensions()).x,l=u.y),y)return this._finalizeDimensions(p*this.scaleX,l*this.scaleY);var S=o.sizeAfterTransform(p,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:s});return this._finalizeDimensions(S.x,S.y)},_finalizeDimensions:function(a,s){return this.strokeUniform?{x:a+this.strokeWidth,y:s+this.strokeWidth}:{x:a,y:s}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),s=this._getTransformedDimensions();return r(s,a,!0).scalarAdd(2*this.padding)}})}(),d.util.object.extend(d.Object.prototype,{sendToBack:function(){return this.group?d.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?d.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(m){return this.group?d.StaticCanvas.prototype.sendBackwards.call(this.group,this,m):this.canvas&&this.canvas.sendBackwards(this,m),this},bringForward:function(m){return this.group?d.StaticCanvas.prototype.bringForward.call(this.group,this,m):this.canvas&&this.canvas.bringForward(this,m),this},moveTo:function(m){return this.group&&"activeSelection"!==this.group.type?d.StaticCanvas.prototype.moveTo.call(this.group,this,m):this.canvas&&this.canvas.moveTo(this,m),this}}),function(){function m(f,h){if(h){if(h.toLive)return f+": url(#SVGID_"+h.id+"); ";var r=new d.Color(h),a=f+": "+r.toRgb()+"; ",s=r.getAlpha();return 1!==s&&(a+=f+"-opacity: "+s.toString()+"; "),a}return f+": none; "}var o=d.util.toFixed;d.util.object.extend(d.Object.prototype,{getSvgStyles:function(f){var h=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=typeof this.opacity<"u"?this.opacity:"1",S=this.visible?"":" visibility: hidden;",x=f?"":this.getSvgFilter(),A=m("fill",this.fill);return[m("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",l,"; ",A,"fill-rule: ",h,"; ","opacity: ",y,";",x,S].join("")},getSvgSpanStyles:function(f,h){var r="; ",s=f.fontFamily?"font-family: "+(-1===f.fontFamily.indexOf("'")&&-1===f.fontFamily.indexOf('"')?"'"+f.fontFamily+"'":f.fontFamily)+r:"",a=f.strokeWidth?"stroke-width: "+f.strokeWidth+r:"",u=f.fontSize?"font-size: "+f.fontSize+"px"+r:"",p=f.fontStyle?"font-style: "+f.fontStyle+r:"",l=f.fontWeight?"font-weight: "+f.fontWeight+r:"",y=f.fill?m("fill",f.fill):"",S=f.stroke?m("stroke",f.stroke):"",x=this.getSvgTextDecoration(f);return x&&(x="text-decoration: "+x+r),[S,a,s,u,p,l,x,y,f.deltaY?"baseline-shift: "+-f.deltaY+"; ":"",h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(f){return["overline","underline","line-through"].filter(function(h){return f[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(f,h){var r=f?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+d.util.matrixToSVG(r)+(h||"")+'" '},_setSVGBg:function(f){if(this.backgroundColor){var h=d.Object.NUM_FRACTION_DIGITS;f.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,h),'" y="',o(-this.height/2,h),'" width="',o(this.width,h),'" height="',o(this.height,h),'"></rect>\n')}},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(f),{reviver:f})},toClipPathSVG:function(f){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(f),{reviver:f})},_createBaseClipPathSVGMarkup:function(f,h){var r=(h=h||{}).reviver,s=[this.getSvgTransform(!0,h.additionalTransform||""),this.getSvgCommons()].join(""),u=f.indexOf("COMMON_PARTS");return f[u]=s,r?r(f.join("")):f.join("")},_createBaseSVGMarkup:function(f,h){var O,Z,r=(h=h||{}).noStyle,a=h.reviver,s=r?"":'style="'+this.getSvgStyles()+'" ',u=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=p&&p.absolutePositioned,S=this.stroke,x=this.fill,A=this.shadow,j=[],ue=f.indexOf("COMMON_PARTS"),pe=h.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+d.Object.__uid++,Z='<clipPath id="'+p.clipPathId+'" >\n'+p.toClipPathSVG(a)+"</clipPath>\n"),y&&j.push("<g ",u,this.getSvgCommons()," >\n"),j.push("<g ",this.getSvgTransform(!1),y?"":u+this.getSvgCommons()," >\n"),O=[s,l,r?"":this.addPaintOrder()," ",pe?'transform="'+pe+'" ':""].join(""),f[ue]=O,x&&x.toLive&&j.push(x.toSVG(this)),S&&S.toLive&&j.push(S.toSVG(this)),A&&j.push(A.toSVG(this)),p&&j.push(Z),j.push(f.join("")),j.push("</g>\n"),y&&j.push("</g>\n"),a?a(j.join("")):j.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var m=d.util.object.extend,o="stateProperties";function f(r,a,s){var u={};s.forEach(function(l){u[l]=r[l]}),m(r[a],u,!0)}function h(r,a,s){if(r===a)return!0;if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(var u=0,p=r.length;u<p;u++)if(!h(r[u],a[u]))return!1;return!0}if(r&&"object"==typeof r){var y,l=Object.keys(r);if(!a||"object"!=typeof a||!s&&l.length!==Object.keys(a).length)return!1;for(u=0,p=l.length;u<p;u++)if("canvas"!==(y=l[u])&&"group"!==y&&!h(r[y],a[y]))return!1;return!0}}d.util.object.extend(d.Object.prototype,{hasStateChanged:function(r){var a="_"+(r=r||o);return Object.keys(this[a]).length<this[r].length||!h(this[a],this,!0)},saveState:function(r){var a=r&&r.propertySet||o,s="_"+a;return this[s]?(f(this,s,this[a]),r&&r.stateProperties&&f(this,s,r.stateProperties),this):this.setupState(r)},setupState:function(r){var a=(r=r||{}).propertySet||o;return r.propertySet=a,this["_"+a]={},this.saveState(r),this}})}(),function(){var m=d.util.degreesToRadians;d.util.object.extend(d.Object.prototype,{_findTargetCorner:function(o,f){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var a,s,l,h=o.x,r=o.y,u=Object.keys(this.oCoords),p=u.length-1;for(this.__corner=0;p>=0;p--)if(this.isControlVisible(l=u[p])&&(s=this._getImageLines(f?this.oCoords[l].touchCorner:this.oCoords[l].corner),0!==(a=this._findCrossPoints({x:h,y:r},s))&&a%2==1))return this.__corner=l,l;return!1},forEachControl:function(o){for(var f in this.controls)o(this.controls[f],f,this)},_setCornerCoords:function(){var o=this.oCoords;for(var f in o){var h=this.controls[f];o[f].corner=h.calcCornerCoords(this.angle,this.cornerSize,o[f].x,o[f].y,!1),o[f].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,o[f].x,o[f].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var f=this.getCenterPoint(),h=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return o.translate(f.x,f.y),o.scale(1/r[0],1/r[3]),o.rotate(m(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-h.x/2,-h.y/2,h.x,h.y),o.restore(),this},drawBorders:function(o,f){f=f||{};var h=this._calculateCurrentDimensions(),r=this.borderScaleFactor,a=h.x+r,s=h.y+r,u=typeof f.hasControls<"u"?f.hasControls:this.hasControls,p=!1;return o.save(),o.strokeStyle=f.borderColor||this.borderColor,this._setLineDash(o,f.borderDashArray||this.borderDashArray),o.strokeRect(-a/2,-s/2,a,s),u&&(o.beginPath(),this.forEachControl(function(l,y,S){l.withConnection&&l.getVisibility(S,y)&&(p=!0,o.moveTo(l.x*a,l.y*s),o.lineTo(l.x*a+l.offsetX,l.y*s+l.offsetY))}),p&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,f,h){h=h||{};var r=d.util.sizeAfterTransform(this.width,this.height,f),a=this.strokeWidth,s=this.strokeUniform,u=this.borderScaleFactor,p=r.x+a*(s?this.canvas.getZoom():f.scaleX)+u,l=r.y+a*(s?this.canvas.getZoom():f.scaleY)+u;return o.save(),this._setLineDash(o,h.borderDashArray||this.borderDashArray),o.strokeStyle=h.borderColor||this.borderColor,o.strokeRect(-p/2,-l/2,p,l),o.restore(),this},drawControls:function(o,f){f=f||{},o.save();var r,a,h=this.canvas.getRetinaScaling();return o.setTransform(h,0,0,h,0,0),o.strokeStyle=o.fillStyle=f.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=f.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,f.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(s,u,p){a=p.oCoords[u],s.getVisibility(p,u)&&(r&&(a=d.util.transformPoint(a,r)),s.render(o,a.x,a.y,f,p))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,f){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=f,this},setControlsVisibility:function(o){for(var f in o||(o={}),o)this.setControlVisible(f,o[f]);return this},onDeselect:function(){},onSelect:function(){}})}(),d.util.object.extend(d.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(m,o){var f=function(){},h=(o=o||{}).onComplete||f,r=o.onChange||f,a=this;return d.util.animate({target:this,startValue:m.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(s){m.set("left",s),a.requestRenderAll(),r()},onComplete:function(){m.setCoords(),h()}})},fxCenterObjectV:function(m,o){var f=function(){},h=(o=o||{}).onComplete||f,r=o.onChange||f,a=this;return d.util.animate({target:this,startValue:m.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(s){m.set("top",s),a.requestRenderAll(),r()},onComplete:function(){m.setCoords(),h()}})},fxRemove:function(m,o){var f=function(){},h=(o=o||{}).onComplete||f,r=o.onChange||f,a=this;return d.util.animate({target:this,startValue:m.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){m.set("opacity",s),a.requestRenderAll(),r()},onComplete:function(){a.remove(m),h()}})}}),d.util.object.extend(d.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var o,m=[],h=[];for(o in arguments[0])m.push(o);for(var r=0,a=m.length;r<a;r++)h.push(this._animate(o=m[r],arguments[0][o],arguments[1],r!==a-1));return h}return this._animate.apply(this,arguments)},_animate:function(m,o,f,h){var a,r=this;o=o.toString(),f=f?d.util.object.clone(f):{},~m.indexOf(".")&&(a=m.split("."));var s=r.colorProperties.indexOf(m)>-1||a&&r.colorProperties.indexOf(a[1])>-1,u=a?this.get(a[0])[a[1]]:this.get(m);"from"in f||(f.from=u),s||(o=~o.indexOf("=")?u+parseFloat(o.replace("=","")):parseFloat(o));var p={target:this,startValue:f.from,endValue:o,byValue:f.by,easing:f.easing,duration:f.duration,abort:f.abort&&function(l,y,S){return f.abort.call(r,l,y,S)},onChange:function(l,y,S){a?r[a[0]][a[1]]=l:r.set(m,l),!h&&f.onChange&&f.onChange(l,y,S)},onComplete:function(l,y,S){h||(r.setCoords(),f.onComplete&&f.onComplete(l,y,S))}};return s?d.util.animateColor(p.startValue,p.endValue,p.duration,p):d.util.animate(p)}}),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function a(s,u){var p=s.origin,l=s.axis1,y=s.axis2,S=s.dimension,x=u.nearest,A=u.center,O=u.farthest;return function(){switch(this.get(p)){case x:return Math.min(this.get(l),this.get(y));case A:return Math.min(this.get(l),this.get(y))+.5*this.get(S);case O:return Math.max(this.get(l),this.get(y))}}}o.Line?o.warn("fabric.Line is already defined"):(o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,u){s||(s=[0,0,0,0]),this.callSuper("initialize",u),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(u)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,u){return this.callSuper("_set",s,u),typeof r[s]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var u=this.calcLinePoints();s.moveTo(u.x1,u.y1),s.lineTo(u.x2,u.y2),s.lineWidth=this.strokeWidth;var p=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return f(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(s.y-=this.strokeWidth),0===this.height&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,u=this.y1<=this.y2?-1:1;return{x1:s*this.width*.5,x2:s*this.width*-.5,y1:u*this.height*.5,y2:u*this.height*-.5}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'" />\n']}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(s,u,p){p=p||{};var l=o.parseAttributes(s,o.Line.ATTRIBUTE_NAMES);u(new o.Line([l.x1||0,l.y1||0,l.x2||0,l.y2||0],f(l,p)))},o.Line.fromObject=function(s,u){var l=h(s,!0);l.points=[s.x1,s.y1,s.x2,s.y2],o.Object._fromObject("Line",l,function p(y){delete y.points,u&&u(y)},"points")})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.degreesToRadians;o.Circle?o.warn("fabric.Circle is already defined."):(o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,a){return this.callSuper("_set",r,a),"radius"===r&&this.setRadius(a),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,u=(this.endAngle-this.startAngle)%360;if(0===u)r=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var p=f(this.startAngle),l=f(this.endAngle),y=this.radius;r=['<path d="M '+o.util.cos(p)*y+" "+o.util.sin(p)*y," A "+y+" "+y," 0 ",+(u>180?"1":"0")+" 1"," "+o.util.cos(l)*y+" "+o.util.sin(l)*y,'" ',"COMMON_PARTS"," />\n"]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,f(this.startAngle),f(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",2*r).set("height",2*r)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(r,a){var s=o.parseAttributes(r,o.Circle.ATTRIBUTE_NAMES);if(!function h(r){return"radius"in r&&r.radius>=0}(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,a(new o.Circle(s))},o.Circle.fromObject=function(r,a){o.Object._fromObject("Circle",r,a)})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={});o.Triangle?o.warn("fabric.Triangle is already defined"):(o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(f){var h=this.width/2,r=this.height/2;f.beginPath(),f.moveTo(-h,r),f.lineTo(0,-r),f.lineTo(h,r),f.closePath(),this._renderPaintInOrder(f)},_toSVG:function(){var f=this.width/2,h=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-f+" "+h,"0 "+-h,f+" "+h].join(","),'" />']}}),o.Triangle.fromObject=function(f,h){return o.Object._fromObject("Triangle",f,h)})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=2*Math.PI;o.Ellipse?o.warn("fabric.Ellipse is already defined."):(o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,r){switch(this.callSuper("_set",h,r),h){case"rx":this.rx=r,this.set("width",2*r);break;case"ry":this.ry=r,this.set("height",2*r)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,f,!1),h.restore(),this._renderPaintInOrder(h)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(h,r){var a=o.parseAttributes(h,o.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,r(new o.Ellipse(a))},o.Ellipse.fromObject=function(h,r){o.Object._fromObject("Ellipse",h,r)})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend;o.Rect?o.warn("fabric.Rect is already defined"):(o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var r=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,u=this.height,p=-this.width/2,l=-this.height/2,y=0!==r||0!==a,S=.4477152502;h.beginPath(),h.moveTo(p+r,l),h.lineTo(p+s-r,l),y&&h.bezierCurveTo(p+s-S*r,l,p+s,l+S*a,p+s,l+a),h.lineTo(p+s,l+u-a),y&&h.bezierCurveTo(p+s,l+u-S*a,p+s-S*r,l+u,p+s-r,l+u),h.lineTo(p+r,l+u),y&&h.bezierCurveTo(p+S*r,l+u,p,l+u-S*a,p,l+u-a),h.lineTo(p,l+a),y&&h.bezierCurveTo(p,l+S*a,p+S*r,l,p+r,l),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(h,r,a){if(!h)return r(null);a=a||{};var s=o.parseAttributes(h,o.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var u=new o.Rect(f(a?o.util.object.clone(a):{},s));u.visible=u.visible&&u.width>0&&u.height>0,r(u)},o.Rect.fromObject=function(h,r){return o.Object._fromObject("Rect",h,r)})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.util.array.min,r=o.util.array.max,a=o.util.toFixed,s=o.util.projectStrokeOnPoints;o.Polyline?o.warn("fabric.Polyline is already defined"):(o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(u,p){p=p||{},this.points=u||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(u){var l,p=this._calcDimensions(u),y=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-y,this.height=p.height-y,u.fromSVG||(l=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+y/2,y:p.top-this.strokeWidth/2+y/2},"left","top",this.originX,this.originY)),typeof u.left>"u"&&(this.left=u.fromSVG?p.left:l.x),typeof u.top>"u"&&(this.top=u.fromSVG?p.top:l.y),this.pathOffset={x:p.left+this.width/2+y/2,y:p.top+this.height/2+y/2}},_calcDimensions:function(){var u=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=h(u,"x")||0,l=h(u,"y")||0;return{left:p,top:l,width:(r(u,"x")||0)-p,height:(r(u,"y")||0)-l}},toObject:function(u){return f(this.callSuper("toObject",u),{points:this.points.concat()})},_toSVG:function(){for(var u=[],p=this.pathOffset.x,l=this.pathOffset.y,y=o.Object.NUM_FRACTION_DIGITS,S=0,x=this.points.length;S<x;S++)u.push(a(this.points[S].x-p,y),",",a(this.points[S].y-l,y)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',u.join(""),'" />\n']},commonRender:function(u){var p,l=this.points.length,y=this.pathOffset.x,S=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;u.beginPath(),u.moveTo(this.points[0].x-y,this.points[0].y-S);for(var x=0;x<l;x++)u.lineTo((p=this.points[x]).x-y,p.y-S);return!0},_render:function(u){this.commonRender(u)&&this._renderPaintInOrder(u)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(u){return function(p,l,y){if(!p)return l(null);y||(y={});var S=o.parsePointsAttribute(p.getAttribute("points")),x=o.parseAttributes(p,o[u].ATTRIBUTE_NAMES);x.fromSVG=!0,l(new o[u](S,f(x,y)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(u,p){return o.Object._fromObject("Polyline",u,p,"points")})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.projectStrokeOnPoints;o.Polygon?o.warn("fabric.Polygon is already defined"):(o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return f(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(h,r){o.Object._fromObject("Polygon",h,r,"points")})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.array.min,h=o.util.array.max,r=o.util.object.extend,a=o.util.object.clone,s=o.util.toFixed;o.Path?o.warn("fabric.Path is already defined"):(o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(u,p){delete(p=a(p||{})).path,this.callSuper("initialize",p),this._setPath(u||[],p)},_setPath:function(u,p){this.path=o.util.makePathSimpler(Array.isArray(u)?u:o.util.parsePath(u)),o.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(u){var p,l=0,y=0,S=0,x=0,j=-this.pathOffset.x,Z=-this.pathOffset.y;u.beginPath();for(var ue=0,pe=this.path.length;ue<pe;++ue)switch(p=this.path[ue],p[0]){case"L":u.lineTo((S=p[1])+j,(x=p[2])+Z);break;case"M":l=S=p[1],y=x=p[2],u.moveTo(S+j,x+Z);break;case"C":u.bezierCurveTo(p[1]+j,p[2]+Z,p[3]+j,p[4]+Z,(S=p[5])+j,(x=p[6])+Z);break;case"Q":u.quadraticCurveTo(p[1]+j,p[2]+Z,p[3]+j,p[4]+Z),S=p[3],x=p[4];break;case"z":case"Z":S=l,x=y,u.closePath()}},_render:function(u){this._renderPathCommands(u),this._renderPaintInOrder(u)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(u){return r(this.callSuper("toObject",u),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(u){var p=this.toObject(["sourcePath"].concat(u));return p.sourcePath&&delete p.path,p},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',o.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var u=o.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,u)+", "+s(-this.pathOffset.y,u)+")"},toClipPathSVG:function(u){var p=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},toSVG:function(u){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var l,O,u=[],p=[],y=0,S=0,x=0,A=0,j=0,Z=this.path.length;j<Z;++j){switch((l=this.path[j])[0]){case"L":x=l[1],A=l[2],O=[];break;case"M":y=x=l[1],S=A=l[2],O=[];break;case"C":O=o.util.getBoundsOfCurve(x,A,l[1],l[2],l[3],l[4],l[5],l[6]),x=l[5],A=l[6];break;case"Q":O=o.util.getBoundsOfCurve(x,A,l[1],l[2],l[1],l[2],l[3],l[4]),x=l[3],A=l[4];break;case"z":case"Z":x=y,A=S}O.forEach(function(at){u.push(at.x),p.push(at.y)}),u.push(x),p.push(A)}var ue=f(u)||0,pe=f(p)||0;return{left:ue,top:pe,width:(h(u)||0)-ue,height:(h(p)||0)-pe}}}),o.Path.fromObject=function(u,p){"string"==typeof u.sourcePath?o.loadSVGFromURL(u.sourcePath,function(y){var S=y[0];S.setOptions(u),u.clipPath?o.util.enlivenObjects([u.clipPath],function(x){S.clipPath=x[0],p&&p(S)}):p&&p(S)}):o.Object._fromObject("Path",u,p,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(u,p,l){var y=o.parseAttributes(u,o.Path.ATTRIBUTE_NAMES);y.fromSVG=!0,p(new o.Path(y.d,r(y,l)))})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.array.min,h=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,a,s){a=a||{},this._objects=[],s&&this.callSuper("initialize",a),this._objects=r||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(s)this._updateObjectsACoords();else{var p=a&&a.centerPoint;void 0!==a.originX&&(this.originX=a.originX),void 0!==a.originY&&(this.originY=a.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var a=this._objects.length;a--;)this._objects[a].setCoords(!0)},_updateObjectsCoords:function(a){a=a||this.getCenterPoint();for(var s=this._objects.length;s--;)this._updateObjectCoords(this._objects[s],a)},_updateObjectCoords:function(r,a){r.set({left:r.left-a.x,top:r.top-a.y}),r.group=this,r.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var a=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),r&&(a&&o.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,a){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(r,a);if("canvas"===r)for(;s--;)this._objects[s]._set(r,a);o.Object.prototype._set.call(this,r,a)},toObject:function(r){var a=this.includeDefaultValues,s=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var l=p.includeDefaultValues;p.includeDefaultValues=a;var y=p.toObject(r);return p.includeDefaultValues=l,y}),u=o.Object.prototype.toObject.call(this,r);return u.objects=s,u},toDatalessObject:function(r){var a,s=this.sourcePath;if(s)a=s;else{var u=this.includeDefaultValues;a=this._objects.map(function(l){var y=l.includeDefaultValues;l.includeDefaultValues=u;var S=l.toDatalessObject(r);return l.includeDefaultValues=y,S})}var p=o.Object.prototype.toDatalessObject.call(this,r);return p.objects=a,p},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=o.Object.prototype.shouldCache.call(this);if(r)for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1;return r},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,a=this._objects.length;r<a;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var a=0,s=this._objects.length;a<s;a++)this._objects[a].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-p/2,u,p)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(a){o.util.addTransformToObject(a,r),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,a=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var u=new o.ActiveSelection([]);return u.set(s),u.type="activeSelection",a.remove(this),r.forEach(function(p){p.group=u,p.dirty=!0,a.add(p)}),u.canvas=a,u._objects=r,a._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(a){a.setCoords(!0)}),this},_calcBounds:function(r){for(var u,p,l,A,a=[],s=[],y=["tr","br","bl","tl"],S=0,x=this._objects.length,O=y.length;S<x;++S){for(l=(u=this._objects[S]).calcACoords(),A=0;A<O;A++)a.push(l[p=y[A]].x),s.push(l[p].y);u.aCoords=l}this._getBounds(a,s,r)},_getBounds:function(r,a,s){var u=new o.Point(f(r),f(a)),p=new o.Point(h(r),h(a)),l=u.y||0,y=u.x||0,x=p.y-u.y||0;this.width=p.x-u.x||0,this.height=x,s||this.setPositionByOrigin({x:y,y:l},"left","top")},_toSVG:function(r){for(var a=["<g ","COMMON_PARTS"," >\n"],s=0,u=this._objects.length;s<u;s++)a.push("\t\t",this._objects[s].toSVG(r));return a.push("</g>\n"),a},getSvgStyles:function(){var a=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),a].join("")},toClipPathSVG:function(r){for(var a=[],s=0,u=this._objects.length;s<u;s++)a.push("\t",this._objects[s].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(a,{reviver:r})}}),o.Group.fromObject=function(r,a){var s=r.objects,u=o.util.object.clone(r,!0);delete u.objects,"string"!=typeof s?o.util.enlivenObjects(s,function(p){o.util.enlivenObjectEnlivables(r,u,function(){a&&a(new o.Group(p,u,!0))})}):o.loadSVGFromURL(s,function(p){var l=o.util.groupSVGElements(p,r,s),y=u.clipPath;delete u.clipPath,l.set(u),y?o.util.enlivenObjects([y],function(S){l.clipPath=S[0],a&&a(l)}):a&&a(l)})})}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(f,h){h=h||{},this._objects=f||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var f=this._objects.concat();this._objects=[];var h=o.Object.prototype.toObject.call(this),r=new o.Group([]);if(delete h.type,r.set(h),f.forEach(function(s){s.canvas.remove(s),s.group=r}),r._objects=f,!this.canvas)return r;var a=this.canvas;return a.add(r),a._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(f,h,r){f.save(),f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",f,h),typeof(r=r||{}).hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var a=0,s=this._objects.length;a<s;a++)this._objects[a]._renderControls(f,r);f.restore()}}),o.ActiveSelection.fromObject=function(f,h){o.util.enlivenObjects(f.objects,function(r){delete f.objects,h&&h(new o.ActiveSelection(r,f,!0))})})}(Be),function(m){"use strict";var o=d.util.object.extend;m.fabric||(m.fabric={}),m.fabric.Image?d.warn("fabric.Image is already defined."):(d.Image=d.util.createClass(d.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:d.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:d.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(f,h){h||(h={}),this.filters=[],this.cacheKey="texture"+d.Object.__uid++,this.callSuper("initialize",h),this._initElement(f,h)},getElement:function(){return this._element||{}},setElement:function(f,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=f,this._originalElement=f,this._initConfig(h),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(f){var h=d.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(f)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(f){d.util.cleanUpJsdomNode(this[f]),this[f]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var f=this.getElement();return{width:f.naturalWidth||f.width,height:f.naturalHeight||f.height}},_stroke:function(f){if(this.stroke&&0!==this.strokeWidth){var h=this.width/2,r=this.height/2;f.beginPath(),f.moveTo(-h,-r),f.lineTo(h,-r),f.lineTo(h,r),f.lineTo(-h,r),f.lineTo(-h,-r),f.closePath()}},toObject:function(f){var h=[];this.filters.forEach(function(a){a&&h.push(a.toObject())});var r=o(this.callSuper("toObject",["cropX","cropY"].concat(f)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var r,f=[],h=[],a=this._element,s=-this.width/2,u=-this.height/2,p="",l="";if(!a)return[];if(this.hasCrop()){var y=d.Object.__uid++;f.push('<clipPath id="imageCrop_'+y+'">\n','\t<rect x="'+s+'" y="'+u+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),p=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),h.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',u-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,l,'"',p,"></image>\n"),this.stroke||this.strokeDashArray){var S=this.fill;this.fill=null,r=["\t<rect ",'x="',s,'" y="',u,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=S}return"fill"!==this.paintFirst?f.concat(r,h):f.concat(h,r)},getSrc:function(f){var h=f?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(f,h,r){return d.util.loadImage(f,function(a,s){this.setElement(a,r),this._setWidthHeight(),h&&h(this,s)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var f=this.resizeFilter,h=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),a=r.scaleX,s=r.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!f||a>h&&s>h)return this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,void(this._lastScaleY=s);d.filterBackend||(d.filterBackend=d.initFilterBackend());var p=d.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,y=u.width,S=u.height;p.width=y,p.height=S,this._element=p,this._lastScaleX=f.scaleX=a,this._lastScaleY=f.scaleY=s,d.filterBackend.applyFilters([f],u,y,S,this._element,l),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(f){if(f=(f=f||this.filters||[]).filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===f.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,r=h.naturalWidth||h.width,a=h.naturalHeight||h.height;if(this._element===this._originalElement){var s=d.util.createCanvasElement();s.width=r,s.height=a,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,a),this._lastScaleX=1,this._lastScaleY=1;return d.filterBackend||(d.filterBackend=d.initFilterBackend()),d.filterBackend.applyFilters(f,this._originalElement,r,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(f){d.util.setImageSmoothing(f,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(f),this._renderPaintInOrder(f)},drawCacheOnCanvas:function(f){d.util.setImageSmoothing(f,this.imageSmoothing),d.Object.prototype.drawCacheOnCanvas.call(this,f)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(f){var h=this._element;if(h){var r=this._filterScalingX,a=this._filterScalingY,s=this.width,u=this.height,p=Math.min,l=Math.max,y=l(this.cropX,0),S=l(this.cropY,0),x=h.naturalWidth||h.width,A=h.naturalHeight||h.height,O=y*r,j=S*a,Z=p(s*r,x-O),ue=p(u*a,A-j),pe=-s/2,Ce=-u/2,Se=p(s,x/r-y),He=p(u,A/a-S);h&&f.drawImage(h,O,j,Z,ue,pe,Ce,Se,He)}},_needsResize:function(){var f=this.getTotalObjectScaling();return f.scaleX!==this._lastScaleX||f.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(f,h){this.setElement(d.util.getById(f),h),d.util.addClass(this.getElement(),d.Image.CSS_CANVAS)},_initConfig:function(f){f||(f={}),this.setOptions(f),this._setWidthHeight(f)},_initFilters:function(f,h){f&&f.length?d.util.enlivenObjects(f,function(r){h&&h(r)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(f){f||(f={});var h=this.getElement();this.width=f.width||h.naturalWidth||h.width||0,this.height=f.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var S,f=d.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,r=this._element.height,a=1,s=1,u=0,p=0,l=0,y=0,x=this.width,A=this.height,O={width:x,height:A};return!f||"none"===f.alignX&&"none"===f.alignY?(a=x/h,s=A/r):("meet"===f.meetOrSlice&&(S=(x-h*(a=s=d.util.findScaleToFit(this._element,O)))/2,"Min"===f.alignX&&(u=-S),"Max"===f.alignX&&(u=S),S=(A-r*s)/2,"Min"===f.alignY&&(p=-S),"Max"===f.alignY&&(p=S)),"slice"===f.meetOrSlice&&(S=h-x/(a=s=d.util.findScaleToCover(this._element,O)),"Mid"===f.alignX&&(l=S/2),"Max"===f.alignX&&(l=S),S=r-A/s,"Mid"===f.alignY&&(y=S/2),"Max"===f.alignY&&(y=S),h=x/a,r=A/s)),{width:h,height:r,scaleX:a,scaleY:s,offsetLeft:u,offsetTop:p,cropX:l,cropY:y}}}),d.Image.CSS_CANVAS="canvas-img",d.Image.prototype.getSvgSrc=d.Image.prototype.getSrc,d.Image.fromObject=function(f,h){var r=d.util.object.clone(f);d.util.loadImage(r.src,function(a,s){s?h&&h(null,!0):d.Image.prototype._initFilters.call(r,r.filters,function(u){r.filters=u||[],d.Image.prototype._initFilters.call(r,[r.resizeFilter],function(p){r.resizeFilter=p[0],d.util.enlivenObjectEnlivables(r,r,function(){var l=new d.Image(a,r);h(l,!1)})})})},null,r.crossOrigin)},d.Image.fromURL=function(f,h,r){d.util.loadImage(f,function(a,s){h&&h(new d.Image(a,r),s)},null,r&&r.crossOrigin)},d.Image.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),d.Image.fromElement=function(f,h,r){var a=d.parseAttributes(f,d.Image.ATTRIBUTE_NAMES);d.Image.fromURL(a["xlink:href"],h,o(r?d.util.object.clone(r):{},a))})}(Be),d.util.object.extend(d.Object.prototype,{_getAngleValueForStraighten:function(){var m=this.angle%360;return m>0?90*Math.round((m-1)/90):90*Math.round(m/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(m){var o=function(){},f=(m=m||{}).onComplete||o,h=m.onChange||o,r=this;return d.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){r.rotate(a),h()},onComplete:function(){r.setCoords(),f()}})}}),d.util.object.extend(d.StaticCanvas.prototype,{straightenObject:function(m){return m.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(m){return m.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function m(f,h){var r="precision "+h+" float;\nvoid main(){}",a=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(a,r),f.compileShader(a),!!f.getShaderParameter(a,f.COMPILE_STATUS)}function o(f){f&&f.tileSize&&(this.tileSize=f.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}d.isWebglSupported=function(f){if(d.isLikelyNode)return!1;f=f||d.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),r=h.getContext("webgl")||h.getContext("experimental-webgl"),a=!1;if(r){d.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),a=d.maxTextureSize>=f;for(var s=["highp","mediump","lowp"],u=0;u<3;u++)if(m(r,s[u])){d.webGlPrecision=s[u];break}}return this.isSupported=a,a},d.WebglFilterBackend=o,o.prototype={tileSize:2048,resources:{},setupGLContext:function(f,h){this.dispose(),this.createWebGLCanvas(f,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(f,h)},chooseFastestCopyGLTo2DMethod:function(f,h){var a,r=typeof window.performance<"u";try{new ImageData(1,1),a=!0}catch{a=!1}var s=typeof ArrayBuffer<"u",u=typeof Uint8ClampedArray<"u";if(r&&a&&s&&u){var p=d.util.createCanvasElement(),l=new ArrayBuffer(f*h*4);if(d.forceGLPutImageData)return this.imageBuffer=l,void(this.copyGLTo2D=fe);var S,x,y={imageBuffer:l,destinationWidth:f,destinationHeight:h,targetCanvas:p};p.width=f,p.height=h,S=window.performance.now(),T.call(y,this.gl,y),x=window.performance.now()-S,S=window.performance.now(),fe.call(y,this.gl,y),x>window.performance.now()-S?(this.imageBuffer=l,this.copyGLTo2D=fe):this.copyGLTo2D=T}},createWebGLCanvas:function(f,h){var r=d.util.createCanvasElement();r.width=f,r.height=h;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=r.getContext("webgl",a);s||(s=r.getContext("experimental-webgl",a)),s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)},applyFilters:function(f,h,r,a,s,u){var l,p=this.gl;u&&(l=this.getCachedTexture(u,h));var y={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:r,sourceHeight:a,destinationWidth:r,destinationHeight:a,context:p,sourceTexture:this.createTexture(p,r,a,!l&&h),targetTexture:this.createTexture(p,r,a),originalTexture:l||this.createTexture(p,r,a,!l&&h),passes:f.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},S=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,S),f.forEach(function(x){x&&x.applyTo(y)}),function Ue(m){var o=m.targetCanvas,r=m.destinationWidth,a=m.destinationHeight;(o.width!==r||o.height!==a)&&(o.width=r,o.height=a)}(y),this.copyGLTo2D(p,y),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(y.sourceTexture),p.deleteTexture(y.targetTexture),p.deleteFramebuffer(S),s.getContext("2d").setTransform(1,0,0,1,0,0),y},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(f,h,r,a,s){var u=f.createTexture();return f.bindTexture(f.TEXTURE_2D,u),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,s||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,s||f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),a?f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,a):f.texImage2D(f.TEXTURE_2D,0,f.RGBA,h,r,0,f.RGBA,f.UNSIGNED_BYTE,null),u},getCachedTexture:function(f,h){if(this.textureCache[f])return this.textureCache[f];var r=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[f]=r,r},evictCachesForKey:function(f){this.textureCache[f]&&(this.gl.deleteTexture(this.textureCache[f]),delete this.textureCache[f])},copyGLTo2D:T,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var f=this.gl,h={renderer:"",vendor:""};if(!f)return h;var r=f.getExtension("WEBGL_debug_renderer_info");if(r){var a=f.getParameter(r.UNMASKED_RENDERER_WEBGL),s=f.getParameter(r.UNMASKED_VENDOR_WEBGL);a&&(h.renderer=a.toLowerCase()),s&&(h.vendor=s.toLowerCase())}return this.gpuInfo=h,h}}}(),function(){"use strict";var m=function(){};function o(){}d.Canvas2dFilterBackend=o,o.prototype={evictCachesForKey:m,dispose:m,clearWebGLCaches:m,resources:{},applyFilters:function(f,h,r,a,s){var u=s.getContext("2d");u.drawImage(h,0,0,r,a);var y={sourceWidth:r,sourceHeight:a,imageData:u.getImageData(0,0,r,a),originalEl:h,originalImageData:u.getImageData(0,0,r,a),canvasEl:s,ctx:u,filterBackend:this};return f.forEach(function(S){S.applyTo(y)}),(y.imageData.width!==r||y.imageData.height!==a)&&(s.width=y.imageData.width,s.height=y.imageData.height),u.putImageData(y.imageData,0,0),y}}}(),d.Image=d.Image||{},d.Image.filters=d.Image.filters||{},d.Image.filters.BaseFilter=d.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(m){m&&this.setOptions(m)},setOptions:function(m){for(var o in m)this[o]=m[o]},createProgram:function(m,o,f){o=o||this.fragmentSource,f=f||this.vertexSource,"highp"!==d.webGlPrecision&&(o=o.replace(/precision highp float/g,"precision "+d.webGlPrecision+" float"));var h=m.createShader(m.VERTEX_SHADER);if(m.shaderSource(h,f),m.compileShader(h),!m.getShaderParameter(h,m.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+m.getShaderInfoLog(h));var r=m.createShader(m.FRAGMENT_SHADER);if(m.shaderSource(r,o),m.compileShader(r),!m.getShaderParameter(r,m.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+m.getShaderInfoLog(r));var a=m.createProgram();if(m.attachShader(a,h),m.attachShader(a,r),m.linkProgram(a),!m.getProgramParameter(a,m.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+m.getProgramInfoLog(a));var s=this.getAttributeLocations(m,a),u=this.getUniformLocations(m,a)||{};return u.uStepW=m.getUniformLocation(a,"uStepW"),u.uStepH=m.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:u}},getAttributeLocations:function(m,o){return{aPosition:m.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(m,o,f){var h=o.aPosition,r=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,r),m.enableVertexAttribArray(h),m.vertexAttribPointer(h,2,m.FLOAT,!1,0,0),m.bufferData(m.ARRAY_BUFFER,f,m.STATIC_DRAW)},_setupFrameBuffer:function(m){var f,h,o=m.context;m.passes>1?(h=m.destinationHeight,(m.sourceWidth!==(f=m.destinationWidth)||m.sourceHeight!==h)&&(o.deleteTexture(m.targetTexture),m.targetTexture=m.filterBackend.createTexture(o,f,h)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,m.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(m){m.passes--,m.pass++;var o=m.targetTexture;m.targetTexture=m.sourceTexture,m.sourceTexture=o},isNeutralState:function(){var m=this.mainParameter,o=d.Image.filters[this.type].prototype;if(m){if(Array.isArray(o[m])){for(var f=o[m].length;f--;)if(this[m][f]!==o[m][f])return!1;return!0}return o[m]===this[m]}return!1},applyTo:function(m){m.webgl?(this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m)):this.applyTo2d(m)},retrieveShader:function(m){return m.programCache.hasOwnProperty(this.type)||(m.programCache[this.type]=this.createProgram(m.context)),m.programCache[this.type]},applyToWebGL:function(m){var o=m.context,f=this.retrieveShader(m);o.bindTexture(o.TEXTURE_2D,0===m.pass&&m.originalTexture?m.originalTexture:m.sourceTexture),o.useProgram(f.program),this.sendAttributeData(o,f.attributeLocations,m.aPosition),o.uniform1f(f.uniformLocations.uStepW,1/m.sourceWidth),o.uniform1f(f.uniformLocations.uStepH,1/m.sourceHeight),this.sendUniformData(o,f.uniformLocations),o.viewport(0,0,m.destinationWidth,m.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(m,o,f){m.activeTexture(f),m.bindTexture(m.TEXTURE_2D,o),m.activeTexture(m.TEXTURE0)},unbindAdditionalTexture:function(m,o){m.activeTexture(o),m.bindTexture(m.TEXTURE_2D,null),m.activeTexture(m.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(m){this[this.mainParameter]=m},sendUniformData:function(){},createHelpLayer:function(m){if(!m.helpLayer){var o=document.createElement("canvas");o.width=m.sourceWidth,o.height=m.sourceHeight,m.helpLayer=o}},toObject:function(){var m={type:this.type},o=this.mainParameter;return o&&(m[o]=this[o]),m},toJSON:function(){return this.toObject()}}),d.Image.filters.BaseFilter.fromObject=function(m,o){var f=new d.Image.filters[m.type](m);return o&&o(f),f},function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.ColorMatrix=(0,o.util.createClass)(f.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var l,y,S,x,A,s=r.imageData.data,u=s.length,p=this.matrix,O=this.colorsOnly;for(A=0;A<u;A+=4)l=s[A],y=s[A+1],S=s[A+2],O?(s[A]=l*p[0]+y*p[1]+S*p[2]+255*p[4],s[A+1]=l*p[5]+y*p[6]+S*p[7]+255*p[9],s[A+2]=l*p[10]+y*p[11]+S*p[12]+255*p[14]):(s[A]=l*p[0]+y*p[1]+S*p[2]+(x=s[A+3])*p[3]+255*p[4],s[A+1]=l*p[5]+y*p[6]+S*p[7]+x*p[8]+255*p[9],s[A+2]=l*p[10]+y*p[11]+S*p[12]+x*p[13]+255*p[14],s[A+3]=l*p[15]+y*p[16]+S*p[17]+x*p[18]+255*p[19])},getUniformLocations:function(r,a){return{uColorMatrix:r.getUniformLocation(a,"uColorMatrix"),uConstants:r.getUniformLocation(a,"uConstants")}},sendUniformData:function(r,a){var s=this.matrix,p=[s[4],s[9],s[14],s[19]];r.uniformMatrix4fv(a.uColorMatrix,!1,[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]]),r.uniform4fv(a.uConstants,p)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Brightness=(0,o.util.createClass)(f.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(0!==this.brightness){var u,s=r.imageData.data,p=s.length,l=Math.round(255*this.brightness);for(u=0;u<p;u+=4)s[u]=s[u]+l,s[u+1]=s[u+1]+l,s[u+2]=s[u+2]+l}},getUniformLocations:function(r,a){return{uBrightness:r.getUniformLocation(a,"uBrightness")}},sendUniformData:function(r,a){r.uniform1f(a.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.Image.filters;h.Convolute=(0,o.util.createClass)(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(a){var s=Math.sqrt(this.matrix.length),u=this.type+"_"+s+"_"+(this.opaque?1:0),p=this.fragmentSource[u];return a.programCache.hasOwnProperty(u)||(a.programCache[u]=this.createProgram(a.context,p)),a.programCache[u]},applyTo2d:function(a){var Z,ue,pe,Ce,Se,He,ot,at,ke,Ee,xe,Le,q,s=a.imageData,u=s.data,p=this.matrix,l=Math.round(Math.sqrt(p.length)),y=Math.floor(l/2),S=s.width,x=s.height,A=a.ctx.createImageData(S,x),O=A.data,j=this.opaque?1:0;for(xe=0;xe<x;xe++)for(Ee=0;Ee<S;Ee++){for(Se=4*(xe*S+Ee),Z=0,ue=0,pe=0,Ce=0,q=0;q<l;q++)for(Le=0;Le<l;Le++)He=Ee+Le-y,!((ot=xe+q-y)<0||ot>=x||He<0||He>=S)&&(Z+=u[at=4*(ot*S+He)]*(ke=p[q*l+Le]),ue+=u[at+1]*ke,pe+=u[at+2]*ke,j||(Ce+=u[at+3]*ke));O[Se]=Z,O[Se+1]=ue,O[Se+2]=pe,O[Se+3]=j?u[Se+3]:Ce}a.imageData=A},getUniformLocations:function(a,s){return{uMatrix:a.getUniformLocation(s,"uMatrix"),uOpaque:a.getUniformLocation(s,"uOpaque"),uHalfSize:a.getUniformLocation(s,"uHalfSize"),uSize:a.getUniformLocation(s,"uSize")}},sendUniformData:function(a,s){a.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return f(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Grayscale=(0,o.util.createClass)(f.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(r){var u,l,s=r.imageData.data,p=s.length,y=this.mode;for(u=0;u<p;u+=4)"average"===y?l=(s[u]+s[u+1]+s[u+2])/3:"lightness"===y?l=(Math.min(s[u],s[u+1],s[u+2])+Math.max(s[u],s[u+1],s[u+2]))/2:"luminosity"===y&&(l=.21*s[u]+.72*s[u+1]+.07*s[u+2]),s[u]=l,s[u+1]=l,s[u+2]=l},retrieveShader:function(r){var a=this.type+"_"+this.mode;return r.programCache.hasOwnProperty(a)||(r.programCache[a]=this.createProgram(r.context,this.fragmentSource[this.mode])),r.programCache[a]},getUniformLocations:function(r,a){return{uMode:r.getUniformLocation(a,"uMode")}},sendUniformData:function(r,a){r.uniform1i(a.uMode,1)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Invert=(0,o.util.createClass)(f.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(r){var u,s=r.imageData.data,p=s.length;for(u=0;u<p;u+=4)s[u]=255-s[u],s[u+1]=255-s[u+1],s[u+2]=255-s[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,a){return{uInvert:r.getUniformLocation(a,"uInvert")}},sendUniformData:function(r,a){r.uniform1i(a.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.Image.filters;h.Noise=(0,o.util.createClass)(h.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(a){if(0!==this.noise){var p,l,S,u=a.imageData.data,y=this.noise;for(p=0,l=u.length;p<l;p+=4)S=(.5-Math.random())*y,u[p]+=S,u[p+1]+=S,u[p+2]+=S}},getUniformLocations:function(a,s){return{uNoise:a.getUniformLocation(s,"uNoise"),uSeed:a.getUniformLocation(s,"uSeed")}},sendUniformData:function(a,s){a.uniform1f(s.uNoise,this.noise/255),a.uniform1f(s.uSeed,Math.random())},toObject:function(){return f(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Pixelate=(0,o.util.createClass)(f.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(r){var l,y,S,x,A,O,j,Z,ue,pe,Ce,a=r.imageData,s=a.data,u=a.height,p=a.width;for(y=0;y<u;y+=this.blocksize)for(S=0;S<p;S+=this.blocksize)for(x=s[l=4*y*p+4*S],A=s[l+1],O=s[l+2],j=s[l+3],pe=Math.min(y+this.blocksize,u),Ce=Math.min(S+this.blocksize,p),Z=y;Z<pe;Z++)for(ue=S;ue<Ce;ue++)s[l=4*Z*p+4*ue]=x,s[l+1]=A,s[l+2]=O,s[l+3]=j},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(r,a){return{uBlocksize:r.getUniformLocation(a,"uBlocksize"),uStepW:r.getUniformLocation(a,"uStepW"),uStepH:r.getUniformLocation(a,"uStepH")}},sendUniformData:function(r,a){r.uniform1f(a.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.extend,h=o.Image.filters;h.RemoveColor=(0,o.util.createClass)(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(a){var p,y,S,x,u=a.imageData.data,l=255*this.distance,A=new o.Color(this.color).getSource(),O=[A[0]-l,A[1]-l,A[2]-l],j=[A[0]+l,A[1]+l,A[2]+l];for(p=0;p<u.length;p+=4)S=u[p+1],x=u[p+2],(y=u[p])>O[0]&&S>O[1]&&x>O[2]&&y<j[0]&&S<j[1]&&x<j[2]&&(u[p+3]=0)},getUniformLocations:function(a,s){return{uLow:a.getUniformLocation(s,"uLow"),uHigh:a.getUniformLocation(s,"uHigh")}},sendUniformData:function(a,s){var u=new o.Color(this.color).getSource(),p=parseFloat(this.distance),y=[u[0]/255+p,u[1]/255+p,u[2]/255+p,1];a.uniform4fv(s.uLow,[0+u[0]/255-p,0+u[1]/255-p,0+u[2]/255-p,1]),a.uniform4fv(s.uHigh,y)},toObject:function(){return f(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters,h=o.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in r)f[a]=h(f.ColorMatrix,{type:a,matrix:r[a],mainParameter:!1,colorsOnly:!0}),o.Image.filters[a].fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric,f=o.Image.filters;f.BlendColor=(0,o.util.createClass)(f.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(r){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[r]+"}\n}"},retrieveShader:function(r){var s,a=this.type+"_"+this.mode;return r.programCache.hasOwnProperty(a)||(s=this.buildSource(this.mode),r.programCache[a]=this.createProgram(r.context,s)),r.programCache[a]},applyTo2d:function(r){var p,l,y,S,x,A,O,s=r.imageData.data,u=s.length,j=1-this.alpha;p=(O=new o.Color(this.color).getSource())[0]*this.alpha,l=O[1]*this.alpha,y=O[2]*this.alpha;for(var Z=0;Z<u;Z+=4)switch(S=s[Z],x=s[Z+1],A=s[Z+2],this.mode){case"multiply":s[Z]=S*p/255,s[Z+1]=x*l/255,s[Z+2]=A*y/255;break;case"screen":s[Z]=255-(255-S)*(255-p)/255,s[Z+1]=255-(255-x)*(255-l)/255,s[Z+2]=255-(255-A)*(255-y)/255;break;case"add":s[Z]=S+p,s[Z+1]=x+l,s[Z+2]=A+y;break;case"diff":case"difference":s[Z]=Math.abs(S-p),s[Z+1]=Math.abs(x-l),s[Z+2]=Math.abs(A-y);break;case"subtract":s[Z]=S-p,s[Z+1]=x-l,s[Z+2]=A-y;break;case"darken":s[Z]=Math.min(S,p),s[Z+1]=Math.min(x,l),s[Z+2]=Math.min(A,y);break;case"lighten":s[Z]=Math.max(S,p),s[Z+1]=Math.max(x,l),s[Z+2]=Math.max(A,y);break;case"overlay":s[Z]=p<128?2*S*p/255:255-2*(255-S)*(255-p)/255,s[Z+1]=l<128?2*x*l/255:255-2*(255-x)*(255-l)/255,s[Z+2]=y<128?2*A*y/255:255-2*(255-A)*(255-y)/255;break;case"exclusion":s[Z]=p+S-2*p*S/255,s[Z+1]=l+x-2*l*x/255,s[Z+2]=y+A-2*y*A/255;break;case"tint":s[Z]=p+S*j,s[Z+1]=l+x*j,s[Z+2]=y+A*j}},getUniformLocations:function(r,a){return{uColor:r.getUniformLocation(a,"uColor")}},sendUniformData:function(r,a){var s=new o.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,r.uniform4fv(a.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric,f=o.Image.filters;f.BlendImage=(0,o.util.createClass)(f.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(r){var a=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(a)||(r.programCache[a]=this.createProgram(r.context,s)),r.programCache[a]},applyToWebGL:function(r){var a=r.context,s=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(a,s,a.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(r,a){return r.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var r=this.image;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/r._element.width,-r.top/r._element.height,1]},applyTo2d:function(r){var S,x,A,O,j,Z,ue,pe,Ce,Se,ot,a=r.imageData,s=r.filterBackend.resources,u=a.data,p=u.length,l=a.width,y=a.height,He=this.image;s.blendImage||(s.blendImage=o.util.createCanvasElement()),Se=(Ce=s.blendImage).getContext("2d"),Ce.width!==l||Ce.height!==y?(Ce.width=l,Ce.height=y):Se.clearRect(0,0,l,y),Se.setTransform(He.scaleX,0,0,He.scaleY,He.left,He.top),Se.drawImage(He._element,0,0,l,y),ot=Se.getImageData(0,0,l,y).data;for(var at=0;at<p;at+=4)switch(j=u[at],Z=u[at+1],ue=u[at+2],pe=u[at+3],S=ot[at],x=ot[at+1],A=ot[at+2],O=ot[at+3],this.mode){case"multiply":u[at]=j*S/255,u[at+1]=Z*x/255,u[at+2]=ue*A/255,u[at+3]=pe*O/255;break;case"mask":u[at+3]=O}},getUniformLocations:function(r,a){return{uTransformMatrix:r.getUniformLocation(a,"uTransformMatrix"),uImage:r.getUniformLocation(a,"uImage")}},sendUniformData:function(r,a){var s=this.calculateMatrix();r.uniform1i(a.uImage,1),r.uniformMatrix3fv(a.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(r,a){o.Image.fromObject(r.image,function(s){var u=o.util.object.clone(r);u.image=s,a(new o.Image.filters.BlendImage(u))})}}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=Math.pow,h=Math.floor,r=Math.sqrt,a=Math.abs,s=Math.round,u=Math.sin,p=Math.ceil,l=o.Image.filters;l.Resize=(0,o.util.createClass)(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(S,x){return{uDelta:S.getUniformLocation(x,"uDelta"),uTaps:S.getUniformLocation(x,"uTaps")}},sendUniformData:function(S,x){S.uniform2fv(x.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),S.uniform1fv(x.uTaps,this.taps)},retrieveShader:function(S){var x=this.getFilterWindow(),A=this.type+"_"+x;if(!S.programCache.hasOwnProperty(A)){var O=this.generateShader(x);S.programCache[A]=this.createProgram(S.context,O)}return S.programCache[A]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var S=this.lanczosCreate(this.lanczosLobes),x=this.tempScale,A=this.getFilterWindow(),O=new Array(A),j=1;j<=A;j++)O[j-1]=S(j*x);return O},generateShader:function(O){for(var x=new Array(O),A=this.fragmentSourceTOP,j=1;j<=O;j++)x[j-1]=j+".0 * uDelta";return A+="uniform float uTaps["+O+"];\n",A+="void main() {\n",A+="  vec4 color = texture2D(uTexture, vTexCoord);\n",A+="  float sum = 1.0;\n",x.forEach(function(Z,ue){A+="  color += texture2D(uTexture, vTexCoord + "+Z+") * uTaps["+ue+"];\n",A+="  color += texture2D(uTexture, vTexCoord - "+Z+") * uTaps["+ue+"];\n",A+="  sum += 2.0 * uTaps["+ue+"];\n"}),A+="  gl_FragColor = color / sum;\n",A+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(S){S.webgl?(S.passes++,this.width=S.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=S.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),S.destinationWidth=this.dW,this._setupFrameBuffer(S),this.applyToWebGL(S),this._swapTextures(S),S.sourceWidth=S.destinationWidth,this.height=S.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),S.destinationHeight=this.dH,this._setupFrameBuffer(S),this.applyToWebGL(S),this._swapTextures(S),S.sourceHeight=S.destinationHeight):this.applyTo2d(S)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(S){return function(x){if(x>=S||x<=-S)return 0;if(x<1.1920929e-7&&x>-1.1920929e-7)return 1;var A=(x*=Math.PI)/S;return u(x)/x*u(A)/A}},applyTo2d:function(S){var x=S.imageData,A=this.scaleX,O=this.scaleY;this.rcpScaleX=1/A,this.rcpScaleY=1/O;var Ce,j=x.width,Z=x.height,ue=s(j*A),pe=s(Z*O);"sliceHack"===this.resizeType?Ce=this.sliceByTwo(S,j,Z,ue,pe):"hermite"===this.resizeType?Ce=this.hermiteFastResize(S,j,Z,ue,pe):"bilinear"===this.resizeType?Ce=this.bilinearFiltering(S,j,Z,ue,pe):"lanczos"===this.resizeType&&(Ce=this.lanczosResize(S,j,Z,ue,pe)),S.imageData=Ce},sliceByTwo:function(S,x,A,O,j){var at,ke,Z=S.imageData,pe=!1,Ce=!1,Se=.5*x,He=.5*A,ot=o.filterBackend.resources,Ee=0,xe=0,Le=x,q=0;for(ot.sliceByTwo||(ot.sliceByTwo=document.createElement("canvas")),((at=ot.sliceByTwo).width<1.5*x||at.height<A)&&(at.width=1.5*x,at.height=A),(ke=at.getContext("2d")).clearRect(0,0,1.5*x,A),ke.putImageData(Z,0,0),O=h(O),j=h(j);!pe||!Ce;)x=Se,A=He,O<h(.5*Se)?Se=h(.5*Se):(Se=O,pe=!0),j<h(.5*He)?He=h(.5*He):(He=j,Ce=!0),ke.drawImage(at,Ee,xe,x,A,Le,q,Se,He),Ee=Le,xe=q,q+=He;return ke.getImageData(Ee,xe,O,j)},lanczosResize:function(S,x,A,O,j){var ue=S.imageData.data,pe=S.ctx.createImageData(O,j),Ce=pe.data,Se=this.lanczosCreate(this.lanczosLobes),He=this.rcpScaleX,ot=this.rcpScaleY,at=2/this.rcpScaleX,ke=2/this.rcpScaleY,Ee=p(He*this.lanczosLobes/2),xe=p(ot*this.lanczosLobes/2),Le={},q={},le={};return function Z(ae){var he,Fe,de,ee,De,Me,We,$e,rt,Ke,Ct;for(q.x=(ae+.5)*He,le.x=h(q.x),he=0;he<j;he++){for(q.y=(he+.5)*ot,le.y=h(q.y),De=0,Me=0,We=0,$e=0,rt=0,Fe=le.x-Ee;Fe<=le.x+Ee;Fe++)if(!(Fe<0||Fe>=x)){Ke=h(1e3*a(Fe-q.x)),Le[Ke]||(Le[Ke]={});for(var qe=le.y-xe;qe<=le.y+xe;qe++)qe<0||qe>=A||(Ct=h(1e3*a(qe-q.y)),Le[Ke][Ct]||(Le[Ke][Ct]=Se(r(f(Ke*at,2)+f(Ct*ke,2))/1e3)),(de=Le[Ke][Ct])>0&&(De+=de,Me+=de*ue[ee=4*(qe*x+Fe)],We+=de*ue[ee+1],$e+=de*ue[ee+2],rt+=de*ue[ee+3]))}Ce[ee=4*(he*O+ae)]=Me/De,Ce[ee+1]=We/De,Ce[ee+2]=$e/De,Ce[ee+3]=rt/De}return++ae<O?Z(ae):pe}(0)},bilinearFiltering:function(S,x,A,O,j){var Se,He,ot,at,ke,Ee,xe,le,q=0,ae=this.rcpScaleX,he=this.rcpScaleY,Fe=4*(x-1),ee=S.imageData.data,De=S.ctx.createImageData(O,j),Me=De.data;for(ot=0;ot<j;ot++)for(at=0;at<O;at++)for(ke=ae*at-(Se=h(ae*at)),Ee=he*ot-(He=h(he*ot)),le=4*(He*x+Se),xe=0;xe<4;xe++)Me[q++]=ee[le+xe]*(1-ke)*(1-Ee)+ee[le+4+xe]*ke*(1-Ee)+ee[le+Fe+xe]*Ee*(1-ke)+ee[le+Fe+4+xe]*ke*Ee;return De},hermiteFastResize:function(S,x,A,O,j){for(var Z=this.rcpScaleX,ue=this.rcpScaleY,pe=p(Z/2),Ce=p(ue/2),He=S.imageData.data,ot=S.ctx.createImageData(O,j),at=ot.data,ke=0;ke<j;ke++)for(var Ee=0;Ee<O;Ee++){for(var xe=4*(Ee+ke*O),Le=0,q=0,le=0,ae=0,he=0,Fe=0,de=0,ee=(ke+.5)*ue,De=h(ke*ue);De<(ke+1)*ue;De++)for(var Me=a(ee-(De+.5))/Ce,We=(Ee+.5)*Z,$e=Me*Me,rt=h(Ee*Z);rt<(Ee+1)*Z;rt++){var Ke=a(We-(rt+.5))/pe,Ct=r($e+Ke*Ke);Ct>1&&Ct<-1||(Le=2*Ct*Ct*Ct-3*Ct*Ct+1)>0&&(de+=Le*He[3+(Ke=4*(rt+De*x))],le+=Le,He[Ke+3]<255&&(Le=Le*He[Ke+3]/250),ae+=Le*He[Ke],he+=Le*He[Ke+1],Fe+=Le*He[Ke+2],q+=Le)}at[xe]=ae/q,at[xe+1]=he/q,at[xe+2]=Fe/q,at[xe+3]=de/le}return ot},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Contrast=(0,o.util.createClass)(f.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(0!==this.contrast){var s,u=r.imageData.data,p=u.length,l=Math.floor(255*this.contrast),y=259*(l+255)/(255*(259-l));for(s=0;s<p;s+=4)u[s]=y*(u[s]-128)+128,u[s+1]=y*(u[s+1]-128)+128,u[s+2]=y*(u[s+2]-128)+128}},getUniformLocations:function(r,a){return{uContrast:r.getUniformLocation(a,"uContrast")}},sendUniformData:function(r,a){r.uniform1f(a.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Saturation=(0,o.util.createClass)(f.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(0!==this.saturation){var l,y,s=r.imageData.data,u=s.length,p=-this.saturation;for(l=0;l<u;l+=4)y=Math.max(s[l],s[l+1],s[l+2]),s[l]+=y!==s[l]?(y-s[l])*p:0,s[l+1]+=y!==s[l+1]?(y-s[l+1])*p:0,s[l+2]+=y!==s[l+2]?(y-s[l+2])*p:0}},getUniformLocations:function(r,a){return{uSaturation:r.getUniformLocation(a,"uSaturation")}},sendUniformData:function(r,a){r.uniform1f(a.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Vibrance=(0,o.util.createClass)(f.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(0!==this.vibrance){var l,y,x,s=r.imageData.data,u=s.length,p=-this.vibrance;for(l=0;l<u;l+=4)y=Math.max(s[l],s[l+1],s[l+2]),x=2*Math.abs(y-(s[l]+s[l+1]+s[l+2])/3)/255*p,s[l]+=y!==s[l]?(y-s[l])*x:0,s[l+1]+=y!==s[l+1]?(y-s[l+1])*x:0,s[l+2]+=y!==s[l+2]?(y-s[l+2])*x:0}},getUniformLocations:function(r,a){return{uVibrance:r.getUniformLocation(a,"uVibrance")}},sendUniformData:function(r,a){r.uniform1f(a.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Blur=(0,o.util.createClass)(f.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var s,u,a=r.filterBackend.resources,p=r.imageData.width,l=r.imageData.height;a.blurLayer1||(a.blurLayer1=o.util.createCanvasElement(),a.blurLayer2=o.util.createCanvasElement()),u=a.blurLayer2,((s=a.blurLayer1).width!==p||s.height!==l)&&(u.width=s.width=p,u.height=s.height=l);var A,O,j,Z,y=s.getContext("2d"),S=u.getContext("2d"),x=15,ue=.06*this.blur*.5;for(y.putImageData(r.imageData,0,0),S.clearRect(0,0,p,l),Z=-x;Z<=x;Z++)j=ue*(O=Z/x)*p+(A=(Math.random()-.5)/4),S.globalAlpha=1-Math.abs(O),S.drawImage(s,j,A),y.drawImage(u,0,0),S.globalAlpha=1,S.clearRect(0,0,u.width,u.height);for(Z=-x;Z<=x;Z++)j=ue*(O=Z/x)*l+(A=(Math.random()-.5)/4),S.globalAlpha=1-Math.abs(O),S.drawImage(s,A,j),y.drawImage(u,0,0),S.globalAlpha=1,S.clearRect(0,0,u.width,u.height);r.ctx.drawImage(s,0,0);var pe=r.ctx.getImageData(0,0,s.width,s.height);return y.globalAlpha=1,y.clearRect(0,0,s.width,s.height),pe},getUniformLocations:function(r,a){return{delta:r.getUniformLocation(a,"uDelta")}},sendUniformData:function(r,a){var s=this.chooseRightDelta();r.uniform2fv(a.delta,s)},chooseRightDelta:function(){var s,r=1,a=[0,0];return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),s=r*this.blur*.12,this.horizontal?a[0]=s:a[1]=s,a}}),f.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Gamma=(0,o.util.createClass)(f.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],f.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var x,s=r.imageData.data,u=this.gamma,p=s.length,l=1/u[0],y=1/u[1],S=1/u[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),x=0,p=256;x<p;x++)this.rVals[x]=255*Math.pow(x/255,l),this.gVals[x]=255*Math.pow(x/255,y),this.bVals[x]=255*Math.pow(x/255,S);for(x=0,p=s.length;x<p;x+=4)s[x]=this.rVals[s[x]],s[x+1]=this.gVals[s[x+1]],s[x+2]=this.bVals[s[x+2]]},getUniformLocations:function(r,a){return{uGamma:r.getUniformLocation(a,"uGamma")}},sendUniformData:function(r,a){r.uniform3fv(a.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.Composed=(0,o.util.createClass)(f.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(r)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(r,a){var u=(r.subFilters||[]).map(function(l){return new o.Image.filters[l.type](l)}),p=new o.Image.filters.Composed({subFilters:u});return a&&a(p),p}}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.Image.filters;f.HueRotation=(0,o.util.createClass)(f.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,a=o.util.cos(r),s=o.util.sin(r),u=1/3,p=Math.sqrt(u)*s,l=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+l/3,this.matrix[1]=u*l-p,this.matrix[2]=u*l+p,this.matrix[5]=u*l+p,this.matrix[6]=a+u*l,this.matrix[7]=u*l-p,this.matrix[10]=u*l-p,this.matrix[11]=u*l+p,this.matrix[12]=a+u*l},isNeutralState:function(r){return this.calculateMatrix(),f.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),f.BaseFilter.prototype.applyTo.call(this,r)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(Be),function(m){"use strict";var o=m.fabric||(m.fabric={}),f=o.util.object.clone;if(o.Text)o.warn("fabric.Text is already defined");else{var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(h),cacheProperties:o.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,a){this.styles=a&&a.styles||{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=o.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,a,u,p,l,y,S=0,x=this._textLines.length;S<x;S++)if(("justify"===this.textAlign||S!==x-1&&!this.isEndOfWrapping(S))&&(u=0,p=this._textLines[S],(a=this.getLineWidth(S))<this.width&&(y=this.textLines[S].match(this._reSpacesAndTabs)))){r=(this.width-a)/y.length;for(var A=0,O=p.length;A<=O;A++)l=this.__charBounds[S][A],this._reSpaceAndTab.test(p[A])?(l.width+=r,l.kernedWidth+=r,l.left+=u,u+=r):l.left+=u}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return r.width+=a*r.zoomX,r.height+=a*r.zoomY,r},_render:function(r){var a=this.path;a&&!a.isNotVisible()&&a._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){"stroke"===this.paintFirst?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,a,s){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom"}r.font=this._getFontDeclaration(a,s)},calcTextWidth:function(){for(var r=this.getLineWidth(0),a=1,s=this._textLines.length;a<s;a++){var u=this.getLineWidth(a);u>r&&(r=u)}return r},_renderTextLine:function(r,a,s,u,p,l){this._renderChars(r,a,s,u,p,l)},_renderTextLinesBackground:function(r){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var a,s,p,l,O,j,ue,u=r.fillStyle,y=this._getLeftOffset(),S=this._getTopOffset(),x=0,A=0,Z=this.path,pe=0,Ce=this._textLines.length;pe<Ce;pe++)if(a=this.getHeightOfLine(pe),this.textBackgroundColor||this.styleHas("textBackgroundColor",pe)){p=this._textLines[pe],s=this._getLineLeftOffset(pe),A=0,x=0,l=this.getValueOfPropertyAt(pe,0,"textBackgroundColor");for(var Se=0,He=p.length;Se<He;Se++)O=this.__charBounds[pe][Se],j=this.getValueOfPropertyAt(pe,Se,"textBackgroundColor"),Z?(r.save(),r.translate(O.renderLeft,O.renderTop),r.rotate(O.angle),r.fillStyle=j,j&&r.fillRect(-O.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),O.width,a/this.lineHeight),r.restore()):j!==l?(ue=y+s+x,"rtl"===this.direction&&(ue=this.width-ue-A),r.fillStyle=l,l&&r.fillRect(ue,S,A,a/this.lineHeight),x=O.left,A=O.width,l=j):A+=O.kernedWidth;j&&!Z&&(ue=y+s+x,"rtl"===this.direction&&(ue=this.width-ue-A),r.fillStyle=j,r.fillRect(ue,S,A,a/this.lineHeight)),S+=a}else S+=a;r.fillStyle=u,this._removeShadow(r)}},getFontCache:function(r){var a=r.fontFamily.toLowerCase();o.charWidthsCache[a]||(o.charWidthsCache[a]={});var s=o.charWidthsCache[a],u=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return s[u]||(s[u]={}),s[u]},_measureChar:function(r,a,s,u){var A,O,j,ue,p=this.getFontCache(a),S=s+r,x=this._getFontDeclaration(a)===this._getFontDeclaration(u),Z=a.fontSize/this.CACHE_FONT_SIZE;if(s&&void 0!==p[s]&&(j=p[s]),void 0!==p[r]&&(ue=A=p[r]),x&&void 0!==p[S]&&(ue=(O=p[S])-j),void 0===A||void 0===j||void 0===O){var pe=this.getMeasuringContext();this._setTextStyles(pe,a,!0)}return void 0===A&&(ue=A=pe.measureText(r).width,p[r]=A),void 0===j&&x&&s&&(j=pe.measureText(s).width,p[s]=j),x&&void 0===O&&(O=pe.measureText(S).width,p[S]=O,ue=O-j),{width:A*Z,kernedWidth:ue*Z}},getHeightOfChar:function(r,a){return this.getValueOfPropertyAt(r,a,"fontSize")},measureLine:function(r){var a=this._measureLine(r);return 0!==this.charSpacing&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(r){var s,u,l,y,O,j,a=0,p=this._textLines[r],x=new Array(p.length),A=0,Z=this.path,ue="right"===this.pathSide;for(this.__charBounds[r]=x,s=0;s<p.length;s++)y=this._getGraphemeBox(u=p[s],r,s,l),x[s]=y,a+=y.kernedWidth,l=u;if(x[s]={left:y?y.left+y.width:0,width:0,kernedWidth:0,height:this.fontSize},Z){switch(j=Z.segmentsInfo[Z.segmentsInfo.length-1].length,(O=o.util.getPointOnPath(Z.path,0,Z.segmentsInfo)).x+=Z.pathOffset.x,O.y+=Z.pathOffset.y,this.textAlign){case"left":A=ue?j-a:0;break;case"center":A=(j-a)/2;break;case"right":A=ue?0:j-a}for(A+=this.pathStartOffset*(ue?-1:1),s=ue?p.length-1:0;ue?s>=0:s<p.length;ue?s--:s++)A>j?A%=j:A<0&&(A+=j),this._setGraphemeOnPath(A,y=x[s],O),A+=y.kernedWidth}return{width:a,numOfSpaces:0}},_setGraphemeOnPath:function(r,a,s){var p=this.path,l=o.util.getPointOnPath(p.path,r+a.kernedWidth/2,p.segmentsInfo);a.renderLeft=l.x-s.x,a.renderTop=l.y-s.y,a.angle=l.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(r,a,s,u,p){var O,l=this.getCompleteStyleDeclaration(a,s),y=u?this.getCompleteStyleDeclaration(a,s-1):{},S=this._measureChar(r,l,u,y),x=S.kernedWidth,A=S.width;0!==this.charSpacing&&(A+=O=this._getWidthOfCharSpacing(),x+=O);var j={width:A,left:0,height:l.fontSize,kernedWidth:x,deltaY:l.deltaY};if(s>0&&!p){var Z=this.__charBounds[a][s-1];j.left=Z.left+Z.width+S.kernedWidth-S.width}return j},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var a=this._textLines[r],s=this.getHeightOfChar(r,0),u=1,p=a.length;u<p;u++)s=Math.max(this.getHeightOfChar(r,u),s);return this.__lineHeights[r]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,a=0,s=0,u=this._textLines.length;s<u;s++)r=this.getHeightOfLine(s),a+=s===u-1?r/this.lineHeight:r;return a},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,a){r.save();for(var s=0,u=this._getLeftOffset(),p=this._getTopOffset(),l=0,y=this._textLines.length;l<y;l++){var S=this.getHeightOfLine(l),x=S/this.lineHeight,A=this._getLineLeftOffset(l);this._renderTextLine(a,r,this._textLines[l],u+A,p+s+x,l),s+=S}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,a,s,u,p,l){var x,A,j,ue,y=this.getHeightOfLine(l),S=-1!==this.textAlign.indexOf("justify"),O="",Z=0,pe=this.path,Ce=!S&&0===this.charSpacing&&this.isEmptyStyles(l)&&!pe,Se="ltr"===this.direction,He="ltr"===this.direction?1:-1,at=a.canvas.getAttribute("dir");if(a.save(),at!==this.direction&&(a.canvas.setAttribute("dir",Se?"ltr":"rtl"),a.direction=Se?"ltr":"rtl",a.textAlign=Se?"left":"right"),p-=y*this._fontSizeFraction/this.lineHeight,Ce)return this._renderChar(r,a,l,0,s.join(""),u,p,y),void a.restore();for(var ke=0,Ee=s.length-1;ke<=Ee;ke++)ue=ke===Ee||this.charSpacing||pe,O+=s[ke],j=this.__charBounds[l][ke],0===Z?(u+=He*(j.kernedWidth-j.width),Z+=j.width):Z+=j.kernedWidth,S&&!ue&&this._reSpaceAndTab.test(s[ke])&&(ue=!0),ue||(x=x||this.getCompleteStyleDeclaration(l,ke),A=this.getCompleteStyleDeclaration(l,ke+1),ue=o.util.hasStyleChanged(x,A,!1)),ue&&(pe?(a.save(),a.translate(j.renderLeft,j.renderTop),a.rotate(j.angle),this._renderChar(r,a,l,ke,O,-Z/2,0,y),a.restore()):this._renderChar(r,a,l,ke,O,u,p,y),O="",x=A,u+=He*Z,Z=0);a.restore()},_applyPatternGradientTransformText:function(r){var s,a=o.util.createCanvasElement(),u=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return a.width=u,a.height=p,(s=a.getContext("2d")).beginPath(),s.moveTo(0,0),s.lineTo(u,0),s.lineTo(u,p),s.lineTo(0,p),s.closePath(),s.translate(u/2,p/2),s.fillStyle=r.toLive(s),this._applyPatternGradientTransform(s,r),s.fill(),s.createPattern(a,"no-repeat")},handleFiller:function(r,a,s){var u,p;return s.toLive?"percentage"===s.gradientUnits||s.gradientTransform||s.patternTransform?(r.translate(u=-this.width/2,p=-this.height/2),r[a]=this._applyPatternGradientTransformText(s),{offsetX:u,offsetY:p}):(r[a]=s.toLive(r,this),this._applyPatternGradientTransform(r,s)):(r[a]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,a){return r.lineWidth=a.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",a.stroke)},_setFillStyles:function(r,a){return this.handleFiller(r,"fillStyle",a.fill)},_renderChar:function(r,a,s,u,p,l,y){var j,Z,S=this._getStyleDeclaration(s,u),x=this.getCompleteStyleDeclaration(s,u),A="fillText"===r&&x.fill,O="strokeText"===r&&x.stroke&&x.strokeWidth;!O&&!A||(a.save(),A&&(j=this._setFillStyles(a,x)),O&&(Z=this._setStrokeStyles(a,x)),a.font=this._getFontDeclaration(x),S&&S.textBackgroundColor&&this._removeShadow(a),S&&S.deltaY&&(y+=S.deltaY),A&&a.fillText(p,l-j.offsetX,y-j.offsetY),O&&a.strokeText(p,l-Z.offsetX,y-Z.offsetY),a.restore())},setSuperscript:function(r,a){return this._setScript(r,a,this.superscript)},setSubscript:function(r,a){return this._setScript(r,a,this.subscript)},_setScript:function(r,a,s){var u=this.get2DCursorLocation(r,!0),p=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"fontSize"),l=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"deltaY");return this.setSelectionStyles({fontSize:p*s.size,deltaY:l+p*s.baseline},r,a),this},_getLineLeftOffset:function(r){var a=this.getLineWidth(r),s=this.width-a,u=this.textAlign,p=this.direction,l=0,y=this.isEndOfWrapping(r);return"justify"===u||"justify-center"===u&&!y||"justify-right"===u&&!y||"justify-left"===u&&!y?0:("center"===u&&(l=s/2),"right"===u&&(l=s),"justify-center"===u&&(l=s/2),"justify-right"===u&&(l=s),"rtl"===p&&(l-=s),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(void 0!==this.__lineWidths[r])return this.__lineWidths[r];var s=this.measureLine(r).width;return this.__lineWidths[r]=s,s},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,a,s){var u=this._getStyleDeclaration(r,a);return u&&typeof u[s]<"u"?u[s]:this[s]},_renderTextDecoration:function(r,a){if(this[a]||this.styleHas(a)){for(var s,u,p,l,y,S,x,A,Z,ue,pe,Ce,Se,He,ot,at,O=this._getLeftOffset(),j=this._getTopOffset(),ke=this.path,Ee=this._getWidthOfCharSpacing(),xe=this.offsets[a],Le=0,q=this._textLines.length;Le<q;Le++)if(s=this.getHeightOfLine(Le),this[a]||this.styleHas(a,Le)){x=this._textLines[Le],He=s/this.lineHeight,l=this._getLineLeftOffset(Le),ue=0,pe=0,A=this.getValueOfPropertyAt(Le,0,a),at=this.getValueOfPropertyAt(Le,0,"fill"),Z=j+He*(1-this._fontSizeFraction),u=this.getHeightOfChar(Le,0),y=this.getValueOfPropertyAt(Le,0,"deltaY");for(var le=0,ae=x.length;le<ae;le++)if(Ce=this.__charBounds[Le][le],Se=this.getValueOfPropertyAt(Le,le,a),ot=this.getValueOfPropertyAt(Le,le,"fill"),p=this.getHeightOfChar(Le,le),S=this.getValueOfPropertyAt(Le,le,"deltaY"),ke&&Se&&ot)r.save(),r.fillStyle=at,r.translate(Ce.renderLeft,Ce.renderTop),r.rotate(Ce.angle),r.fillRect(-Ce.kernedWidth/2,xe*p+S,Ce.kernedWidth,this.fontSize/15),r.restore();else if((Se!==A||ot!==at||p!==u||S!==y)&&pe>0){var he=O+l+ue;"rtl"===this.direction&&(he=this.width-he-pe),A&&at&&(r.fillStyle=at,r.fillRect(he,Z+xe*u+y,pe,this.fontSize/15)),ue=Ce.left,pe=Ce.width,A=Se,at=ot,u=p,y=S}else pe+=Ce.kernedWidth;he=O+l+ue,"rtl"===this.direction&&(he=this.width-he-pe),r.fillStyle=ot,Se&&ot&&r.fillRect(he,Z+xe*u+y,pe-Ee,this.fontSize/15),j+=s}else j+=s;this._removeShadow(r)}},_getFontDeclaration:function(r,a){var s=r||this,u=this.fontFamily,p=o.Text.genericFonts.indexOf(u.toLowerCase())>-1,l=void 0===u||u.indexOf("'")>-1||u.indexOf(",")>-1||u.indexOf('"')>-1||p?s.fontFamily:'"'+s.fontFamily+'"';return[o.isLikelyNode?s.fontWeight:s.fontStyle,o.isLikelyNode?s.fontStyle:s.fontWeight,a?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",l].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var a=r.split(this._reNewline),s=new Array(a.length),u=["\n"],p=[],l=0;l<a.length;l++)s[l]=o.util.string.graphemeSplit(a[l]),p=p.concat(s[l],u);return p.pop(),{_unwrappedLines:s,lines:a,graphemeText:p,graphemeLines:s}},toObject:function(r){var a=h.concat(r),s=this.callSuper("toObject",a);return s.styles=o.util.stylesToArray(this.styles,this.text),s.path&&(s.path=this.path.toObject()),s},set:function(r,a){this.callSuper("set",r,a);var s=!1,u=!1;if("object"==typeof r)for(var p in r)"path"===p&&this.setPathInfo(),s=s||-1!==this._dimensionAffectingProps.indexOf(p),u=u||"path"===p;else s=-1!==this._dimensionAffectingProps.indexOf(r),u="path"===r;return u&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(r,a,s){if(!r)return a(null);var u=o.parseAttributes(r,o.Text.ATTRIBUTE_NAMES),p=u.textAnchor||"left";if((s=o.util.object.extend(s?f(s):{},u)).top=s.top||0,s.left=s.left||0,u.textDecoration){var l=u.textDecoration;-1!==l.indexOf("underline")&&(s.underline=!0),-1!==l.indexOf("overline")&&(s.overline=!0),-1!==l.indexOf("line-through")&&(s.linethrough=!0),delete s.textDecoration}"dx"in u&&(s.left+=u.dx),"dy"in u&&(s.top+=u.dy),"fontSize"in s||(s.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var y="";"textContent"in r?y=r.textContent:"firstChild"in r&&null!==r.firstChild&&"data"in r.firstChild&&null!==r.firstChild.data&&(y=r.firstChild.data),y=y.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var S=s.strokeWidth;s.strokeWidth=0;var x=new o.Text(y,s),A=x.getScaledHeight()/x.height,j=((x.height+x.strokeWidth)*x.lineHeight-x.height)*A,Z=x.getScaledHeight()+j,ue=0;"center"===p&&(ue=x.getScaledWidth()/2),"right"===p&&(ue=x.getScaledWidth()),x.set({left:x.left-ue,top:x.top-(Z-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:typeof S<"u"?S:1}),a(x)},o.Text.fromObject=function(r,a){var s=f(r),u=r.path;return delete s.path,o.Object._fromObject("Text",s,function(p){p.styles=o.util.stylesFromArray(r.styles,r.text),u?o.Object._fromObject("Path",u,function(l){p.set("path",l),a(p)},"path"):a(p)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}}(Be),d.util.object.extend(d.Text.prototype,{isEmptyStyles:function(m){if(!this.styles||typeof m<"u"&&!this.styles[m])return!0;var o=typeof m>"u"?this.styles:{line:this.styles[m]};for(var f in o)for(var h in o[f])for(var r in o[f][h])return!1;return!0},styleHas:function(m,o){if(!this.styles||!m||""===m||typeof o<"u"&&!this.styles[o])return!1;var f=typeof o>"u"?this.styles:{0:this.styles[o]};for(var h in f)for(var r in f[h])if(typeof f[h][r][m]<"u")return!0;return!1},cleanStyle:function(m){if(!this.styles||!m||""===m)return!1;var h,r,o=this.styles,f=0,a=!0,s=0;for(var p in o){for(var l in h=0,o[p]){var u;f++,(u=o[p][l]).hasOwnProperty(m)?(r?u[m]!==r&&(a=!1):r=u[m],u[m]===this[m]&&delete u[m]):a=!1,0!==Object.keys(u).length?h++:delete o[p][l]}0===h&&delete o[p]}for(var S=0;S<this._textLines.length;S++)s+=this._textLines[S].length;a&&f===s&&(this[m]=r,this.removeStyle(m))},removeStyle:function(m){if(this.styles&&m&&""!==m){var f,h,r,o=this.styles;for(h in o){for(r in f=o[h])delete f[r][m],0===Object.keys(f[r]).length&&delete f[r];0===Object.keys(f).length&&delete o[h]}}},_extendStyles:function(m,o){var f=this.get2DCursorLocation(m);this._getLineStyle(f.lineIndex)||this._setLineStyle(f.lineIndex),this._getStyleDeclaration(f.lineIndex,f.charIndex)||this._setStyleDeclaration(f.lineIndex,f.charIndex,{}),d.util.object.extend(this._getStyleDeclaration(f.lineIndex,f.charIndex),o)},get2DCursorLocation:function(m,o){typeof m>"u"&&(m=this.selectionStart);for(var f=o?this._unwrappedTextLines:this._textLines,h=f.length,r=0;r<h;r++){if(m<=f[r].length)return{lineIndex:r,charIndex:m};m-=f[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:f[r-1].length<m?f[r-1].length:m}},getSelectionStyles:function(m,o,f){typeof m>"u"&&(m=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||m);for(var h=[],r=m;r<o;r++)h.push(this.getStyleAtPosition(r,f));return h},getStyleAtPosition:function(m,o){var f=this.get2DCursorLocation(m);return(o?this.getCompleteStyleDeclaration(f.lineIndex,f.charIndex):this._getStyleDeclaration(f.lineIndex,f.charIndex))||{}},setSelectionStyles:function(m,o,f){typeof o>"u"&&(o=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||o);for(var h=o;h<f;h++)this._extendStyles(h,m);return this._forceClearCache=!0,this},_getStyleDeclaration:function(m,o){var f=this.styles&&this.styles[m];return f?f[o]:null},getCompleteStyleDeclaration:function(m,o){for(var r,f=this._getStyleDeclaration(m,o)||{},h={},a=0;a<this._styleProperties.length;a++)h[r=this._styleProperties[a]]=typeof f[r]>"u"?this[r]:f[r];return h},_setStyleDeclaration:function(m,o,f){this.styles[m][o]=f},_deleteStyleDeclaration:function(m,o){delete this.styles[m][o]},_getLineStyle:function(m){return!!this.styles[m]},_setLineStyle:function(m){this.styles[m]={}},_deleteLineStyle:function(m){delete this.styles[m]}}),function(){function m(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}d.IText=d.util.createClass(d.Text,d.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,f){this.callSuper("initialize",o,f),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,f){this[o]!==f&&(this._fireSelectionChanged(),this[o]=f),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var f=this.canvas.contextTop,h=this.canvas.viewportTransform;f.save(),f.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(f),this._clearTextArea(f),o||f.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var o=this._getCursorBoundaries(),f=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,f):this.renderSelection(o,f),f.restore()}},_clearTextArea:function(o){var f=this.width+4,h=this.height+4;o.clearRect(-f/2,-h/2,f,h)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var f=this._getLeftOffset(),h=this._getTopOffset(),r=this._getCursorBoundariesOffsets(o);return{left:f,top:h,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var f,h,r,u,a=0,s=0,p=this.get2DCursorLocation(o);r=p.charIndex,h=p.lineIndex;for(var l=0;l<h;l++)a+=this.getHeightOfLine(l);f=this._getLineLeftOffset(h);var y=this.__charBounds[h][r];return y&&(s=y.left),0!==this.charSpacing&&r===this._textLines[h].length&&(s-=this._getWidthOfCharSpacing()),u={top:a,left:f+(s>0?s:0)},"rtl"===this.direction&&(u.left*=-1),this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(o,f){var h=this.get2DCursorLocation(),r=h.lineIndex,a=h.charIndex>0?h.charIndex-1:0,s=this.getValueOfPropertyAt(r,a,"fontSize"),u=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/u,l=o.topOffset,y=this.getValueOfPropertyAt(r,a,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,f),f.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,a,"fill"),f.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,f.fillRect(o.left+o.leftOffset-p/2,l+o.top+y,p,s)},renderSelection:function(o,f){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=-1!==this.textAlign.indexOf("justify"),s=this.get2DCursorLocation(h),u=this.get2DCursorLocation(r),p=s.lineIndex,l=u.lineIndex,y=s.charIndex<0?0:s.charIndex,S=u.charIndex<0?0:u.charIndex,x=p;x<=l;x++){var j,A=this._getLineLeftOffset(x)||0,O=this.getHeightOfLine(x),Z=0,ue=0;if(x===p&&(Z=this.__charBounds[p][y].left),x>=p&&x<l)ue=a&&!this.isEndOfWrapping(x)?this.width:this.getLineWidth(x)||5;else if(x===l)if(0===S)ue=this.__charBounds[l][S].left;else{var pe=this._getWidthOfCharSpacing();ue=this.__charBounds[l][S-1].left+this.__charBounds[l][S-1].width-pe}j=O,(this.lineHeight<1||x===l&&this.lineHeight>1)&&(O/=this.lineHeight);var Ce=o.left+A+Z,Se=ue-Z,He=O,ot=0;this.inCompositionMode?(f.fillStyle=this.compositionColor||"black",He=1,ot=O):f.fillStyle=this.selectionColor,"rtl"===this.direction&&(Ce=this.width-Ce-Se),f.fillRect(Ce,o.top+o.topOffset+ot,Se,He),o.topOffset+=j}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0);return{l:o.lineIndex,c:o.charIndex>0?o.charIndex-1:0}}}),d.IText.fromObject=function(o,f){var h=d.util.stylesFromArray(o.styles,o.text),r=Object.assign({},o,{styles:h});if(m(r),r.styles)for(var a in r.styles)for(var s in r.styles[a])m(r.styles[a][s]);d.Object._fromObject("IText",r,f,"text")}}(),function(){var m=d.util.object.clone;d.util.object.extend(d.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var f=o.canvas;f&&(f._hasITextHandlers||(f._hasITextHandlers=!0,o._initCanvasHandlers(f)),f._iTextInstances=f._iTextInstances||[],f._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var f=o.canvas;f&&(f._iTextInstances=f._iTextInstances||[],d.util.removeFromArray(f._iTextInstances,o),0===f._iTextInstances.length&&(f._hasITextHandlers=!1,o._removeCanvasHandlers(f)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(f){f.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,f,h,r){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",f,{duration:h,onComplete:function(){a.isAborted||o[r]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var f=this,h=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){f._tick()},h)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,f=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&f&&f.clearContext(f.contextTop||f.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var f=0,h=o-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)f++,h--;for(;/\S/.test(this._text[h])&&h>-1;)f++,h--;return o-f},findWordBoundaryRight:function(o){var f=0,h=o;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)f++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)f++,h++;return o+f},findLineBoundaryLeft:function(o){for(var f=0,h=o-1;!/\n/.test(this._text[h])&&h>-1;)f++,h--;return o-f},findLineBoundaryRight:function(o){for(var f=0,h=o;!/\n/.test(this._text[h])&&h<this._text.length;)f++,h++;return o+f},searchWordBoundary:function(o,f){for(var h=this._text,r=this._reSpace.test(h[o])?o-1:o,a=h[r],s=d.reNonWord;!s.test(a)&&r>0&&r<h.length;)a=h[r+=f];return s.test(a)&&(r+=1===f?0:1),r},selectWord:function(o){var f=this.searchWordBoundary(o=o||this.selectionStart,-1),h=this.searchWordBoundary(o,1);this.selectionStart=f,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){var f=this.findLineBoundaryLeft(o=o||this.selectionStart),h=this.findLineBoundaryRight(o);return this.selectionStart=f,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(f){f.selected=!1,f.isEditing&&f.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var f=this.getSelectionStartFromPointer(o.e),h=this.selectionStart,r=this.selectionEnd;(f!==this.__selectionStartOnMouseDown||h===r)&&(h===f||r===f)||(f>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=f):(this.selectionStart=f,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,f,h){var r=h.slice(0,o),a=d.util.string.graphemeSplit(r).length;if(o===f)return{selectionStart:a,selectionEnd:a};var s=h.slice(o,f);return{selectionStart:a,selectionEnd:a+d.util.string.graphemeSplit(s).length}},fromGraphemeToStringSelection:function(o,f,h){var a=h.slice(0,o).join("").length;return o===f?{selectionStart:a,selectionEnd:a}:{selectionStart:a,selectionEnd:a+h.slice(o,f).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,f=this._getCursorBoundaries(o),h=this.get2DCursorLocation(o),s=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize")*this.lineHeight,u=f.leftOffset,p=this.calcTransformMatrix(),l={x:f.left+u,y:f.top+f.topOffset+s},y=this.canvas.getRetinaScaling(),S=this.canvas.upperCanvasEl,x=S.width/y,A=S.height/y,O=x-s,j=A-s,Z=S.clientWidth/x,ue=S.clientHeight/A;return l=d.util.transformPoint(l,p),(l=d.util.transformPoint(l,this.canvas.viewportTransform)).x*=Z,l.y*=ue,l.x<0&&(l.x=0),l.x>O&&(l.x=O),l.y<0&&(l.y=0),l.y>j&&(l.y=j),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,f=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,f&&(f.blur&&f.blur(),f.parentNode&&f.parentNode.removeChild(f)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,f){var l,y,h=this.get2DCursorLocation(o,!0),r=this.get2DCursorLocation(f,!0),a=h.lineIndex,s=h.charIndex,u=r.lineIndex,p=r.charIndex;if(a!==u){if(this.styles[a])for(l=s;l<this._unwrappedTextLines[a].length;l++)delete this.styles[a][l];if(this.styles[u])for(l=p;l<this._unwrappedTextLines[u].length;l++)(y=this.styles[u][l])&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+l-p]=y);for(l=a+1;l<=u;l++)delete this.styles[l];this.shiftLineStyles(u,a-u)}else if(this.styles[a]){y=this.styles[a];var x,A,S=p-s;for(l=s;l<p;l++)delete y[l];for(A in this.styles[a])(x=parseInt(A,10))>=p&&(y[x-S]=y[A],delete y[A])}},shiftLineStyles:function(o,f){var h=m(this.styles);for(var r in this.styles){var a=parseInt(r,10);a>o&&(this.styles[a+f]=h[a],h[a-f]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,f,h,r){var a,s={},u=!1,p=this._unwrappedTextLines[o].length===f;for(var l in h||(h=1),this.shiftLineStyles(o,h),this.styles[o]&&(a=this.styles[o][0===f?f:f-1]),this.styles[o]){var y=parseInt(l,10);y>=f&&(u=!0,s[y-f]=this.styles[o][l],p&&0===f||delete this.styles[o][l])}var S=!1;for(u&&!p&&(this.styles[o+h]=s,S=!0),S&&h--;h>0;)r&&r[h-1]?this.styles[o+h]={0:m(r[h-1])}:a?this.styles[o+h]={0:m(a)}:delete this.styles[o+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(o,f,h,r){this.styles||(this.styles={});var a=this.styles[o],s=a?m(a):{};for(var u in h||(h=1),s){var p=parseInt(u,10);p>=f&&(a[p+h]=s[p],s[p-h]||delete a[p])}if(this._forceClearCache=!0,r)for(;h--;)Object.keys(r[h]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][f+h]=m(r[h]));else if(a)for(var l=a[f?f-1:1];l&&h--;)this.styles[o][f+h]=m(l)},insertNewStyleBlock:function(o,f,h){for(var r=this.get2DCursorLocation(f,!0),a=[0],s=0,u=0;u<o.length;u++)"\n"===o[u]?a[++s]=0:a[s]++;for(a[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,a[0],h),h=h&&h.slice(a[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+a[0],s),u=1;u<s;u++)a[u]>0?this.insertCharStyleObject(r.lineIndex+u,0,a[u],h):h&&this.styles[r.lineIndex+u]&&h[0]&&(this.styles[r.lineIndex+u][0]=h[0]),h=h&&h.slice(a[u]+1);a[u]>0&&this.insertCharStyleObject(r.lineIndex+u,0,a[u],h)},setSelectionStartEndWithShift:function(o,f,h){h<=o?(f===o?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=h):h>o&&h<f?"right"===this._selectionDirection?this.selectionEnd=h:this.selectionStart=h:(f===o?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=f),this.selectionEnd=h)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),d.util.object.extend(d.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(m){if(this.canvas){this.__newClickTime=+new Date;var o=m.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",m),this._stopEvent(m.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(m){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===m.x&&this.__lastPointer.y===m.y},_stopEvent:function(m){m.preventDefault&&m.preventDefault(),m.stopPropagation&&m.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(m){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(m.e))},tripleClickHandler:function(m){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(m.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(m){!this.canvas||!this.editable||m.e.button&&1!==m.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(m.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(m){!this.canvas||!this.editable||m.e.button&&1!==m.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(m){if(this.__isMousedown=!1,!(!this.editable||this.group||m.transform&&m.transform.actionPerformed||m.e.button&&1!==m.e.button)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(m.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(m){var o=this.getSelectionStartFromPointer(m);m.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(m){for(var p,o=this.getLocalPointer(m),f=0,h=0,r=0,a=0,s=0,l=0,y=this._textLines.length;l<y&&r<=o.y;l++)r+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));h=this._getLineLeftOffset(s)*this.scaleX,p=this._textLines[s],"rtl"===this.direction&&(o.x=this.width*this.scaleX-o.x+h);for(var S=0,x=p.length;S<x&&(f=h,(h+=this.__charBounds[s][S].kernedWidth*this.scaleX)<=o.x);S++)a++;return this._getNewSelectionStartFromOffset(o,f,h,a,x)},_getNewSelectionStartFromOffset:function(m,o,f,h,r){var s=f-m.x,p=h+(s>m.x-o||s<0?0:1);return this.flipX&&(p=r-p),p>this._text.length&&(p=this._text.length),p}}),d.util.object.extend(d.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=d.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var m=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+m.top+"; left: "+m.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+m.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):d.document.body.appendChild(this.hiddenTextarea),d.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),d.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),d.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),d.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),d.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),d.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),d.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(d.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(m){if(this.isEditing){var o="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(m.keyCode in o)this[o[m.keyCode]](m);else{if(!(m.keyCode in this.ctrlKeysMapDown)||!m.ctrlKey&&!m.metaKey)return;this[this.ctrlKeysMapDown[m.keyCode]](m)}m.stopImmediatePropagation(),m.preventDefault(),m.keyCode>=33&&m.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(m){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:m.keyCode in this.ctrlKeysMapUp&&(m.ctrlKey||m.metaKey)&&(this[this.ctrlKeysMapUp[m.keyCode]](m),m.stopImmediatePropagation(),m.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(m){var o=this.fromPaste;if(this.fromPaste=!1,m&&m.stopPropagation(),this.isEditing){var a,s,S,x,A,f=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,r=f.length,u=r-h,p=this.selectionStart,l=this.selectionEnd,y=p!==l;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var O=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),j=p>O.selectionStart;y?(a=this._text.slice(p,l),u+=l-p):r<h&&(a=j?this._text.slice(l+u,l):this._text.slice(p,p-u)),s=f.slice(O.selectionEnd-u,O.selectionEnd),a&&a.length&&(s.length&&(S=this.getSelectionStyles(p,p+1,!1),S=s.map(function(){return S[0]})),y?(x=p,A=l):j?(x=l-a.length,A=l):(x=l,A=l+a.length),this.removeStyleFromTo(x,A)),s.length&&(o&&s.join("")===d.copiedText&&!d.disableStyleCopyPaste&&(S=d.copiedTextStyle),this.insertNewStyleBlock(s,p,S)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(m){this.compositionStart=m.target.selectionStart,this.compositionEnd=m.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(d.copiedText=this.getSelectedText(),d.copiedTextStyle=d.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(m){return m&&m.clipboardData||d.window.clipboardData},_getWidthBeforeCursor:function(m,o){var h,f=this._getLineLeftOffset(m);return o>0&&(f+=(h=this.__charBounds[m][o-1]).left+h.width),f},getDownCursorOffset:function(m,o){var f=this._getSelectionForOffset(m,o),h=this.get2DCursorLocation(f),r=h.lineIndex;if(r===this._textLines.length-1||m.metaKey||34===m.keyCode)return this._text.length-f;var a=h.charIndex,s=this._getWidthBeforeCursor(r,a),u=this._getIndexOnLine(r+1,s);return this._textLines[r].slice(a).length+u+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(m,o){return m.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(m,o){var f=this._getSelectionForOffset(m,o),h=this.get2DCursorLocation(f),r=h.lineIndex;if(0===r||m.metaKey||33===m.keyCode)return-f;var a=h.charIndex,s=this._getWidthBeforeCursor(r,a),u=this._getIndexOnLine(r-1,s),p=this._textLines[r].slice(0,a),l=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+u-p.length+(1-l)},_getIndexOnLine:function(m,o){for(var s,u,f=this._textLines[m],r=this._getLineLeftOffset(m),a=0,p=0,l=f.length;p<l;p++)if((r+=s=this.__charBounds[m][p].width)>o){u=!0;var S=r,x=Math.abs(r-s-o);a=Math.abs(S-o)<x?p:p-1;break}return u||(a=f.length-1),a},moveCursorDown:function(m){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",m)},moveCursorUp:function(m){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",m)},_moveCursorUpOrDown:function(m,o){var h=this["get"+m+"CursorOffset"](o,"right"===this._selectionDirection);o.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),0!==h&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(m){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+m:this.selectionEnd+m),0!==m},moveCursorWithoutShift:function(m){return m<0?(this.selectionStart+=m,this.selectionEnd=this.selectionStart):(this.selectionEnd+=m,this.selectionStart=this.selectionEnd),0!==m},moveCursorLeft:function(m){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",m)},_move:function(m,o,f){var h;if(m.altKey)h=this["findWordBoundary"+f](this[o]);else{if(!m.metaKey&&35!==m.keyCode&&36!==m.keyCode)return this[o]+="Left"===f?-1:1,!0;h=this["findLineBoundary"+f](this[o])}if(typeof h<"u"&&this[o]!==h)return this[o]=h,!0},_moveLeft:function(m,o){return this._move(m,o,"Left")},_moveRight:function(m,o){return this._move(m,o,"Right")},moveCursorLeftWithoutShift:function(m){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(o=this._moveLeft(m,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(m){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(m,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(m,"selectionStart")):void 0},moveCursorRight:function(m){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",m)},_moveCursorLeftOrRight:function(m,o){var f="moveCursor"+m+"With";this._currentCursorOpacity=1,this[f+=o.shiftKey?"Shift":"outShift"](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(m){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(m,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(m,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(m){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(m,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(m,o){typeof o>"u"&&(o=m+1),this.removeStyleFromTo(m,o),this._text.splice(m,o-m),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(m,o,f,h){typeof h>"u"&&(h=f),h>f&&this.removeStyleFromTo(f,h);var r=d.util.string.graphemeSplit(m);this.insertNewStyleBlock(r,f,o),this._text=[].concat(this._text.slice(0,f),r,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var m=d.util.toFixed,o=/  +/g;d.util.object.extend(d.Text.prototype,{_toSVG:function(){var f=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(f.textTop,f.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(f){return this._createBaseSVGMarkup(this._toSVG(),{reviver:f,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(f){var r=this.getSvgTextDecoration(this);return[f.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",f.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(f,h){var u,r=[],a=[],s=f;this._setSVGBg(a);for(var p=0,l=this._textLines.length;p<l;p++)u=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(a,p,h+u,s),this._setSVGTextLineText(r,p,h+u,s),s+=this.getHeightOfLine(p);return{textSpans:r,textBgRects:a}},_createTextCharSpan:function(f,h,r,a){var s=f!==f.trim()||f.match(o),u=this.getSvgSpanStyles(h,s),p=u?'style="'+u+'"':"",l=h.deltaY,y="",S=d.Object.NUM_FRACTION_DIGITS;return l&&(y=' dy="'+m(l,S)+'" '),['<tspan x="',m(r,S),'" y="',m(a,S),'" ',y,p,">",d.util.string.escapeXml(f),"</tspan>"].join("")},_setSVGTextLineText:function(f,h,r,a){var p,l,S,x,j,s=this.getHeightOfLine(h),u=-1!==this.textAlign.indexOf("justify"),y="",A=0,O=this._textLines[h];a+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var Z=0,ue=O.length-1;Z<=ue;Z++)j=Z===ue||this.charSpacing,y+=O[Z],S=this.__charBounds[h][Z],0===A?(r+=S.kernedWidth-S.width,A+=S.width):A+=S.kernedWidth,u&&!j&&this._reSpaceAndTab.test(O[Z])&&(j=!0),j||(p=p||this.getCompleteStyleDeclaration(h,Z),l=this.getCompleteStyleDeclaration(h,Z+1),j=d.util.hasStyleChanged(p,l,!0)),j&&(x=this._getStyleDeclaration(h,Z)||{},f.push(this._createTextCharSpan(y,x,r,a)),y="",p=l,r+=A,A=0)},_pushTextBgRect:function(f,h,r,a,s,u){var p=d.Object.NUM_FRACTION_DIGITS;f.push("\t\t<rect ",this._getFillAttributes(h),' x="',m(r,p),'" y="',m(a,p),'" width="',m(s,p),'" height="',m(u,p),'"></rect>\n')},_setSVGTextLineBg:function(f,h,r,a){for(var y,S,s=this._textLines[h],u=this.getHeightOfLine(h)/this.lineHeight,p=0,l=0,x=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),A=0,O=s.length;A<O;A++)y=this.__charBounds[h][A],(S=this.getValueOfPropertyAt(h,A,"textBackgroundColor"))!==x?(x&&this._pushTextBgRect(f,x,r+l,a,p,u),l=y.left,p=y.width,x=S):p+=y.kernedWidth;S&&this._pushTextBgRect(f,S,r+l,a,p,u)},_getFillAttributes:function(f){var h=f&&"string"==typeof f?new d.Color(f):"";return h&&h.getSource()&&1!==h.getAlpha()?'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"':'fill="'+f+'"'},_getSVGLineTopOffset:function(f){for(var r,h=0,a=0;a<f;a++)h+=this.getHeightOfLine(a);return r=this.getHeightOfLine(a),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(f){return d.Object.prototype.getSvgStyles.call(this,f)+" white-space: pre;"}})}(),function(m){"use strict";var o=m.fabric||(m.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(f){for(var h=0,r=0,a=0,s={},u=0;u<f.graphemeLines.length;u++)"\n"===f.graphemeText[a]&&u>0?(r=0,a++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(f.graphemeText[a])&&u>0&&(r++,a++),s[u]={line:h,offset:r},a+=f.graphemeLines[u].length,r+=f.graphemeLines[u].length;return s},styleHas:function(f,h){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[h];r&&(h=r.line)}return o.Text.prototype.styleHas.call(this,f,h)},isEmptyStyles:function(f){if(!this.styles)return!0;var a,s,h=0,u=!1,p=this._styleMap[f],l=this._styleMap[f+1];for(var y in p&&(f=p.line,h=p.offset),l&&(u=l.line===f,a=l.offset),s=typeof f>"u"?this.styles:{line:this.styles[f]})for(var S in s[y])if(S>=h&&(!u||S<a))for(var x in s[y][S])return!1;return!0},_getStyleDeclaration:function(f,h){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[f];if(!r)return null;f=r.line,h=r.offset+h}return this.callSuper("_getStyleDeclaration",f,h)},_setStyleDeclaration:function(f,h,r){var a=this._styleMap[f];this.styles[f=a.line][h=a.offset+h]=r},_deleteStyleDeclaration:function(f,h){var r=this._styleMap[f];delete this.styles[f=r.line][h=r.offset+h]},_getLineStyle:function(f){return!!this.styles[this._styleMap[f].line]},_setLineStyle:function(f){this.styles[this._styleMap[f].line]={}},_wrapText:function(f,h){var a,r=[];for(this.isWrapping=!0,a=0;a<f.length;a++)r=r.concat(this._wrapLine(f[a],a,h));return this.isWrapping=!1,r},_measureWord:function(f,h,r){var s,a=0;r=r||0;for(var p=0,l=f.length;p<l;p++)a+=this._getGraphemeBox(f[p],h,p+r,s,!0).kernedWidth,s=f[p];return a},_wrapLine:function(f,h,r,Ce){var s=0,u=this.splitByGrapheme,p=[],l=[],y=u?o.util.string.graphemeSplit(f):f.split(this._wordJoiners),S="",x=0,A=u?"":" ",O=0,j=0,Z=0,ue=!0,pe=this._getWidthOfCharSpacing();Ce=Ce||0,0===y.length&&y.push([]),r-=Ce;for(var Se=0;Se<y.length;Se++)S=u?y[Se]:o.util.string.graphemeSplit(y[Se]),O=this._measureWord(S,h,x),x+=S.length,(s+=j+O-pe)>r&&!ue?(p.push(l),l=[],s=O,ue=!0):s+=pe,!ue&&!u&&l.push(A),l=l.concat(S),j=u?0:this._measureWord([A],h,x),x++,ue=!1,O>Z&&(Z=O);return Se&&p.push(l),Z+Ce>this.dynamicMinWidth&&(this.dynamicMinWidth=Z-pe+Ce),p},isEndOfWrapping:function(f){return!this._styleMap[f+1]||this._styleMap[f+1].line!==this._styleMap[f].line},missingNewlineOffset:function(f){return this.splitByGrapheme?this.isEndOfWrapping(f)?1:0:1},_splitTextIntoLines:function(f){for(var h=o.Text.prototype._splitTextIntoLines.call(this,f),r=this._wrapText(h.lines,this.width),a=new Array(r.length),s=0;s<r.length;s++)a[s]=r[s].join("");return h.lines=a,h.graphemeLines=r,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var f={};for(var h in this._styleMap)this._textLines[h]&&(f[this._styleMap[h].line]=1);for(var h in this.styles)f[h]||delete this.styles[h]},toObject:function(f){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(f))}}),o.Textbox.fromObject=function(f,h){var r=o.util.stylesFromArray(f.styles,f.text),a=Object.assign({},f,{styles:r});return o.Object._fromObject("Textbox",a,h,"text")}}(Be),function(){var m=d.controlsUtils,o=m.scaleSkewCursorStyleHandler,f=m.scaleCursorStyleHandler,h=m.scalingEqually,r=m.scalingYOrSkewingX,a=m.scalingXOrSkewingY,s=m.scaleOrSkewActionName,u=d.Object.prototype.controls;if(u.ml=new d.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:a,getActionName:s}),u.mr=new d.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:a,getActionName:s}),u.mb=new d.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:r,getActionName:s}),u.mt=new d.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:r,getActionName:s}),u.tl=new d.Control({x:-.5,y:-.5,cursorStyleHandler:f,actionHandler:h}),u.tr=new d.Control({x:.5,y:-.5,cursorStyleHandler:f,actionHandler:h}),u.bl=new d.Control({x:-.5,y:.5,cursorStyleHandler:f,actionHandler:h}),u.br=new d.Control({x:.5,y:.5,cursorStyleHandler:f,actionHandler:h}),u.mtr=new d.Control({x:0,y:-.5,actionHandler:m.rotationWithSnapping,cursorStyleHandler:m.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),d.Textbox){var p=d.Textbox.prototype.controls={};p.mtr=u.mtr,p.tr=u.tr,p.br=u.br,p.tl=u.tl,p.bl=u.bl,p.mt=u.mt,p.mb=u.mb,p.mr=new d.Control({x:.5,y:0,actionHandler:m.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),p.ml=new d.Control({x:-.5,y:0,actionHandler:m.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()},1135:(Ft,Be,K)=>{"use strict";K.d(Be,{X:()=>v});var d=K(7579);class v extends d.x{constructor(Ue){super(),this._value=Ue}get value(){return this.getValue()}_subscribe(Ue){const T=super._subscribe(Ue);return!T.closed&&Ue.next(this._value),T}getValue(){const{hasError:Ue,thrownError:T,_value:fe}=this;if(Ue)throw T;return this._throwIfClosed(),fe}next(Ue){super.next(this._value=Ue)}}},9751:(Ft,Be,K)=>{"use strict";K.d(Be,{y:()=>o});var d=K(930),v=K(727),ce=K(8822),Ue=K(9635),T=K(2416),fe=K(576),m=K(2806);let o=(()=>{class a{constructor(u){u&&(this._subscribe=u)}lift(u){const p=new a;return p.source=this,p.operator=u,p}subscribe(u,p,l){const y=function r(a){return a&&a instanceof d.Lv||function h(a){return a&&(0,fe.m)(a.next)&&(0,fe.m)(a.error)&&(0,fe.m)(a.complete)}(a)&&(0,v.Nn)(a)}(u)?u:new d.Hp(u,p,l);return(0,m.x)(()=>{const{operator:S,source:x}=this;y.add(S?S.call(y,x):x?this._subscribe(y):this._trySubscribe(y))}),y}_trySubscribe(u){try{return this._subscribe(u)}catch(p){u.error(p)}}forEach(u,p){return new(p=f(p))((l,y)=>{const S=new d.Hp({next:x=>{try{u(x)}catch(A){y(A),S.unsubscribe()}},error:y,complete:l});this.subscribe(S)})}_subscribe(u){var p;return null===(p=this.source)||void 0===p?void 0:p.subscribe(u)}[ce.L](){return this}pipe(...u){return(0,Ue.U)(u)(this)}toPromise(u){return new(u=f(u))((p,l)=>{let y;this.subscribe(S=>y=S,S=>l(S),()=>p(y))})}}return a.create=s=>new a(s),a})();function f(a){var s;return null!==(s=a??T.v.Promise)&&void 0!==s?s:Promise}},7579:(Ft,Be,K)=>{"use strict";K.d(Be,{x:()=>m});var d=K(9751),v=K(727);const Ue=(0,K(3888).d)(f=>function(){f(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var T=K(8737),fe=K(2806);let m=(()=>{class f extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const a=new o(this,this);return a.operator=r,a}_throwIfClosed(){if(this.closed)throw new Ue}next(r){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const a of this.currentObservers)a.next(r)}})}error(r){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:a}=this;for(;a.length;)a.shift().error(r)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:a,isStopped:s,observers:u}=this;return a||s?v.Lc:(this.currentObservers=null,u.push(r),new v.w0(()=>{this.currentObservers=null,(0,T.P)(u,r)}))}_checkFinalizedStatuses(r){const{hasError:a,thrownError:s,isStopped:u}=this;a?r.error(s):u&&r.complete()}asObservable(){const r=new d.y;return r.source=this,r}}return f.create=(h,r)=>new o(h,r),f})();class o extends m{constructor(h,r){super(),this.destination=h,this.source=r}next(h){var r,a;null===(a=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===a||a.call(r,h)}error(h){var r,a;null===(a=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===a||a.call(r,h)}complete(){var h,r;null===(r=null===(h=this.destination)||void 0===h?void 0:h.complete)||void 0===r||r.call(h)}_subscribe(h){var r,a;return null!==(a=null===(r=this.source)||void 0===r?void 0:r.subscribe(h))&&void 0!==a?a:v.Lc}}},930:(Ft,Be,K)=>{"use strict";K.d(Be,{Hp:()=>l,Lv:()=>a});var d=K(576),v=K(727),ce=K(2416),Ue=K(7849),T=K(5032);const fe=f("C",void 0,void 0);function f(O,j,Z){return{kind:O,value:j,error:Z}}var h=K(3410),r=K(2806);class a extends v.w0{constructor(j){super(),this.isStopped=!1,j?(this.destination=j,(0,v.Nn)(j)&&j.add(this)):this.destination=A}static create(j,Z,ue){return new l(j,Z,ue)}next(j){this.isStopped?x(function o(O){return f("N",O,void 0)}(j),this):this._next(j)}error(j){this.isStopped?x(function m(O){return f("E",void 0,O)}(j),this):(this.isStopped=!0,this._error(j))}complete(){this.isStopped?x(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(j){this.destination.next(j)}_error(j){try{this.destination.error(j)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const s=Function.prototype.bind;function u(O,j){return s.call(O,j)}class p{constructor(j){this.partialObserver=j}next(j){const{partialObserver:Z}=this;if(Z.next)try{Z.next(j)}catch(ue){y(ue)}}error(j){const{partialObserver:Z}=this;if(Z.error)try{Z.error(j)}catch(ue){y(ue)}else y(j)}complete(){const{partialObserver:j}=this;if(j.complete)try{j.complete()}catch(Z){y(Z)}}}class l extends a{constructor(j,Z,ue){let pe;if(super(),(0,d.m)(j)||!j)pe={next:j??void 0,error:Z??void 0,complete:ue??void 0};else{let Ce;this&&ce.v.useDeprecatedNextContext?(Ce=Object.create(j),Ce.unsubscribe=()=>this.unsubscribe(),pe={next:j.next&&u(j.next,Ce),error:j.error&&u(j.error,Ce),complete:j.complete&&u(j.complete,Ce)}):pe=j}this.destination=new p(pe)}}function y(O){ce.v.useDeprecatedSynchronousErrorHandling?(0,r.O)(O):(0,Ue.h)(O)}function x(O,j){const{onStoppedNotification:Z}=ce.v;Z&&h.z.setTimeout(()=>Z(O,j))}const A={closed:!0,next:T.Z,error:function S(O){throw O},complete:T.Z}},727:(Ft,Be,K)=>{"use strict";K.d(Be,{Lc:()=>fe,w0:()=>T,Nn:()=>m});var d=K(576);const ce=(0,K(3888).d)(f=>function(r){f(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((a,s)=>`${s+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});var Ue=K(8737);class T{constructor(h){this.initialTeardown=h,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let h;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const u of r)u.remove(this);else r.remove(this);const{initialTeardown:a}=this;if((0,d.m)(a))try{a()}catch(u){h=u instanceof ce?u.errors:[u]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const u of s)try{o(u)}catch(p){h=h??[],p instanceof ce?h=[...h,...p.errors]:h.push(p)}}if(h)throw new ce(h)}}add(h){var r;if(h&&h!==this)if(this.closed)o(h);else{if(h instanceof T){if(h.closed||h._hasParent(this))return;h._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(h)}}_hasParent(h){const{_parentage:r}=this;return r===h||Array.isArray(r)&&r.includes(h)}_addParent(h){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(h),r):r?[r,h]:h}_removeParent(h){const{_parentage:r}=this;r===h?this._parentage=null:Array.isArray(r)&&(0,Ue.P)(r,h)}remove(h){const{_finalizers:r}=this;r&&(0,Ue.P)(r,h),h instanceof T&&h._removeParent(this)}}T.EMPTY=(()=>{const f=new T;return f.closed=!0,f})();const fe=T.EMPTY;function m(f){return f instanceof T||f&&"closed"in f&&(0,d.m)(f.remove)&&(0,d.m)(f.add)&&(0,d.m)(f.unsubscribe)}function o(f){(0,d.m)(f)?f():f.unsubscribe()}},2416:(Ft,Be,K)=>{"use strict";K.d(Be,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ft,Be,K)=>{"use strict";K.d(Be,{E:()=>v});const v=new(K(9751).y)(T=>T.complete())},2076:(Ft,Be,K)=>{"use strict";K.d(Be,{D:()=>ue});var d=K(8421),v=K(9672),ce=K(4482),Ue=K(5403);function T(pe,Ce=0){return(0,ce.e)((Se,He)=>{Se.subscribe((0,Ue.x)(He,ot=>(0,v.f)(He,pe,()=>He.next(ot),Ce),()=>(0,v.f)(He,pe,()=>He.complete(),Ce),ot=>(0,v.f)(He,pe,()=>He.error(ot),Ce)))})}function fe(pe,Ce=0){return(0,ce.e)((Se,He)=>{He.add(pe.schedule(()=>Se.subscribe(He),Ce))})}var f=K(9751),r=K(2202),a=K(576);function u(pe,Ce){if(!pe)throw new Error("Iterable cannot be null");return new f.y(Se=>{(0,v.f)(Se,Ce,()=>{const He=pe[Symbol.asyncIterator]();(0,v.f)(Se,Ce,()=>{He.next().then(ot=>{ot.done?Se.complete():Se.next(ot.value)})},0,!0)})})}var p=K(3670),l=K(8239),y=K(1144),S=K(6495),x=K(2206),A=K(4532),O=K(3260);function ue(pe,Ce){return Ce?function Z(pe,Ce){if(null!=pe){if((0,p.c)(pe))return function m(pe,Ce){return(0,d.Xf)(pe).pipe(fe(Ce),T(Ce))}(pe,Ce);if((0,y.z)(pe))return function h(pe,Ce){return new f.y(Se=>{let He=0;return Ce.schedule(function(){He===pe.length?Se.complete():(Se.next(pe[He++]),Se.closed||this.schedule())})})}(pe,Ce);if((0,l.t)(pe))return function o(pe,Ce){return(0,d.Xf)(pe).pipe(fe(Ce),T(Ce))}(pe,Ce);if((0,x.D)(pe))return u(pe,Ce);if((0,S.T)(pe))return function s(pe,Ce){return new f.y(Se=>{let He;return(0,v.f)(Se,Ce,()=>{He=pe[r.h](),(0,v.f)(Se,Ce,()=>{let ot,at;try{({value:ot,done:at}=He.next())}catch(ke){return void Se.error(ke)}at?Se.complete():Se.next(ot)},0,!0)}),()=>(0,a.m)(He?.return)&&He.return()})}(pe,Ce);if((0,O.L)(pe))return function j(pe,Ce){return u((0,O.Q)(pe),Ce)}(pe,Ce)}throw(0,A.z)(pe)}(pe,Ce):(0,d.Xf)(pe)}},8421:(Ft,Be,K)=>{"use strict";K.d(Be,{Xf:()=>s});var d=K(655),v=K(1144),ce=K(8239),Ue=K(9751),T=K(3670),fe=K(2206),m=K(4532),o=K(6495),f=K(3260),h=K(576),r=K(7849),a=K(8822);function s(O){if(O instanceof Ue.y)return O;if(null!=O){if((0,T.c)(O))return function u(O){return new Ue.y(j=>{const Z=O[a.L]();if((0,h.m)(Z.subscribe))return Z.subscribe(j);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(O);if((0,v.z)(O))return function p(O){return new Ue.y(j=>{for(let Z=0;Z<O.length&&!j.closed;Z++)j.next(O[Z]);j.complete()})}(O);if((0,ce.t)(O))return function l(O){return new Ue.y(j=>{O.then(Z=>{j.closed||(j.next(Z),j.complete())},Z=>j.error(Z)).then(null,r.h)})}(O);if((0,fe.D)(O))return S(O);if((0,o.T)(O))return function y(O){return new Ue.y(j=>{for(const Z of O)if(j.next(Z),j.closed)return;j.complete()})}(O);if((0,f.L)(O))return function x(O){return S((0,f.Q)(O))}(O)}throw(0,m.z)(O)}function S(O){return new Ue.y(j=>{(function A(O,j){var Z,ue,pe,Ce;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Z=(0,d.KL)(O);!(ue=yield Z.next()).done;)if(j.next(ue.value),j.closed)return}catch(Se){pe={error:Se}}finally{try{ue&&!ue.done&&(Ce=Z.return)&&(yield Ce.call(Z))}finally{if(pe)throw pe.error}}j.complete()})})(O,j).catch(Z=>j.error(Z))})}},9646:(Ft,Be,K)=>{"use strict";K.d(Be,{of:()=>ce});var d=K(7669),v=K(2076);function ce(...Ue){const T=(0,d.yG)(Ue);return(0,v.D)(Ue,T)}},2843:(Ft,Be,K)=>{"use strict";K.d(Be,{_:()=>ce});var d=K(9751),v=K(576);function ce(Ue,T){const fe=(0,v.m)(Ue)?Ue:()=>Ue,m=o=>o.error(fe());return new d.y(T?o=>T.schedule(m,0,o):m)}},5403:(Ft,Be,K)=>{"use strict";K.d(Be,{x:()=>v});var d=K(930);function v(Ue,T,fe,m,o){return new ce(Ue,T,fe,m,o)}class ce extends d.Lv{constructor(T,fe,m,o,f,h){super(T),this.onFinalize=f,this.shouldUnsubscribe=h,this._next=fe?function(r){try{fe(r)}catch(a){T.error(a)}}:super._next,this._error=o?function(r){try{o(r)}catch(a){T.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=m?function(){try{m()}catch(r){T.error(r)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var T;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(T=this.onFinalize)||void 0===T||T.call(this))}}}},262:(Ft,Be,K)=>{"use strict";K.d(Be,{K:()=>Ue});var d=K(8421),v=K(5403),ce=K(4482);function Ue(T){return(0,ce.e)((fe,m)=>{let h,o=null,f=!1;o=fe.subscribe((0,v.x)(m,void 0,void 0,r=>{h=(0,d.Xf)(T(r,Ue(T)(fe))),o?(o.unsubscribe(),o=null,h.subscribe(m)):f=!0})),f&&(o.unsubscribe(),o=null,h.subscribe(m))})}},4351:(Ft,Be,K)=>{"use strict";K.d(Be,{b:()=>ce});var d=K(5577),v=K(576);function ce(Ue,T){return(0,v.m)(T)?(0,d.z)(Ue,T,1):(0,d.z)(Ue,1)}},6590:(Ft,Be,K)=>{"use strict";K.d(Be,{d:()=>ce});var d=K(4482),v=K(5403);function ce(Ue){return(0,d.e)((T,fe)=>{let m=!1;T.subscribe((0,v.x)(fe,o=>{m=!0,fe.next(o)},()=>{m||fe.next(Ue),fe.complete()}))})}},9300:(Ft,Be,K)=>{"use strict";K.d(Be,{h:()=>ce});var d=K(4482),v=K(5403);function ce(Ue,T){return(0,d.e)((fe,m)=>{let o=0;fe.subscribe((0,v.x)(m,f=>Ue.call(T,f,o++)&&m.next(f)))})}},590:(Ft,Be,K)=>{"use strict";K.d(Be,{P:()=>m});var d=K(6805),v=K(9300),ce=K(5698),Ue=K(6590),T=K(8068),fe=K(4671);function m(o,f){const h=arguments.length>=2;return r=>r.pipe(o?(0,v.h)((a,s)=>o(a,s,r)):fe.y,(0,ce.q)(1),h?(0,Ue.d)(f):(0,T.T)(()=>new d.K))}},4004:(Ft,Be,K)=>{"use strict";K.d(Be,{U:()=>ce});var d=K(4482),v=K(5403);function ce(Ue,T){return(0,d.e)((fe,m)=>{let o=0;fe.subscribe((0,v.x)(m,f=>{m.next(Ue.call(T,f,o++))}))})}},8189:(Ft,Be,K)=>{"use strict";K.d(Be,{J:()=>ce});var d=K(5577),v=K(4671);function ce(Ue=1/0){return(0,d.z)(v.y,Ue)}},5577:(Ft,Be,K)=>{"use strict";K.d(Be,{z:()=>o});var d=K(4004),v=K(8421),ce=K(4482),Ue=K(9672),T=K(5403),m=K(576);function o(f,h,r=1/0){return(0,m.m)(h)?o((a,s)=>(0,d.U)((u,p)=>h(a,u,s,p))((0,v.Xf)(f(a,s))),r):("number"==typeof h&&(r=h),(0,ce.e)((a,s)=>function fe(f,h,r,a,s,u,p,l){const y=[];let S=0,x=0,A=!1;const O=()=>{A&&!y.length&&!S&&h.complete()},j=ue=>S<a?Z(ue):y.push(ue),Z=ue=>{u&&h.next(ue),S++;let pe=!1;(0,v.Xf)(r(ue,x++)).subscribe((0,T.x)(h,Ce=>{s?.(Ce),u?j(Ce):h.next(Ce)},()=>{pe=!0},void 0,()=>{if(pe)try{for(S--;y.length&&S<a;){const Ce=y.shift();p?(0,Ue.f)(h,p,()=>Z(Ce)):Z(Ce)}O()}catch(Ce){h.error(Ce)}}))};return f.subscribe((0,T.x)(h,j,()=>{A=!0,O()})),()=>{l?.()}}(a,s,f,r)))}},5698:(Ft,Be,K)=>{"use strict";K.d(Be,{q:()=>Ue});var d=K(515),v=K(4482),ce=K(5403);function Ue(T){return T<=0?()=>d.E:(0,v.e)((fe,m)=>{let o=0;fe.subscribe((0,ce.x)(m,f=>{++o<=T&&(m.next(f),T<=o&&m.complete())}))})}},8068:(Ft,Be,K)=>{"use strict";K.d(Be,{T:()=>Ue});var d=K(6805),v=K(4482),ce=K(5403);function Ue(fe=T){return(0,v.e)((m,o)=>{let f=!1;m.subscribe((0,ce.x)(o,h=>{f=!0,o.next(h)},()=>f?o.complete():o.error(fe())))})}function T(){return new d.K}},3410:(Ft,Be,K)=>{"use strict";K.d(Be,{z:()=>d});const d={setTimeout(v,ce,...Ue){const{delegate:T}=d;return T?.setTimeout?T.setTimeout(v,ce,...Ue):setTimeout(v,ce,...Ue)},clearTimeout(v){const{delegate:ce}=d;return(ce?.clearTimeout||clearTimeout)(v)},delegate:void 0}},2202:(Ft,Be,K)=>{"use strict";K.d(Be,{h:()=>v});const v=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ft,Be,K)=>{"use strict";K.d(Be,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ft,Be,K)=>{"use strict";K.d(Be,{K:()=>v});const v=(0,K(3888).d)(ce=>function(){ce(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Ft,Be,K)=>{"use strict";K.d(Be,{_6:()=>fe,jO:()=>Ue,yG:()=>T});var d=K(576);function ce(m){return m[m.length-1]}function Ue(m){return(0,d.m)(ce(m))?m.pop():void 0}function T(m){return function v(m){return m&&(0,d.m)(m.schedule)}(ce(m))?m.pop():void 0}function fe(m,o){return"number"==typeof ce(m)?m.pop():o}},4742:(Ft,Be,K)=>{"use strict";K.d(Be,{D:()=>T});const{isArray:d}=Array,{getPrototypeOf:v,prototype:ce,keys:Ue}=Object;function T(m){if(1===m.length){const o=m[0];if(d(o))return{args:o,keys:null};if(function fe(m){return m&&"object"==typeof m&&v(m)===ce}(o)){const f=Ue(o);return{args:f.map(h=>o[h]),keys:f}}}return{args:m,keys:null}}},8737:(Ft,Be,K)=>{"use strict";function d(v,ce){if(v){const Ue=v.indexOf(ce);0<=Ue&&v.splice(Ue,1)}}K.d(Be,{P:()=>d})},3888:(Ft,Be,K)=>{"use strict";function d(v){const Ue=v(T=>{Error.call(T),T.stack=(new Error).stack});return Ue.prototype=Object.create(Error.prototype),Ue.prototype.constructor=Ue,Ue}K.d(Be,{d:()=>d})},1810:(Ft,Be,K)=>{"use strict";function d(v,ce){return v.reduce((Ue,T,fe)=>(Ue[T]=ce[fe],Ue),{})}K.d(Be,{n:()=>d})},2806:(Ft,Be,K)=>{"use strict";K.d(Be,{O:()=>Ue,x:()=>ce});var d=K(2416);let v=null;function ce(T){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!v;if(fe&&(v={errorThrown:!1,error:null}),T(),fe){const{errorThrown:m,error:o}=v;if(v=null,m)throw o}}else T()}function Ue(T){d.v.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=T)}},9672:(Ft,Be,K)=>{"use strict";function d(v,ce,Ue,T=0,fe=!1){const m=ce.schedule(function(){Ue(),fe?v.add(this.schedule(null,T)):this.unsubscribe()},T);if(v.add(m),!fe)return m}K.d(Be,{f:()=>d})},4671:(Ft,Be,K)=>{"use strict";function d(v){return v}K.d(Be,{y:()=>d})},1144:(Ft,Be,K)=>{"use strict";K.d(Be,{z:()=>d});const d=v=>v&&"number"==typeof v.length&&"function"!=typeof v},2206:(Ft,Be,K)=>{"use strict";K.d(Be,{D:()=>v});var d=K(576);function v(ce){return Symbol.asyncIterator&&(0,d.m)(ce?.[Symbol.asyncIterator])}},576:(Ft,Be,K)=>{"use strict";function d(v){return"function"==typeof v}K.d(Be,{m:()=>d})},3670:(Ft,Be,K)=>{"use strict";K.d(Be,{c:()=>ce});var d=K(8822),v=K(576);function ce(Ue){return(0,v.m)(Ue[d.L])}},6495:(Ft,Be,K)=>{"use strict";K.d(Be,{T:()=>ce});var d=K(2202),v=K(576);function ce(Ue){return(0,v.m)(Ue?.[d.h])}},8239:(Ft,Be,K)=>{"use strict";K.d(Be,{t:()=>v});var d=K(576);function v(ce){return(0,d.m)(ce?.then)}},3260:(Ft,Be,K)=>{"use strict";K.d(Be,{L:()=>Ue,Q:()=>ce});var d=K(655),v=K(576);function ce(T){return(0,d.FC)(this,arguments,function*(){const m=T.getReader();try{for(;;){const{value:o,done:f}=yield(0,d.qq)(m.read());if(f)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(o)}}finally{m.releaseLock()}})}function Ue(T){return(0,v.m)(T?.getReader)}},4482:(Ft,Be,K)=>{"use strict";K.d(Be,{A:()=>v,e:()=>ce});var d=K(576);function v(Ue){return(0,d.m)(Ue?.lift)}function ce(Ue){return T=>{if(v(T))return T.lift(function(fe){try{return Ue(fe,this)}catch(m){this.error(m)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ft,Be,K)=>{"use strict";K.d(Be,{Z:()=>Ue});var d=K(4004);const{isArray:v}=Array;function Ue(T){return(0,d.U)(fe=>function ce(T,fe){return v(fe)?T(...fe):T(fe)}(T,fe))}},5032:(Ft,Be,K)=>{"use strict";function d(){}K.d(Be,{Z:()=>d})},9635:(Ft,Be,K)=>{"use strict";K.d(Be,{U:()=>ce,z:()=>v});var d=K(4671);function v(...Ue){return ce(Ue)}function ce(Ue){return 0===Ue.length?d.y:1===Ue.length?Ue[0]:function(fe){return Ue.reduce((m,o)=>o(m),fe)}}},7849:(Ft,Be,K)=>{"use strict";K.d(Be,{h:()=>ce});var d=K(2416),v=K(3410);function ce(Ue){v.z.setTimeout(()=>{const{onUnhandledError:T}=d.v;if(!T)throw Ue;T(Ue)})}},4532:(Ft,Be,K)=>{"use strict";function d(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}K.d(Be,{z:()=>d})},655:(Ft,Be,K)=>{"use strict";function a(Ee,xe,Le,q){return new(Le||(Le=Promise))(function(ae,he){function Fe(De){try{ee(q.next(De))}catch(Me){he(Me)}}function de(De){try{ee(q.throw(De))}catch(Me){he(Me)}}function ee(De){De.done?ae(De.value):function le(ae){return ae instanceof Le?ae:new Le(function(he){he(ae)})}(De.value).then(Fe,de)}ee((q=q.apply(Ee,xe||[])).next())})}function O(Ee){return this instanceof O?(this.v=Ee,this):new O(Ee)}function j(Ee,xe,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,q=Le.apply(Ee,xe||[]),ae=[];return le={},he("next"),he("throw"),he("return"),le[Symbol.asyncIterator]=function(){return this},le;function he(We){q[We]&&(le[We]=function($e){return new Promise(function(rt,Ke){ae.push([We,$e,rt,Ke])>1||Fe(We,$e)})})}function Fe(We,$e){try{!function de(We){We.value instanceof O?Promise.resolve(We.value.v).then(ee,De):Me(ae[0][2],We)}(q[We]($e))}catch(rt){Me(ae[0][3],rt)}}function ee(We){Fe("next",We)}function De(We){Fe("throw",We)}function Me(We,$e){We($e),ae.shift(),ae.length&&Fe(ae[0][0],ae[0][1])}}function ue(Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,xe=Ee[Symbol.asyncIterator];return xe?xe.call(Ee):(Ee=function l(Ee){var xe="function"==typeof Symbol&&Symbol.iterator,Le=xe&&Ee[xe],q=0;if(Le)return Le.call(Ee);if(Ee&&"number"==typeof Ee.length)return{next:function(){return Ee&&q>=Ee.length&&(Ee=void 0),{value:Ee&&Ee[q++],done:!Ee}}};throw new TypeError(xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ee),Le={},q("next"),q("throw"),q("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function q(ae){Le[ae]=Ee[ae]&&function(he){return new Promise(function(Fe,de){!function le(ae,he,Fe,de){Promise.resolve(de).then(function(ee){ae({value:ee,done:Fe})},he)}(Fe,de,(he=Ee[ae](he)).done,he.value)})}}}K.d(Be,{FC:()=>j,KL:()=>ue,mG:()=>a,qq:()=>O})},4960:()=>{},6759:()=>{},6272:()=>{},7340:(Ft,Be,K)=>{"use strict";K.d(Be,{IO:()=>p,LC:()=>v,SB:()=>f,X$:()=>Ue,ZE:()=>x,ZN:()=>S,_7:()=>u,_j:()=>d,eR:()=>r,jt:()=>T,k1:()=>A,l3:()=>ce,oB:()=>o,oQ:()=>a,pV:()=>s,vP:()=>m});class d{}class v{}const ce="*";function Ue(O,j){return{type:7,name:O,definitions:j,options:{}}}function T(O,j=null){return{type:4,styles:j,timings:O}}function m(O,j=null){return{type:2,steps:O,options:j}}function o(O){return{type:6,styles:O,offset:null}}function f(O,j,Z){return{type:0,name:O,styles:j,options:Z}}function r(O,j,Z=null){return{type:1,expr:O,animation:j,options:Z}}function a(O,j=null){return{type:8,animation:O,options:j}}function s(O=null){return{type:9,options:O}}function u(O,j=null){return{type:10,animation:O,options:j}}function p(O,j,Z=null){return{type:11,selector:O,animation:j,options:Z}}function y(O){Promise.resolve().then(O)}class S{constructor(j=0,Z=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=j+Z}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(j=>j()),this._onDoneFns=[])}onStart(j){this._originalOnStartFns.push(j),this._onStartFns.push(j)}onDone(j){this._originalOnDoneFns.push(j),this._onDoneFns.push(j)}onDestroy(j){this._onDestroyFns.push(j)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){y(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(j=>j()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(j=>j()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(j){this._position=this.totalTime?j*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(j){const Z="start"==j?this._onStartFns:this._onDoneFns;Z.forEach(ue=>ue()),Z.length=0}}class x{constructor(j){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=j;let Z=0,ue=0,pe=0;const Ce=this.players.length;0==Ce?y(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++Z==Ce&&this._onFinish()}),Se.onDestroy(()=>{++ue==Ce&&this._onDestroy()}),Se.onStart(()=>{++pe==Ce&&this._onStart()})}),this.totalTime=this.players.reduce((Se,He)=>Math.max(Se,He.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(j=>j()),this._onDoneFns=[])}init(){this.players.forEach(j=>j.init())}onStart(j){this._onStartFns.push(j)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(j=>j()),this._onStartFns=[])}onDone(j){this._onDoneFns.push(j)}onDestroy(j){this._onDestroyFns.push(j)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(j=>j.play())}pause(){this.players.forEach(j=>j.pause())}restart(){this.players.forEach(j=>j.restart())}finish(){this._onFinish(),this.players.forEach(j=>j.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(j=>j.destroy()),this._onDestroyFns.forEach(j=>j()),this._onDestroyFns=[])}reset(){this.players.forEach(j=>j.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(j){const Z=j*this.totalTime;this.players.forEach(ue=>{const pe=ue.totalTime?Math.min(1,Z/ue.totalTime):1;ue.setPosition(pe)})}getPosition(){const j=this.players.reduce((Z,ue)=>null===Z||ue.totalTime>Z.totalTime?ue:Z,null);return null!=j?j.getPosition():0}beforeDestroy(){this.players.forEach(j=>{j.beforeDestroy&&j.beforeDestroy()})}triggerCallback(j){const Z="start"==j?this._onStartFns:this._onDoneFns;Z.forEach(ue=>ue()),Z.length=0}}const A="!"},6895:(Ft,Be,K)=>{"use strict";K.d(Be,{Do:()=>x,EM:()=>Wr,HT:()=>Ue,JF:()=>Ri,K0:()=>fe,Mx:()=>Je,O5:()=>Zt,PC:()=>ir,S$:()=>l,V_:()=>f,Ye:()=>A,b0:()=>S,bD:()=>zr,ez:()=>br,mk:()=>$t,q:()=>ce,sg:()=>Wn,tP:()=>di,w_:()=>T});var d=K(8256);let v=null;function ce(){return v}function Ue(k){v||(v=k)}class T{}const fe=new d.OlP("DocumentToken");let m=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=d.Yz7({token:k,factory:function(){return function o(){return(0,d.LFG)(h)}()},providedIn:"platform"}),k})();const f=new d.OlP("Location Initialized");let h=(()=>{class k extends m{constructor(B){super(),this._doc=B,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ce().getBaseHref(this._doc)}onPopState(B){const ne=ce().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",B,!1),()=>ne.removeEventListener("popstate",B)}onHashChange(B){const ne=ce().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",B,!1),()=>ne.removeEventListener("hashchange",B)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(B){this._location.pathname=B}pushState(B,ne,ve){r()?this._history.pushState(B,ne,ve):this._location.hash=ve}replaceState(B,ne,ve){r()?this._history.replaceState(B,ne,ve):this._location.hash=ve}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return k.\u0275fac=function(B){return new(B||k)(d.LFG(fe))},k.\u0275prov=d.Yz7({token:k,factory:function(){return function a(){return new h((0,d.LFG)(fe))}()},providedIn:"platform"}),k})();function r(){return!!window.history.pushState}function s(k,Y){if(0==k.length)return Y;if(0==Y.length)return k;let B=0;return k.endsWith("/")&&B++,Y.startsWith("/")&&B++,2==B?k+Y.substring(1):1==B?k+Y:k+"/"+Y}function u(k){const Y=k.match(/#|\?|$/),B=Y&&Y.index||k.length;return k.slice(0,B-("/"===k[B-1]?1:0))+k.slice(B)}function p(k){return k&&"?"!==k[0]?"?"+k:k}let l=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=d.Yz7({token:k,factory:function(){return(0,d.f3M)(S)},providedIn:"root"}),k})();const y=new d.OlP("appBaseHref");let S=(()=>{class k extends l{constructor(B,ne){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return s(this._baseHref,B)}path(B=!1){const ne=this._platformLocation.pathname+p(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&B?`${ne}${ve}`:ne}pushState(B,ne,ve,it){const ht=this.prepareExternalUrl(ve+p(it));this._platformLocation.pushState(B,ne,ht)}replaceState(B,ne,ve,it){const ht=this.prepareExternalUrl(ve+p(it));this._platformLocation.replaceState(B,ne,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return k.\u0275fac=function(B){return new(B||k)(d.LFG(m),d.LFG(y,8))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),x=(()=>{class k extends l{constructor(B,ne){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(B){const ne=s(this._baseHref,B);return ne.length>0?"#"+ne:ne}pushState(B,ne,ve,it){let ht=this.prepareExternalUrl(ve+p(it));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.pushState(B,ne,ht)}replaceState(B,ne,ve,it){let ht=this.prepareExternalUrl(ve+p(it));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.replaceState(B,ne,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return k.\u0275fac=function(B){return new(B||k)(d.LFG(m),d.LFG(y,8))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),k})(),A=(()=>{class k{constructor(B){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const ne=this._locationStrategy.getBaseHref();this._basePath=function ue(k){if(new RegExp("^(https?:)?//").test(k)){const[,B]=k.split(/\/\/[^\/]+/);return B}return k}(u(Z(ne))),this._locationStrategy.onPopState(ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:ve.state,type:ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,ne=""){return this.path()==this.normalize(B+p(ne))}normalize(B){return k.stripTrailingSlash(function j(k,Y){return k&&new RegExp(`^${k}([/;?#]|$)`).test(Y)?Y.substring(k.length):Y}(this._basePath,Z(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,ne="",ve=null){this._locationStrategy.pushState(ve,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+p(ne)),ve)}replaceState(B,ne="",ve=null){this._locationStrategy.replaceState(ve,"",B,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+p(ne)),ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)})),()=>{const ne=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",ne){this._urlChangeListeners.forEach(ve=>ve(B,ne))}subscribe(B,ne,ve){return this._subject.subscribe({next:B,error:ne,complete:ve})}}return k.normalizeQueryParams=p,k.joinWithSlash=s,k.stripTrailingSlash=u,k.\u0275fac=function(B){return new(B||k)(d.LFG(l))},k.\u0275prov=d.Yz7({token:k,factory:function(){return function O(){return new A((0,d.LFG)(l))}()},providedIn:"root"}),k})();function Z(k){return k.replace(/\/index.html$/,"")}function Je(k,Y){Y=encodeURIComponent(Y);for(const B of k.split(";")){const ne=B.indexOf("="),[ve,it]=-1==ne?[B,""]:[B.slice(0,ne),B.slice(ne+1)];if(ve.trim()===Y)return decodeURIComponent(it)}return null}const bt=/\s+/,nn=[];let $t=(()=>{class k{constructor(B,ne,ve,it){this._iterableDiffers=B,this._keyValueDiffers=ne,this._ngEl=ve,this._renderer=it,this.initialClasses=nn,this.stateMap=new Map}set klass(B){this.initialClasses=null!=B?B.trim().split(bt):nn}set ngClass(B){this.rawClass="string"==typeof B?B.trim().split(bt):B}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const B=this.rawClass;if(Array.isArray(B)||B instanceof Set)for(const ne of B)this._updateState(ne,!0);else if(null!=B)for(const ne of Object.keys(B))this._updateState(ne,Boolean(B[ne]));this._applyStateDiff()}_updateState(B,ne){const ve=this.stateMap.get(B);void 0!==ve?(ve.enabled!==ne&&(ve.changed=!0,ve.enabled=ne),ve.touched=!0):this.stateMap.set(B,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const B of this.stateMap){const ne=B[0],ve=B[1];ve.changed?(this._toggleClass(ne,ve.enabled),ve.changed=!1):ve.touched||(ve.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),ve.touched=!1}}_toggleClass(B,ne){(B=B.trim()).length>0&&B.split(bt).forEach(ve=>{ne?this._renderer.addClass(this._ngEl.nativeElement,ve):this._renderer.removeClass(this._ngEl.nativeElement,ve)})}}return k.\u0275fac=function(B){return new(B||k)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class Di{constructor(Y,B,ne,ve){this.$implicit=Y,this.ngForOf=B,this.index=ne,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wn=(()=>{class k{set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}constructor(B,ne,ve){this._viewContainer=B,this._template=ne,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const ne=this._viewContainer;B.forEachOperation((ve,it,ht)=>{if(null==ve.previousIndex)ne.createEmbeddedView(this._template,new Di(ve.item,this._ngForOf,-1,-1),null===ht?void 0:ht);else if(null==ht)ne.remove(null===it?void 0:it);else if(null!==it){const kt=ne.get(it);ne.move(kt,ht),Kn(kt,ve)}});for(let ve=0,it=ne.length;ve<it;ve++){const kt=ne.get(ve).context;kt.index=ve,kt.count=it,kt.ngForOf=this._ngForOf}B.forEachIdentityChange(ve=>{Kn(ne.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(B,ne){return!0}}return k.\u0275fac=function(B){return new(B||k)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function Kn(k,Y){k.context.$implicit=Y.item}let Zt=(()=>{class k{constructor(B,ne){this._viewContainer=B,this._context=new Hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){qn("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){qn("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,ne){return!0}}return k.\u0275fac=function(B){return new(B||k)(d.Y36(d.s_b),d.Y36(d.Rgc))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class Hn{constructor(){this.$implicit=null,this.ngIf=null}}function qn(k,Y){if(Y&&!Y.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,d.AaK)(Y)}'.`)}let ir=(()=>{class k{constructor(B,ne,ve){this._ngEl=B,this._differs=ne,this._renderer=ve,this._ngStyle=null,this._differ=null}set ngStyle(B){this._ngStyle=B,!this._differ&&B&&(this._differ=this._differs.find(B).create())}ngDoCheck(){if(this._differ){const B=this._differ.diff(this._ngStyle);B&&this._applyChanges(B)}}_setStyle(B,ne){const[ve,it]=B.split("."),ht=-1===ve.indexOf("-")?void 0:d.JOm.DashCase;null!=ne?this._renderer.setStyle(this._ngEl.nativeElement,ve,it?`${ne}${it}`:ne,ht):this._renderer.removeStyle(this._ngEl.nativeElement,ve,ht)}_applyChanges(B){B.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),B.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),B.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}}return k.\u0275fac=function(B){return new(B||k)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),k})(),di=(()=>{class k{constructor(B){this._viewContainerRef=B,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(B){if(B.ngTemplateOutlet||B.ngTemplateOutletInjector){const ne=this._viewContainerRef;if(this._viewRef&&ne.remove(ne.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ve,ngTemplateOutletContext:it,ngTemplateOutletInjector:ht}=this;this._viewRef=ne.createEmbeddedView(ve,it,ht?{injector:ht}:void 0)}else this._viewRef=null}else this._viewRef&&B.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return k.\u0275fac=function(B){return new(B||k)(d.Y36(d.s_b))},k.\u0275dir=d.lG2({type:k,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),k})(),br=(()=>{class k{}return k.\u0275fac=function(B){return new(B||k)},k.\u0275mod=d.oAB({type:k}),k.\u0275inj=d.cJS({}),k})();const zr="browser";let Wr=(()=>{class k{}return k.\u0275prov=(0,d.Yz7)({token:k,providedIn:"root",factory:()=>new $r((0,d.LFG)(fe),window)}),k})();class $r{constructor(Y,B){this.document=Y,this.window=B,this.offset=()=>[0,0]}setOffset(Y){this.offset=Array.isArray(Y)?()=>Y:Y}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Y){this.supportsScrolling()&&this.window.scrollTo(Y[0],Y[1])}scrollToAnchor(Y){if(!this.supportsScrolling())return;const B=function Wi(k,Y){const B=k.getElementById(Y)||k.getElementsByName(Y)[0];if(B)return B;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const ne=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let ve=ne.currentNode;for(;ve;){const it=ve.shadowRoot;if(it){const ht=it.getElementById(Y)||it.querySelector(`[name="${Y}"]`);if(ht)return ht}ve=ne.nextNode()}}return null}(this.document,Y);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(Y){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=Y)}}scrollToElement(Y){const B=Y.getBoundingClientRect(),ne=B.left+this.window.pageXOffset,ve=B.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(ne-it[0],ve-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Y=Gi(this.window.history)||Gi(Object.getPrototypeOf(this.window.history));return!(!Y||!Y.writable&&!Y.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Gi(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Ri{}},529:(Ft,Be,K)=>{"use strict";K.d(Be,{JF:()=>jn,TP:()=>ae,eN:()=>xe});var d=K(6895),v=K(8256),ce=K(9646),Ue=K(9751),T=K(4351),fe=K(9300),m=K(4004);class o{}class f{}class h{constructor(_e){this.normalizedNames=new Map,this.lazyUpdate=null,_e?this.lazyInit="string"==typeof _e?()=>{this.headers=new Map,_e.split("\n").forEach(Oe=>{const _t=Oe.indexOf(":");if(_t>0){const Ye=Oe.slice(0,_t),Wt=Ye.toLowerCase(),Ht=Oe.slice(_t+1).trim();this.maybeSetNormalizedName(Ye,Wt),this.headers.has(Wt)?this.headers.get(Wt).push(Ht):this.headers.set(Wt,[Ht])}})}:()=>{this.headers=new Map,Object.keys(_e).forEach(Oe=>{let _t=_e[Oe];const Ye=Oe.toLowerCase();"string"==typeof _t&&(_t=[_t]),_t.length>0&&(this.headers.set(Ye,_t),this.maybeSetNormalizedName(Oe,Ye))})}:this.headers=new Map}has(_e){return this.init(),this.headers.has(_e.toLowerCase())}get(_e){this.init();const Oe=this.headers.get(_e.toLowerCase());return Oe&&Oe.length>0?Oe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(_e){return this.init(),this.headers.get(_e.toLowerCase())||null}append(_e,Oe){return this.clone({name:_e,value:Oe,op:"a"})}set(_e,Oe){return this.clone({name:_e,value:Oe,op:"s"})}delete(_e,Oe){return this.clone({name:_e,value:Oe,op:"d"})}maybeSetNormalizedName(_e,Oe){this.normalizedNames.has(Oe)||this.normalizedNames.set(Oe,_e)}init(){this.lazyInit&&(this.lazyInit instanceof h?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(_e=>this.applyUpdate(_e)),this.lazyUpdate=null))}copyFrom(_e){_e.init(),Array.from(_e.headers.keys()).forEach(Oe=>{this.headers.set(Oe,_e.headers.get(Oe)),this.normalizedNames.set(Oe,_e.normalizedNames.get(Oe))})}clone(_e){const Oe=new h;return Oe.lazyInit=this.lazyInit&&this.lazyInit instanceof h?this.lazyInit:this,Oe.lazyUpdate=(this.lazyUpdate||[]).concat([_e]),Oe}applyUpdate(_e){const Oe=_e.name.toLowerCase();switch(_e.op){case"a":case"s":let _t=_e.value;if("string"==typeof _t&&(_t=[_t]),0===_t.length)return;this.maybeSetNormalizedName(_e.name,Oe);const Ye=("a"===_e.op?this.headers.get(Oe):void 0)||[];Ye.push(..._t),this.headers.set(Oe,Ye);break;case"d":const Wt=_e.value;if(Wt){let Ht=this.headers.get(Oe);if(!Ht)return;Ht=Ht.filter(_n=>-1===Wt.indexOf(_n)),0===Ht.length?(this.headers.delete(Oe),this.normalizedNames.delete(Oe)):this.headers.set(Oe,Ht)}else this.headers.delete(Oe),this.normalizedNames.delete(Oe)}}forEach(_e){this.init(),Array.from(this.normalizedNames.keys()).forEach(Oe=>_e(this.normalizedNames.get(Oe),this.headers.get(Oe)))}}class a{encodeKey(_e){return l(_e)}encodeValue(_e){return l(_e)}decodeKey(_e){return decodeURIComponent(_e)}decodeValue(_e){return decodeURIComponent(_e)}}const u=/%(\d[a-f0-9])/gi,p={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function l(dt){return encodeURIComponent(dt).replace(u,(_e,Oe)=>p[Oe]??_e)}function y(dt){return`${dt}`}class S{constructor(_e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=_e.encoder||new a,_e.fromString){if(_e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function s(dt,_e){const Oe=new Map;return dt.length>0&&dt.replace(/^\?/,"").split("&").forEach(Ye=>{const Wt=Ye.indexOf("="),[Ht,_n]=-1==Wt?[_e.decodeKey(Ye),""]:[_e.decodeKey(Ye.slice(0,Wt)),_e.decodeValue(Ye.slice(Wt+1))],Ut=Oe.get(Ht)||[];Ut.push(_n),Oe.set(Ht,Ut)}),Oe}(_e.fromString,this.encoder)}else _e.fromObject?(this.map=new Map,Object.keys(_e.fromObject).forEach(Oe=>{const _t=_e.fromObject[Oe],Ye=Array.isArray(_t)?_t.map(y):[y(_t)];this.map.set(Oe,Ye)})):this.map=null}has(_e){return this.init(),this.map.has(_e)}get(_e){this.init();const Oe=this.map.get(_e);return Oe?Oe[0]:null}getAll(_e){return this.init(),this.map.get(_e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(_e,Oe){return this.clone({param:_e,value:Oe,op:"a"})}appendAll(_e){const Oe=[];return Object.keys(_e).forEach(_t=>{const Ye=_e[_t];Array.isArray(Ye)?Ye.forEach(Wt=>{Oe.push({param:_t,value:Wt,op:"a"})}):Oe.push({param:_t,value:Ye,op:"a"})}),this.clone(Oe)}set(_e,Oe){return this.clone({param:_e,value:Oe,op:"s"})}delete(_e,Oe){return this.clone({param:_e,value:Oe,op:"d"})}toString(){return this.init(),this.keys().map(_e=>{const Oe=this.encoder.encodeKey(_e);return this.map.get(_e).map(_t=>Oe+"="+this.encoder.encodeValue(_t)).join("&")}).filter(_e=>""!==_e).join("&")}clone(_e){const Oe=new S({encoder:this.encoder});return Oe.cloneFrom=this.cloneFrom||this,Oe.updates=(this.updates||[]).concat(_e),Oe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(_e=>this.map.set(_e,this.cloneFrom.map.get(_e))),this.updates.forEach(_e=>{switch(_e.op){case"a":case"s":const Oe=("a"===_e.op?this.map.get(_e.param):void 0)||[];Oe.push(y(_e.value)),this.map.set(_e.param,Oe);break;case"d":if(void 0===_e.value){this.map.delete(_e.param);break}{let _t=this.map.get(_e.param)||[];const Ye=_t.indexOf(y(_e.value));-1!==Ye&&_t.splice(Ye,1),_t.length>0?this.map.set(_e.param,_t):this.map.delete(_e.param)}}}),this.cloneFrom=this.updates=null)}}class A{constructor(){this.map=new Map}set(_e,Oe){return this.map.set(_e,Oe),this}get(_e){return this.map.has(_e)||this.map.set(_e,_e.defaultValue()),this.map.get(_e)}delete(_e){return this.map.delete(_e),this}has(_e){return this.map.has(_e)}keys(){return this.map.keys()}}function j(dt){return typeof ArrayBuffer<"u"&&dt instanceof ArrayBuffer}function Z(dt){return typeof Blob<"u"&&dt instanceof Blob}function ue(dt){return typeof FormData<"u"&&dt instanceof FormData}class Ce{constructor(_e,Oe,_t,Ye){let Wt;if(this.url=Oe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=_e.toUpperCase(),function O(dt){switch(dt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ye?(this.body=void 0!==_t?_t:null,Wt=Ye):Wt=_t,Wt&&(this.reportProgress=!!Wt.reportProgress,this.withCredentials=!!Wt.withCredentials,Wt.responseType&&(this.responseType=Wt.responseType),Wt.headers&&(this.headers=Wt.headers),Wt.context&&(this.context=Wt.context),Wt.params&&(this.params=Wt.params)),this.headers||(this.headers=new h),this.context||(this.context=new A),this.params){const Ht=this.params.toString();if(0===Ht.length)this.urlWithParams=Oe;else{const _n=Oe.indexOf("?");this.urlWithParams=Oe+(-1===_n?"?":_n<Oe.length-1?"&":"")+Ht}}else this.params=new S,this.urlWithParams=Oe}serializeBody(){return null===this.body?null:j(this.body)||Z(this.body)||ue(this.body)||function pe(dt){return typeof URLSearchParams<"u"&&dt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof S?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ue(this.body)?null:Z(this.body)?this.body.type||null:j(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof S?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(_e={}){const Oe=_e.method||this.method,_t=_e.url||this.url,Ye=_e.responseType||this.responseType,Wt=void 0!==_e.body?_e.body:this.body,Ht=void 0!==_e.withCredentials?_e.withCredentials:this.withCredentials,_n=void 0!==_e.reportProgress?_e.reportProgress:this.reportProgress;let Ut=_e.headers||this.headers,Tn=_e.params||this.params;const li=_e.context??this.context;return void 0!==_e.setHeaders&&(Ut=Object.keys(_e.setHeaders).reduce((On,Nn)=>On.set(Nn,_e.setHeaders[Nn]),Ut)),_e.setParams&&(Tn=Object.keys(_e.setParams).reduce((On,Nn)=>On.set(Nn,_e.setParams[Nn]),Tn)),new Ce(Oe,_t,Wt,{params:Tn,headers:Ut,context:li,reportProgress:_n,responseType:Ye,withCredentials:Ht})}}var Se=(()=>((Se=Se||{})[Se.Sent=0]="Sent",Se[Se.UploadProgress=1]="UploadProgress",Se[Se.ResponseHeader=2]="ResponseHeader",Se[Se.DownloadProgress=3]="DownloadProgress",Se[Se.Response=4]="Response",Se[Se.User=5]="User",Se))();class He{constructor(_e,Oe=200,_t="OK"){this.headers=_e.headers||new h,this.status=void 0!==_e.status?_e.status:Oe,this.statusText=_e.statusText||_t,this.url=_e.url||null,this.ok=this.status>=200&&this.status<300}}class ot extends He{constructor(_e={}){super(_e),this.type=Se.ResponseHeader}clone(_e={}){return new ot({headers:_e.headers||this.headers,status:void 0!==_e.status?_e.status:this.status,statusText:_e.statusText||this.statusText,url:_e.url||this.url||void 0})}}class at extends He{constructor(_e={}){super(_e),this.type=Se.Response,this.body=void 0!==_e.body?_e.body:null}clone(_e={}){return new at({body:void 0!==_e.body?_e.body:this.body,headers:_e.headers||this.headers,status:void 0!==_e.status?_e.status:this.status,statusText:_e.statusText||this.statusText,url:_e.url||this.url||void 0})}}class ke extends He{constructor(_e){super(_e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${_e.url||"(unknown url)"}`:`Http failure response for ${_e.url||"(unknown url)"}: ${_e.status} ${_e.statusText}`,this.error=_e.error||null}}function Ee(dt,_e){return{body:_e,headers:dt.headers,context:dt.context,observe:dt.observe,params:dt.params,reportProgress:dt.reportProgress,responseType:dt.responseType,withCredentials:dt.withCredentials}}let xe=(()=>{class dt{constructor(Oe){this.handler=Oe}request(Oe,_t,Ye={}){let Wt;if(Oe instanceof Ce)Wt=Oe;else{let Ut,Tn;Ut=Ye.headers instanceof h?Ye.headers:new h(Ye.headers),Ye.params&&(Tn=Ye.params instanceof S?Ye.params:new S({fromObject:Ye.params})),Wt=new Ce(Oe,_t,void 0!==Ye.body?Ye.body:null,{headers:Ut,context:Ye.context,params:Tn,reportProgress:Ye.reportProgress,responseType:Ye.responseType||"json",withCredentials:Ye.withCredentials})}const Ht=(0,ce.of)(Wt).pipe((0,T.b)(Ut=>this.handler.handle(Ut)));if(Oe instanceof Ce||"events"===Ye.observe)return Ht;const _n=Ht.pipe((0,fe.h)(Ut=>Ut instanceof at));switch(Ye.observe||"body"){case"body":switch(Wt.responseType){case"arraybuffer":return _n.pipe((0,m.U)(Ut=>{if(null!==Ut.body&&!(Ut.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ut.body}));case"blob":return _n.pipe((0,m.U)(Ut=>{if(null!==Ut.body&&!(Ut.body instanceof Blob))throw new Error("Response is not a Blob.");return Ut.body}));case"text":return _n.pipe((0,m.U)(Ut=>{if(null!==Ut.body&&"string"!=typeof Ut.body)throw new Error("Response is not a string.");return Ut.body}));default:return _n.pipe((0,m.U)(Ut=>Ut.body))}case"response":return _n;default:throw new Error(`Unreachable: unhandled observe type ${Ye.observe}}`)}}delete(Oe,_t={}){return this.request("DELETE",Oe,_t)}get(Oe,_t={}){return this.request("GET",Oe,_t)}head(Oe,_t={}){return this.request("HEAD",Oe,_t)}jsonp(Oe,_t){return this.request("JSONP",Oe,{params:(new S).append(_t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Oe,_t={}){return this.request("OPTIONS",Oe,_t)}patch(Oe,_t,Ye={}){return this.request("PATCH",Oe,Ee(Ye,_t))}post(Oe,_t,Ye={}){return this.request("POST",Oe,Ee(Ye,_t))}put(Oe,_t,Ye={}){return this.request("PUT",Oe,Ee(Ye,_t))}}return dt.\u0275fac=function(Oe){return new(Oe||dt)(v.LFG(o))},dt.\u0275prov=v.Yz7({token:dt,factory:dt.\u0275fac}),dt})();function Le(dt,_e){return _e(dt)}function q(dt,_e){return(Oe,_t)=>_e.intercept(Oe,{handle:Ye=>dt(Ye,_t)})}const ae=new v.OlP("HTTP_INTERCEPTORS"),he=new v.OlP("HTTP_INTERCEPTOR_FNS");function Fe(){let dt=null;return(_e,Oe)=>(null===dt&&(dt=((0,v.f3M)(ae,{optional:!0})??[]).reduceRight(q,Le)),dt(_e,Oe))}let de=(()=>{class dt extends o{constructor(Oe,_t){super(),this.backend=Oe,this.injector=_t,this.chain=null}handle(Oe){if(null===this.chain){const _t=Array.from(new Set(this.injector.get(he)));this.chain=_t.reduceRight((Ye,Wt)=>function le(dt,_e,Oe){return(_t,Ye)=>Oe.runInContext(()=>_e(_t,Wt=>dt(Wt,Ye)))}(Ye,Wt,this.injector),Le)}return this.chain(Oe,_t=>this.backend.handle(_t))}}return dt.\u0275fac=function(Oe){return new(Oe||dt)(v.LFG(f),v.LFG(v.lqb))},dt.\u0275prov=v.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const Ve=/^\)\]\}',?\n/;let lt=(()=>{class dt{constructor(Oe){this.xhrFactory=Oe}handle(Oe){if("JSONP"===Oe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ue.y(_t=>{const Ye=this.xhrFactory.build();if(Ye.open(Oe.method,Oe.urlWithParams),Oe.withCredentials&&(Ye.withCredentials=!0),Oe.headers.forEach((un,hn)=>Ye.setRequestHeader(un,hn.join(","))),Oe.headers.has("Accept")||Ye.setRequestHeader("Accept","application/json, text/plain, */*"),!Oe.headers.has("Content-Type")){const un=Oe.detectContentTypeHeader();null!==un&&Ye.setRequestHeader("Content-Type",un)}if(Oe.responseType){const un=Oe.responseType.toLowerCase();Ye.responseType="json"!==un?un:"text"}const Wt=Oe.serializeBody();let Ht=null;const _n=()=>{if(null!==Ht)return Ht;const un=Ye.statusText||"OK",hn=new h(Ye.getAllResponseHeaders()),X=function Xe(dt){return"responseURL"in dt&&dt.responseURL?dt.responseURL:/^X-Request-URL:/m.test(dt.getAllResponseHeaders())?dt.getResponseHeader("X-Request-URL"):null}(Ye)||Oe.url;return Ht=new ot({headers:hn,status:Ye.status,statusText:un,url:X}),Ht},Ut=()=>{let{headers:un,status:hn,statusText:X,url:F}=_n(),I=null;204!==hn&&(I=typeof Ye.response>"u"?Ye.responseText:Ye.response),0===hn&&(hn=I?200:0);let W=hn>=200&&hn<300;if("json"===Oe.responseType&&"string"==typeof I){const me=I;I=I.replace(Ve,"");try{I=""!==I?JSON.parse(I):null}catch(ze){I=me,W&&(W=!1,I={error:ze,text:I})}}W?(_t.next(new at({body:I,headers:un,status:hn,statusText:X,url:F||void 0})),_t.complete()):_t.error(new ke({error:I,headers:un,status:hn,statusText:X,url:F||void 0}))},Tn=un=>{const{url:hn}=_n(),X=new ke({error:un,status:Ye.status||0,statusText:Ye.statusText||"Unknown Error",url:hn||void 0});_t.error(X)};let li=!1;const On=un=>{li||(_t.next(_n()),li=!0);let hn={type:Se.DownloadProgress,loaded:un.loaded};un.lengthComputable&&(hn.total=un.total),"text"===Oe.responseType&&Ye.responseText&&(hn.partialText=Ye.responseText),_t.next(hn)},Nn=un=>{let hn={type:Se.UploadProgress,loaded:un.loaded};un.lengthComputable&&(hn.total=un.total),_t.next(hn)};return Ye.addEventListener("load",Ut),Ye.addEventListener("error",Tn),Ye.addEventListener("timeout",Tn),Ye.addEventListener("abort",Tn),Oe.reportProgress&&(Ye.addEventListener("progress",On),null!==Wt&&Ye.upload&&Ye.upload.addEventListener("progress",Nn)),Ye.send(Wt),_t.next({type:Se.Sent}),()=>{Ye.removeEventListener("error",Tn),Ye.removeEventListener("abort",Tn),Ye.removeEventListener("load",Ut),Ye.removeEventListener("timeout",Tn),Oe.reportProgress&&(Ye.removeEventListener("progress",On),null!==Wt&&Ye.upload&&Ye.upload.removeEventListener("progress",Nn)),Ye.readyState!==Ye.DONE&&Ye.abort()}})}}return dt.\u0275fac=function(Oe){return new(Oe||dt)(v.LFG(d.JF))},dt.\u0275prov=v.Yz7({token:dt,factory:dt.\u0275fac}),dt})();const vt=new v.OlP("XSRF_ENABLED"),xt=new v.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),It=new v.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Lt{}let Gt=(()=>{class dt{constructor(Oe,_t,Ye){this.doc=Oe,this.platform=_t,this.cookieName=Ye,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Oe=this.doc.cookie||"";return Oe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,d.Mx)(Oe,this.cookieName),this.lastCookieString=Oe),this.lastToken}}return dt.\u0275fac=function(Oe){return new(Oe||dt)(v.LFG(d.K0),v.LFG(v.Lbi),v.LFG(xt))},dt.\u0275prov=v.Yz7({token:dt,factory:dt.\u0275fac}),dt})();function zt(dt,_e){const Oe=dt.url.toLowerCase();if(!(0,v.f3M)(vt)||"GET"===dt.method||"HEAD"===dt.method||Oe.startsWith("http://")||Oe.startsWith("https://"))return _e(dt);const _t=(0,v.f3M)(Lt).getToken(),Ye=(0,v.f3M)(It);return null!=_t&&!dt.headers.has(Ye)&&(dt=dt.clone({headers:dt.headers.set(Ye,_t)})),_e(dt)}var Qe=(()=>((Qe=Qe||{})[Qe.Interceptors=0]="Interceptors",Qe[Qe.LegacyInterceptors=1]="LegacyInterceptors",Qe[Qe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Qe[Qe.NoXsrfProtection=3]="NoXsrfProtection",Qe[Qe.JsonpSupport=4]="JsonpSupport",Qe[Qe.RequestsMadeViaParent=5]="RequestsMadeViaParent",Qe))();function je(dt,_e){return{\u0275kind:dt,\u0275providers:_e}}function pt(...dt){const _e=[xe,lt,de,{provide:o,useExisting:de},{provide:f,useExisting:lt},{provide:he,useValue:zt,multi:!0},{provide:vt,useValue:!0},{provide:Lt,useClass:Gt}];for(const Oe of dt)_e.push(...Oe.\u0275providers);return(0,v.MR2)(_e)}const Ie=new v.OlP("LEGACY_INTERCEPTOR_FN");let jn=(()=>{class dt{}return dt.\u0275fac=function(Oe){return new(Oe||dt)},dt.\u0275mod=v.oAB({type:dt}),dt.\u0275inj=v.cJS({providers:[pt(je(Qe.LegacyInterceptors,[{provide:Ie,useFactory:Fe},{provide:he,useExisting:Ie,multi:!0}]))]}),dt})()},8256:(Ft,Be,K)=>{"use strict";K.d(Be,{QbO:()=>X0,tb:()=>gg,AFp:()=>hg,ip1:()=>dg,CZH:()=>Al,hGG:()=>kb,z2F:()=>Pl,sBO:()=>yb,Sil:()=>J0,_Vd:()=>Aa,EJc:()=>K0,Xts:()=>lc,SBq:()=>Oa,lqb:()=>Io,qLn:()=>Pa,vpe:()=>Vs,XFs:()=>Qe,OlP:()=>xn,zs3:()=>Ro,ZZ4:()=>Ru,aQg:()=>ku,soG:()=>Ol,YKP:()=>hp,h0i:()=>fa,PXZ:()=>hb,R0b:()=>ts,FiY:()=>Go,Lbi:()=>Y0,g9A:()=>pg,Qsj:()=>vv,FYo:()=>Hd,JOm:()=>ks,tp0:()=>Ao,Rgc:()=>Ga,dDg:()=>lb,eoX:()=>wg,GfV:()=>jd,s_b:()=>Tl,ifc:()=>me,MMx:()=>lu,Lck:()=>XC,eFA:()=>Eg,G48:()=>vb,Gpc:()=>x,f3M:()=>Ut,$WT:()=>Di,MR2:()=>nv,_c5:()=>Rb,c2e:()=>q0,zSh:()=>hc,wAp:()=>an,vHH:()=>pe,lri:()=>Cg,rWj:()=>bg,D6c:()=>Fb,cg1:()=>eu,kL8:()=>Nf,dqk:()=>Bt,Z0I:()=>vt,CqO:()=>jh,QGY:()=>Gc,F4k:()=>Hh,RDi:()=>km,AaK:()=>l,qOj:()=>Lc,TTD:()=>$i,_Bn:()=>dp,jDz:()=>pp,xp6:()=>Xd,uIk:()=>Vc,Tol:()=>df,ekj:()=>Zc,Suo:()=>jp,Xpm:()=>ei,lG2:()=>nn,Yz7:()=>tt,cJS:()=>Xe,oAB:()=>be,Yjl:()=>$t,Y36:()=>Jo,_UZ:()=>Uc,GkF:()=>zc,BQk:()=>ml,ynx:()=>gl,qZA:()=>pl,TgZ:()=>fl,EpF:()=>Vh,n5z:()=>Nt,Ikx:()=>Jc,LFG:()=>Ht,$8M:()=>qt,$Z:()=>ah,NdJ:()=>Wc,CRH:()=>Up,kcU:()=>Y,O4$:()=>ho,oxw:()=>$h,ALo:()=>Ip,xi3:()=>Rp,Q6J:()=>Hc,MGl:()=>vl,DdM:()=>bp,VKq:()=>wp,WLB:()=>Sp,kEZ:()=>Dp,l5B:()=>Ep,rFY:()=>Tp,iGM:()=>Vp,MAs:()=>Bh,KtG:()=>dr,CHM:()=>Pr,oJD:()=>Td,LSH:()=>ac,P3R:()=>Md,Udp:()=>qc,YNc:()=>Nh,W1O:()=>$p,_uU:()=>yf,Oqu:()=>Qc,hij:()=>Cl,Gf:()=>Hp});var d=K(7579),v=K(727),ce=K(9751),Ue=K(8189),T=K(8421),fe=K(515),m=K(7669),o=K(2076),h=K(930),r=K(4482);function s(e,t,...n){if(!0===t)return void e();if(!1===t)return;const i=new h.Hp({next:()=>{i.unsubscribe(),e()}});return(0,T.Xf)(t(...n)).subscribe(i)}function u(e){for(let t in e)if(e[t]===u)return t;throw Error("Could not find renamed property on target object.")}function p(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function l(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(l).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function y(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const S=u({__forward_ref__:u});function x(e){return e.__forward_ref__=x,e.toString=function(){return l(this())},e}function A(e){return O(e)?e():e}function O(e){return"function"==typeof e&&e.hasOwnProperty(S)&&e.__forward_ref__===x}function j(e){return e&&!!e.\u0275providers}const ue="https://g.co/ng/security#xss";class pe extends Error{constructor(t,n){super(Ce(t,n)),this.code=t}}function Ce(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function Se(e){return"string"==typeof e?e:null==e?"":String(e)}function Ee(e,t){throw new pe(-201,!1)}function rt(e,t){null==e&&function Ke(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function tt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Xe(e){return{providers:e.providers||[],imports:e.imports||[]}}function lt(e){return Mt(e,Lt)||Mt(e,zt)}function vt(e){return null!==lt(e)}function Mt(e,t){return e.hasOwnProperty(t)?e[t]:null}function It(e){return e&&(e.hasOwnProperty(Gt)||e.hasOwnProperty(mt))?e[Gt]:null}const Lt=u({\u0275prov:u}),Gt=u({\u0275inj:u}),zt=u({ngInjectableDef:u}),mt=u({ngInjectorDef:u});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let je;function ye(e){const t=je;return je=e,t}function Ie(e,t,n){const i=lt(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Qe.Optional?null:void 0!==t?t:void Ee(l(e))}const Bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wi={},jn="__NG_DI_FLAG__",Yt="ngTempTokenPath",Si="ngTokenPath",dt=/\n/gm,_e="\u0275",Oe="__source";let _t;function Ye(e){const t=_t;return _t=e,t}function Wt(e,t=Qe.Default){if(void 0===_t)throw new pe(-203,!1);return null===_t?Ie(e,void 0,t):_t.get(e,t&Qe.Optional?null:void 0,t)}function Ht(e,t=Qe.Default){return(function pt(){return je}()||Wt)(A(e),t)}function Ut(e,t=Qe.Default){return Ht(e,Tn(t))}function Tn(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function li(e){const t=[];for(let n=0;n<e.length;n++){const i=A(e[n]);if(Array.isArray(i)){if(0===i.length)throw new pe(900,!1);let c,g=Qe.Default;for(let w=0;w<i.length;w++){const M=i[w],L=Nn(M);"number"==typeof L?-1===L?c=M.token:g|=L:c=M}t.push(Ht(c,g))}else t.push(Ht(i))}return t}function On(e,t){return e[jn]=t,e.prototype[jn]=t,e}function Nn(e){return e[jn]}function X(e){return{toString:e}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),me=(()=>{return(e=me||(me={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",me;var e})();const ze={},st=[],Xt=u({\u0275cmp:u}),ln=u({\u0275dir:u}),Xn=u({\u0275pipe:u}),Pn=u({\u0275mod:u}),ci=u({\u0275fac:u}),Gn=u({__NG_ELEMENT_ID__:u});let yi=0;function ei(e){return X(()=>{const n=!0===e.standalone,i={},c={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||st,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||me.Emulated,id:"c"+yi++,styles:e.styles||st,_:null,setInput:null,schemas:e.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=e.dependencies,w=e.features;return c.inputs=bt(e.inputs,i),c.outputs=bt(e.outputs),w&&w.forEach(M=>M(c)),c.directiveDefs=g?()=>("function"==typeof g?g():g).map(se).filter(J):null,c.pipeDefs=g?()=>("function"==typeof g?g():g).map(pn).filter(J):null,c})}function se(e){return Et(e)||rn(e)}function J(e){return null!==e}function be(e){return X(()=>({type:e.type,bootstrap:e.bootstrap||st,declarations:e.declarations||st,imports:e.imports||st,exports:e.exports||st,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function bt(e,t){if(null==e)return ze;const n={};for(const i in e)if(e.hasOwnProperty(i)){let c=e[i],g=c;Array.isArray(c)&&(g=c[1],c=c[0]),n[c]=i,t&&(t[c]=g)}return n}const nn=ei;function $t(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Et(e){return e[Xt]||null}function rn(e){return e[ln]||null}function pn(e){return e[Xn]||null}function Di(e){const t=Et(e)||rn(e)||pn(e);return null!==t&&t.standalone}function Wn(e,t){const n=e[Pn]||null;if(!n&&!0===t)throw new Error(`Type ${l(e)} does not have '\u0275mod' property.`);return n}const Kn=0,At=1,Zt=2,Hn=3,qn=4,Zn=5,Un=6,Pi=7,Mn=8,ui=9,Ki=10,Qt=11,ir=12,di=13,ns=14,ni=15,kn=16,Mi=17,Vi=18,Ii=19,zi=20,Nr=21,An=22,is=1,rs=2,yr=7,Vr=8,rr=9,In=10;function Qn(e){return Array.isArray(e)&&"object"==typeof e[is]}function hi(e){return Array.isArray(e)&&!0===e[is]}function _r(e){return 0!=(4&e.flags)}function sr(e){return e.componentOffset>-1}function ii(e){return 1==(1&e.flags)}function fi(e){return null!==e.template}function Hr(e){return 0!=(256&e[Zt])}function Ri(e,t){return e.hasOwnProperty(ci)?e[ci]:null}class Yr{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function $i(){return ls}function ls(e){return e.type.prototype.ngOnChanges&&(e.setInput=cs),js}function js(){const e=wr(this),t=e?.current;if(t){const n=e.previous;if(n===ze)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function cs(e,t,n,i){const c=this.declaredInputs[n],g=wr(e)||function Xr(e,t){return e[or]=t}(e,{previous:ze,current:null}),w=g.current||(g.current={}),M=g.previous,L=M[c];w[c]=new Yr(L&&L.currentValue,t,M===ze),e[i]=t}$i.ngInherit=!0;const or="__ngSimpleChanges__";function wr(e){return e[or]||null}const ki=function(e,t,n){},Or="svg";function ti(e){for(;Array.isArray(e);)e=e[Kn];return e}function Zr(e,t){return ti(t[e])}function zn(e,t){return ti(t[e.index])}function Qi(e,t){return e.data[t]}function lr(e,t){return e[t]}function Ei(e,t){const n=t[e];return Qn(n)?n:n[Kn]}function cr(e){return 64==(64&e[Zt])}function ur(e,t){return null==t?null:e[t]}function Sr(e){e[Vi]=0}function Dr(e,t){e[Zn]+=t;let n=e,i=e[Hn];for(;null!==i&&(1===t&&1===n[Zn]||-1===t&&0===n[Zn]);)i[Zn]+=t,n=i,i=i[Hn]}const sn={lFrame:Ws(null),bindingsEnabled:!0};function Rt(){return sn.bindingsEnabled}function gt(){return sn.lFrame.lView}function gn(){return sn.lFrame.tView}function Pr(e){return sn.lFrame.contextLView=e,e[Mn]}function dr(e){return sn.lFrame.contextLView=null,e}function Sn(){let e=hr();for(;null!==e&&64===e.type;)e=e.parent;return e}function hr(){return sn.lFrame.currentTNode}function _i(e,t){const n=sn.lFrame;n.currentTNode=e,n.isParent=t}function io(){return sn.lFrame.isParent}function ro(){sn.lFrame.isParent=!1}function pi(){const e=sn.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Kr(){return sn.lFrame.bindingIndex++}function Xi(e){const t=sn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function zs(e,t){const n=sn.lFrame;n.bindingIndex=n.bindingRootIndex=e,Gs(t)}function Gs(e){sn.lFrame.currentDirectiveIndex=e}function oo(){return sn.lFrame.currentQueryIndex}function Tr(e){sn.lFrame.currentQueryIndex=e}function ao(e){const t=e[At];return 2===t.type?t.declTNode:1===t.type?e[Un]:null}function lo(e,t,n){if(n&Qe.SkipSelf){let c=t,g=e;for(;!(c=c.parent,null!==c||n&Qe.Host||(c=ao(g),null===c||(g=g[ni],10&c.type))););if(null===c)return!1;t=c,e=g}const i=sn.lFrame=hs();return i.currentTNode=t,i.lView=e,!0}function xr(e){const t=hs(),n=e[At];sn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hs(){const e=sn.lFrame,t=null===e?null:e.child;return null===t?Ws(e):t}function Ws(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function fs(){const e=sn.lFrame;return sn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const co=fs;function uo(){const e=fs();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function gi(){return sn.lFrame.selectedIndex}function Ir(e){sn.lFrame.selectedIndex=e}function $n(){const e=sn.lFrame;return Qi(e.tView,e.selectedIndex)}function ho(){sn.lFrame.currentNamespace=Or}function Y(){!function B(){sn.lFrame.currentNamespace=null}()}function it(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const g=e.data[n].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:M,ngAfterViewInit:L,ngAfterViewChecked:G,ngOnDestroy:te}=g;w&&(e.contentHooks||(e.contentHooks=[])).push(-n,w),M&&((e.contentHooks||(e.contentHooks=[])).push(n,M),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,M)),L&&(e.viewHooks||(e.viewHooks=[])).push(-n,L),G&&((e.viewHooks||(e.viewHooks=[])).push(n,G),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,G)),null!=te&&(e.destroyHooks||(e.destroyHooks=[])).push(n,te)}}function ht(e,t,n){Dn(e,t,3,n)}function kt(e,t,n,i){(3&e[Zt])===n&&Dn(e,t,n,i)}function bn(e,t){let n=e[Zt];(3&n)===t&&(n&=2047,n+=1,e[Zt]=n)}function Dn(e,t,n,i){const g=i??-1,w=t.length-1;let M=0;for(let L=void 0!==i?65535&e[Vi]:0;L<w;L++)if("number"==typeof t[L+1]){if(M=t[L],null!=i&&M>=i)break}else t[L]<0&&(e[Vi]+=65536),(M<g||-1==g)&&(Fn(e,n,t,L),e[Vi]=(4294901760&e[Vi])+L+2),L++}function Fn(e,t,n,i){const c=n[i]<0,g=n[i+1],M=e[c?-n[i]:n[i]];if(c){if(e[Zt]>>11<e[Vi]>>16&&(3&e[Zt])===t){e[Zt]+=2048,ki(4,M,g);try{g.call(M)}finally{ki(5,M,g)}}}else{ki(4,M,g);try{g.call(M)}finally{ki(5,M,g)}}}const fn=-1;class Yn{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function As(e,t,n){let i=0;for(;i<n.length;){const c=n[i];if("number"==typeof c){if(0!==c)break;i++;const g=n[i++],w=n[i++],M=n[i++];e.setAttribute(t,w,M,g)}else{const g=c,w=n[++i];ps(g)?e.setProperty(t,g,w):e.setAttribute(t,g,w),i++}}return i}function wo(e){return 3===e||4===e||6===e}function ps(e){return 64===e.charCodeAt(0)}function gs(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const c=t[i];"number"==typeof c?n=c:0===n||ma(e,n,c,null,-1===n||2===n?t[++i]:null)}}return e}function ma(e,t,n,i,c){let g=0,w=e.length;if(-1===t)w=-1;else for(;g<e.length;){const M=e[g++];if("number"==typeof M){if(M===t){w=-1;break}if(M>t){w=g-1;break}}}for(;g<e.length;){const M=e[g];if("number"==typeof M)break;if(M===n){if(null===i)return void(null!==c&&(e[g+1]=c));if(i===e[g+1])return void(e[g+2]=c)}g++,null!==i&&g++,null!==c&&g++}-1!==w&&(e.splice(w,0,t),g=w+1),e.splice(g++,0,n),null!==i&&e.splice(g++,0,i),null!==c&&e.splice(g++,0,c)}function Uo(e){return e!==fn}function Os(e){return 32767&e}function fo(e,t){let n=function So(e){return e>>16}(e),i=t;for(;n>0;)i=i[ni],n--;return i}let po=!0;function Do(e){const t=po;return po=e,t}const va=255,zo=5;let ya=0;const qi={};function go(e,t){const n=ms(e,t);if(-1!==n)return n;const i=t[At];i.firstCreatePass&&(e.injectorIndex=t.length,$s(i.data,e),$s(t,null),$s(i.blueprint,null));const c=Eo(e,t),g=e.injectorIndex;if(Uo(c)){const w=Os(c),M=fo(c,t),L=M[At].data;for(let G=0;G<8;G++)t[g+G]=M[w+G]|L[w+G]}return t[g+8]=c,g}function $s(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ms(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Eo(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,c=t;for(;null!==c;){if(i=Jt(c),null===i)return fn;if(n++,c=c[ni],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return fn}function To(e,t,n){!function _a(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Gn)&&(i=n[Gn]),null==i&&(i=n[Gn]=ya++);const c=i&va;t.data[e+(c>>zo)]|=1<<c}(e,t,n)}function Fi(e,t,n){if(n&Qe.Optional||void 0!==e)return e;Ee()}function H(e,t,n,i){if(n&Qe.Optional&&void 0===i&&(i=null),!(n&(Qe.Self|Qe.Host))){const c=e[ui],g=ye(void 0);try{return c?c.get(t,i,n&Qe.Optional):Ie(t,i,n&Qe.Optional)}finally{ye(g)}}return Fi(i,0,n)}function C(e,t,n,i=Qe.Default,c){if(null!==e){if(1024&t[Zt]){const w=function yn(e,t,n,i,c){let g=e,w=t;for(;null!==g&&null!==w&&1024&w[Zt]&&!(256&w[Zt]);){const M=_(g,w,n,i|Qe.Self,qi);if(M!==qi)return M;let L=g.parent;if(!L){const G=w[Nr];if(G){const te=G.get(n,qi,i);if(te!==qi)return te}L=Jt(w),w=w[ni]}g=L}return c}(e,t,n,i,qi);if(w!==qi)return w}const g=_(e,t,n,i,qi);if(g!==qi)return g}return H(t,n,i,c)}function _(e,t,n,i,c){const g=function we(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Gn)?e[Gn]:void 0;return"number"==typeof t?t>=0?t&va:Tt:t}(n);if("function"==typeof g){if(!lo(t,e,i))return i&Qe.Host?Fi(c,0,i):H(t,n,i,c);try{const w=g(i);if(null!=w||i&Qe.Optional)return w;Ee()}finally{co()}}else if("number"==typeof g){let w=null,M=ms(e,t),L=fn,G=i&Qe.Host?t[kn][Un]:null;for((-1===M||i&Qe.SkipSelf)&&(L=-1===M?Eo(e,t):t[M+8],L!==fn&&Ze(i,!1)?(w=t[At],M=Os(L),t=fo(L,t)):M=-1);-1!==M;){const te=t[At];if(Te(g,M,te.data)){const ge=R(M,t,n,w,i,G);if(ge!==qi)return ge}L=t[M+8],L!==fn&&Ze(i,t[At].data[M+8]===G)&&Te(g,M,t)?(w=te,M=Os(L),t=fo(L,t)):M=-1}}return c}function R(e,t,n,i,c,g){const w=t[At],M=w.data[e+8],te=$(M,w,n,null==i?sr(M)&&po:i!=w&&0!=(3&M.type),c&Qe.Host&&g===M);return null!==te?ie(t,w,te,M):qi}function $(e,t,n,i,c){const g=e.providerIndexes,w=t.data,M=1048575&g,L=e.directiveStart,te=g>>20,Ae=c?M+te:e.directiveEnd;for(let Ge=i?M:M+te;Ge<Ae;Ge++){const ft=w[Ge];if(Ge<L&&n===ft||Ge>=L&&ft.type===n)return Ge}if(c){const Ge=w[L];if(Ge&&fi(Ge)&&Ge.type===n)return L}return null}function ie(e,t,n,i){let c=e[n];const g=t.data;if(function Vn(e){return e instanceof Yn}(c)){const w=c;w.resolving&&function ot(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,`Circular dependency in DI detected for ${e}${n}`)}(function He(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Se(e)}(g[n]));const M=Do(w.canSeeViewProviders);w.resolving=!0;const L=w.injectImpl?ye(w.injectImpl):null;lo(e,i,Qe.Default);try{c=e[n]=w.factory(void 0,g,e,i),t.firstCreatePass&&n>=i.directiveStart&&function ve(e,t,n){const{ngOnChanges:i,ngOnInit:c,ngDoCheck:g}=t.type.prototype;if(i){const w=ls(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,w),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,w)}c&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,c),g&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,g),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,g))}(n,g[n],t)}finally{null!==L&&ye(L),Do(M),w.resolving=!1,co()}}return c}function Te(e,t,n){return!!(n[t+(e>>zo)]&1<<e)}function Ze(e,t){return!(e&Qe.Self||e&Qe.Host&&t)}class ut{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return C(this._tNode,this._lView,t,Tn(i),n)}}function Tt(){return new ut(Sn(),gt())}function Nt(e){return X(()=>{const t=e.prototype.constructor,n=t[ci]||cn(t),i=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==i;){const g=c[ci]||cn(c);if(g&&g!==n)return g;c=Object.getPrototypeOf(c)}return g=>new g})}function cn(e){return O(e)?()=>{const t=cn(A(e));return t&&t()}:Ri(e)}function Jt(e){const t=e[At],n=t.type;return 2===n?t.declTNode:1===n?e[Un]:null}function qt(e){return function Ps(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const i=n.length;let c=0;for(;c<i;){const g=n[c];if(wo(g))break;if(0===g)c+=2;else if("number"==typeof g)for(c++;c<i&&"string"==typeof n[c];)c++;else{if(g===t)return n[c+1];c+=2}}}return null}(Sn(),e)}const Rn="__parameters__";function er(e,t,n){return X(()=>{const i=function ri(e){return function(...n){if(e){const i=e(...n);for(const c in i)this[c]=i[c]}}}(t);function c(...g){if(this instanceof c)return i.apply(this,g),this;const w=new c(...g);return M.annotation=w,M;function M(L,G,te){const ge=L.hasOwnProperty(Rn)?L[Rn]:Object.defineProperty(L,Rn,{value:[]})[Rn];for(;ge.length<=te;)ge.push(null);return(ge[te]=ge[te]||[]).push(w),L}}return n&&(c.prototype=Object.create(n.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}class xn{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=tt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ln(e,t){e.forEach(n=>Array.isArray(n)?Ln(n,t):t(n))}function Mo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function qs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function P(e,t,n){let i=Q(e,t);return i>=0?e[1|i]=n:(i=~i,function E(e,t,n,i){let c=e.length;if(c==t)e.push(n,i);else if(1===c)e.push(i,e[0]),e[0]=n;else{for(c--,e.push(e[c-1],e[c]);c>t;)e[c]=e[c-2],c--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function z(e,t){const n=Q(e,t);if(n>=0)return e[1|n]}function Q(e,t){return function Pe(e,t,n){let i=0,c=e.length>>n;for(;c!==i;){const g=i+(c-i>>1),w=e[g<<n];if(t===w)return g<<n;w>t?c=g:i=g+1}return~(c<<n)}(e,t,1)}const Go=On(er("Optional"),8),Ao=On(er("SkipSelf"),4);var ks=(()=>((ks=ks||{})[ks.Important=1]="Important",ks[ks.DashCase=2]="DashCase",ks))();const Vl=new Map;let im=0;const jl="__ngContext__";function tr(e,t){Qn(t)?(e[jl]=t[zi],function sm(e){Vl.set(e[zi],e)}(t)):e[jl]=t}let Ul;function zl(e,t){return Ul(e,t)}function Da(e){const t=e[Hn];return hi(t)?t[Hn]:t}function Gl(e){return Ju(e[di])}function Wl(e){return Ju(e[qn])}function Ju(e){for(;null!==e&&!hi(e);)e=e[qn];return e}function Yo(e,t,n,i,c){if(null!=i){let g,w=!1;hi(i)?g=i:Qn(i)&&(w=!0,i=i[Kn]);const M=ti(i);0===e&&null!==n?null==c?sd(t,n,M):Oo(t,n,M,c||null,!0):1===e&&null!==n?Oo(t,n,M,c||null,!0):2===e?function Ql(e,t,n){const i=qa(e,t);i&&function Em(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,M,w):3===e&&t.destroyNode(M),null!=g&&function Mm(e,t,n,i,c){const g=n[yr];g!==ti(n)&&Yo(t,e,i,g,c);for(let M=In;M<n.length;M++){const L=n[M];Ea(L[At],L,e,t,i,g)}}(t,e,g,n,c)}}function Yl(e,t,n){return e.createElement(t,n)}function td(e,t){const n=e[rr],i=n.indexOf(t),c=t[Hn];512&t[Zt]&&(t[Zt]&=-513,Dr(c,-1)),n.splice(i,1)}function Xl(e,t){if(e.length<=In)return;const n=In+t,i=e[n];if(i){const c=i[Mi];null!==c&&c!==e&&td(c,i),t>0&&(e[n-1][qn]=i[qn]);const g=qs(e,In+t);!function vm(e,t){Ea(e,t,t[Qt],2,null,null),t[Kn]=null,t[Un]=null}(i[At],i);const w=g[Ii];null!==w&&w.detachView(g[At]),i[Hn]=null,i[qn]=null,i[Zt]&=-65}return i}function nd(e,t){if(!(128&t[Zt])){const n=t[Qt];n.destroyNode&&Ea(e,t,n,3,null,null),function Cm(e){let t=e[di];if(!t)return ql(e[At],e);for(;t;){let n=null;if(Qn(t))n=t[di];else{const i=t[In];i&&(n=i)}if(!n){for(;t&&!t[qn]&&t!==e;)Qn(t)&&ql(t[At],t),t=t[Hn];null===t&&(t=e),Qn(t)&&ql(t[At],t),n=t&&t[qn]}t=n}}(t)}}function ql(e,t){if(!(128&t[Zt])){t[Zt]&=-65,t[Zt]|=128,function Dm(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const c=t[n[i]];if(!(c instanceof Yn)){const g=n[i+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const M=c[g[w]],L=g[w+1];ki(4,M,L);try{L.call(M)}finally{ki(5,M,L)}}else{ki(4,c,g);try{g.call(c)}finally{ki(5,c,g)}}}}}(e,t),function Sm(e,t){const n=e.cleanup,i=t[Pi];let c=-1;if(null!==n)for(let g=0;g<n.length-1;g+=2)if("string"==typeof n[g]){const w=n[g+3];w>=0?i[c=w]():i[c=-w].unsubscribe(),g+=2}else{const w=i[c=n[g+1]];n[g].call(w)}if(null!==i){for(let g=c+1;g<i.length;g++)(0,i[g])();t[Pi]=null}}(e,t),1===t[At].type&&t[Qt].destroy();const n=t[Mi];if(null!==n&&hi(t[Hn])){n!==t[Hn]&&td(n,t);const i=t[Ii];null!==i&&i.detachView(e)}!function om(e){Vl.delete(e[zi])}(t)}}function id(e,t,n){return function rd(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[Kn];{const{componentOffset:c}=i;if(c>-1){const{encapsulation:g}=e.data[i.directiveStart+c];if(g===me.None||g===me.Emulated)return null}return zn(i,n)}}(e,t.parent,n)}function Oo(e,t,n,i,c){e.insertBefore(t,n,i,c)}function sd(e,t,n){e.appendChild(t,n)}function od(e,t,n,i,c){null!==i?Oo(e,t,n,i,c):sd(e,t,n)}function qa(e,t){return e.parentNode(t)}let Zl,Qa,tc,Ja,cd=function ld(e,t,n){return 40&e.type?zn(e,n):null};function Za(e,t,n,i){const c=id(e,i,t),g=t[Qt],M=function ad(e,t,n){return cd(e,t,n)}(i.parent||t[Un],i,t);if(null!=c)if(Array.isArray(n))for(let L=0;L<n.length;L++)od(g,c,n[L],M,!1);else od(g,c,n,M,!1);void 0!==Zl&&Zl(g,i,t,n,c)}function Ka(e,t){if(null!==t){const n=t.type;if(3&n)return zn(t,e);if(4&n)return Kl(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return Ka(e,i);{const c=e[t.index];return hi(c)?Kl(-1,c):ti(c)}}if(32&n)return zl(t,e)()||ti(e[t.index]);{const i=dd(e,t);return null!==i?Array.isArray(i)?i[0]:Ka(Da(e[kn]),i):Ka(e,t.next)}}return null}function dd(e,t){return null!==t?e[kn][Un].projection[t.projection]:null}function Kl(e,t){const n=In+e+1;if(n<t.length){const i=t[n],c=i[At].firstChild;if(null!==c)return Ka(i,c)}return t[yr]}function Jl(e,t,n,i,c,g,w){for(;null!=n;){const M=i[n.index],L=n.type;if(w&&0===t&&(M&&tr(ti(M),i),n.flags|=2),32!=(32&n.flags))if(8&L)Jl(e,t,n.child,i,c,g,!1),Yo(t,e,c,M,g);else if(32&L){const G=zl(n,i);let te;for(;te=G();)Yo(t,e,c,te,g);Yo(t,e,c,M,g)}else 16&L?hd(e,t,i,n,c,g):Yo(t,e,c,M,g);n=w?n.projectionNext:n.next}}function Ea(e,t,n,i,c,g){Jl(n,i,e.firstChild,t,c,g,!1)}function hd(e,t,n,i,c,g){const w=n[kn],L=w[Un].projection[i.projection];if(Array.isArray(L))for(let G=0;G<L.length;G++)Yo(t,e,c,L[G],g);else Jl(e,t,L,w[Hn],c,g,!0)}function fd(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function pd(e,t,n){const{mergedAttrs:i,classes:c,styles:g}=n;null!==i&&As(e,t,i),null!==c&&fd(e,t,c),null!==g&&function Om(e,t,n){e.setAttribute(t,"style",n)}(e,t,g)}function Xo(e){return function ec(){if(void 0===Qa&&(Qa=null,Bt.trustedTypes))try{Qa=Bt.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Qa}()?.createHTML(e)||e}function km(e){tc=e}function nc(){if(void 0===Ja&&(Ja=null,Bt.trustedTypes))try{Ja=Bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ja}function md(e){return nc()?.createHTML(e)||e}function yd(e){return nc()?.createScriptURL(e)||e}class _d{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ue})`}}function mo(e){return e instanceof _d?e.changingThisBreaksApplicationSecurity:e}function Ta(e,t){const n=function Hm(e){return e instanceof _d&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${ue})`)}return n===t}class jm{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Xo(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class Um{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Xo(t),n}}const Gm=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ic(e){return(e=String(e)).match(Gm)?e:"unsafe:"+e}function Zs(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function xa(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const bd=Zs("area,br,col,hr,img,wbr"),wd=Zs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Sd=Zs("rp,rt"),rc=xa(bd,xa(wd,Zs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xa(Sd,Zs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xa(Sd,wd)),sc=Zs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dd=xa(sc,Zs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wm=Zs("script,style,template");class $m{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let c=this.checkClobberedElement(n,n.nextSibling);if(c){n=c;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!rc.hasOwnProperty(n))return this.sanitizedSomething=!0,!Wm.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=t.attributes;for(let c=0;c<i.length;c++){const g=i.item(c),w=g.name,M=w.toLowerCase();if(!Dd.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let L=g.value;sc[M]&&(L=ic(L)),this.buf.push(" ",w,'="',Ed(L),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();rc.hasOwnProperty(n)&&!bd.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Ed(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Ym=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xm=/([^\#-~ |!])/g;function Ed(e){return e.replace(/&/g,"&amp;").replace(Ym,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Xm,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let el;function oc(e){return"content"in e&&function Zm(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Oi=(()=>((Oi=Oi||{})[Oi.NONE=0]="NONE",Oi[Oi.HTML=1]="HTML",Oi[Oi.STYLE=2]="STYLE",Oi[Oi.SCRIPT=3]="SCRIPT",Oi[Oi.URL=4]="URL",Oi[Oi.RESOURCE_URL=5]="RESOURCE_URL",Oi))();function Td(e){const t=Ma();return t?md(t.sanitize(Oi.HTML,e)||""):Ta(e,"HTML")?md(mo(e)):function qm(e,t){let n=null;try{el=el||function Cd(e){const t=new Um(e);return function zm(){try{return!!(new window.DOMParser).parseFromString(Xo(""),"text/html")}catch{return!1}}()?new jm(t):t}(e);let i=t?String(t):"";n=el.getInertBodyElement(i);let c=5,g=i;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,i=g,g=n.innerHTML,n=el.getInertBodyElement(i)}while(i!==g);return Xo((new $m).sanitizeChildren(oc(n)||n))}finally{if(n){const i=oc(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(function gd(){return void 0!==tc?tc:typeof document<"u"?document:void 0}(),Se(e))}function ac(e){const t=Ma();return t?t.sanitize(Oi.URL,e)||"":Ta(e,"URL")?mo(e):ic(Se(e))}function xd(e){const t=Ma();if(t)return yd(t.sanitize(Oi.RESOURCE_URL,e)||"");if(Ta(e,"ResourceURL"))return yd(mo(e));throw new pe(904,!1)}function Md(e,t,n){return function tv(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?xd:ac}(t,n)(e)}function Ma(){const e=gt();return e&&e[ir]}const lc=new xn("ENVIRONMENT_INITIALIZER"),Ad=new xn("INJECTOR",-1),Od=new xn("INJECTOR_DEF_TYPES");class Pd{get(t,n=wi){if(n===wi){const i=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw i.name="NullInjectorError",i}return n}}function nv(e){return{\u0275providers:e}}function iv(...e){return{\u0275providers:Id(0,e),\u0275fromNgModule:!0}}function Id(e,...t){const n=[],i=new Set;let c;return Ln(t,g=>{const w=g;cc(w,n,[],i)&&(c||(c=[]),c.push(w))}),void 0!==c&&Rd(c,n),n}function Rd(e,t){for(let n=0;n<e.length;n++){const{providers:c}=e[n];uc(c,g=>{t.push(g)})}}function cc(e,t,n,i){if(!(e=A(e)))return!1;let c=null,g=It(e);const w=!g&&Et(e);if(g||w){if(w&&!w.standalone)return!1;c=e}else{const L=e.ngModule;if(g=It(L),!g)return!1;c=L}const M=i.has(c);if(w){if(M)return!1;if(i.add(c),w.dependencies){const L="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const G of L)cc(G,t,n,i)}}else{if(!g)return!1;{if(null!=g.imports&&!M){let G;i.add(c);try{Ln(g.imports,te=>{cc(te,t,n,i)&&(G||(G=[]),G.push(te))})}finally{}void 0!==G&&Rd(G,t)}if(!M){const G=Ri(c)||(()=>new c);t.push({provide:c,useFactory:G,deps:st},{provide:Od,useValue:c,multi:!0},{provide:lc,useValue:()=>Ht(c),multi:!0})}const L=g.providers;null==L||M||uc(L,te=>{t.push(te)})}}return c!==e&&void 0!==e.providers}function uc(e,t){for(let n of e)j(n)&&(n=n.\u0275providers),Array.isArray(n)?uc(n,t):t(n)}const rv=u({provide:String,useValue:u});function dc(e){return null!==e&&"object"==typeof e&&rv in e}function Po(e){return"function"==typeof e}const hc=new xn("Set Injector scope."),tl={},ov={};let fc;function nl(){return void 0===fc&&(fc=new Pd),fc}class Io{}class Ld extends Io{get destroyed(){return this._destroyed}constructor(t,n,i,c){super(),this.parent=n,this.source=i,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gc(t,w=>this.processProvider(w)),this.records.set(Ad,qo(void 0,this)),c.has("environment")&&this.records.set(Io,qo(void 0,this));const g=this.records.get(hc);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Od.multi,st,Qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Ye(this),i=ye(void 0);try{return t()}finally{Ye(n),ye(i)}}get(t,n=wi,i=Qe.Default){this.assertNotDestroyed(),i=Tn(i);const c=Ye(this),g=ye(void 0);try{if(!(i&Qe.SkipSelf)){let M=this.records.get(t);if(void 0===M){const L=function dv(e){return"function"==typeof e||"object"==typeof e&&e instanceof xn}(t)&&lt(t);M=L&&this.injectableDefInScope(L)?qo(pc(t),tl):null,this.records.set(t,M)}if(null!=M)return this.hydrate(t,M)}return(i&Qe.Self?nl():this.parent).get(t,n=i&Qe.Optional&&n===wi?null:n)}catch(w){if("NullInjectorError"===w.name){if((w[Yt]=w[Yt]||[]).unshift(l(t)),c)throw w;return function un(e,t,n,i){const c=e[Yt];throw t[Oe]&&c.unshift(t[Oe]),e.message=function hn(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==_e?e.slice(2):e;let c=l(t);if(Array.isArray(t))c=t.map(l).join(" -> ");else if("object"==typeof t){let g=[];for(let w in t)if(t.hasOwnProperty(w)){let M=t[w];g.push(w+":"+("string"==typeof M?JSON.stringify(M):l(M)))}c=`{${g.join(", ")}}`}return`${n}${i?"("+i+")":""}[${c}]: ${e.replace(dt,"\n  ")}`}("\n"+e.message,c,n,i),e[Si]=c,e[Yt]=null,e}(w,t,"R3InjectorError",this.source)}throw w}finally{ye(g),Ye(c)}}resolveInjectorInitializers(){const t=Ye(this),n=ye(void 0);try{const i=this.get(lc.multi,st,Qe.Self);for(const c of i)c()}finally{Ye(t),ye(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(l(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(t){let n=Po(t=A(t))?t:A(t&&t.provide);const i=function lv(e){return dc(e)?qo(void 0,e.useValue):qo(Nd(e),tl)}(t);if(Po(t)||!0!==t.multi)this.records.get(n);else{let c=this.records.get(n);c||(c=qo(void 0,tl,!0),c.factory=()=>li(c.multi),this.records.set(n,c)),n=t,c.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===tl&&(n.value=ov,n.value=n.factory()),"object"==typeof n.value&&n.value&&function uv(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=A(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function pc(e){const t=lt(e),n=null!==t?t.factory:Ri(e);if(null!==n)return n;if(e instanceof xn)throw new pe(204,!1);if(e instanceof Function)return function av(e){const t=e.length;if(t>0)throw function oi(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}(t,"?"),new pe(204,!1);const n=function xt(e){const t=e&&(e[Lt]||e[zt]);return t?(function nt(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),t):null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new pe(204,!1)}function Nd(e,t,n){let i;if(Po(e)){const c=A(e);return Ri(c)||pc(c)}if(dc(e))i=()=>A(e.useValue);else if(function Fd(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...li(e.deps||[]));else if(function kd(e){return!(!e||!e.useExisting)}(e))i=()=>Ht(A(e.useExisting));else{const c=A(e&&(e.useClass||e.provide));if(!function cv(e){return!!e.deps}(e))return Ri(c)||pc(c);i=()=>new c(...li(e.deps))}return i}function qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function gc(e,t){for(const n of e)Array.isArray(n)?gc(n,t):n&&j(n)?gc(n.\u0275providers,t):t(n)}class hv{}class Bd{}class pv{resolveComponentFactory(t){throw function fv(e){const t=Error(`No component factory found for ${l(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Aa=(()=>{class e{}return e.NULL=new pv,e})();function gv(){return Zo(Sn(),gt())}function Zo(e,t){return new Oa(zn(e,t))}let Oa=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=gv,e})();function mv(e){return e instanceof Oa?e.nativeElement:e}class Hd{}let vv=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function yv(){const e=gt(),n=Ei(Sn().index,e);return(Qn(n)?n:e)[Qt]}(),e})(),_v=(()=>{class e{}return e.\u0275prov=tt({token:e,providedIn:"root",factory:()=>null}),e})();class jd{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Cv=new jd("15.2.0"),mc={},vc="ngOriginalError";function yc(e){return e[vc]}class Pa{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&yc(t);for(;n&&yc(n);)n=yc(n);return n||null}}function Ks(e){return e instanceof Function?e():e}function zd(e,t,n){let i=e.length;for(;;){const c=e.indexOf(t,n);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const g=t.length;if(c+g===i||e.charCodeAt(c+g)<=32)return c}n=c+1}}const Gd="ng-template";function Pv(e,t,n){let i=0;for(;i<e.length;){let c=e[i++];if(n&&"class"===c){if(c=e[i],-1!==zd(c.toLowerCase(),t,0))return!0}else if(1===c){for(;i<e.length&&"string"==typeof(c=e[i++]);)if(c.toLowerCase()===t)return!0;return!1}}return!1}function Wd(e){return 4===e.type&&e.value!==Gd}function Iv(e,t,n){return t===(4!==e.type||n?e.value:Gd)}function Rv(e,t,n){let i=4;const c=e.attrs||[],g=function Lv(e){for(let t=0;t<e.length;t++)if(wo(e[t]))return t;return e.length}(c);let w=!1;for(let M=0;M<t.length;M++){const L=t[M];if("number"!=typeof L){if(!w)if(4&i){if(i=2|1&i,""!==L&&!Iv(e,L,n)||""===L&&1===t.length){if(vs(i))return!1;w=!0}}else{const G=8&i?L:t[++M];if(8&i&&null!==e.attrs){if(!Pv(e.attrs,G,n)){if(vs(i))return!1;w=!0}continue}const ge=kv(8&i?"class":L,c,Wd(e),n);if(-1===ge){if(vs(i))return!1;w=!0;continue}if(""!==G){let Ae;Ae=ge>g?"":c[ge+1].toLowerCase();const Ge=8&i?Ae:null;if(Ge&&-1!==zd(Ge,G,0)||2&i&&G!==Ae){if(vs(i))return!1;w=!0}}}}else{if(!w&&!vs(i)&&!vs(L))return!1;if(w&&vs(L))continue;w=!1,i=L|1&i}}return vs(i)||w}function vs(e){return 0==(1&e)}function kv(e,t,n,i){if(null===t)return-1;let c=0;if(i||!n){let g=!1;for(;c<t.length;){const w=t[c];if(w===e)return c;if(3===w||6===w)g=!0;else{if(1===w||2===w){let M=t[++c];for(;"string"==typeof M;)M=t[++c];continue}if(4===w)break;if(0===w){c+=4;continue}}c+=g?1:2}return-1}return function Nv(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function $d(e,t,n=!1){for(let i=0;i<t.length;i++)if(Rv(e,t[i],n))return!0;return!1}function Yd(e,t){return e?":not("+t.trim()+")":t}function Vv(e){let t=e[0],n=1,i=2,c="",g=!1;for(;n<e.length;){let w=e[n];if("string"==typeof w)if(2&i){const M=e[++n];c+="["+w+(M.length>0?'="'+M+'"':"")+"]"}else 8&i?c+="."+w:4&i&&(c+=" "+w);else""!==c&&!vs(w)&&(t+=Yd(g,c),c=""),i=w,g=g||!vs(i);n++}return""!==c&&(t+=Yd(g,c)),t}const vn={};function Xd(e){qd(gn(),gt(),gi()+e,!1)}function qd(e,t,n,i){if(!i)if(3==(3&t[Zt])){const g=e.preOrderCheckHooks;null!==g&&ht(t,g,n)}else{const g=e.preOrderHooks;null!==g&&kt(t,g,0,n)}Ir(n)}function Jd(e,t=null,n=null,i){const c=eh(e,t,n,i);return c.resolveInjectorInitializers(),c}function eh(e,t=null,n=null,i,c=new Set){const g=[n||st,iv(e)];return i=i||("object"==typeof e?void 0:l(e)),new Ld(g,t||nl(),i||null,c)}let Ro=(()=>{class e{static create(n,i){if(Array.isArray(n))return Jd({name:""},i,n,"");{const c=n.name??"";return Jd({name:c},n.parent,n.providers,c)}}}return e.THROW_IF_NOT_FOUND=wi,e.NULL=new Pd,e.\u0275prov=tt({token:e,providedIn:"any",factory:()=>Ht(Ad)}),e.__NG_ELEMENT_ID__=-1,e})();function Jo(e,t=Qe.Default){const n=gt();return null===n?Ht(e,t):C(Sn(),n,A(e),t)}function ah(){throw new Error("invalid")}function lh(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const g=n[i+1];if(-1!==g){const w=e.data[g];Tr(n[i]),w.contentQueries(2,t[g],g)}}}function rl(e,t,n,i,c,g,w,M,L,G,te){const ge=t.blueprint.slice();return ge[Kn]=c,ge[Zt]=76|i,(null!==te||e&&1024&e[Zt])&&(ge[Zt]|=1024),Sr(ge),ge[Hn]=ge[ni]=e,ge[Mn]=n,ge[Ki]=w||e&&e[Ki],ge[Qt]=M||e&&e[Qt],ge[ir]=L||e&&e[ir]||null,ge[ui]=G||e&&e[ui]||null,ge[Un]=g,ge[zi]=function rm(){return im++}(),ge[Nr]=te,ge[kn]=2==t.type?e[kn]:ge,ge}function ea(e,t,n,i,c){let g=e.data[t];if(null===g)g=function Sc(e,t,n,i,c){const g=hr(),w=io(),L=e.data[t]=function dy(e,t,n,i,c,g){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,n,t,i,c);return null===e.firstChild&&(e.firstChild=L),null!==g&&(w?null==g.child&&null!==L.parent&&(g.child=L):null===g.next&&(g.next=L)),L}(e,t,n,i,c),function ji(){return sn.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=n,g.value=i,g.attrs=c;const w=function Yi(){const e=sn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return _i(g,!0),g}function Ia(e,t,n,i){if(0===n)return-1;const c=t.length;for(let g=0;g<n;g++)t.push(i),e.blueprint.push(i),e.data.push(null);return c}function Dc(e,t,n){xr(t);try{const i=e.viewQuery;null!==i&&kc(1,i,n);const c=e.template;null!==c&&ch(e,t,c,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&lh(e,t),e.staticViewQueries&&kc(2,e.viewQuery,n);const g=e.components;null!==g&&function ly(e,t){for(let n=0;n<t.length;n++)Oy(e,t[n])}(t,g)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Zt]&=-5,uo()}}function sl(e,t,n,i){const c=t[Zt];if(128!=(128&c)){xr(t);try{Sr(t),function ds(e){return sn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&ch(e,t,n,2,i);const w=3==(3&c);if(w){const G=e.preOrderCheckHooks;null!==G&&ht(t,G,null)}else{const G=e.preOrderHooks;null!==G&&kt(t,G,0,null),bn(t,0)}if(function My(e){for(let t=Gl(e);null!==t;t=Wl(t)){if(!t[rs])continue;const n=t[rr];for(let i=0;i<n.length;i++){const c=n[i];512&c[Zt]||Dr(c[Hn],1),c[Zt]|=512}}}(t),function xy(e){for(let t=Gl(e);null!==t;t=Wl(t))for(let n=In;n<t.length;n++){const i=t[n],c=i[At];cr(i)&&sl(c,i,c.template,i[Mn])}}(t),null!==e.contentQueries&&lh(e,t),w){const G=e.contentCheckHooks;null!==G&&ht(t,G)}else{const G=e.contentHooks;null!==G&&kt(t,G,1),bn(t,1)}!function oy(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const c=n[i];if(c<0)Ir(~c);else{const g=c,w=n[++i],M=n[++i];zs(w,g),M(2,t[g])}}}finally{Ir(-1)}}(e,t);const M=e.components;null!==M&&function ay(e,t){for(let n=0;n<t.length;n++)Ay(e,t[n])}(t,M);const L=e.viewQuery;if(null!==L&&kc(2,L,i),w){const G=e.viewCheckHooks;null!==G&&ht(t,G)}else{const G=e.viewHooks;null!==G&&kt(t,G,2),bn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Zt]&=-41,512&t[Zt]&&(t[Zt]&=-513,Dr(t[Hn],-1))}finally{uo()}}}function ch(e,t,n,i,c){const g=gi(),w=2&i;try{Ir(-1),w&&t.length>An&&qd(e,t,An,!1),ki(w?2:0,c),n(i,c)}finally{Ir(g),ki(w?3:1,c)}}function Ec(e,t,n){if(_r(t)){const c=t.directiveEnd;for(let g=t.directiveStart;g<c;g++){const w=e.data[g];w.contentQueries&&w.contentQueries(1,n[g],g)}}}function Tc(e,t,n){Rt()&&(function vy(e,t,n,i){const c=n.directiveStart,g=n.directiveEnd;sr(n)&&function Dy(e,t,n){const i=zn(t,e),c=uh(n),g=e[Ki],w=ol(e,rl(e,c,null,n.onPush?32:16,i,t,g,g.createRenderer(i,n),null,null,null));e[t.index]=w}(t,n,e.data[c+n.componentOffset]),e.firstCreatePass||go(n,t),tr(i,t);const w=n.initialInputs;for(let M=c;M<g;M++){const L=e.data[M],G=ie(t,e,M,n);tr(G,t),null!==w&&Ey(0,M-c,G,L,0,w),fi(L)&&(Ei(n.index,t)[Mn]=ie(t,e,M,n))}}(e,t,n,zn(n,t)),64==(64&n.flags)&&mh(e,t,n))}function xc(e,t,n=zn){const i=t.localNames;if(null!==i){let c=t.index+1;for(let g=0;g<i.length;g+=2){const w=i[g+1],M=-1===w?n(t,e):e[w];e[c++]=M}}}function uh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Mc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Mc(e,t,n,i,c,g,w,M,L,G){const te=An+i,ge=te+c,Ae=function cy(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:vn);return n}(te,ge),Ge="function"==typeof G?G():G;return Ae[At]={type:e,blueprint:Ae,template:n,queries:null,viewQuery:M,declTNode:t,data:Ae.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:L,consts:Ge,incompleteFirstPass:!1}}function dh(e,t,n,i){const c=yh(t);null===n?c.push(i):(c.push(n),e.firstCreatePass&&_h(e).push(i,c.length-1))}function hh(e,t,n,i){for(let c in e)if(e.hasOwnProperty(c)){n=null===n?{}:n;const g=e[c];null===i?fh(n,t,c,g):i.hasOwnProperty(c)&&fh(n,t,i[c],g)}return n}function fh(e,t,n,i){e.hasOwnProperty(n)?e[n].push(t,i):e[n]=[t,i]}function Lr(e,t,n,i,c,g,w,M){const L=zn(t,n);let te,G=t.inputs;!M&&null!=G&&(te=G[i])?(Fc(e,n,te,i,c),sr(t)&&ph(n,t.index)):3&t.type&&(i=function fy(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),c=null!=w?w(c,t.value||"",i):c,g.setProperty(L,i,c))}function ph(e,t){const n=Ei(t,e);16&n[Zt]||(n[Zt]|=32)}function Ac(e,t,n,i){let c=!1;if(Rt()){const g=null===i?null:{"":-1},w=function _y(e,t){const n=e.directiveRegistry;let i=null,c=null;if(n)for(let g=0;g<n.length;g++){const w=n[g];if($d(t,w.selectors,!1))if(i||(i=[]),fi(w))if(null!==w.findHostDirectiveDefs){const M=[];c=c||new Map,w.findHostDirectiveDefs(w,M,c),i.unshift(...M,w),Oc(e,t,M.length)}else i.unshift(w),Oc(e,t,0);else c=c||new Map,w.findHostDirectiveDefs?.(w,i,c),i.push(w)}return null===i?null:[i,c]}(e,n);let M,L;null===w?M=L=null:[M,L]=w,null!==M&&(c=!0,gh(e,t,n,M,g,L)),g&&function Cy(e,t,n){if(t){const i=e.localNames=[];for(let c=0;c<t.length;c+=2){const g=n[t[c+1]];if(null==g)throw new pe(-301,!1);i.push(t[c],g)}}}(n,i,g)}return n.mergedAttrs=gs(n.mergedAttrs,n.attrs),c}function gh(e,t,n,i,c,g){for(let G=0;G<i.length;G++)To(go(n,t),e,i[G].type);!function wy(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,i.length);for(let G=0;G<i.length;G++){const te=i[G];te.providersResolver&&te.providersResolver(te)}let w=!1,M=!1,L=Ia(e,t,i.length,null);for(let G=0;G<i.length;G++){const te=i[G];n.mergedAttrs=gs(n.mergedAttrs,te.hostAttrs),Sy(e,n,t,L,te),by(L,te,c),null!==te.contentQueries&&(n.flags|=4),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(n.flags|=64);const ge=te.type.prototype;!w&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),w=!0),!M&&(ge.ngOnChanges||ge.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),M=!0),L++}!function hy(e,t,n){const c=t.directiveEnd,g=e.data,w=t.attrs,M=[];let L=null,G=null;for(let te=t.directiveStart;te<c;te++){const ge=g[te],Ae=n?n.get(ge):null,ft=Ae?Ae.outputs:null;L=hh(ge.inputs,te,L,Ae?Ae.inputs:null),G=hh(ge.outputs,te,G,ft);const St=null===L||null===w||Wd(t)?null:Ty(L,te,w);M.push(St)}null!==L&&(L.hasOwnProperty("class")&&(t.flags|=8),L.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=M,t.inputs=L,t.outputs=G}(e,n,g)}function mh(e,t,n){const i=n.directiveStart,c=n.directiveEnd,g=n.index,w=function Ho(){return sn.lFrame.currentDirectiveIndex}();try{Ir(g);for(let M=i;M<c;M++){const L=e.data[M],G=t[M];Gs(M),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&yy(L,G)}}finally{Ir(-1),Gs(w)}}function yy(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Oc(e,t,n){t.componentOffset=n,(e.components||(e.components=[])).push(t.index)}function by(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;fi(t)&&(n[""]=e)}}function Sy(e,t,n,i,c){e.data[i]=c;const g=c.factory||(c.factory=Ri(c.type)),w=new Yn(g,fi(c),Jo);e.blueprint[i]=w,n[i]=w,function gy(e,t,n,i,c){const g=c.hostBindings;if(g){let w=e.hostBindingOpCodes;null===w&&(w=e.hostBindingOpCodes=[]);const M=~t.index;(function my(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(w)!=M&&w.push(M),w.push(n,i,g)}}(e,t,i,Ia(e,n,c.hostVars,vn),c)}function Fs(e,t,n,i,c,g){const w=zn(e,t);!function Pc(e,t,n,i,c,g,w){if(null==g)e.removeAttribute(t,c,n);else{const M=null==w?Se(g):w(g,i||"",c);e.setAttribute(t,c,M,n)}}(t[Qt],w,g,e.value,n,i,c)}function Ey(e,t,n,i,c,g){const w=g[t];if(null!==w){const M=i.setInput;for(let L=0;L<w.length;){const G=w[L++],te=w[L++],ge=w[L++];null!==M?i.setInput(n,ge,G,te):n[te]=ge}}}function Ty(e,t,n){let i=null,c=0;for(;c<n.length;){const g=n[c];if(0!==g)if(5!==g){if("number"==typeof g)break;if(e.hasOwnProperty(g)){null===i&&(i=[]);const w=e[g];for(let M=0;M<w.length;M+=2)if(w[M]===t){i.push(g,w[M+1],n[c+1]);break}}c+=2}else c+=2;else c+=4}return i}function vh(e,t,n,i){return[e,!0,!1,t,null,0,i,n,null,null]}function Ay(e,t){const n=Ei(t,e);if(cr(n)){const i=n[At];48&n[Zt]?sl(i,n,i.template,n[Mn]):n[Zn]>0&&Ic(n)}}function Ic(e){for(let i=Gl(e);null!==i;i=Wl(i))for(let c=In;c<i.length;c++){const g=i[c];if(cr(g))if(512&g[Zt]){const w=g[At];sl(w,g,w.template,g[Mn])}else g[Zn]>0&&Ic(g)}const n=e[At].components;if(null!==n)for(let i=0;i<n.length;i++){const c=Ei(n[i],e);cr(c)&&c[Zn]>0&&Ic(c)}}function Oy(e,t){const n=Ei(t,e),i=n[At];(function Py(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),Dc(i,n,n[Mn])}function ol(e,t){return e[di]?e[ns][qn]=t:e[di]=t,e[ns]=t,t}function Rc(e){for(;e;){e[Zt]|=32;const t=Da(e);if(Hr(e)&&!t)return e;e=t}return null}function al(e,t,n,i=!0){const c=t[Ki];c.begin&&c.begin();try{sl(e,t,e.template,n)}catch(w){throw i&&bh(t,w),w}finally{c.end&&c.end()}}function kc(e,t,n){Tr(0),t(e,n)}function yh(e){return e[Pi]||(e[Pi]=[])}function _h(e){return e.cleanup||(e.cleanup=[])}function bh(e,t){const n=e[ui],i=n?n.get(Pa,null):null;i&&i.handleError(t)}function Fc(e,t,n,i,c){for(let g=0;g<n.length;){const w=n[g++],M=n[g++],L=t[w],G=e.data[w];null!==G.setInput?G.setInput(L,c,i,M):L[M]=c}}function ll(e,t,n){let i=n?e.styles:null,c=n?e.classes:null,g=0;if(null!==t)for(let w=0;w<t.length;w++){const M=t[w];"number"==typeof M?g=M:1==g?c=y(c,M):2==g&&(i=y(i,M+": "+t[++w]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=c:e.classesWithoutHost=c}function cl(e,t,n,i,c=!1){for(;null!==n;){const g=t[n.index];if(null!==g&&i.push(ti(g)),hi(g))for(let M=In;M<g.length;M++){const L=g[M],G=L[At].firstChild;null!==G&&cl(L[At],L,G,i)}const w=n.type;if(8&w)cl(e,t,n.child,i);else if(32&w){const M=zl(n,t);let L;for(;L=M();)i.push(L)}else if(16&w){const M=dd(t,n);if(Array.isArray(M))i.push(...M);else{const L=Da(t[kn]);cl(L[At],L,M,i,!0)}}n=c?n.projectionNext:n.next}return i}class Ra{get rootNodes(){const t=this._lView,n=t[At];return cl(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(t){this._lView[Mn]=t}get destroyed(){return 128==(128&this._lView[Zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Hn];if(hi(t)){const n=t[Vr],i=n?n.indexOf(this):-1;i>-1&&(Xl(t,i),qs(n,i))}this._attachedToViewContainer=!1}nd(this._lView[At],this._lView)}onDestroy(t){dh(this._lView[At],this._lView,null,t)}markForCheck(){Rc(this._cdRefInjectingView||this._lView)}detach(){this._lView[Zt]&=-65}reattach(){this._lView[Zt]|=64}detectChanges(){al(this._lView[At],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _m(e,t){Ea(e,t,t[Qt],2,null,null)}(this._lView[At],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=t}}class Iy extends Ra{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;al(t[At],t,t[Mn],!1)}checkNoChanges(){}get context(){return null}}class wh extends Aa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Et(t);return new ka(n,this.ngModule)}}function Sh(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class ky{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Tn(i);const c=this.injector.get(t,mc,i);return c!==mc||n===mc?c:this.parentInjector.get(t,n,i)}}class ka extends Bd{get inputs(){return Sh(this.componentDef.inputs)}get outputs(){return Sh(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Hv(e){return e.map(Vv).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,c){let g=(c=c||this.ngModule)instanceof Io?c:c?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const w=g?new ky(t,g):t,M=w.get(Hd,null);if(null===M)throw new pe(407,!1);const L=w.get(_v,null),G=M.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",ge=i?function uy(e,t,n){return e.selectRootElement(t,n===me.ShadowDom)}(G,i,this.componentDef.encapsulation):Yl(G,te,function Ry(e){const t=e.toLowerCase();return"svg"===t?Or:"math"===t?"math":null}(te)),Ae=this.componentDef.onPush?288:272,Ge=Mc(0,null,null,1,0,null,null,null,null,null),ft=rl(null,Ge,null,Ae,null,null,M,G,L,w,null);let St,Pt;xr(ft);try{const Vt=this.componentDef;let en,wt=null;Vt.findHostDirectiveDefs?(en=[],wt=new Map,Vt.findHostDirectiveDefs(Vt,en,wt),en.push(Vt)):en=[Vt];const mn=function Ly(e,t){const n=e[At],i=An;return e[i]=t,ea(n,i,2,"#host",null)}(ft,ge),ai=function Ny(e,t,n,i,c,g,w,M){const L=c[At];!function By(e,t,n,i){for(const c of e)t.mergedAttrs=gs(t.mergedAttrs,c.hostAttrs);null!==t.mergedAttrs&&(ll(t,t.mergedAttrs,!0),null!==n&&pd(i,n,t))}(i,e,t,w);const G=g.createRenderer(t,n),te=rl(c,uh(n),null,n.onPush?32:16,c[e.index],e,g,G,M||null,null,null);return L.firstCreatePass&&Oc(L,e,i.length-1),ol(c,te),c[e.index]=te}(mn,ge,Vt,en,ft,M,G);Pt=Qi(Ge,An),ge&&function Hy(e,t,n,i){if(i)As(e,n,["ng-version",Cv.full]);else{const{attrs:c,classes:g}=function jv(e){const t=[],n=[];let i=1,c=2;for(;i<e.length;){let g=e[i];if("string"==typeof g)2===c?""!==g&&t.push(g,e[++i]):8===c&&n.push(g);else{if(!vs(c))break;c=g}i++}return{attrs:t,classes:n}}(t.selectors[0]);c&&As(e,n,c),g&&g.length>0&&fd(e,n,g.join(" "))}}(G,Vt,ge,i),void 0!==n&&function jy(e,t,n){const i=e.projection=[];for(let c=0;c<t.length;c++){const g=n[c];i.push(null!=g?Array.from(g):null)}}(Pt,this.ngContentSelectors,n),St=function Vy(e,t,n,i,c,g){const w=Sn(),M=c[At],L=zn(w,c);gh(M,c,w,n,null,i);for(let te=0;te<n.length;te++)tr(ie(c,M,w.directiveStart+te,w),c);mh(M,c,w),L&&tr(L,c);const G=ie(c,M,w.directiveStart+w.componentOffset,w);if(e[Mn]=c[Mn]=G,null!==g)for(const te of g)te(G,t);return Ec(M,w,e),G}(ai,Vt,en,wt,ft,[Uy]),Dc(Ge,ft,null)}finally{uo()}return new Fy(this.componentType,St,Zo(Pt,ft),ft,Pt)}}class Fy extends hv{constructor(t,n,i,c,g){super(),this.location=i,this._rootLView=c,this._tNode=g,this.instance=n,this.hostView=this.changeDetectorRef=new Iy(c),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let c;if(null!==i&&(c=i[t])){const g=this._rootLView;Fc(g[At],g,c,t,n),ph(g,this._tNode.index)}}get injector(){return new ut(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Uy(){const e=Sn();it(gt()[At],e)}function Lc(e){let t=function Dh(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let c;if(fi(e))c=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pe(903,!1);c=t.\u0275dir}if(c){if(n){i.push(c);const w=e;w.inputs=Nc(e.inputs),w.declaredInputs=Nc(e.declaredInputs),w.outputs=Nc(e.outputs);const M=c.hostBindings;M&&$y(e,M);const L=c.viewQuery,G=c.contentQueries;if(L&&Gy(e,L),G&&Wy(e,G),p(e.inputs,c.inputs),p(e.declaredInputs,c.declaredInputs),p(e.outputs,c.outputs),fi(c)&&c.data.animation){const te=e.data;te.animation=(te.animation||[]).concat(c.data.animation)}}const g=c.features;if(g)for(let w=0;w<g.length;w++){const M=g[w];M&&M.ngInherit&&M(e),M===Lc&&(n=!1)}}t=Object.getPrototypeOf(t)}!function zy(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const c=e[i];c.hostVars=t+=c.hostVars,c.hostAttrs=gs(c.hostAttrs,n=gs(n,c.hostAttrs))}}(i)}function Nc(e){return e===ze?{}:e===st?[]:e}function Gy(e,t){const n=e.viewQuery;e.viewQuery=n?(i,c)=>{t(i,c),n(i,c)}:t}function Wy(e,t){const n=e.contentQueries;e.contentQueries=n?(i,c,g)=>{t(i,c,g),n(i,c,g)}:t}function $y(e,t){const n=e.hostBindings;e.hostBindings=n?(i,c)=>{t(i,c),n(i,c)}:t}let ul=null;function ko(){if(!ul){const e=Bt.Symbol;if(e&&e.iterator)ul=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(ul=i)}}}return ul}function dl(e){return!!Bc(e)&&(Array.isArray(e)||!(e instanceof Map)&&ko()in e)}function Bc(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ls(e,t,n){return e[t]=n}function nr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Fo(e,t,n,i){const c=nr(e,t,n);return nr(e,t+1,i)||c}function Vc(e,t,n,i){const c=gt();return nr(c,Kr(),t)&&(gn(),Fs($n(),c,e,t,n,i)),Vc}function na(e,t,n,i){return nr(e,Kr(),n)?t+Se(n)+i:vn}function Nh(e,t,n,i,c,g,w,M){const L=gt(),G=gn(),te=e+An,ge=G.firstCreatePass?function n_(e,t,n,i,c,g,w,M,L){const G=t.consts,te=ea(t,e,4,w||null,ur(G,M));Ac(t,n,te,ur(G,L)),it(t,te);const ge=te.tViews=Mc(2,te,i,c,g,t.directiveRegistry,t.pipeRegistry,null,t.schemas,G);return null!==t.queries&&(t.queries.template(t,te),ge.queries=t.queries.embeddedTView(te)),te}(te,G,L,t,n,i,c,g,w):G.data[te];_i(ge,!1);const Ae=L[Qt].createComment("");Za(G,L,Ae,ge),tr(Ae,L),ol(L,L[te]=vh(Ae,L,Ae,ge)),ii(ge)&&Tc(G,L,ge),null!=w&&xc(L,ge,M)}function Bh(e){return lr(function Ts(){return sn.lFrame.contextLView}(),An+e)}function Hc(e,t,n){const i=gt();return nr(i,Kr(),t)&&Lr(gn(),$n(),i,e,t,i[Qt],n,!1),Hc}function jc(e,t,n,i,c){const w=c?"class":"style";Fc(e,n,t.inputs[w],w,i)}function fl(e,t,n,i){const c=gt(),g=gn(),w=An+e,M=c[Qt],L=c[w]=Yl(M,t,function ne(){return sn.lFrame.currentNamespace}()),G=g.firstCreatePass?function r_(e,t,n,i,c,g,w){const M=t.consts,G=ea(t,e,2,c,ur(M,g));return Ac(t,n,G,ur(M,w)),null!==G.attrs&&ll(G,G.attrs,!1),null!==G.mergedAttrs&&ll(G,G.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,G),G}(w,g,c,0,t,n,i):g.data[w];return _i(G,!0),pd(M,L,G),32!=(32&G.flags)&&Za(g,c,L,G),0===function N(){return sn.lFrame.elementDepthCount}()&&tr(L,c),function re(){sn.lFrame.elementDepthCount++}(),ii(G)&&(Tc(g,c,G),Ec(g,G,c)),null!==i&&xc(c,G),fl}function pl(){let e=Sn();io()?ro():(e=e.parent,_i(e,!1));const t=e;!function et(){sn.lFrame.elementDepthCount--}();const n=gn();return n.firstCreatePass&&(it(n,e),_r(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Rr(e){return 0!=(8&e.flags)}(t)&&jc(n,t,gt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Mr(e){return 0!=(16&e.flags)}(t)&&jc(n,t,gt(),t.stylesWithoutHost,!1),pl}function Uc(e,t,n,i){return fl(e,t,n,i),pl(),Uc}function gl(e,t,n){const i=gt(),c=gn(),g=e+An,w=c.firstCreatePass?function s_(e,t,n,i,c){const g=t.consts,w=ur(g,i),M=ea(t,e,8,"ng-container",w);return null!==w&&ll(M,w,!0),Ac(t,n,M,ur(g,c)),null!==t.queries&&t.queries.elementStart(t,M),M}(g,c,i,t,n):c.data[g];_i(w,!0);const M=i[g]=i[Qt].createComment("");return Za(c,i,M,w),tr(M,i),ii(w)&&(Tc(c,i,w),Ec(c,w,i)),null!=n&&xc(i,w),gl}function ml(){let e=Sn();const t=gn();return io()?ro():(e=e.parent,_i(e,!1)),t.firstCreatePass&&(it(t,e),_r(e)&&t.queries.elementEnd(e)),ml}function zc(e,t,n){return gl(e,t,n),ml(),zc}function Vh(){return gt()}function Gc(e){return!!e&&"function"==typeof e.then}function Hh(e){return!!e&&"function"==typeof e.subscribe}const jh=Hh;function Wc(e,t,n,i){const c=gt(),g=gn(),w=Sn();return function zh(e,t,n,i,c,g,w){const M=ii(i),G=e.firstCreatePass&&_h(e),te=t[Mn],ge=yh(t);let Ae=!0;if(3&i.type||w){const St=zn(i,t),Pt=w?w(St):St,Vt=ge.length,en=w?mn=>w(ti(mn[i.index])):i.index;let wt=null;if(!w&&M&&(wt=function o_(e,t,n,i){const c=e.cleanup;if(null!=c)for(let g=0;g<c.length-1;g+=2){const w=c[g];if(w===n&&c[g+1]===i){const M=t[Pi],L=c[g+2];return M.length>L?M[L]:null}"string"==typeof w&&(g+=2)}return null}(e,t,c,i.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,Ae=!1;else{g=Wh(i,t,te,g,!1);const mn=n.listen(Pt,c,g);ge.push(g,mn),G&&G.push(c,en,Vt,Vt+1)}}else g=Wh(i,t,te,g,!1);const Ge=i.outputs;let ft;if(Ae&&null!==Ge&&(ft=Ge[c])){const St=ft.length;if(St)for(let Pt=0;Pt<St;Pt+=2){const ai=t[ft[Pt]][ft[Pt+1]].subscribe(g),xi=ge.length;ge.push(g,ai),G&&G.push(c,i.index,xi,-(xi+1))}}}(g,c,c[Qt],w,e,t,i),Wc}function Gh(e,t,n,i){try{return ki(6,t,n),!1!==n(i)}catch(c){return bh(e,c),!1}finally{ki(7,t,n)}}function Wh(e,t,n,i,c){return function g(w){if(w===Function)return i;Rc(e.componentOffset>-1?Ei(e.index,t):t);let L=Gh(t,n,i,w),G=g.__ngNextListenerFn__;for(;G;)L=Gh(t,n,G,w)&&L,G=G.__ngNextListenerFn__;return c&&!1===L&&(w.preventDefault(),w.returnValue=!1),L}}function $h(e=1){return function jo(e){return(sn.lFrame.contextLView=function bo(e,t){for(;e>0;)t=t[ni],e--;return t}(e,sn.lFrame.contextLView))[Mn]}(e)}function vl(e,t,n,i,c){const g=gt(),w=na(g,t,n,i);return w!==vn&&Lr(gn(),$n(),g,e,w,g[Qt],c,!1),vl}function yl(e,t){return e<<17|t<<2}function vo(e){return e>>17&32767}function $c(e){return 2|e}function Lo(e){return(131068&e)>>2}function Yc(e,t){return-131069&e|t<<2}function Xc(e){return 1|e}function nf(e,t,n,i,c){const g=e[n+1],w=null===t;let M=i?vo(g):Lo(g),L=!1;for(;0!==M&&(!1===L||w);){const te=e[M+1];g_(e[M],t)&&(L=!0,e[M+1]=i?Xc(te):$c(te)),M=i?vo(te):Lo(te)}L&&(e[n+1]=i?$c(g):Xc(g))}function g_(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Q(e,t)>=0}const Bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rf(e){return e.substring(Bi.key,Bi.keyEnd)}function sf(e,t){const n=Bi.textEnd;return n===t?-1:(t=Bi.keyEnd=function __(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Bi.key=t,n),ua(e,t,n))}function ua(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function qc(e,t,n){return ys(e,t,n,!1),qc}function Zc(e,t){return ys(e,t,null,!0),Zc}function df(e){!function _s(e,t,n,i){const c=gn(),g=Xi(2);c.firstUpdatePass&&ff(c,null,g,i);const w=gt();if(n!==vn&&nr(w,g,n)){const M=c.data[gi()];if(vf(M,i)&&!hf(c,g)){let L=i?M.classesWithoutHost:M.stylesWithoutHost;null!==L&&(n=y(L,n||"")),jc(c,M,w,n,i)}else!function M_(e,t,n,i,c,g,w,M){c===vn&&(c=st);let L=0,G=0,te=0<c.length?c[0]:null,ge=0<g.length?g[0]:null;for(;null!==te||null!==ge;){const Ae=L<c.length?c[L+1]:void 0,Ge=G<g.length?g[G+1]:void 0;let St,ft=null;te===ge?(L+=2,G+=2,Ae!==Ge&&(ft=ge,St=Ge)):null===ge||null!==te&&te<ge?(L+=2,ft=te):(G+=2,ft=ge,St=Ge),null!==ft&&gf(e,t,n,i,ft,St,w,M),te=L<c.length?c[L]:null,ge=G<g.length?g[G]:null}}(c,M,w,w[Qt],w[g+1],w[g+1]=function x_(e,t,n){if(null==n||""===n)return st;const i=[],c=mo(n);if(Array.isArray(c))for(let g=0;g<c.length;g++)e(i,c[g],!0);else if("object"==typeof c)for(const g in c)c.hasOwnProperty(g)&&e(i,g,c[g]);else"string"==typeof c&&t(i,c);return i}(e,t,n),i,g)}}(P,Bs,e,!0)}function Bs(e,t){for(let n=function v_(e){return function lf(e){Bi.key=0,Bi.keyEnd=0,Bi.value=0,Bi.valueEnd=0,Bi.textEnd=e.length}(e),sf(e,ua(e,0,Bi.textEnd))}(t);n>=0;n=sf(t,n))P(e,rf(t),!0)}function ys(e,t,n,i){const c=gt(),g=gn(),w=Xi(2);g.firstUpdatePass&&ff(g,e,w,i),t!==vn&&nr(c,w,t)&&gf(g,g.data[gi()],c,c[Qt],e,c[w+1]=function A_(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=l(mo(e)))),e}(t,n),i,w)}function hf(e,t){return t>=e.expandoStartIndex}function ff(e,t,n,i){const c=e.data;if(null===c[n+1]){const g=c[gi()],w=hf(e,n);vf(g,i)&&null===t&&!w&&(t=!1),t=function S_(e,t,n,i){const c=function so(e){const t=sn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let g=i?t.residualClasses:t.residualStyles;if(null===c)0===(i?t.classBindings:t.styleBindings)&&(n=La(n=Kc(null,e,t,n,i),t.attrs,i),g=null);else{const w=t.directiveStylingLast;if(-1===w||e[w]!==c)if(n=Kc(c,e,t,n,i),null===g){let L=function D_(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==Lo(i))return e[vo(i)]}(e,t,i);void 0!==L&&Array.isArray(L)&&(L=Kc(null,e,t,L[1],i),L=La(L,t.attrs,i),function E_(e,t,n,i){e[vo(n?t.classBindings:t.styleBindings)]=i}(e,t,i,L))}else g=function T_(e,t,n){let i;const c=t.directiveEnd;for(let g=1+t.directiveStylingLast;g<c;g++)i=La(i,e[g].hostAttrs,n);return La(i,t.attrs,n)}(e,t,i)}return void 0!==g&&(i?t.residualClasses=g:t.residualStyles=g),n}(c,g,t,i),function f_(e,t,n,i,c,g){let w=g?t.classBindings:t.styleBindings,M=vo(w),L=Lo(w);e[i]=n;let te,G=!1;if(Array.isArray(n)?(te=n[1],(null===te||Q(n,te)>0)&&(G=!0)):te=n,c)if(0!==L){const Ae=vo(e[M+1]);e[i+1]=yl(Ae,M),0!==Ae&&(e[Ae+1]=Yc(e[Ae+1],i)),e[M+1]=function d_(e,t){return 131071&e|t<<17}(e[M+1],i)}else e[i+1]=yl(M,0),0!==M&&(e[M+1]=Yc(e[M+1],i)),M=i;else e[i+1]=yl(L,0),0===M?M=i:e[L+1]=Yc(e[L+1],i),L=i;G&&(e[i+1]=$c(e[i+1])),nf(e,te,i,!0),nf(e,te,i,!1),function p_(e,t,n,i,c){const g=c?e.residualClasses:e.residualStyles;null!=g&&"string"==typeof t&&Q(g,t)>=0&&(n[i+1]=Xc(n[i+1]))}(t,te,e,i,g),w=yl(M,L),g?t.classBindings=w:t.styleBindings=w}(c,g,t,n,w,i)}}function Kc(e,t,n,i,c){let g=null;const w=n.directiveEnd;let M=n.directiveStylingLast;for(-1===M?M=n.directiveStart:M++;M<w&&(g=t[M],i=La(i,g.hostAttrs,c),g!==e);)M++;return null!==e&&(n.directiveStylingLast=M),i}function La(e,t,n){const i=n?1:2;let c=-1;if(null!==t)for(let g=0;g<t.length;g++){const w=t[g];"number"==typeof w?c=w:c===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),P(e,w,!!n||t[++g]))}return void 0===e?null:e}function gf(e,t,n,i,c,g,w,M){if(!(3&t.type))return;const L=e.data,G=L[M+1],te=function h_(e){return 1==(1&e)}(G)?mf(L,t,n,c,Lo(G),w):void 0;_l(te)||(_l(g)||function u_(e){return 2==(2&e)}(G)&&(g=mf(L,null,n,c,M,w)),function Am(e,t,n,i,c){if(t)c?e.addClass(n,i):e.removeClass(n,i);else{let g=-1===i.indexOf("-")?void 0:ks.DashCase;null==c?e.removeStyle(n,i,g):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),g|=ks.Important),e.setStyle(n,i,c,g))}}(i,w,Zr(gi(),n),c,g))}function mf(e,t,n,i,c,g){const w=null===t;let M;for(;c>0;){const L=e[c],G=Array.isArray(L),te=G?L[1]:L,ge=null===te;let Ae=n[c+1];Ae===vn&&(Ae=ge?st:void 0);let Ge=ge?z(Ae,i):te===i?Ae:void 0;if(G&&!_l(Ge)&&(Ge=z(L,i)),_l(Ge)&&(M=Ge,w))return M;const ft=e[c+1];c=w?vo(ft):Lo(ft)}if(null!==t){let L=g?t.residualClasses:t.residualStyles;null!=L&&(M=z(L,i))}return M}function _l(e){return void 0!==e}function vf(e,t){return 0!=(e.flags&(t?8:16))}function yf(e,t=""){const n=gt(),i=gn(),c=e+An,g=i.firstCreatePass?ea(i,c,1,t,null):i.data[c],w=n[c]=function $l(e,t){return e.createText(t)}(n[Qt],t);Za(i,n,w,g),_i(g,!1)}function Qc(e){return Cl("",e,""),Qc}function Cl(e,t,n){const i=gt(),c=na(i,e,t,n);return c!==vn&&function Qs(e,t,n){const i=Zr(t,e);!function ed(e,t,n){e.setValue(t,n)}(e[Qt],i,n)}(i,gi(),c),Cl}function Jc(e,t,n){const i=gt();return nr(i,Kr(),t)&&Lr(gn(),$n(),i,e,t,i[Qt],n,!0),Jc}const No=void 0;var q_=["en",[["a","p"],["AM","PM"],No],[["AM","PM"],No,No],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],No,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],No,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",No,"{1} 'at' {0}",No],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function X_(e){const n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let da={};function eu(e){const t=function Z_(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Bf(t);if(n)return n;const i=t.split("-")[0];if(n=Bf(i),n)return n;if("en"===i)return q_;throw new pe(701,!1)}function Nf(e){return eu(e)[an.PluralCase]}function Bf(e){return e in da||(da[e]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[e]),da[e]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const ha="en-US";let Vf=ha;function iu(e,t,n,i,c){if(e=A(e),Array.isArray(e))for(let g=0;g<e.length;g++)iu(e[g],t,n,i,c);else{const g=gn(),w=gt();let M=Po(e)?e:A(e.provide),L=Nd(e);const G=Sn(),te=1048575&G.providerIndexes,ge=G.directiveStart,Ae=G.providerIndexes>>20;if(Po(e)||!e.multi){const Ge=new Yn(L,c,Jo),ft=su(M,t,c?te:te+Ae,ge);-1===ft?(To(go(G,w),g,M),ru(g,e,t.length),t.push(M),G.directiveStart++,G.directiveEnd++,c&&(G.providerIndexes+=1048576),n.push(Ge),w.push(Ge)):(n[ft]=Ge,w[ft]=Ge)}else{const Ge=su(M,t,te+Ae,ge),ft=su(M,t,te,te+Ae),Pt=ft>=0&&n[ft];if(c&&!Pt||!c&&!(Ge>=0&&n[Ge])){To(go(G,w),g,M);const Vt=function YC(e,t,n,i,c){const g=new Yn(e,n,Jo);return g.multi=[],g.index=t,g.componentProviders=0,up(g,c,i&&!n),g}(c?$C:WC,n.length,c,i,L);!c&&Pt&&(n[ft].providerFactory=Vt),ru(g,e,t.length,0),t.push(M),G.directiveStart++,G.directiveEnd++,c&&(G.providerIndexes+=1048576),n.push(Vt),w.push(Vt)}else ru(g,e,Ge>-1?Ge:ft,up(n[c?ft:Ge],L,!c&&i));!c&&i&&Pt&&n[ft].componentProviders++}}}function ru(e,t,n,i){const c=Po(t),g=function sv(e){return!!e.useClass}(t);if(c||g){const L=(g?A(t.useClass):t).prototype.ngOnDestroy;if(L){const G=e.destroyHooks||(e.destroyHooks=[]);if(!c&&t.multi){const te=G.indexOf(n);-1===te?G.push(n,[i,L]):G[te+1].push(i,L)}else G.push(n,L)}}}function up(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function su(e,t,n,i){for(let c=n;c<i;c++)if(t[c]===e)return c;return-1}function WC(e,t,n,i){return ou(this.multi,[])}function $C(e,t,n,i){const c=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,M=ie(n,n[At],this.providerFactory.index,i);g=M.slice(0,w),ou(c,g);for(let L=w;L<M.length;L++)g.push(M[L])}else g=[],ou(c,g);return g}function ou(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function dp(e,t=[]){return n=>{n.providersResolver=(i,c)=>function GC(e,t,n){const i=gn();if(i.firstCreatePass){const c=fi(e);iu(n,i.data,i.blueprint,c,!0),iu(t,i.data,i.blueprint,c,!1)}}(i,c?c(e):e,t)}}class fa{}class hp{}function XC(e,t){return new fp(e,t??null)}class fp extends fa{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wh(this);const i=Wn(t);this._bootstrapComponents=Ks(i.bootstrap),this._r3Injector=eh(t,n,[{provide:fa,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],l(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class au extends hp{constructor(t){super(),this.moduleType=t}create(t){return new fp(this.moduleType,t)}}class qC extends fa{constructor(t,n,i){super(),this.componentFactoryResolver=new wh(this),this.instance=null;const c=new Ld([...t,{provide:fa,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],n||nl(),i,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function lu(e,t,n=null){return new qC(e,t,n).injector}let ZC=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=Id(0,n.type),c=i.length>0?lu([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,c)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=tt({token:e,providedIn:"environment",factory:()=>new e(Ht(Io))}),e})();function pp(e){e.getStandaloneInjector=t=>t.get(ZC).getOrCreateStandaloneInjector(e)}function bp(e,t,n){const i=pi()+e,c=gt();return c[i]===vn?Ls(c,i,n?t.call(n):t()):function Fa(e,t){return e[t]}(c,i)}function wp(e,t,n,i){return function xp(e,t,n,i,c,g){const w=t+n;return nr(e,w,c)?Ls(e,w+1,g?i.call(g,c):i(c)):Ua(e,w+1)}(gt(),pi(),e,t,n,i)}function Sp(e,t,n,i,c){return Mp(gt(),pi(),e,t,n,i,c)}function Dp(e,t,n,i,c,g){return function Ap(e,t,n,i,c,g,w,M){const L=t+n;return function hl(e,t,n,i,c){const g=Fo(e,t,n,i);return nr(e,t+2,c)||g}(e,L,c,g,w)?Ls(e,L+3,M?i.call(M,c,g,w):i(c,g,w)):Ua(e,L+3)}(gt(),pi(),e,t,n,i,c,g)}function Ep(e,t,n,i,c,g,w){return function Op(e,t,n,i,c,g,w,M,L){const G=t+n;return function es(e,t,n,i,c,g){const w=Fo(e,t,n,i);return Fo(e,t+2,c,g)||w}(e,G,c,g,w,M)?Ls(e,G+4,L?i.call(L,c,g,w,M):i(c,g,w,M)):Ua(e,G+4)}(gt(),pi(),e,t,n,i,c,g,w)}function Tp(e,t,n,i){return function Pp(e,t,n,i,c,g){let w=t+n,M=!1;for(let L=0;L<c.length;L++)nr(e,w++,c[L])&&(M=!0);return M?Ls(e,w,i.apply(g,c)):Ua(e,w)}(gt(),pi(),e,t,n,i)}function Ua(e,t){const n=e[t];return n===vn?void 0:n}function Mp(e,t,n,i,c,g,w){const M=t+n;return Fo(e,M,c,g)?Ls(e,M+2,w?i.call(w,c,g):i(c,g)):Ua(e,M+2)}function Ip(e,t){const n=gn();let i;const c=e+An;n.firstCreatePass?(i=function u0(e,t){if(t)for(let n=t.length-1;n>=0;n--){const i=t[n];if(e===i.name)return i}}(t,n.pipeRegistry),n.data[c]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(c,i.onDestroy)):i=n.data[c];const g=i.factory||(i.factory=Ri(i.type)),w=ye(Jo);try{const M=Do(!1),L=g();return Do(M),function i_(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}(n,gt(),c,L),L}finally{ye(w)}}function Rp(e,t,n,i){const c=e+An,g=gt(),w=lr(g,c);return function za(e,t){return e[At].data[t].pure}(g,c)?Mp(g,pi(),t,w.transform,n,i,w):w.transform(n,i)}function uu(e){return t=>{setTimeout(e,void 0,t)}}const Vs=class g0 extends d.x{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let c=t,g=n||(()=>null),w=i;if(t&&"object"==typeof t){const L=t;c=L.next?.bind(L),g=L.error?.bind(L),w=L.complete?.bind(L)}this.__isAsync&&(g=uu(g),c&&(c=uu(c)),w&&(w=uu(w)));const M=super.subscribe({next:c,error:g,complete:w});return t instanceof v.w0&&t.add(M),M}};function m0(){return this._results[ko()]()}class du{get changes(){return this._changes||(this._changes=new Vs)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ko(),i=du.prototype;i[n]||(i[n]=m0)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const c=function vi(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function Zi(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let c=e[i],g=t[i];if(n&&(c=n(c),g=n(g)),g!==c)return!1}return!0}(i._results,c,n))&&(i._results=c,i.length=c.length,i.last=c[this.length-1],i.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ga=(()=>{class e{}return e.__NG_ELEMENT_ID__=_0,e})();const v0=Ga,y0=class extends v0{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tViews,c=rl(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);c[Mi]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[Ii];return null!==w&&(c[Ii]=w.createEmbeddedView(i)),Dc(i,c,t),new Ra(c)}};function _0(){return El(Sn(),gt())}function El(e,t){return 4&e.type?new y0(t,e,Zo(e,t)):null}let Tl=(()=>{class e{}return e.__NG_ELEMENT_ID__=C0,e})();function C0(){return Lp(Sn(),gt())}const b0=Tl,kp=class extends b0{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new ut(this._hostTNode,this._hostLView)}get parentInjector(){const t=Eo(this._hostTNode,this._hostLView);if(Uo(t)){const n=fo(t,this._hostLView),i=Os(t);return new ut(n[At].data[i+8],n)}return new ut(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Fp(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-In}createEmbeddedView(t,n,i){let c,g;"number"==typeof i?c=i:null!=i&&(c=i.index,g=i.injector);const w=t.createEmbeddedView(n||{},g);return this.insert(w,c),w}createComponent(t,n,i,c,g){const w=t&&!function Ui(e){return"function"==typeof e}(t);let M;if(w)M=n;else{const ge=n||{};M=ge.index,i=ge.injector,c=ge.projectableNodes,g=ge.environmentInjector||ge.ngModuleRef}const L=w?t:new ka(Et(t)),G=i||this.parentInjector;if(!g&&null==L.ngModule){const Ae=(w?G:this.parentInjector).get(Io,null);Ae&&(g=Ae)}const te=L.create(G,c,void 0,g);return this.insert(te.hostView,M),te}insert(t,n){const i=t._lView,c=i[At];if(function no(e){return hi(e[Hn])}(i)){const te=this.indexOf(t);if(-1!==te)this.detach(te);else{const ge=i[Hn],Ae=new kp(ge,ge[Un],ge[Hn]);Ae.detach(Ae.indexOf(t))}}const g=this._adjustIndex(n),w=this._lContainer;!function bm(e,t,n,i){const c=In+i,g=n.length;i>0&&(n[c-1][qn]=t),i<g-In?(t[qn]=n[c],Mo(n,In+i,t)):(n.push(t),t[qn]=null),t[Hn]=n;const w=t[Mi];null!==w&&n!==w&&function wm(e,t){const n=e[rr];t[kn]!==t[Hn][Hn][kn]&&(e[rs]=!0),null===n?e[rr]=[t]:n.push(t)}(w,t);const M=t[Ii];null!==M&&M.insertView(e),t[Zt]|=64}(c,i,w,g);const M=Kl(g,w),L=i[Qt],G=qa(L,w[yr]);return null!==G&&function ym(e,t,n,i,c,g){i[Kn]=c,i[Un]=t,Ea(e,i,n,1,c,g)}(c,w[Un],L,i,G,M),t.attachToViewContainerRef(),Mo(hu(w),g,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Fp(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=Xl(this._lContainer,n);i&&(qs(hu(this._lContainer),n),nd(i[At],i))}detach(t){const n=this._adjustIndex(t,-1),i=Xl(this._lContainer,n);return i&&null!=qs(hu(this._lContainer),n)?new Ra(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function Fp(e){return e[Vr]}function hu(e){return e[Vr]||(e[Vr]=[])}function Lp(e,t){let n;const i=t[e.index];if(hi(i))n=i;else{let c;if(8&e.type)c=ti(i);else{const g=t[Qt];c=g.createComment("");const w=zn(e,t);Oo(g,qa(g,w),c,function Tm(e,t){return e.nextSibling(t)}(g,w),!1)}t[e.index]=n=vh(i,t,c,e),ol(t,n)}return new kp(n,e,t)}class fu{constructor(t){this.queryList=t,this.matches=null}clone(){return new fu(this.queryList)}setDirty(){this.queryList.setDirty()}}class pu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,c=[];for(let g=0;g<i;g++){const w=n.getByIndex(g);c.push(this.queries[w.indexInDeclarationView].clone())}return new pu(c)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==Wp(t,n).matches&&this.queries[n].setDirty()}}class Np{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class gu{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const c=null!==n?n.length:0,g=this.getByIndex(i).embeddedTView(t,c);g&&(g.indexInDeclarationView=i,null!==n?n.push(g):n=[g])}return null!==n?new gu(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class mu{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new mu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let c=0;c<i.length;c++){const g=i[c];this.matchTNodeWithReadOption(t,n,w0(n,g)),this.matchTNodeWithReadOption(t,n,$(n,t,g,!1,!1))}else i===Ga?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,$(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const c=this.metadata.read;if(null!==c)if(c===Oa||c===Tl||c===Ga&&4&n.type)this.addMatch(n.index,-2);else{const g=$(n,t,c,!1,!1);null!==g&&this.addMatch(n.index,g)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function w0(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function D0(e,t,n,i){return-1===n?function S0(e,t){return 11&e.type?Zo(e,t):4&e.type?El(e,t):null}(t,e):-2===n?function E0(e,t,n){return n===Oa?Zo(t,e):n===Ga?El(t,e):n===Tl?Lp(t,e):void 0}(e,t,i):ie(e,e[At],n,t)}function Bp(e,t,n,i){const c=t[Ii].queries[i];if(null===c.matches){const g=e.data,w=n.matches,M=[];for(let L=0;L<w.length;L+=2){const G=w[L];M.push(G<0?null:D0(t,g[G],w[L+1],n.metadata.read))}c.matches=M}return c.matches}function vu(e,t,n,i){const c=e.queries.getByIndex(n),g=c.matches;if(null!==g){const w=Bp(e,t,c,n);for(let M=0;M<g.length;M+=2){const L=g[M];if(L>0)i.push(w[M/2]);else{const G=g[M+1],te=t[-L];for(let ge=In;ge<te.length;ge++){const Ae=te[ge];Ae[Mi]===Ae[Hn]&&vu(Ae[At],Ae,G,i)}if(null!==te[rr]){const ge=te[rr];for(let Ae=0;Ae<ge.length;Ae++){const Ge=ge[Ae];vu(Ge[At],Ge,G,i)}}}}}return i}function Vp(e){const t=gt(),n=gn(),i=oo();Tr(i+1);const c=Wp(n,i);if(e.dirty&&function Us(e){return 4==(4&e[Zt])}(t)===(2==(2&c.metadata.flags))){if(null===c.matches)e.reset([]);else{const g=c.crossesNgTemplate?vu(n,t,i,[]):Bp(n,t,c,i);e.reset(g,mv),e.notifyOnChanges()}return!0}return!1}function Hp(e,t,n){const i=gn();i.firstCreatePass&&(Gp(i,new Np(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),zp(i,gt(),t)}function jp(e,t,n,i){const c=gn();if(c.firstCreatePass){const g=Sn();Gp(c,new Np(t,n,i),g.index),function x0(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(c,e),2==(2&n)&&(c.staticContentQueries=!0)}zp(c,gt(),n)}function Up(){return function T0(e,t){return e[Ii].queries[t].queryList}(gt(),oo())}function zp(e,t,n){const i=new du(4==(4&n));dh(e,t,i,i.destroy),null===t[Ii]&&(t[Ii]=new pu),t[Ii].queries.push(new fu(i))}function Gp(e,t,n){null===e.queries&&(e.queries=new gu),e.queries.track(new mu(t,n))}function Wp(e,t){return e.queries.getByIndex(t)}function $p(e,t){return El(e,t)}function Ml(...e){}const dg=new xn("Application Initializer");let Al=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Ml,this.reject=Ml,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,c)=>{this.resolve=i,this.reject=c})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const g=this.appInits[c]();if(Gc(g))n.push(g);else if(jh(g)){const w=new Promise((M,L)=>{g.subscribe({complete:M,error:L})});n.push(w)}}Promise.all(n).then(()=>{i()}).catch(c=>{this.reject(c)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Ht(dg,8))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const hg=new xn("AppId",{providedIn:"root",factory:function fg(){return`${wu()}${wu()}${wu()}`}});function wu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pg=new xn("Platform Initializer"),Y0=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gg=new xn("appBootstrapListener"),X0=new xn("AnimationModuleType");let q0=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ol=new xn("LocaleId",{providedIn:"root",factory:()=>Ut(Ol,Qe.Optional|Qe.SkipSelf)||function Z0(){return typeof $localize<"u"&&$localize.locale||ha}()}),K0=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Q0{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let J0=(()=>{class e{compileModuleSync(n){return new au(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),g=Ks(Wn(n).declarations).reduce((w,M)=>{const L=Et(M);return L&&w.push(new ka(L)),w},[]);return new Q0(i,g)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const nb=(()=>Promise.resolve(0))();function Su(e){typeof Zone>"u"?nb.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class ts{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vs(!1),this.onMicrotaskEmpty=new Vs(!1),this.onStable=new Vs(!1),this.onError=new Vs(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!i&&n,c.shouldCoalesceRunChangeDetection=i,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function ib(){let e=Bt.requestAnimationFrame,t=Bt.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function ob(e){const t=()=>{!function sb(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Bt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Eu(e),e.isCheckStableRunning=!0,Du(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Eu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,c,g,w,M)=>{try{return yg(e),n.invokeTask(c,g,w,M)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||e.shouldCoalesceRunChangeDetection)&&t(),_g(e)}},onInvoke:(n,i,c,g,w,M,L)=>{try{return yg(e),n.invoke(c,g,w,M,L)}finally{e.shouldCoalesceRunChangeDetection&&t(),_g(e)}},onHasTask:(n,i,c,g)=>{n.hasTask(c,g),i===c&&("microTask"==g.change?(e._hasPendingMicrotasks=g.microTask,Eu(e),Du(e)):"macroTask"==g.change&&(e.hasPendingMacrotasks=g.macroTask))},onHandleError:(n,i,c,g)=>(n.handleError(c,g),e.runOutsideAngular(()=>e.onError.emit(g)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ts.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(ts.isInAngularZone())throw new pe(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,c){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+c,t,rb,Ml,Ml);try{return g.runTask(w,n,i)}finally{g.cancelTask(w)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const rb={};function Du(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Eu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function yg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function _g(e){e._nesting--,Du(e)}class ab{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vs,this.onMicrotaskEmpty=new Vs,this.onStable=new Vs,this.onError=new Vs}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,c){return t.apply(n,i)}}const Cg=new xn(""),bg=new xn("");let Tu,lb=(()=>{class e{constructor(n,i,c){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Tu||(function cb(e){Tu=e}(c),c.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ts.assertNotInAngularZone(),Su(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Su(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,c){let g=-1;i&&i>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:g,updateCb:c})}whenStable(n,i,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,c){return[]}}return e.\u0275fac=function(n){return new(n||e)(Ht(ts),Ht(wg),Ht(bg))},e.\u0275prov=tt({token:e,factory:e.\u0275fac}),e})(),wg=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Tu?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),yo=null;const Sg=new xn("AllowMultipleToken"),xu=new xn("PlatformDestroyListeners"),Js=!1;class hb{constructor(t,n){this.name=t,this.token=n}}function Eg(e,t,n=[]){const i=`Platform: ${t}`,c=new xn(i);return(g=[])=>{let w=Mu();if(!w||w.injector.get(Sg,!1)){const M=[...n,...g,{provide:c,useValue:!0}];e?e(M):function fb(e){if(yo&&!yo.get(Sg,!1))throw new pe(400,!1);yo=e;const t=e.get(xg);(function Dg(e){const t=e.get(pg,null);t&&t.forEach(n=>n())})(e)}(function Tg(e=[],t){return Ro.create({name:t,providers:[{provide:hc,useValue:"platform"},{provide:xu,useValue:new Set([()=>yo=null])},...e]})}(M,i))}return function gb(e){const t=Mu();if(!t)throw new pe(401,!1);return t}()}}function Mu(){return yo?.get(xg)??null}let xg=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const c=function Ag(e,t){let n;return n="noop"===e?new ab:("zone.js"===e?void 0:e)||new ts(t),n}(i?.ngZone,function Mg(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),g=[{provide:ts,useValue:c}];return c.run(()=>{const w=Ro.create({providers:g,parent:this.injector,name:n.moduleType.name}),M=n.create(w),L=M.injector.get(Pa,null);if(!L)throw new pe(402,!1);return c.runOutsideAngular(()=>{const G=c.onError.subscribe({next:te=>{L.handleError(te)}});M.onDestroy(()=>{Il(this._modules,M),G.unsubscribe()})}),function Og(e,t,n){try{const i=n();return Gc(i)?i.catch(c=>{throw t.runOutsideAngular(()=>e.handleError(c)),c}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(L,c,()=>{const G=M.injector.get(Al);return G.runInitializers(),G.donePromise.then(()=>(function Hf(e){rt(e,"Expected localeId to be defined"),"string"==typeof e&&(Vf=e.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Ol,ha)||ha),this._moduleDoBootstrap(M),M))})})}bootstrapModule(n,i=[]){const c=Pg({},i);return function ub(e,t,n){const i=new au(n);return Promise.resolve(i)}(0,0,n).then(g=>this.bootstrapModuleFactory(g,c))}_moduleDoBootstrap(n){const i=n.injector.get(Pl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(c=>i.bootstrap(c));else{if(!n.instance.ngDoBootstrap)throw new pe(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(xu,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Ht(Ro))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Pg(e,t){return Array.isArray(t)?t.reduce(Pg,e):{...e,...t}}let Pl=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,i,c){this._zone=n,this._injector=i,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new ce.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),w=new ce.y(M=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{ts.assertNotInAngularZone(),Su(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const G=this._zone.onUnstable.subscribe(()=>{ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{L.unsubscribe(),G.unsubscribe()}});this.isStable=function f(...e){const t=(0,m.yG)(e),n=(0,m._6)(e,1/0),i=e;return i.length?1===i.length?(0,T.Xf)(i[0]):(0,Ue.J)(n)((0,o.D)(i,t)):fe.E}(g,w.pipe(function a(e={}){const{connector:t=(()=>new d.x),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:c=!0}=e;return g=>{let w,M,L,G=0,te=!1,ge=!1;const Ae=()=>{M?.unsubscribe(),M=void 0},Ge=()=>{Ae(),w=L=void 0,te=ge=!1},ft=()=>{const St=w;Ge(),St?.unsubscribe()};return(0,r.e)((St,Pt)=>{G++,!ge&&!te&&Ae();const Vt=L=L??t();Pt.add(()=>{G--,0===G&&!ge&&!te&&(M=s(ft,c))}),Vt.subscribe(Pt),!w&&G>0&&(w=new h.Hp({next:en=>Vt.next(en),error:en=>{ge=!0,Ae(),M=s(Ge,n,en),Vt.error(en)},complete:()=>{te=!0,Ae(),M=s(Ge,i),Vt.complete()}}),(0,T.Xf)(St).subscribe(w))})(g)}}()))}bootstrap(n,i){const c=n instanceof Bd;if(!this._injector.get(Al).done){!c&&Di(n);throw new pe(405,Js)}let w;w=c?n:this._injector.get(Aa).resolveComponentFactory(n),this.componentTypes.push(w.componentType);const M=function db(e){return e.isBoundToModule}(w)?void 0:this._injector.get(fa),G=w.create(Ro.NULL,[],i||w.selector,M),te=G.location.nativeElement,ge=G.injector.get(Cg,null);return ge?.registerApplication(te),G.onDestroy(()=>{this.detachView(G.hostView),Il(this.components,G),ge?.unregisterApplication(te)}),this._loadComponent(G),G}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Il(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(gg,[]);i.push(...this._bootstrapListeners),i.forEach(c=>c(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Il(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new pe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Ht(ts),Ht(Io),Ht(Pa))},e.\u0275prov=tt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Il(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function vb(){}let yb=(()=>{class e{}return e.__NG_ELEMENT_ID__=_b,e})();function _b(e){return function Cb(e,t,n){if(sr(e)&&!n){const i=Ei(e.index,t);return new Ra(i,i)}return 47&e.type?new Ra(t[kn],t):null}(Sn(),gt(),16==(16&e))}class Lg{constructor(){}supports(t){return dl(t)}create(t){return new Tb(t)}}const Eb=(e,t)=>t;class Tb{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Eb}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,c=0,g=null;for(;n||i;){const w=!i||n&&n.currentIndex<Bg(i,c,g)?n:i,M=Bg(w,c,g),L=w.currentIndex;if(w===i)c--,i=i._nextRemoved;else if(n=n._next,null==w.previousIndex)c++;else{g||(g=[]);const G=M-c,te=L-c;if(G!=te){for(let Ae=0;Ae<G;Ae++){const Ge=Ae<g.length?g[Ae]:g[Ae]=0,ft=Ge+Ae;te<=ft&&ft<G&&(g[Ae]=Ge+1)}g[w.previousIndex]=te-G}}M!==L&&t(w,M,L)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!dl(t))throw new pe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let c,g,w,n=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let M=0;M<this.length;M++)g=t[M],w=this._trackByFn(M,g),null!==n&&Object.is(n.trackById,w)?(i&&(n=this._verifyReinsertion(n,g,w,M)),Object.is(n.item,g)||this._addIdentityChange(n,g)):(n=this._mismatch(n,g,w,M),i=!0),n=n._next}else c=0,function Jy(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ko()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(t,M=>{w=this._trackByFn(c,M),null!==n&&Object.is(n.trackById,w)?(i&&(n=this._verifyReinsertion(n,M,w,c)),Object.is(n.item,M)||this._addIdentityChange(n,M)):(n=this._mismatch(n,M,w,c),i=!0),n=n._next,c++}),this.length=c;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,c){let g;return null===t?g=this._itTail:(g=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,g,c)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(i,c))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,g,c)):t=this._addAfter(new xb(n,i),g,c),t}_verifyReinsertion(t,n,i,c){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==g?t=this._reinsertAfter(g,t._prev,c):t.currentIndex!=c&&(t.currentIndex=c,this._addToMoves(t,c)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const c=t._prevRemoved,g=t._nextRemoved;return null===c?this._removalsHead=g:c._nextRemoved=g,null===g?this._removalsTail=c:g._prevRemoved=c,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){const c=null===n?this._itHead:n._next;return t._next=c,t._prev=n,null===c?this._itTail=t:c._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ng),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,i=t._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ng),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xb{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mb{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){const n=t._prevDup,i=t._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class Ng{constructor(){this.map=new Map}put(t){const n=t.trackById;let i=this.map.get(n);i||(i=new Mb,this.map.set(n,i)),i.add(t)}get(t,n){const c=this.map.get(t);return c?c.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bg(e,t,n){const i=e.previousIndex;if(null===i)return i;let c=0;return n&&i<n.length&&(c=n[i]),i+t+c}class Vg{constructor(){}supports(t){return t instanceof Map||Bc(t)}create(){return new Ab}}class Ab{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Bc(t)))throw new pe(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,c)=>{if(n&&n.key===c)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const g=this._getOrCreateRecordForKey(c,i);n=this._insertBeforeOrAppend(n,g)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const c=this._records.get(t);this._maybeAddToChanges(c,n);const g=c._prev,w=c._next;return g&&(g._next=w),w&&(w._prev=g),c._next=null,c._prev=null,c}const i=new Ob(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class Ob{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hg(){return new Ru([new Lg])}let Ru=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(null!=i){const c=i.factories.slice();n=n.concat(c)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||Hg()),deps:[[e,new Ao,new Go]]}}find(n){const i=this.factories.find(c=>c.supports(n));if(null!=i)return i;throw new pe(901,!1)}}return e.\u0275prov=tt({token:e,providedIn:"root",factory:Hg}),e})();function jg(){return new ku([new Vg])}let ku=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const c=i.factories.slice();n=n.concat(c)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||jg()),deps:[[e,new Ao,new Go]]}}find(n){const i=this.factories.find(c=>c.supports(n));if(i)return i;throw new pe(901,!1)}}return e.\u0275prov=tt({token:e,providedIn:"root",factory:jg}),e})();const Rb=Eg(null,"core",[]);let kb=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Ht(Pl))},e.\u0275mod=be({type:e}),e.\u0275inj=Xe({}),e})();function Fb(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}},433:(Ft,Be,K)=>{"use strict";K.d(Be,{Fj:()=>O,CE:()=>Cr,qu:()=>cr,u:()=>Ur,sg:()=>ii,x0:()=>Hr,u5:()=>Dr,JU:()=>p,a5:()=>xt,JJ:()=>Gt,JL:()=>zt,On:()=>zi,UX:()=>sn,kI:()=>He,_Y:()=>Nr});var d=K(8256),v=K(6895),ce=K(2076),Ue=K(9751),T=K(4742),fe=K(8421),m=K(7669),o=K(5403),f=K(3268),h=K(1810),a=K(4004);let s=(()=>{class U{constructor(N,re){this._renderer=N,this._elementRef=re,this.onChange=et=>{},this.onTouched=()=>{}}setProperty(N,re){this._renderer.setProperty(this._elementRef.nativeElement,N,re)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(d.Qsj),d.Y36(d.SBq))},U.\u0275dir=d.lG2({type:U}),U})(),u=(()=>{class U extends s{}return U.\u0275fac=function(){let V;return function(re){return(V||(V=d.n5z(U)))(re||U)}}(),U.\u0275dir=d.lG2({type:U,features:[d.qOj]}),U})();const p=new d.OlP("NgValueAccessor"),S={provide:p,useExisting:(0,d.Gpc)(()=>O),multi:!0},A=new d.OlP("CompositionEventMode");let O=(()=>{class U extends s{constructor(N,re,et){super(N,re),this._compositionMode=et,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x(){const U=(0,v.q)()?(0,v.q)().getUserAgent():"";return/android (\d+)/.test(U.toLowerCase())}())}writeValue(N){this.setProperty("value",N??"")}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(A,8))},U.\u0275dir=d.lG2({type:U,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,re){1&N&&d.NdJ("input",function(Rt){return re._handleInput(Rt.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(Rt){return re._compositionEnd(Rt.target.value)})},features:[d._Bn([S]),d.qOj]}),U})();const j=!1;function Z(U){return null==U||("string"==typeof U||Array.isArray(U))&&0===U.length}function ue(U){return null!=U&&"number"==typeof U.length}const pe=new d.OlP("NgValidators"),Ce=new d.OlP("NgAsyncValidators"),Se=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class He{static min(V){return function ot(U){return V=>{if(Z(V.value)||Z(U))return null;const N=parseFloat(V.value);return!isNaN(N)&&N<U?{min:{min:U,actual:V.value}}:null}}(V)}static max(V){return function at(U){return V=>{if(Z(V.value)||Z(U))return null;const N=parseFloat(V.value);return!isNaN(N)&&N>U?{max:{max:U,actual:V.value}}:null}}(V)}static required(V){return function ke(U){return Z(U.value)?{required:!0}:null}(V)}static requiredTrue(V){return function Ee(U){return!0===U.value?null:{required:!0}}(V)}static email(V){return function xe(U){return Z(U.value)||Se.test(U.value)?null:{email:!0}}(V)}static minLength(V){return function Le(U){return V=>Z(V.value)||!ue(V.value)?null:V.value.length<U?{minlength:{requiredLength:U,actualLength:V.value.length}}:null}(V)}static maxLength(V){return function q(U){return V=>ue(V.value)&&V.value.length>U?{maxlength:{requiredLength:U,actualLength:V.value.length}}:null}(V)}static pattern(V){return function le(U){if(!U)return ae;let V,N;return"string"==typeof U?(N="","^"!==U.charAt(0)&&(N+="^"),N+=U,"$"!==U.charAt(U.length-1)&&(N+="$"),V=new RegExp(N)):(N=U.toString(),V=U),re=>{if(Z(re.value))return null;const et=re.value;return V.test(et)?null:{pattern:{requiredPattern:N,actualValue:et}}}}(V)}static nullValidator(V){return null}static compose(V){return We(V)}static composeAsync(V){return rt(V)}}function ae(U){return null}function he(U){return null!=U}function Fe(U){const V=(0,d.QGY)(U)?(0,ce.D)(U):U;if(j&&!(0,d.CqO)(V)){let N="Expected async validator to return Promise or Observable.";throw"object"==typeof U&&(N+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,N)}return V}function de(U){let V={};return U.forEach(N=>{V=null!=N?{...V,...N}:V}),0===Object.keys(V).length?null:V}function ee(U,V){return V.map(N=>N(U))}function Me(U){return U.map(V=>function De(U){return!U.validate}(V)?V:N=>V.validate(N))}function We(U){if(!U)return null;const V=U.filter(he);return 0==V.length?null:function(N){return de(ee(N,V))}}function $e(U){return null!=U?We(Me(U)):null}function rt(U){if(!U)return null;const V=U.filter(he);return 0==V.length?null:function(N){return function r(...U){const V=(0,m.jO)(U),{args:N,keys:re}=(0,T.D)(U),et=new Ue.y(Rt=>{const{length:Bn}=N;if(!Bn)return void Rt.complete();const Ti=new Array(Bn);let gt=Bn,gn=Bn;for(let Pr=0;Pr<Bn;Pr++){let dr=!1;(0,fe.Xf)(N[Pr]).subscribe((0,o.x)(Rt,Sn=>{dr||(dr=!0,gn--),Ti[Pr]=Sn},()=>gt--,void 0,()=>{(!gt||!dr)&&(gn||Rt.next(re?(0,h.n)(re,Ti):Ti),Rt.complete())}))}});return V?et.pipe((0,f.Z)(V)):et}(ee(N,V).map(Fe)).pipe((0,a.U)(de))}}function Ke(U){return null!=U?rt(Me(U)):null}function Ct(U,V){return null===U?[V]:Array.isArray(U)?[...U,V]:[U,V]}function qe(U){return U._rawValidators}function Ne(U){return U._rawAsyncValidators}function tt(U){return U?Array.isArray(U)?U:[U]:[]}function Ve(U,V){return Array.isArray(U)?U.includes(V):U===V}function Xe(U,V){const N=tt(V);return tt(U).forEach(et=>{Ve(N,et)||N.push(et)}),N}function lt(U,V){return tt(V).filter(N=>!Ve(U,N))}class vt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=$e(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Ke(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,N){return!!this.control&&this.control.hasError(V,N)}getError(V,N){return this.control?this.control.getError(V,N):null}}class Mt extends vt{get formDirective(){return null}get path(){return null}}class xt extends vt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nt{constructor(V){this._cd=V}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Gt=(()=>{class U extends nt{constructor(N){super(N)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(xt,2))},U.\u0275dir=d.lG2({type:U,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,re){2&N&&d.ekj("ng-untouched",re.isUntouched)("ng-touched",re.isTouched)("ng-pristine",re.isPristine)("ng-dirty",re.isDirty)("ng-valid",re.isValid)("ng-invalid",re.isInvalid)("ng-pending",re.isPending)},features:[d.qOj]}),U})(),zt=(()=>{class U extends nt{constructor(N){super(N)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(Mt,10))},U.\u0275dir=d.lG2({type:U,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(N,re){2&N&&d.ekj("ng-untouched",re.isUntouched)("ng-touched",re.isTouched)("ng-pristine",re.isPristine)("ng-dirty",re.isDirty)("ng-valid",re.isValid)("ng-invalid",re.isInvalid)("ng-pending",re.isPending)("ng-submitted",re.isSubmitted)},features:[d.qOj]}),U})();function Yt(U,V){return U?`with name: '${V}'`:`at index: ${V}`}const Oe=!1,_t="VALID",Ye="INVALID",Wt="PENDING",Ht="DISABLED";function _n(U){return(On(U)?U.validators:U)||null}function Tn(U,V){return(On(V)?V.asyncValidators:U)||null}function On(U){return null!=U&&!Array.isArray(U)&&"object"==typeof U}function Nn(U,V,N){const re=U.controls;if(!(V?Object.keys(re):re).length)throw new d.vHH(1e3,Oe?function Si(U){return`\n    There are no form controls registered with this ${U?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(V):"");if(!re[N])throw new d.vHH(1001,Oe?function dt(U,V){return`Cannot find form control ${Yt(U,V)}`}(V,N):"")}function un(U,V,N){U._forEachChild((re,et)=>{if(void 0===N[et])throw new d.vHH(1002,Oe?function _e(U,V){return`Must supply a value for form control ${Yt(U,V)}`}(V,et):"")})}class hn{constructor(V,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(V),this._assignAsyncValidators(N)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===_t}get invalid(){return this.status===Ye}get pending(){return this.status==Wt}get disabled(){return this.status===Ht}get enabled(){return this.status!==Ht}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._assignValidators(V)}setAsyncValidators(V){this._assignAsyncValidators(V)}addValidators(V){this.setValidators(Xe(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Xe(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(lt(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(lt(V,this._rawAsyncValidators))}hasValidator(V){return Ve(this._rawValidators,V)}hasAsyncValidator(V){return Ve(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=Wt,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const N=this._parentMarkedDirty(V.onlySelf);this.status=Ht,this.errors=null,this._forEachChild(re=>{re.disable({...V,onlySelf:!0})}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...V,skipPristineCheck:N}),this._onDisabledChange.forEach(re=>re(!0))}enable(V={}){const N=this._parentMarkedDirty(V.onlySelf);this.status=_t,this._forEachChild(re=>{re.enable({...V,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors({...V,skipPristineCheck:N}),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}getRawValue(){return this.value}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_t||this.status===Wt)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ht:_t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=Wt,this._hasOwnPendingAsyncValidator=!0;const N=Fe(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,N={}){this.errors=V,this._updateControlsErrors(!1!==N.emitEvent)}get(V){let N=V;return null==N||(Array.isArray(N)||(N=N.split(".")),0===N.length)?null:N.reduce((re,et)=>re&&re._find(et),this)}getError(V,N){const re=N?this.get(N):this;return re&&re.errors?re.errors[V]:null}hasError(V,N){return!!this.getError(V,N)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Ht:this.errors?Ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wt)?Wt:this._anyControlsHaveStatus(Ye)?Ye:_t}_anyControlsHaveStatus(V){return this._anyControls(N=>N.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){On(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(V){return null}_assignValidators(V){this._rawValidators=Array.isArray(V)?V.slice():V,this._composedValidatorFn=function Ut(U){return Array.isArray(U)?$e(U):U||null}(this._rawValidators)}_assignAsyncValidators(V){this._rawAsyncValidators=Array.isArray(V)?V.slice():V,this._composedAsyncValidatorFn=function li(U){return Array.isArray(U)?Ke(U):U||null}(this._rawAsyncValidators)}}class X extends hn{constructor(V,N,re){super(_n(N),Tn(re,N)),this.controls=V,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,N){return this.controls[V]?this.controls[V]:(this.controls[V]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(V,N,re={}){this.registerControl(V,N),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(V,N={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(V,N,re={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],N&&this.registerControl(V,N),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,N={}){un(this,!0,V),Object.keys(V).forEach(re=>{Nn(this,!0,re),this.controls[re].setValue(V[re],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(V,N={}){null!=V&&(Object.keys(V).forEach(re=>{const et=this.controls[re];et&&et.patchValue(V[re],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(V={},N={}){this._forEachChild((re,et)=>{re.reset(V[et],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(V,N,re)=>(V[re]=N.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(N,re)=>!!re._syncPendingControls()||N);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){Object.keys(this.controls).forEach(N=>{const re=this.controls[N];re&&V(re,N)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const[N,re]of Object.entries(this.controls))if(this.contains(N)&&V(re))return!0;return!1}_reduceValue(){return this._reduceChildren({},(N,re,et)=>((re.enabled||this.disabled)&&(N[et]=re.value),N))}_reduceChildren(V,N){let re=V;return this._forEachChild((et,Rt)=>{re=N(re,et,Rt)}),re}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(V){return this.controls.hasOwnProperty(V)?this.controls[V]:null}}class W extends X{}const ze=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>st}),st="always";function Xt(U,V){return[...V.path,U]}function ln(U,V,N=st){Gn(U,V),V.valueAccessor.writeValue(U.value),(U.disabled||"always"===N)&&V.valueAccessor.setDisabledState?.(U.disabled),function ei(U,V){V.valueAccessor.registerOnChange(N=>{U._pendingValue=N,U._pendingChange=!0,U._pendingDirty=!0,"change"===U.updateOn&&se(U,V)})}(U,V),function J(U,V){const N=(re,et)=>{V.valueAccessor.writeValue(re),et&&V.viewToModelUpdate(re)};U.registerOnChange(N),V._registerOnDestroy(()=>{U._unregisterOnChange(N)})}(U,V),function Re(U,V){V.valueAccessor.registerOnTouched(()=>{U._pendingTouched=!0,"blur"===U.updateOn&&U._pendingChange&&se(U,V),"submit"!==U.updateOn&&U.markAsTouched()})}(U,V),function ci(U,V){if(V.valueAccessor.setDisabledState){const N=re=>{V.valueAccessor.setDisabledState(re)};U.registerOnDisabledChange(N),V._registerOnDestroy(()=>{U._unregisterOnDisabledChange(N)})}}(U,V)}function Xn(U,V,N=!0){const re=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(re),V.valueAccessor.registerOnTouched(re)),yi(U,V),U&&(V._invokeOnDestroyCallbacks(),U._registerOnCollectionChange(()=>{}))}function Pn(U,V){U.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(V)})}function Gn(U,V){const N=qe(U);null!==V.validator?U.setValidators(Ct(N,V.validator)):"function"==typeof N&&U.setValidators([N]);const re=Ne(U);null!==V.asyncValidator?U.setAsyncValidators(Ct(re,V.asyncValidator)):"function"==typeof re&&U.setAsyncValidators([re]);const et=()=>U.updateValueAndValidity();Pn(V._rawValidators,et),Pn(V._rawAsyncValidators,et)}function yi(U,V){let N=!1;if(null!==U){if(null!==V.validator){const et=qe(U);if(Array.isArray(et)&&et.length>0){const Rt=et.filter(Bn=>Bn!==V.validator);Rt.length!==et.length&&(N=!0,U.setValidators(Rt))}}if(null!==V.asyncValidator){const et=Ne(U);if(Array.isArray(et)&&et.length>0){const Rt=et.filter(Bn=>Bn!==V.asyncValidator);Rt.length!==et.length&&(N=!0,U.setAsyncValidators(Rt))}}}const re=()=>{};return Pn(V._rawValidators,re),Pn(V._rawAsyncValidators,re),N}function se(U,V){U._pendingDirty&&U.markAsDirty(),U.setValue(U._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(U._pendingValue),U._pendingChange=!1}function pn(U,V){if(!U.hasOwnProperty("model"))return!1;const N=U.model;return!!N.isFirstChange()||!Object.is(V,N.currentValue)}function Kn(U,V){if(!V)return null;let N,re,et;return Array.isArray(V),V.forEach(Rt=>{Rt.constructor===O?N=Rt:function Di(U){return Object.getPrototypeOf(U.constructor)===u}(Rt)?re=Rt:et=Rt}),et||re||N||null}function Un(U,V){const N=U.indexOf(V);N>-1&&U.splice(N,1)}function Pi(U){return"object"==typeof U&&null!==U&&2===Object.keys(U).length&&"value"in U&&"disabled"in U}const Mn=class extends hn{constructor(V=null,N,re){super(_n(N),Tn(re,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),On(N)&&(N.nonNullable||N.initialValueIsDefault)&&(this.defaultValue=Pi(V)?V.value:V)}setValue(V,N={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(V,N={}){this.setValue(V,N)}reset(V=this.defaultValue,N={}){this._applyFormState(V),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){Un(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){Un(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){Pi(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}};let Qt=(()=>{class U extends Mt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Xt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return U.\u0275fac=function(){let V;return function(re){return(V||(V=d.n5z(U)))(re||U)}}(),U.\u0275dir=d.lG2({type:U,features:[d.qOj]}),U})();const Vi={provide:xt,useExisting:(0,d.Gpc)(()=>zi)},Ii=(()=>Promise.resolve())();let zi=(()=>{class U extends xt{constructor(N,re,et,Rt,Bn,Ti){super(),this._changeDetectorRef=Bn,this.callSetDisabledState=Ti,this.control=new Mn,this._registered=!1,this.update=new d.vpe,this._parent=N,this._setValidators(re),this._setAsyncValidators(et),this.valueAccessor=Kn(0,Rt)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const re=N.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),pn(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ln(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Ii.then(()=>{this.control.setValue(N,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(N){const re=N.isDisabled.currentValue,et=0!==re&&(0,d.D6c)(re);Ii.then(()=>{et&&!this.control.disabled?this.control.disable():!et&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(N){return this._parent?Xt(N,this._parent):[N]}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(Mt,9),d.Y36(pe,10),d.Y36(Ce,10),d.Y36(p,10),d.Y36(d.sBO,8),d.Y36(ze,8))},U.\u0275dir=d.lG2({type:U,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Vi]),d.qOj,d.TTD]}),U})(),Nr=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275dir=d.lG2({type:U,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),U})(),yr=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=d.oAB({type:U}),U.\u0275inj=d.cJS({}),U})();const Qn=new d.OlP("NgModelWithFormControlWarning"),sr={provide:Mt,useExisting:(0,d.Gpc)(()=>ii)};let ii=(()=>{class U extends Mt{constructor(N,re,et){super(),this.callSetDisabledState=et,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(N),this._setAsyncValidators(re)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const re=this.form.get(N.path);return ln(re,N,this.callSetDisabledState),re.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),re}getControl(N){return this.form.get(N.path)}removeControl(N){Xn(N.control||null,N,!1),function At(U,V){const N=U.indexOf(V);N>-1&&U.splice(N,1)}(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,re){this.form.get(N.path).setValue(re)}onSubmit(N){return this.submitted=!0,function Wn(U,V){U._syncPendingControls(),V.forEach(N=>{const re=N.control;"submit"===re.updateOn&&re._pendingChange&&(N.viewToModelUpdate(re._pendingValue),re._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(N),"dialog"===N?.target?.method}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const re=N.control,et=this.form.get(N.path);re!==et&&(Xn(re||null,N),(U=>U instanceof Mn)(et)&&(ln(et,N,this.callSetDisabledState),N.control=et))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const re=this.form.get(N.path);(function be(U,V){Gn(U,V)})(re,N),re.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const re=this.form.get(N.path);re&&function Je(U,V){return yi(U,V)}(re,N)&&re.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gn(this.form,this),this._oldForm&&yi(this._oldForm,this)}_checkFormPresent(){}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(pe,10),d.Y36(Ce,10),d.Y36(ze,8))},U.\u0275dir=d.lG2({type:U,selectors:[["","formGroup",""]],hostBindings:function(N,re){1&N&&d.NdJ("submit",function(Rt){return re.onSubmit(Rt)})("reset",function(){return re.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([sr]),d.qOj,d.TTD]}),U})();const fi={provide:Mt,useExisting:(0,d.Gpc)(()=>Hr)};let Hr=(()=>{class U extends Qt{constructor(N,re,et){super(),this._parent=N,this._setValidators(re),this._setAsyncValidators(et)}_checkParentType(){Hi(this._parent)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(Mt,13),d.Y36(pe,10),d.Y36(Ce,10))},U.\u0275dir=d.lG2({type:U,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[d._Bn([fi]),d.qOj]}),U})();const jr={provide:Mt,useExisting:(0,d.Gpc)(()=>Cr)};let Cr=(()=>{class U extends Mt{constructor(N,re,et){super(),this._parent=N,this._setValidators(re),this._setAsyncValidators(et)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Xt(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Hi(this._parent)}}return U.\u0275fac=function(N){return new(N||U)(d.Y36(Mt,13),d.Y36(pe,10),d.Y36(Ce,10))},U.\u0275dir=d.lG2({type:U,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[d._Bn([jr]),d.qOj]}),U})();function Hi(U){return!(U instanceof Hr||U instanceof ii||U instanceof Cr)}const eo={provide:xt,useExisting:(0,d.Gpc)(()=>Ur)};let Ur=(()=>{class U extends xt{set isDisabled(N){}constructor(N,re,et,Rt,Bn){super(),this._ngModelWarningConfig=Bn,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=N,this._setValidators(re),this._setAsyncValidators(et),this.valueAccessor=Kn(0,Rt)}ngOnChanges(N){this._added||this._setUpControl(),pn(N,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}get path(){return Xt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return U._ngModelWarningSentOnce=!1,U.\u0275fac=function(N){return new(N||U)(d.Y36(Mt,13),d.Y36(pe,10),d.Y36(Ce,10),d.Y36(p,10),d.Y36(Qn,8))},U.\u0275dir=d.lG2({type:U,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([eo]),d.qOj,d.TTD]}),U})(),us=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=d.oAB({type:U}),U.\u0275inj=d.cJS({imports:[yr]}),U})();class Qi extends hn{constructor(V,N,re){super(_n(N),Tn(re,N)),this.controls=V,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[this._adjustIndex(V)]}push(V,N={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(V,N,re={}){this.controls.splice(V,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:re.emitEvent})}removeAt(V,N={}){let re=this._adjustIndex(V);re<0&&(re=0),this.controls[re]&&this.controls[re]._registerOnCollectionChange(()=>{}),this.controls.splice(re,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(V,N,re={}){let et=this._adjustIndex(V);et<0&&(et=0),this.controls[et]&&this.controls[et]._registerOnCollectionChange(()=>{}),this.controls.splice(et,1),N&&(this.controls.splice(et,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,N={}){un(this,!1,V),V.forEach((re,et)=>{Nn(this,!1,et),this.at(et).setValue(re,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(V,N={}){null!=V&&(V.forEach((re,et)=>{this.at(et)&&this.at(et).patchValue(re,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(V=[],N={}){this._forEachChild((re,et)=>{re.reset(V[et],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(V=>V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_adjustIndex(V){return V<0?V+this.length:V}_syncPendingControls(){let V=this.controls.reduce((N,re)=>!!re._syncPendingControls()||N,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){this.controls.forEach((N,re)=>{V(N,re)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(N=>N.enabled&&V(N))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}_find(V){return this.at(V)??null}}function Us(U){return!!U&&(void 0!==U.asyncValidators||void 0!==U.validators||void 0!==U.updateOn)}let cr=(()=>{class U{constructor(){this.useNonNullable=!1}get nonNullable(){const N=new U;return N.useNonNullable=!0,N}group(N,re=null){const et=this._reduceControls(N);let Rt={};return Us(re)?Rt=re:null!==re&&(Rt.validators=re.validator,Rt.asyncValidators=re.asyncValidator),new X(et,Rt)}record(N,re=null){const et=this._reduceControls(N);return new W(et,re)}control(N,re,et){let Rt={};return this.useNonNullable?(Us(re)?Rt=re:(Rt.validators=re,Rt.asyncValidators=et),new Mn(N,{...Rt,nonNullable:!0})):new Mn(N,re,et)}array(N,re,et){const Rt=N.map(Bn=>this._createControl(Bn));return new Qi(Rt,re,et)}_reduceControls(N){const re={};return Object.keys(N).forEach(et=>{re[et]=this._createControl(N[et])}),re}_createControl(N){return N instanceof Mn||N instanceof hn?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}}return U.\u0275fac=function(N){return new(N||U)},U.\u0275prov=d.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),Dr=(()=>{class U{static withConfig(N){return{ngModule:U,providers:[{provide:ze,useValue:N.callSetDisabledState??st}]}}}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=d.oAB({type:U}),U.\u0275inj=d.cJS({imports:[us]}),U})(),sn=(()=>{class U{static withConfig(N){return{ngModule:U,providers:[{provide:Qn,useValue:N.warnOnNgModelWithFormControl??"always"},{provide:ze,useValue:N.callSetDisabledState??st}]}}}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=d.oAB({type:U}),U.\u0275inj=d.cJS({imports:[us]}),U})()},1481:(Ft,Be,K)=>{"use strict";K.d(Be,{Dx:()=>zt,b2:()=>xt,q6:()=>Xe,se:()=>ke});var d=K(6895),v=K(8256);class ce extends d.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ue extends ce{static makeCurrent(){(0,d.HT)(new Ue)}onAndCancel(F,I,W){return F.addEventListener(I,W,!1),()=>{F.removeEventListener(I,W,!1)}}dispatchEvent(F,I){F.dispatchEvent(I)}remove(F){F.parentNode&&F.parentNode.removeChild(F)}createElement(F,I){return(I=I||this.getDefaultDocument()).createElement(F)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(F){return F.nodeType===Node.ELEMENT_NODE}isShadowRoot(F){return F instanceof DocumentFragment}getGlobalEventTarget(F,I){return"window"===I?window:"document"===I?F:"body"===I?F.body:null}getBaseHref(F){const I=function fe(){return T=T||document.querySelector("base"),T?T.getAttribute("href"):null}();return null==I?null:function o(X){m=m||document.createElement("a"),m.setAttribute("href",X);const F=m.pathname;return"/"===F.charAt(0)?F:`/${F}`}(I)}resetBaseElement(){T=null}getUserAgent(){return window.navigator.userAgent}getCookie(F){return(0,d.Mx)(document.cookie,F)}}let m,T=null;const f=new v.OlP("TRANSITION_ID"),r=[{provide:v.ip1,useFactory:function h(X,F,I){return()=>{I.get(v.CZH).donePromise.then(()=>{const W=(0,d.q)(),me=F.querySelectorAll(`style[ng-transition="${X}"]`);for(let ze=0;ze<me.length;ze++)W.remove(me[ze])})}},deps:[f,d.K0,v.zs3],multi:!0}];let s=(()=>{class X{build(){return new XMLHttpRequest}}return X.\u0275fac=function(I){return new(I||X)},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();const u=new v.OlP("EventManagerPlugins");let p=(()=>{class X{constructor(I,W){this._zone=W,this._eventNameToPlugin=new Map,I.forEach(me=>me.manager=this),this._plugins=I.slice().reverse()}addEventListener(I,W,me){return this._findPluginFor(W).addEventListener(I,W,me)}addGlobalEventListener(I,W,me){return this._findPluginFor(W).addGlobalEventListener(I,W,me)}getZone(){return this._zone}_findPluginFor(I){const W=this._eventNameToPlugin.get(I);if(W)return W;const me=this._plugins;for(let ze=0;ze<me.length;ze++){const st=me[ze];if(st.supports(I))return this._eventNameToPlugin.set(I,st),st}throw new Error(`No event manager plugin found for event ${I}`)}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(u),v.LFG(v.R0b))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();class l{constructor(F){this._doc=F}addGlobalEventListener(F,I,W){const me=(0,d.q)().getGlobalEventTarget(this._doc,F);if(!me)throw new Error(`Unsupported event target ${me} for event ${I}`);return this.addEventListener(me,I,W)}}let y=(()=>{class X{constructor(){this.usageCount=new Map}addStyles(I){for(const W of I)1===this.changeUsageCount(W,1)&&this.onStyleAdded(W)}removeStyles(I){for(const W of I)0===this.changeUsageCount(W,-1)&&this.onStyleRemoved(W)}onStyleRemoved(I){}onStyleAdded(I){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(I,W){const me=this.usageCount;let ze=me.get(I)??0;return ze+=W,ze>0?me.set(I,ze):me.delete(I),ze}ngOnDestroy(){for(const I of this.getAllStyles())this.onStyleRemoved(I);this.usageCount.clear()}}return X.\u0275fac=function(I){return new(I||X)},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})(),S=(()=>{class X extends y{constructor(I){super(),this.doc=I,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(I){for(const W of this.hostNodes)this.addStyleToHost(W,I)}onStyleRemoved(I){const W=this.styleRef;W.get(I)?.forEach(ze=>ze.remove()),W.delete(I)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(I){this.hostNodes.add(I);for(const W of this.getAllStyles())this.addStyleToHost(I,W)}removeHost(I){this.hostNodes.delete(I)}addStyleToHost(I,W){const me=this.doc.createElement("style");me.textContent=W,I.appendChild(me);const ze=this.styleRef.get(W);ze?ze.push(me):this.styleRef.set(W,[me])}resetHostNodes(){const I=this.hostNodes;I.clear(),I.add(this.doc.head)}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(d.K0))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();const x={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},A=/%COMP%/g,j="%COMP%",Z=`_nghost-${j}`,ue=`_ngcontent-${j}`,Ce=new v.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ot(X,F){return F.flat(100).map(I=>I.replace(A,X))}function at(X){return F=>{if("__ngUnwrap__"===F)return X;!1===X(F)&&(F.preventDefault(),F.returnValue=!1)}}let ke=(()=>{class X{constructor(I,W,me,ze){this.eventManager=I,this.sharedStylesHost=W,this.appId=me,this.removeStylesOnCompDestory=ze,this.rendererByCompId=new Map,this.defaultRenderer=new Ee(I)}createRenderer(I,W){if(!I||!W)return this.defaultRenderer;const me=this.getOrCreateRenderer(I,W);return me instanceof he?me.applyToHost(I):me instanceof ae&&me.applyStyles(),me}getOrCreateRenderer(I,W){const me=this.rendererByCompId;let ze=me.get(W.id);if(!ze){const st=this.eventManager,Xt=this.sharedStylesHost,ln=this.removeStylesOnCompDestory;switch(W.encapsulation){case v.ifc.Emulated:ze=new he(st,Xt,W,this.appId,ln);break;case v.ifc.ShadowDom:return new le(st,Xt,I,W);default:ze=new ae(st,Xt,W,ln)}ze.onDestroy=()=>me.delete(W.id),me.set(W.id,ze)}return ze}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(p),v.LFG(S),v.LFG(v.AFp),v.LFG(Ce))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();class Ee{constructor(F){this.eventManager=F,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(F,I){return I?document.createElementNS(x[I]||I,F):document.createElement(F)}createComment(F){return document.createComment(F)}createText(F){return document.createTextNode(F)}appendChild(F,I){(q(F)?F.content:F).appendChild(I)}insertBefore(F,I,W){F&&(q(F)?F.content:F).insertBefore(I,W)}removeChild(F,I){F&&F.removeChild(I)}selectRootElement(F,I){let W="string"==typeof F?document.querySelector(F):F;if(!W)throw new Error(`The selector "${F}" did not match any elements`);return I||(W.textContent=""),W}parentNode(F){return F.parentNode}nextSibling(F){return F.nextSibling}setAttribute(F,I,W,me){if(me){I=me+":"+I;const ze=x[me];ze?F.setAttributeNS(ze,I,W):F.setAttribute(I,W)}else F.setAttribute(I,W)}removeAttribute(F,I,W){if(W){const me=x[W];me?F.removeAttributeNS(me,I):F.removeAttribute(`${W}:${I}`)}else F.removeAttribute(I)}addClass(F,I){F.classList.add(I)}removeClass(F,I){F.classList.remove(I)}setStyle(F,I,W,me){me&(v.JOm.DashCase|v.JOm.Important)?F.style.setProperty(I,W,me&v.JOm.Important?"important":""):F.style[I]=W}removeStyle(F,I,W){W&v.JOm.DashCase?F.style.removeProperty(I):F.style[I]=""}setProperty(F,I,W){F[I]=W}setValue(F,I){F.nodeValue=I}listen(F,I,W){return"string"==typeof F?this.eventManager.addGlobalEventListener(F,I,at(W)):this.eventManager.addEventListener(F,I,at(W))}}function q(X){return"TEMPLATE"===X.tagName&&void 0!==X.content}class le extends Ee{constructor(F,I,W,me){super(F),this.sharedStylesHost=I,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ze=ot(me.id,me.styles);for(const st of ze){const Xt=document.createElement("style");Xt.textContent=st,this.shadowRoot.appendChild(Xt)}}nodeOrShadowRoot(F){return F===this.hostEl?this.shadowRoot:F}appendChild(F,I){return super.appendChild(this.nodeOrShadowRoot(F),I)}insertBefore(F,I,W){return super.insertBefore(this.nodeOrShadowRoot(F),I,W)}removeChild(F,I){return super.removeChild(this.nodeOrShadowRoot(F),I)}parentNode(F){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(F)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ae extends Ee{constructor(F,I,W,me,ze=W.id){super(F),this.sharedStylesHost=I,this.removeStylesOnCompDestory=me,this.rendererUsageCount=0,this.styles=ot(ze,W.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class he extends ae{constructor(F,I,W,me,ze){const st=me+"-"+W.id;super(F,I,W,ze,st),this.contentAttr=function Se(X){return ue.replace(A,X)}(st),this.hostAttr=function He(X){return Z.replace(A,X)}(st)}applyToHost(F){this.applyStyles(),this.setAttribute(F,this.hostAttr,"")}createElement(F,I){const W=super.createElement(F,I);return super.setAttribute(W,this.contentAttr,""),W}}let Fe=(()=>{class X extends l{constructor(I){super(I)}supports(I){return!0}addEventListener(I,W,me){return I.addEventListener(W,me,!1),()=>this.removeEventListener(I,W,me)}removeEventListener(I,W,me){return I.removeEventListener(W,me)}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(d.K0))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();const de=["alt","control","meta","shift"],ee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},De={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let Me=(()=>{class X extends l{constructor(I){super(I)}supports(I){return null!=X.parseEventName(I)}addEventListener(I,W,me){const ze=X.parseEventName(W),st=X.eventCallback(ze.fullKey,me,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,d.q)().onAndCancel(I,ze.domEventName,st))}static parseEventName(I){const W=I.toLowerCase().split("."),me=W.shift();if(0===W.length||"keydown"!==me&&"keyup"!==me)return null;const ze=X._normalizeKey(W.pop());let st="",Xt=W.indexOf("code");if(Xt>-1&&(W.splice(Xt,1),st="code."),de.forEach(Xn=>{const Pn=W.indexOf(Xn);Pn>-1&&(W.splice(Pn,1),st+=Xn+".")}),st+=ze,0!=W.length||0===ze.length)return null;const ln={};return ln.domEventName=me,ln.fullKey=st,ln}static matchEventFullKeyCode(I,W){let me=ee[I.key]||I.key,ze="";return W.indexOf("code.")>-1&&(me=I.code,ze="code."),!(null==me||!me)&&(me=me.toLowerCase()," "===me?me="space":"."===me&&(me="dot"),de.forEach(st=>{st!==me&&(0,De[st])(I)&&(ze+=st+".")}),ze+=me,ze===W)}static eventCallback(I,W,me){return ze=>{X.matchEventFullKeyCode(ze,I)&&me.runGuarded(()=>W(ze))}}static _normalizeKey(I){return"esc"===I?"escape":I}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(d.K0))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac}),X})();const Xe=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:d.bD},{provide:v.g9A,useValue:function qe(){Ue.makeCurrent()},multi:!0},{provide:d.K0,useFactory:function tt(){return(0,v.RDi)(document),document},deps:[]}]),lt=new v.OlP(""),vt=[{provide:v.rWj,useClass:class a{addToWindow(F){v.dqk.getAngularTestability=(W,me=!0)=>{const ze=F.findTestabilityInTree(W,me);if(null==ze)throw new Error("Could not find testability for element.");return ze},v.dqk.getAllAngularTestabilities=()=>F.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>F.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(W=>{const me=v.dqk.getAllAngularTestabilities();let ze=me.length,st=!1;const Xt=function(ln){st=st||ln,ze--,0==ze&&W(st)};me.forEach(function(ln){ln.whenStable(Xt)})})}findTestabilityInTree(F,I,W){return null==I?null:F.getTestability(I)??(W?(0,d.q)().isShadowRoot(I)?this.findTestabilityInTree(F,I.host,!0):this.findTestabilityInTree(F,I.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],Mt=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Ne(){return new v.qLn},deps:[]},{provide:u,useClass:Fe,multi:!0,deps:[d.K0,v.R0b,v.Lbi]},{provide:u,useClass:Me,multi:!0,deps:[d.K0]},{provide:ke,useClass:ke,deps:[p,S,v.AFp,Ce]},{provide:v.FYo,useExisting:ke},{provide:y,useExisting:S},{provide:S,useClass:S,deps:[d.K0]},{provide:p,useClass:p,deps:[u,v.R0b]},{provide:d.JF,useClass:s,deps:[]},[]];let xt=(()=>{class X{constructor(I){}static withServerTransition(I){return{ngModule:X,providers:[{provide:v.AFp,useValue:I.appId},{provide:f,useExisting:v.AFp},r]}}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(lt,12))},X.\u0275mod=v.oAB({type:X}),X.\u0275inj=v.cJS({providers:[...Mt,...vt],imports:[d.ez,v.hGG]}),X})(),zt=(()=>{class X{constructor(I){this._doc=I}getTitle(){return this._doc.title}setTitle(I){this._doc.title=I||""}}return X.\u0275fac=function(I){return new(I||X)(v.LFG(d.K0))},X.\u0275prov=v.Yz7({token:X,factory:function(I){let W=null;return W=I?new I:function Gt(){return new zt((0,v.LFG)(d.K0))}(),W},providedIn:"root"}),X})();typeof window<"u"&&window},1002:(Ft,Be,K)=>{"use strict";K.d(Be,{gz:()=>Hi,m2:()=>Qt,F0:()=>Fi,rH:()=>C,Od:()=>_,Bz:()=>si,lC:()=>ls});var d=K(8256),v=K(2076),ce=K(9646),Ue=K(1135),T=K(6805),fe=K(9751),m=K(4742),o=K(4671),f=K(3268),h=K(7669),r=K(1810),a=K(5403),s=K(9672);function u(...D){const E=(0,h.yG)(D),b=(0,h.jO)(D),{args:P,keys:z}=(0,m.D)(D);if(0===P.length)return(0,v.D)([],E);const Q=new fe.y(function p(D,E,b=o.y){return P=>{l(E,()=>{const{length:z}=D,Q=new Array(z);let oe=z,Pe=z;for(let ct=0;ct<z;ct++)l(E,()=>{const Dt=(0,v.D)(D[ct],E);let Ot=!1;Dt.subscribe((0,a.x)(P,Cn=>{Q[ct]=Cn,Ot||(Ot=!0,Pe--),Pe||P.next(b(Q.slice()))},()=>{--oe||P.complete()}))},P)},P)}}(P,E,z?oe=>(0,r.n)(z,oe):o.y));return b?Q.pipe((0,f.Z)(b)):Q}function l(D,E,b){D?(0,s.f)(b,D,E):E()}var y=K(8189);function x(...D){return function S(){return(0,y.J)(1)}()((0,v.D)(D,(0,h.yG)(D)))}var A=K(8421);function O(D){return new fe.y(E=>{(0,A.Xf)(D()).subscribe(E)})}var j=K(9635),Z=K(2843),ue=K(515),pe=K(727),Ce=K(4482);function Se(){return(0,Ce.e)((D,E)=>{let b=null;D._refCount++;const P=(0,a.x)(E,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(b=null);const z=D._connection,Q=b;b=null,z&&(!Q||z===Q)&&z.unsubscribe(),E.unsubscribe()});D.subscribe(P),P.closed||(b=D.connect())})}class He extends fe.y{constructor(E,b){super(),this.source=E,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Ce.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,E?.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new pe.w0;const b=this.getSubject();E.add(this.source.subscribe((0,a.x)(b,void 0,()=>{this._teardown(),b.complete()},P=>{this._teardown(),b.error(P)},()=>this._teardown()))),E.closed&&(this._connection=null,E=pe.w0.EMPTY)}return E}refCount(){return Se()(this)}}var ot=K(7579),at=K(6895),ke=K(4004);function Ee(D,E){return(0,Ce.e)((b,P)=>{let z=null,Q=0,oe=!1;const Pe=()=>oe&&!z&&P.complete();b.subscribe((0,a.x)(P,ct=>{z?.unsubscribe();let Dt=0;const Ot=Q++;(0,A.Xf)(D(ct,Ot)).subscribe(z=(0,a.x)(P,Cn=>P.next(E?E(ct,Cn,Ot,Dt++):Cn),()=>{z=null,Pe()}))},()=>{oe=!0,Pe()}))})}var xe=K(5698),q=K(9300),le=K(5577),ae=K(590),he=K(4351),Fe=K(576);function de(D,E,b){const P=(0,Fe.m)(D)||E||b?{next:D,error:E,complete:b}:D;return P?(0,Ce.e)((z,Q)=>{var oe;null===(oe=P.subscribe)||void 0===oe||oe.call(P);let Pe=!0;z.subscribe((0,a.x)(Q,ct=>{var Dt;null===(Dt=P.next)||void 0===Dt||Dt.call(P,ct),Q.next(ct)},()=>{var ct;Pe=!1,null===(ct=P.complete)||void 0===ct||ct.call(P),Q.complete()},ct=>{var Dt;Pe=!1,null===(Dt=P.error)||void 0===Dt||Dt.call(P,ct),Q.error(ct)},()=>{var ct,Dt;Pe&&(null===(ct=P.unsubscribe)||void 0===ct||ct.call(P)),null===(Dt=P.finalize)||void 0===Dt||Dt.call(P)}))}):o.y}var ee=K(262);function Me(D,E){return(0,Ce.e)(function De(D,E,b,P,z){return(Q,oe)=>{let Pe=b,ct=E,Dt=0;Q.subscribe((0,a.x)(oe,Ot=>{const Cn=Dt++;ct=Pe?D(ct,Ot,Cn):(Pe=!0,Ot),P&&oe.next(ct)},z&&(()=>{Pe&&oe.next(ct),oe.complete()})))}}(D,E,arguments.length>=2,!0))}function We(D){return D<=0?()=>ue.E:(0,Ce.e)((E,b)=>{let P=[];E.subscribe((0,a.x)(b,z=>{P.push(z),D<P.length&&P.shift()},()=>{for(const z of P)b.next(z);b.complete()},void 0,()=>{P=null}))})}var $e=K(8068),rt=K(6590);function Ke(D,E){const b=arguments.length>=2;return P=>P.pipe(D?(0,q.h)((z,Q)=>D(z,Q,P)):o.y,We(1),b?(0,rt.d)(E):(0,$e.T)(()=>new T.K))}function Ne(D){return(0,Ce.e)((E,b)=>{try{E.subscribe(b)}finally{b.add(D)}})}var tt=K(1481);const Ve="primary",Xe=Symbol("RouteTitle");class lt{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b[0]:b}return null}getAll(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function vt(D){return new lt(D)}function Mt(D,E,b){const P=b.path.split("/");if(P.length>D.length||"full"===b.pathMatch&&(E.hasChildren()||P.length<D.length))return null;const z={};for(let Q=0;Q<P.length;Q++){const oe=P[Q],Pe=D[Q];if(oe.startsWith(":"))z[oe.substring(1)]=Pe;else if(oe!==Pe.path)return null}return{consumed:D.slice(0,P.length),posParams:z}}function nt(D,E){const b=D?Object.keys(D):void 0,P=E?Object.keys(E):void 0;if(!b||!P||b.length!=P.length)return!1;let z;for(let Q=0;Q<b.length;Q++)if(z=b[Q],!It(D[z],E[z]))return!1;return!0}function It(D,E){if(Array.isArray(D)&&Array.isArray(E)){if(D.length!==E.length)return!1;const b=[...D].sort(),P=[...E].sort();return b.every((z,Q)=>P[Q]===z)}return D===E}function Lt(D){return Array.prototype.concat.apply([],D)}function Gt(D){return D.length>0?D[D.length-1]:null}function mt(D,E){for(const b in D)D.hasOwnProperty(b)&&E(D[b],b)}function Qe(D){return(0,d.CqO)(D)?D:(0,d.QGY)(D)?(0,v.D)(Promise.resolve(D)):(0,ce.of)(D)}const je=!1,pt={exact:function Bt(D,E,b){if(!_e(D.segments,E.segments)||!wi(D.segments,E.segments,b)||D.numberOfChildren!==E.numberOfChildren)return!1;for(const P in E.children)if(!D.children[P]||!Bt(D.children[P],E.children[P],b))return!1;return!0},subset:bi},ye={exact:function yt(D,E){return nt(D,E)},subset:function dn(D,E){return Object.keys(E).length<=Object.keys(D).length&&Object.keys(E).every(b=>It(D[b],E[b]))},ignored:()=>!0};function Ie(D,E,b){return pt[b.paths](D.root,E.root,b.matrixParams)&&ye[b.queryParams](D.queryParams,E.queryParams)&&!("exact"===b.fragment&&D.fragment!==E.fragment)}function bi(D,E,b){return En(D,E,E.segments,b)}function En(D,E,b,P){if(D.segments.length>b.length){const z=D.segments.slice(0,b.length);return!(!_e(z,b)||E.hasChildren()||!wi(z,b,P))}if(D.segments.length===b.length){if(!_e(D.segments,b)||!wi(D.segments,b,P))return!1;for(const z in E.children)if(!D.children[z]||!bi(D.children[z],E.children[z],P))return!1;return!0}{const z=b.slice(0,D.segments.length),Q=b.slice(D.segments.length);return!!(_e(D.segments,z)&&wi(D.segments,z,P)&&D.children[Ve])&&En(D.children[Ve],E,Q,P)}}function wi(D,E,b){return E.every((P,z)=>ye[b](D[z].parameters,P.parameters))}class jn{constructor(E=new Yt([],{}),b={},P=null){this.root=E,this.queryParams=b,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vt(this.queryParams)),this._queryParamMap}toString(){return Wt.serialize(this)}}class Yt{constructor(E,b){this.segments=E,this.children=b,this.parent=null,mt(b,(P,z)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ht(this)}}class Si{constructor(E,b){this.path=E,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=vt(this.parameters)),this._parameterMap}toString(){return hn(this)}}function _e(D,E){return D.length===E.length&&D.every((b,P)=>b.path===E[P].path)}let _t=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:function(){return new Ye},providedIn:"root"}),D})();class Ye{parse(E){const b=new ln(E);return new jn(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(E){const b=`/${_n(E.root,!0)}`,P=function F(D){const E=Object.keys(D).map(b=>{const P=D[b];return Array.isArray(P)?P.map(z=>`${Tn(b)}=${Tn(z)}`).join("&"):`${Tn(b)}=${Tn(P)}`}).filter(b=>!!b);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${b}${P}${"string"==typeof E.fragment?`#${function li(D){return encodeURI(D)}(E.fragment)}`:""}`}}const Wt=new Ye;function Ht(D){return D.segments.map(E=>hn(E)).join("/")}function _n(D,E){if(!D.hasChildren())return Ht(D);if(E){const b=D.children[Ve]?_n(D.children[Ve],!1):"",P=[];return mt(D.children,(z,Q)=>{Q!==Ve&&P.push(`${Q}:${_n(z,!1)}`)}),P.length>0?`${b}(${P.join("//")})`:b}{const b=function Oe(D,E){let b=[];return mt(D.children,(P,z)=>{z===Ve&&(b=b.concat(E(P,z)))}),mt(D.children,(P,z)=>{z!==Ve&&(b=b.concat(E(P,z)))}),b}(D,(P,z)=>z===Ve?[_n(D.children[Ve],!1)]:[`${z}:${_n(P,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Ve]?`${Ht(D)}/${b[0]}`:`${Ht(D)}/(${b.join("//")})`}}function Ut(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tn(D){return Ut(D).replace(/%3B/gi,";")}function On(D){return Ut(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nn(D){return decodeURIComponent(D)}function un(D){return Nn(D.replace(/\+/g,"%20"))}function hn(D){return`${On(D.path)}${function X(D){return Object.keys(D).map(E=>`;${On(E)}=${On(D[E])}`).join("")}(D.parameters)}`}const I=/^[^\/()?;=#]+/;function W(D){const E=D.match(I);return E?E[0]:""}const me=/^[^=?&#]+/,st=/^[^&#]+/;class ln{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(E.length>0||Object.keys(b).length>0)&&(P[Ve]=new Yt(E,b)),P}parseSegment(){const E=W(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new d.vHH(4009,je);return this.capture(E),new Si(Nn(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const b=W(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const z=W(this.remaining);z&&(P=z,this.capture(P))}E[Nn(b)]=Nn(P)}parseQueryParam(E){const b=function ze(D){const E=D.match(me);return E?E[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const oe=function Xt(D){const E=D.match(st);return E?E[0]:""}(this.remaining);oe&&(P=oe,this.capture(P))}const z=un(b),Q=un(P);if(E.hasOwnProperty(z)){let oe=E[z];Array.isArray(oe)||(oe=[oe],E[z]=oe),oe.push(Q)}else E[z]=Q}parseParens(E){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=W(this.remaining),z=this.remaining[P.length];if("/"!==z&&")"!==z&&";"!==z)throw new d.vHH(4010,je);let Q;P.indexOf(":")>-1?(Q=P.slice(0,P.indexOf(":")),this.capture(Q),this.capture(":")):E&&(Q=Ve);const oe=this.parseChildren();b[Q]=1===Object.keys(oe).length?oe[Ve]:new Yt([],oe),this.consumeOptional("//")}return b}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new d.vHH(4011,je)}}function Xn(D){return D.segments.length>0?new Yt([],{[Ve]:D}):D}function Pn(D){const E={};for(const P of Object.keys(D.children)){const Q=Pn(D.children[P]);(Q.segments.length>0||Q.hasChildren())&&(E[P]=Q)}return function ci(D){if(1===D.numberOfChildren&&D.children[Ve]){const E=D.children[Ve];return new Yt(D.segments.concat(E.segments),E.children)}return D}(new Yt(D.segments,E))}function Gn(D){return D instanceof jn}const yi=!1;function J(D,E,b,P,z){if(0===b.length)return bt(E.root,E.root,E.root,P,z);const Q=function Et(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new $t(!0,0,D);let E=0,b=!1;const P=D.reduce((z,Q,oe)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const Pe={};return mt(Q.outlets,(ct,Dt)=>{Pe[Dt]="string"==typeof ct?ct.split("/"):ct}),[...z,{outlets:Pe}]}if(Q.segmentPath)return[...z,Q.segmentPath]}return"string"!=typeof Q?[...z,Q]:0===oe?(Q.split("/").forEach((Pe,ct)=>{0==ct&&"."===Pe||(0==ct&&""===Pe?b=!0:".."===Pe?E++:""!=Pe&&z.push(Pe))}),z):[...z,Q]},[]);return new $t(b,E,P)}(b);return Q.toRoot()?bt(E.root,E.root,new Yt([],{}),P,z):function oe(ct){const Dt=function Di(D,E,b,P){if(D.isAbsolute)return new rn(E.root,!0,0);if(-1===P)return new rn(b,b===E.root,0);return function Wn(D,E,b){let P=D,z=E,Q=b;for(;Q>z;){if(Q-=z,P=P.parent,!P)throw new d.vHH(4005,yi&&"Invalid number of '../'");z=P.segments.length}return new rn(P,!1,z-Q)}(b,P+(be(D.commands[0])?0:1),D.numberOfDoubleDots)}(Q,E,D.snapshot?._urlSegment,ct),Ot=Dt.processChildren?Zt(Dt.segmentGroup,Dt.index,Q.commands):At(Dt.segmentGroup,Dt.index,Q.commands);return bt(E.root,Dt.segmentGroup,Ot,P,z)}(D.snapshot?._lastPathIndex)}function be(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Je(D){return"object"==typeof D&&null!=D&&D.outlets}function bt(D,E,b,P,z){let oe,Q={};P&&mt(P,(ct,Dt)=>{Q[Dt]=Array.isArray(ct)?ct.map(Ot=>`${Ot}`):`${ct}`}),oe=D===E?b:nn(D,E,b);const Pe=Xn(Pn(oe));return new jn(Pe,Q,z)}function nn(D,E,b){const P={};return mt(D.children,(z,Q)=>{P[Q]=z===E?b:nn(z,E,b)}),new Yt(D.segments,P)}class $t{constructor(E,b,P){if(this.isAbsolute=E,this.numberOfDoubleDots=b,this.commands=P,E&&P.length>0&&be(P[0]))throw new d.vHH(4003,yi&&"Root segment cannot have matrix parameters");const z=P.find(Je);if(z&&z!==Gt(P))throw new d.vHH(4004,yi&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rn{constructor(E,b,P){this.segmentGroup=E,this.processChildren=b,this.index=P}}function At(D,E,b){if(D||(D=new Yt([],{})),0===D.segments.length&&D.hasChildren())return Zt(D,E,b);const P=function Hn(D,E,b){let P=0,z=E;const Q={match:!1,pathIndex:0,commandIndex:0};for(;z<D.segments.length;){if(P>=b.length)return Q;const oe=D.segments[z],Pe=b[P];if(Je(Pe))break;const ct=`${Pe}`,Dt=P<b.length-1?b[P+1]:null;if(z>0&&void 0===ct)break;if(ct&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!Pi(ct,Dt,oe))return Q;P+=2}else{if(!Pi(ct,{},oe))return Q;P++}z++}return{match:!0,pathIndex:z,commandIndex:P}}(D,E,b),z=b.slice(P.commandIndex);if(P.match&&P.pathIndex<D.segments.length){const Q=new Yt(D.segments.slice(0,P.pathIndex),{});return Q.children[Ve]=new Yt(D.segments.slice(P.pathIndex),D.children),Zt(Q,0,z)}return P.match&&0===z.length?new Yt(D.segments,{}):P.match&&!D.hasChildren()?qn(D,E,b):P.match?Zt(D,0,z):qn(D,E,b)}function Zt(D,E,b){if(0===b.length)return new Yt(D.segments,{});{const P=function Kn(D){return Je(D[0])?D[0].outlets:{[Ve]:D}}(b),z={};return!P[Ve]&&D.children[Ve]&&1===D.numberOfChildren&&0===D.children[Ve].segments.length?Zt(D.children[Ve],E,b):(mt(P,(Q,oe)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(z[oe]=At(D.children[oe],E,Q))}),mt(D.children,(Q,oe)=>{void 0===P[oe]&&(z[oe]=Q)}),new Yt(D.segments,z))}}function qn(D,E,b){const P=D.segments.slice(0,E);let z=0;for(;z<b.length;){const Q=b[z];if(Je(Q)){const ct=Zn(Q.outlets);return new Yt(P,ct)}if(0===z&&be(b[0])){P.push(new Si(D.segments[E].path,Un(b[0]))),z++;continue}const oe=Je(Q)?Q.outlets[Ve]:`${Q}`,Pe=z<b.length-1?b[z+1]:null;oe&&Pe&&be(Pe)?(P.push(new Si(oe,Un(Pe))),z+=2):(P.push(new Si(oe,{})),z++)}return new Yt(P,{})}function Zn(D){const E={};return mt(D,(b,P)=>{"string"==typeof b&&(b=[b]),null!==b&&(E[P]=qn(new Yt([],{}),0,b))}),E}function Un(D){const E={};return mt(D,(b,P)=>E[P]=`${b}`),E}function Pi(D,E,b){return D==b.path&&nt(E,b.parameters)}const Mn="imperative";class ui{constructor(E,b){this.id=E,this.url=b}}class Ki extends ui{constructor(E,b,P="imperative",z=null){super(E,b),this.type=0,this.navigationTrigger=P,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qt extends ui{constructor(E,b,P){super(E,b),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ir extends ui{constructor(E,b,P,z){super(E,b),this.reason=P,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class di extends ui{constructor(E,b,P,z){super(E,b),this.reason=P,this.code=z,this.type=16}}class ns extends ui{constructor(E,b,P,z){super(E,b),this.error=P,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ni extends ui{constructor(E,b,P,z){super(E,b),this.urlAfterRedirects=P,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kn extends ui{constructor(E,b,P,z){super(E,b),this.urlAfterRedirects=P,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends ui{constructor(E,b,P,z,Q){super(E,b),this.urlAfterRedirects=P,this.state=z,this.shouldActivate=Q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vi extends ui{constructor(E,b,P,z){super(E,b),this.urlAfterRedirects=P,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ii extends ui{constructor(E,b,P,z){super(E,b),this.urlAfterRedirects=P,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zi{constructor(E){this.route=E,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nr{constructor(E){this.route=E,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class An{constructor(E){this.snapshot=E,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Br{constructor(E){this.snapshot=E,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(E){this.snapshot=E,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rs{constructor(E){this.snapshot=E,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yr{constructor(E,b,P){this.routerEvent=E,this.position=b,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let In=(()=>{class D{createUrlTree(b,P,z,Q,oe,Pe){return J(b||P.root,z,Q,oe,Pe)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac}),D})(),Qn=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:function(E){return In.\u0275fac(E)},providedIn:"root"}),D})();class hi{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const b=this.pathFromRoot(E);return b.length>1?b[b.length-2]:null}children(E){const b=_r(E,this._root);return b?b.children.map(P=>P.value):[]}firstChild(E){const b=_r(E,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(E){const b=sr(E,this._root);return b.length<2?[]:b[b.length-2].children.map(z=>z.value).filter(z=>z!==E)}pathFromRoot(E){return sr(E,this._root).map(b=>b.value)}}function _r(D,E){if(D===E.value)return E;for(const b of E.children){const P=_r(D,b);if(P)return P}return null}function sr(D,E){if(D===E.value)return[E];for(const b of E.children){const P=sr(D,b);if(P.length)return P.unshift(E),P}return[]}class ii{constructor(E,b){this.value=E,this.children=b}toString(){return`TreeNode(${this.value})`}}function fi(D){const E={};return D&&D.children.forEach(b=>E[b.value.outlet]=b),E}class Hr extends hi{constructor(E,b){super(E),this.snapshot=b,ss(this,E)}toString(){return this.snapshot.toString()}}function jr(D,E){const b=function Cr(D,E){const oe=new br([],{},{},"",{},Ve,E,null,D.root,-1,{});return new zr("",new ii(oe,[]))}(D,E),P=new Ue.X([new Si("",{})]),z=new Ue.X({}),Q=new Ue.X({}),oe=new Ue.X({}),Pe=new Ue.X(""),ct=new Hi(P,z,oe,Pe,Q,Ve,E,b.root);return ct.snapshot=b.root,new Hr(new ii(ct,[]),b)}class Hi{constructor(E,b,P,z,Q,oe,Pe,ct){this.url=E,this.params=b,this.queryParams=P,this.fragment=z,this.data=Q,this.outlet=oe,this.component=Pe,this.title=this.data?.pipe((0,ke.U)(Dt=>Dt[Xe]))??(0,ce.of)(void 0),this._futureSnapshot=ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ke.U)(E=>vt(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ke.U)(E=>vt(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eo(D,E="emptyOnly"){const b=D.pathFromRoot;let P=0;if("always"!==E)for(P=b.length-1;P>=1;){const z=b[P],Q=b[P-1];if(z.routeConfig&&""===z.routeConfig.path)P--;else{if(Q.component)break;P--}}return function Ur(D){return D.reduce((E,b)=>({params:{...E.params,...b.params},data:{...E.data,...b.data},resolve:{...b.data,...E.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(P))}class br{get title(){return this.data?.[Xe]}constructor(E,b,P,z,Q,oe,Pe,ct,Dt,Ot,Cn){this.url=E,this.params=b,this.queryParams=P,this.fragment=z,this.data=Q,this.outlet=oe,this.component=Pe,this.routeConfig=ct,this._urlSegment=Dt,this._lastPathIndex=Ot,this._resolve=Cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zr extends hi{constructor(E,b){super(b),this.url=E,ss(this,b)}toString(){return os(this._root)}}function ss(D,E){E.value._routerState=D,E.children.forEach(b=>ss(D,b))}function os(D){const E=D.children.length>0?` { ${D.children.map(os).join(", ")} } `:"";return`${D.value}${E}`}function Gr(D){if(D.snapshot){const E=D.snapshot,b=D._futureSnapshot;D.snapshot=b,nt(E.queryParams,b.queryParams)||D.queryParams.next(b.queryParams),E.fragment!==b.fragment&&D.fragment.next(b.fragment),nt(E.params,b.params)||D.params.next(b.params),function xt(D,E){if(D.length!==E.length)return!1;for(let b=0;b<D.length;++b)if(!nt(D[b],E[b]))return!1;return!0}(E.url,b.url)||D.url.next(b.url),nt(E.data,b.data)||D.data.next(b.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function ws(D,E){const b=nt(D.params,E.params)&&function dt(D,E){return _e(D,E)&&D.every((b,P)=>nt(b.parameters,E[P].parameters))}(D.url,E.url);return b&&!(!D.parent!=!E.parent)&&(!D.parent||ws(D.parent,E.parent))}function as(D,E,b){if(b&&D.shouldReuseRoute(E.value,b.value.snapshot)){const P=b.value;P._futureSnapshot=E.value;const z=function Vo(D,E,b){return E.children.map(P=>{for(const z of b.children)if(D.shouldReuseRoute(P.value,z.value.snapshot))return as(D,P,z);return as(D,P)})}(D,E,b);return new ii(P,z)}{if(D.shouldAttach(E.value)){const Q=D.retrieve(E.value);if(null!==Q){const oe=Q.route;return oe.value._futureSnapshot=E.value,oe.children=E.children.map(Pe=>as(D,Pe)),oe}}const P=function Hs(D){return new Hi(new Ue.X(D.url),new Ue.X(D.params),new Ue.X(D.queryParams),new Ue.X(D.fragment),new Ue.X(D.data),D.outlet,D.component,D)}(E.value),z=E.children.map(Q=>as(D,Q));return new ii(P,z)}}const Wr="ngNavigationCancelingError";function $r(D,E){const{redirectTo:b,navigationBehaviorOptions:P}=Gn(E)?{redirectTo:E,navigationBehaviorOptions:void 0}:E,z=Gi(!1,0,E);return z.url=b,z.navigationBehaviorOptions=P,z}function Gi(D,E,b){const P=new Error("NavigationCancelingError: "+(D||""));return P[Wr]=!0,P.cancellationCode=E,b&&(P.url=b),P}function Wi(D){return Ss(D)&&Gn(D.url)}function Ss(D){return D&&D[Wr]}class Ri{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Yr,this.attachRef=null}}let Yr=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(b,P){const z=this.getOrCreateContext(b);z.outlet=P,this.contexts.set(b,z)}onChildOutletDestroyed(b){const P=this.getContext(b);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let P=this.getContext(b);return P||(P=new Ri,this.contexts.set(b,P)),P}getContext(b){return this.contexts.get(b)||null}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const $i=!1;let ls=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ve,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Yr),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(b){if(b.name){const{firstChange:P,previousValue:z}=b.name;if(P)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){return this.parentContexts.getContext(b)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);b?.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,$i);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,$i);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,$i);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,P){this.activated=b,this._activatedRoute=P,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,P){if(this.isActivated)throw new d.vHH(4013,$i);this._activatedRoute=b;const z=this.location,oe=b.snapshot.component,Pe=this.parentContexts.getOrCreateContext(this.name).children,ct=new js(b,Pe,z.injector);if(P&&function cs(D){return!!D.resolveComponentFactory}(P)){const Dt=P.resolveComponentFactory(oe);this.activated=z.createComponent(Dt,z.length,ct)}else this.activated=z.createComponent(oe,{index:z.length,injector:ct,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275dir=d.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),D})();class js{constructor(E,b,P){this.route=E,this.childContexts=b,this.parent=P}get(E,b){return E===Hi?this.route:E===Yr?this.childContexts:this.parent.get(E,b)}}let or=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275cmp=d.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(b,P){1&b&&d._UZ(0,"router-outlet")},dependencies:[ls],encapsulation:2}),D})();function wr(D,E){return D.providers&&!D._injector&&(D._injector=(0,d.MMx)(D.providers,E,`Route: ${D.path}`)),D._injector??E}function Zr(D){const E=D.children&&D.children.map(Zr),b=E?{...D,children:E}:{...D};return!b.component&&!b.loadComponent&&(E||b.loadChildren)&&b.outlet&&b.outlet!==Ve&&(b.component=or),b}function zn(D){return D.outlet||Ve}function us(D,E){const b=D.filter(P=>zn(P)===E);return b.push(...D.filter(P=>zn(P)!==E)),b}function Qi(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let E=D.parent;E;E=E.parent){const b=E.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class Ei{constructor(E,b,P,z){this.routeReuseStrategy=E,this.futureState=b,this.currState=P,this.forwardEvent=z}activate(E){const b=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,P,E),Gr(this.futureState.root),this.activateChildRoutes(b,P,E)}deactivateChildRoutes(E,b,P){const z=fi(b);E.children.forEach(Q=>{const oe=Q.value.outlet;this.deactivateRoutes(Q,z[oe],P),delete z[oe]}),mt(z,(Q,oe)=>{this.deactivateRouteAndItsChildren(Q,P)})}deactivateRoutes(E,b,P){const z=E.value,Q=b?b.value:null;if(z===Q)if(z.component){const oe=P.getContext(z.outlet);oe&&this.deactivateChildRoutes(E,b,oe.children)}else this.deactivateChildRoutes(E,b,P);else Q&&this.deactivateRouteAndItsChildren(b,P)}deactivateRouteAndItsChildren(E,b){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,b):this.deactivateRouteAndOutlet(E,b)}detachAndStoreRouteSubtree(E,b){const P=b.getContext(E.value.outlet),z=P&&E.value.component?P.children:b,Q=fi(E);for(const oe of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[oe],z);if(P&&P.outlet){const oe=P.outlet.detach(),Pe=P.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:oe,route:E,contexts:Pe})}}deactivateRouteAndOutlet(E,b){const P=b.getContext(E.value.outlet),z=P&&E.value.component?P.children:b,Q=fi(E);for(const oe of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[oe],z);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(E,b,P){const z=fi(b);E.children.forEach(Q=>{this.activateRoutes(Q,z[Q.value.outlet],P),this.forwardEvent(new rs(Q.value.snapshot))}),E.children.length&&this.forwardEvent(new Br(E.value.snapshot))}activateRoutes(E,b,P){const z=E.value,Q=b?b.value:null;if(Gr(z),z===Q)if(z.component){const oe=P.getOrCreateContext(z.outlet);this.activateChildRoutes(E,b,oe.children)}else this.activateChildRoutes(E,b,P);else if(z.component){const oe=P.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Pe=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),oe.children.onOutletReAttached(Pe.contexts),oe.attachRef=Pe.componentRef,oe.route=Pe.route.value,oe.outlet&&oe.outlet.attach(Pe.componentRef,Pe.route.value),Gr(Pe.route.value),this.activateChildRoutes(E,null,oe.children)}else{const Pe=Qi(z.snapshot),ct=Pe?.get(d._Vd)??null;oe.attachRef=null,oe.route=z,oe.resolver=ct,oe.injector=Pe,oe.outlet&&oe.outlet.activateWith(z,oe.injector),this.activateChildRoutes(E,null,oe.children)}}else this.activateChildRoutes(E,null,P)}}class Us{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class cr{constructor(E,b){this.component=E,this.route=b}}function no(D,E,b){const P=D._root;return Dr(P,E?E._root:null,b,[P.value])}function Sr(D,E){const b=Symbol(),P=E.get(D,b);return P===b?"function"!=typeof D||(0,d.Z0I)(D)?E.get(D):D:P}function Dr(D,E,b,P,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=fi(E);return D.children.forEach(oe=>{(function sn(D,E,b,P,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=D.value,oe=E?E.value:null,Pe=b?b.getContext(D.value.outlet):null;if(oe&&Q.routeConfig===oe.routeConfig){const ct=function U(D,E,b){if("function"==typeof b)return b(D,E);switch(b){case"pathParamsChange":return!_e(D.url,E.url);case"pathParamsOrQueryParamsChange":return!_e(D.url,E.url)||!nt(D.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ws(D,E)||!nt(D.queryParams,E.queryParams);default:return!ws(D,E)}}(oe,Q,Q.routeConfig.runGuardsAndResolvers);ct?z.canActivateChecks.push(new Us(P)):(Q.data=oe.data,Q._resolvedData=oe._resolvedData),Dr(D,E,Q.component?Pe?Pe.children:null:b,P,z),ct&&Pe&&Pe.outlet&&Pe.outlet.isActivated&&z.canDeactivateChecks.push(new cr(Pe.outlet.component,oe))}else oe&&V(E,Pe,z),z.canActivateChecks.push(new Us(P)),Dr(D,null,Q.component?Pe?Pe.children:null:b,P,z)})(oe,Q[oe.value.outlet],b,P.concat([oe.value]),z),delete Q[oe.value.outlet]}),mt(Q,(oe,Pe)=>V(oe,b.getContext(Pe),z)),z}function V(D,E,b){const P=fi(D),z=D.value;mt(P,(Q,oe)=>{V(Q,z.component?E?E.children.getContext(oe):null:E,b)}),b.canDeactivateChecks.push(new cr(z.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,z))}function N(D){return"function"==typeof D}function dr(D){return D instanceof T.K||"EmptyError"===D?.name}const Sn=Symbol("INITIAL_VALUE");function hr(){return Ee(D=>u(D.map(E=>E.pipe((0,xe.q)(1),function Le(...D){const E=(0,h.yG)(D);return(0,Ce.e)((b,P)=>{(E?x(D,b,E):x(D,b)).subscribe(P)})}(Sn)))).pipe((0,ke.U)(E=>{for(const b of E)if(!0!==b){if(b===Sn)return Sn;if(!1===b||b instanceof jn)return b}return!0}),(0,q.h)(E=>E!==Sn),(0,xe.q)(1)))}function ds(D){return(0,j.z)(de(E=>{if(Gn(E))throw $r(0,E)}),(0,ke.U)(E=>!0===E))}const Xi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ji(D,E,b,P,z){const Q=Er(D,E,b);return Q.matched?function Kr(D,E,b,P){const z=E.canMatch;if(!z||0===z.length)return(0,ce.of)(!0);const Q=z.map(oe=>{const Pe=Sr(oe,D);return Qe(function gt(D){return D&&N(D.canMatch)}(Pe)?Pe.canMatch(E,b):D.runInContext(()=>Pe(E,b)))});return(0,ce.of)(Q).pipe(hr(),ds())}(P=wr(E,P),E,b).pipe((0,ke.U)(oe=>!0===oe?Q:{...Xi})):(0,ce.of)(Q)}function Er(D,E,b){if(""===E.path)return"full"===E.pathMatch&&(D.hasChildren()||b.length>0)?{...Xi}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const z=(E.matcher||Mt)(b,D,E);if(!z)return{...Xi};const Q={};mt(z.posParams,(Pe,ct)=>{Q[ct]=Pe.path});const oe=z.consumed.length>0?{...Q,...z.consumed[z.consumed.length-1].parameters}:Q;return{matched:!0,consumedSegments:z.consumed,remainingSegments:b.slice(z.consumed.length),parameters:oe,positionalParamSegments:z.posParams??{}}}function zs(D,E,b,P){if(b.length>0&&function so(D,E,b){return b.some(P=>Tr(D,E,P)&&zn(P)!==Ve)}(D,b,P)){const Q=new Yt(E,function Gs(D,E,b,P){const z={};z[Ve]=P,P._sourceSegment=D,P._segmentIndexShift=E.length;for(const Q of b)if(""===Q.path&&zn(Q)!==Ve){const oe=new Yt([],{});oe._sourceSegment=D,oe._segmentIndexShift=E.length,z[zn(Q)]=oe}return z}(D,E,P,new Yt(b,D.children)));return Q._sourceSegment=D,Q._segmentIndexShift=E.length,{segmentGroup:Q,slicedSegments:[]}}if(0===b.length&&function oo(D,E,b){return b.some(P=>Tr(D,E,P))}(D,b,P)){const Q=new Yt(D.segments,function Ho(D,E,b,P,z){const Q={};for(const oe of P)if(Tr(D,b,oe)&&!z[zn(oe)]){const Pe=new Yt([],{});Pe._sourceSegment=D,Pe._segmentIndexShift=E.length,Q[zn(oe)]=Pe}return{...z,...Q}}(D,E,b,P,D.children));return Q._sourceSegment=D,Q._segmentIndexShift=E.length,{segmentGroup:Q,slicedSegments:b}}const z=new Yt(D.segments,D.children);return z._sourceSegment=D,z._segmentIndexShift=E.length,{segmentGroup:z,slicedSegments:b}}function Tr(D,E,b){return(!(D.hasChildren()||E.length>0)||"full"!==b.pathMatch)&&""===b.path}function ao(D,E,b,P){return!!(zn(D)===P||P!==Ve&&Tr(E,b,D))&&("**"===D.path||Er(E,D,b).matched)}function lo(D,E,b){return 0===E.length&&!D.children[b]}const xr=!1;class hs{constructor(E){this.segmentGroup=E||null}}class Ws{constructor(E){this.urlTree=E}}function fs(D){return(0,Z._)(new hs(D))}function co(D){return(0,Z._)(new Ws(D))}class gi{constructor(E,b,P,z,Q){this.injector=E,this.configLoader=b,this.urlSerializer=P,this.urlTree=z,this.config=Q,this.allowRedirects=!0}apply(){const E=zs(this.urlTree.root,[],[],this.config).segmentGroup,b=new Yt(E.segments,E.children);return this.expandSegmentGroup(this.injector,this.config,b,Ve).pipe((0,ke.U)(Q=>this.createUrlTree(Pn(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,ee.K)(Q=>{if(Q instanceof Ws)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof hs?this.noMatchError(Q):Q}))}match(E){return this.expandSegmentGroup(this.injector,this.config,E.root,Ve).pipe((0,ke.U)(z=>this.createUrlTree(Pn(z),E.queryParams,E.fragment))).pipe((0,ee.K)(z=>{throw z instanceof hs?this.noMatchError(z):z}))}noMatchError(E){return new d.vHH(4002,xr)}createUrlTree(E,b,P){const z=Xn(E);return new jn(z,b,P)}expandSegmentGroup(E,b,P,z){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(E,b,P).pipe((0,ke.U)(Q=>new Yt([],Q))):this.expandSegment(E,P,b,P.segments,z,!0)}expandChildren(E,b,P){const z=[];for(const Q of Object.keys(P.children))"primary"===Q?z.unshift(Q):z.push(Q);return(0,v.D)(z).pipe((0,he.b)(Q=>{const oe=P.children[Q],Pe=us(b,Q);return this.expandSegmentGroup(E,Pe,oe,Q).pipe((0,ke.U)(ct=>({segment:ct,outlet:Q})))}),Me((Q,oe)=>(Q[oe.outlet]=oe.segment,Q),{}),Ke())}expandSegment(E,b,P,z,Q,oe){return(0,v.D)(P).pipe((0,he.b)(Pe=>this.expandSegmentAgainstRoute(E,b,P,Pe,z,Q,oe).pipe((0,ee.K)(Dt=>{if(Dt instanceof hs)return(0,ce.of)(null);throw Dt}))),(0,ae.P)(Pe=>!!Pe),(0,ee.K)((Pe,ct)=>{if(dr(Pe))return lo(b,z,Q)?(0,ce.of)(new Yt([],{})):fs(b);throw Pe}))}expandSegmentAgainstRoute(E,b,P,z,Q,oe,Pe){return ao(z,b,Q,oe)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(E,b,z,Q,oe):Pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,b,P,z,Q,oe):fs(b):fs(b)}expandSegmentAgainstRouteUsingRedirect(E,b,P,z,Q,oe){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,P,z,oe):this.expandRegularSegmentAgainstRouteUsingRedirect(E,b,P,z,Q,oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,P,z){const Q=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?co(Q):this.lineralizeSegments(P,Q).pipe((0,le.z)(oe=>{const Pe=new Yt(oe,{});return this.expandSegment(E,Pe,b,oe,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,b,P,z,Q,oe){const{matched:Pe,consumedSegments:ct,remainingSegments:Dt,positionalParamSegments:Ot}=Er(b,z,Q);if(!Pe)return fs(b);const Cn=this.applyRedirectCommands(ct,z.redirectTo,Ot);return z.redirectTo.startsWith("/")?co(Cn):this.lineralizeSegments(z,Cn).pipe((0,le.z)(Ai=>this.expandSegment(E,b,P,Ai.concat(Dt),oe,!1)))}matchSegmentAgainstRoute(E,b,P,z,Q){return"**"===P.path?(E=wr(P,E),P.loadChildren?(P._loadedRoutes?(0,ce.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(E,P)).pipe((0,ke.U)(Pe=>(P._loadedRoutes=Pe.routes,P._loadedInjector=Pe.injector,new Yt(z,{})))):(0,ce.of)(new Yt(z,{}))):ji(b,P,z,E).pipe(Ee(({matched:oe,consumedSegments:Pe,remainingSegments:ct})=>oe?this.getChildConfig(E=P._injector??E,P,z).pipe((0,le.z)(Ot=>{const Cn=Ot.injector??E,Ai=Ot.routes,{segmentGroup:Rs,slicedSegments:Fr}=zs(b,Pe,ct,Ai),Jr=new Yt(Rs.segments,Rs.children);if(0===Fr.length&&Jr.hasChildren())return this.expandChildren(Cn,Ai,Jr).pipe((0,ke.U)(Ao=>new Yt(Pe,Ao)));if(0===Ai.length&&0===Fr.length)return(0,ce.of)(new Yt(Pe,{}));const mr=zn(P)===Q;return this.expandSegment(Cn,Jr,Ai,Fr,mr?Ve:Q,!0).pipe((0,ke.U)(Wo=>new Yt(Pe.concat(Wo.segments),Wo.children)))})):fs(b)))}getChildConfig(E,b,P){return b.children?(0,ce.of)({routes:b.children,injector:E}):b.loadChildren?void 0!==b._loadedRoutes?(0,ce.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function fr(D,E,b,P){const z=E.canLoad;if(void 0===z||0===z.length)return(0,ce.of)(!0);const Q=z.map(oe=>{const Pe=Sr(oe,D);return Qe(function et(D){return D&&N(D.canLoad)}(Pe)?Pe.canLoad(E,b):D.runInContext(()=>Pe(E,b)))});return(0,ce.of)(Q).pipe(hr(),ds())}(E,b,P).pipe((0,le.z)(z=>z?this.configLoader.loadChildren(E,b).pipe(de(Q=>{b._loadedRoutes=Q.routes,b._loadedInjector=Q.injector})):function jo(D){return(0,Z._)(Gi(xr,3))}())):(0,ce.of)({routes:[],injector:E})}lineralizeSegments(E,b){let P=[],z=b.root;for(;;){if(P=P.concat(z.segments),0===z.numberOfChildren)return(0,ce.of)(P);if(z.numberOfChildren>1||!z.children[Ve])return E.redirectTo,(0,Z._)(new d.vHH(4e3,xr));z=z.children[Ve]}}applyRedirectCommands(E,b,P){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),E,P)}applyRedirectCreateUrlTree(E,b,P,z){const Q=this.createSegmentGroup(E,b.root,P,z);return new jn(Q,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(E,b){const P={};return mt(E,(z,Q)=>{if("string"==typeof z&&z.startsWith(":")){const Pe=z.substring(1);P[Q]=b[Pe]}else P[Q]=z}),P}createSegmentGroup(E,b,P,z){const Q=this.createSegments(E,b.segments,P,z);let oe={};return mt(b.children,(Pe,ct)=>{oe[ct]=this.createSegmentGroup(E,Pe,P,z)}),new Yt(Q,oe)}createSegments(E,b,P,z){return b.map(Q=>Q.path.startsWith(":")?this.findPosParam(E,Q,z):this.findOrReturn(Q,P))}findPosParam(E,b,P){const z=P[b.path.substring(1)];if(!z)throw new d.vHH(4001,xr);return z}findOrReturn(E,b){let P=0;for(const z of b){if(z.path===E.path)return b.splice(P),z;P++}return E}}class ho{}class B{constructor(E,b,P,z,Q,oe,Pe){this.injector=E,this.rootComponentType=b,this.config=P,this.urlTree=z,this.url=Q,this.paramsInheritanceStrategy=oe,this.urlSerializer=Pe}recognize(){const E=zs(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,E,Ve).pipe((0,ke.U)(b=>{if(null===b)return null;const P=new br([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ve,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new ii(P,b),Q=new zr(this.url,z);return this.inheritParamsAndData(Q._root),Q}))}inheritParamsAndData(E){const b=E.value,P=eo(b,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data),E.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(E,b,P,z){return 0===P.segments.length&&P.hasChildren()?this.processChildren(E,b,P):this.processSegment(E,b,P,P.segments,z)}processChildren(E,b,P){return(0,v.D)(Object.keys(P.children)).pipe((0,he.b)(z=>{const Q=P.children[z],oe=us(b,z);return this.processSegmentGroup(E,oe,Q,z)}),Me((z,Q)=>z&&Q?(z.push(...Q),z):null),function Ct(D,E=!1){return(0,Ce.e)((b,P)=>{let z=0;b.subscribe((0,a.x)(P,Q=>{const oe=D(Q,z++);(oe||E)&&P.next(Q),!oe&&P.complete()}))})}(z=>null!==z),(0,rt.d)(null),Ke(),(0,ke.U)(z=>{if(null===z)return null;const Q=ht(z);return function ne(D){D.sort((E,b)=>E.value.outlet===Ve?-1:b.value.outlet===Ve?1:E.value.outlet.localeCompare(b.value.outlet))}(Q),Q}))}processSegment(E,b,P,z,Q){return(0,v.D)(b).pipe((0,he.b)(oe=>this.processSegmentAgainstRoute(oe._injector??E,oe,P,z,Q)),(0,ae.P)(oe=>!!oe),(0,ee.K)(oe=>{if(dr(oe))return lo(P,z,Q)?(0,ce.of)([]):(0,ce.of)(null);throw oe}))}processSegmentAgainstRoute(E,b,P,z,Q){if(b.redirectTo||!ao(b,P,z,Q))return(0,ce.of)(null);let oe;if("**"===b.path){const Pe=z.length>0?Gt(z).parameters:{},ct=Dn(P)+z.length,Dt=new br(z,Pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fn(b),zn(b),b.component??b._loadedComponent??null,b,bn(P),ct,Yn(b));oe=(0,ce.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]})}else oe=ji(P,b,z,E).pipe((0,ke.U)(({matched:Pe,consumedSegments:ct,remainingSegments:Dt,parameters:Ot})=>{if(!Pe)return null;const Cn=Dn(P)+ct.length;return{snapshot:new br(ct,Ot,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fn(b),zn(b),b.component??b._loadedComponent??null,b,bn(P),Cn,Yn(b)),consumedSegments:ct,remainingSegments:Dt}}));return oe.pipe(Ee(Pe=>{if(null===Pe)return(0,ce.of)(null);const{snapshot:ct,consumedSegments:Dt,remainingSegments:Ot}=Pe;E=b._injector??E;const Cn=b._loadedInjector??E,Ai=function ve(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(b),{segmentGroup:Rs,slicedSegments:Fr}=zs(P,Dt,Ot,Ai.filter(mr=>void 0===mr.redirectTo));if(0===Fr.length&&Rs.hasChildren())return this.processChildren(Cn,Ai,Rs).pipe((0,ke.U)(mr=>null===mr?null:[new ii(ct,mr)]));if(0===Ai.length&&0===Fr.length)return(0,ce.of)([new ii(ct,[])]);const Jr=zn(b)===Q;return this.processSegment(Cn,Ai,Rs,Fr,Jr?Ve:Q).pipe((0,ke.U)(mr=>null===mr?null:[new ii(ct,mr)]))}))}}function it(D){const E=D.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function ht(D){const E=[],b=new Set;for(const P of D){if(!it(P)){E.push(P);continue}const z=E.find(Q=>P.value.routeConfig===Q.value.routeConfig);void 0!==z?(z.children.push(...P.children),b.add(z)):E.push(P)}for(const P of b){const z=ht(P.children);E.push(new ii(P.value,z))}return E.filter(P=>!b.has(P))}function bn(D){let E=D;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Dn(D){let E=D,b=E._segmentIndexShift??0;for(;E._sourceSegment;)E=E._sourceSegment,b+=E._segmentIndexShift??0;return b-1}function fn(D){return D.data||{}}function Yn(D){return D.resolve||{}}function xs(D){return"string"==typeof D.title||null===D.title}function Ms(D){return Ee(E=>{const b=D(E);return b?(0,v.D)(b).pipe((0,ke.U)(()=>E)):(0,ce.of)(E)})}const ps=new d.OlP("ROUTES");let gs=(()=>{class D{constructor(b,P){this.injector=b,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,ce.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const P=Qe(b.loadComponent()).pipe((0,ke.U)(Uo),de(Q=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=Q}),Ne(()=>{this.componentLoaders.delete(b)})),z=new He(P,()=>new ot.x).pipe(Se());return this.componentLoaders.set(b,z),z}loadChildren(b,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,ce.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const Q=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,ke.U)(Pe=>{this.onLoadEndListener&&this.onLoadEndListener(P);let ct,Dt,Ot=!1;Array.isArray(Pe)?Dt=Pe:(ct=Pe.create(b).injector,Dt=Lt(ct.get(ps,[],d.XFs.Self|d.XFs.Optional)));return{routes:Dt.map(Zr),injector:ct}}),Ne(()=>{this.childrenLoaders.delete(P)})),oe=new He(Q,()=>new ot.x).pipe(Se());return this.childrenLoaders.set(P,oe),oe}loadModuleFactoryOrRoutes(b){return Qe(b()).pipe((0,ke.U)(Uo),(0,le.z)(z=>z instanceof d.YKP||Array.isArray(z)?(0,ce.of)(z):(0,v.D)(this.compiler.compileModuleAsync(z))))}}return D.\u0275fac=function(b){return new(b||D)(d.LFG(d.zs3),d.LFG(d.Sil))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Uo(D){return function ma(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let So=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ot.x,this.configLoader=(0,d.f3M)(gs),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(_t),this.rootContexts=(0,d.f3M)(Yr),this.navigationId=0,this.afterPreactivation=()=>(0,ce.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new Nr(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new zi(z))}complete(){this.transitions?.complete()}handleNavigationRequest(b){const P=++this.navigationId;this.transitions?.next({...this.transitions.value,...b,id:P})}setupNavigations(b){return this.transitions=new Ue.X({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mn,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,q.h)(P=>0!==P.id),(0,ke.U)(P=>({...P,extractedUrl:b.urlHandlingStrategy.extract(P.rawUrl)})),Ee(P=>{let z=!1,Q=!1;return(0,ce.of)(P).pipe(de(oe=>{this.currentNavigation={id:oe.id,initialUrl:oe.rawUrl,extractedUrl:oe.extractedUrl,trigger:oe.source,extras:oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ee(oe=>{const Pe=b.browserUrlTree.toString(),ct=!b.navigated||oe.extractedUrl.toString()!==Pe||Pe!==b.currentUrlTree.toString();if(!ct&&"reload"!==(oe.extras.onSameUrlNavigation??b.onSameUrlNavigation)){const Ot="";return this.events.next(new di(oe.id,b.serializeUrl(P.rawUrl),Ot,0)),b.rawUrlTree=oe.rawUrl,oe.resolve(null),ue.E}if(b.urlHandlingStrategy.shouldProcessUrl(oe.rawUrl))return fo(oe.source)&&(b.browserUrlTree=oe.extractedUrl),(0,ce.of)(oe).pipe(Ee(Ot=>{const Cn=this.transitions?.getValue();return this.events.next(new Ki(Ot.id,this.urlSerializer.serialize(Ot.extractedUrl),Ot.source,Ot.restoredState)),Cn!==this.transitions?.getValue()?ue.E:Promise.resolve(Ot)}),function Ir(D,E,b,P){return Ee(z=>function bo(D,E,b,P,z){return new gi(D,E,b,P,z).apply()}(D,E,b,z.extractedUrl,P).pipe((0,ke.U)(Q=>({...z,urlAfterRedirects:Q}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),de(Ot=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ot.urlAfterRedirects},P.urlAfterRedirects=Ot.urlAfterRedirects}),function Vn(D,E,b,P,z){return(0,le.z)(Q=>function Y(D,E,b,P,z,Q,oe="emptyOnly"){return new B(D,E,b,P,z,oe,Q).recognize().pipe(Ee(Pe=>null===Pe?function k(D){return new fe.y(E=>E.error(D))}(new ho):(0,ce.of)(Pe)))}(D,E,b,Q.urlAfterRedirects,P.serialize(Q.urlAfterRedirects),P,z).pipe((0,ke.U)(oe=>({...Q,targetSnapshot:oe}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),de(Ot=>{if(P.targetSnapshot=Ot.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!Ot.extras.skipLocationChange){const Ai=b.urlHandlingStrategy.merge(Ot.urlAfterRedirects,Ot.rawUrl);b.setBrowserUrl(Ai,Ot)}b.browserUrlTree=Ot.urlAfterRedirects}const Cn=new ni(Ot.id,this.urlSerializer.serialize(Ot.extractedUrl),this.urlSerializer.serialize(Ot.urlAfterRedirects),Ot.targetSnapshot);this.events.next(Cn)}));if(ct&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:Ot,extractedUrl:Cn,source:Ai,restoredState:Rs,extras:Fr}=oe,Jr=new Ki(Ot,this.urlSerializer.serialize(Cn),Ai,Rs);this.events.next(Jr);const mr=jr(Cn,this.rootComponentType).snapshot;return P={...oe,targetSnapshot:mr,urlAfterRedirects:Cn,extras:{...Fr,skipLocationChange:!1,replaceUrl:!1}},(0,ce.of)(P)}{const Ot="";return this.events.next(new di(oe.id,b.serializeUrl(P.extractedUrl),Ot,1)),b.rawUrlTree=oe.rawUrl,oe.resolve(null),ue.E}}),de(oe=>{const Pe=new kn(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(oe.urlAfterRedirects),oe.targetSnapshot);this.events.next(Pe)}),(0,ke.U)(oe=>P={...oe,guards:no(oe.targetSnapshot,oe.currentSnapshot,this.rootContexts)}),function Yi(D,E){return(0,le.z)(b=>{const{targetSnapshot:P,currentSnapshot:z,guards:{canActivateChecks:Q,canDeactivateChecks:oe}}=b;return 0===oe.length&&0===Q.length?(0,ce.of)({...b,guardsResult:!0}):function _i(D,E,b,P){return(0,v.D)(D).pipe((0,le.z)(z=>function pi(D,E,b,P,z){const Q=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,ce.of)(!0);const oe=Q.map(Pe=>{const ct=Qi(E)??z,Dt=Sr(Pe,ct);return Qe(function Ti(D){return D&&N(D.canDeactivate)}(Dt)?Dt.canDeactivate(D,E,b,P):ct.runInContext(()=>Dt(D,E,b,P))).pipe((0,ae.P)())});return(0,ce.of)(oe).pipe(hr())}(z.component,z.route,b,E,P)),(0,ae.P)(z=>!0!==z,!0))}(oe,P,z,D).pipe((0,le.z)(Pe=>Pe&&function re(D){return"boolean"==typeof D}(Pe)?function io(D,E,b,P){return(0,v.D)(E).pipe((0,he.b)(z=>x(function Ts(D,E){return null!==D&&E&&E(new An(D)),(0,ce.of)(!0)}(z.route.parent,P),function ro(D,E){return null!==D&&E&&E(new is(D)),(0,ce.of)(!0)}(z.route,P),function Co(D,E,b){const P=E[E.length-1],Q=E.slice(0,E.length-1).reverse().map(oe=>function ur(D){const E=D.routeConfig?D.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:D,guards:E}:null}(oe)).filter(oe=>null!==oe).map(oe=>O(()=>{const Pe=oe.guards.map(ct=>{const Dt=Qi(oe.node)??b,Ot=Sr(ct,Dt);return Qe(function Bn(D){return D&&N(D.canActivateChild)}(Ot)?Ot.canActivateChild(P,D):Dt.runInContext(()=>Ot(P,D))).pipe((0,ae.P)())});return(0,ce.of)(Pe).pipe(hr())}));return(0,ce.of)(Q).pipe(hr())}(D,z.path,b),function _o(D,E,b){const P=E.routeConfig?E.routeConfig.canActivate:null;if(!P||0===P.length)return(0,ce.of)(!0);const z=P.map(Q=>O(()=>{const oe=Qi(E)??b,Pe=Sr(Q,oe);return Qe(function Rt(D){return D&&N(D.canActivate)}(Pe)?Pe.canActivate(E,D):oe.runInContext(()=>Pe(E,D))).pipe((0,ae.P)())}));return(0,ce.of)(z).pipe(hr())}(D,z.route,b))),(0,ae.P)(z=>!0!==z,!0))}(P,Q,D,E):(0,ce.of)(Pe)),(0,ke.U)(Pe=>({...b,guardsResult:Pe})))})}(this.environmentInjector,oe=>this.events.next(oe)),de(oe=>{if(P.guardsResult=oe.guardsResult,Gn(oe.guardsResult))throw $r(0,oe.guardsResult);const Pe=new Mi(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(oe.urlAfterRedirects),oe.targetSnapshot,!!oe.guardsResult);this.events.next(Pe)}),(0,q.h)(oe=>!!oe.guardsResult||(b.restoreHistory(oe),this.cancelNavigationTransition(oe,"",3),!1)),Ms(oe=>{if(oe.guards.canActivateChecks.length)return(0,ce.of)(oe).pipe(de(Pe=>{const ct=new Vi(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot);this.events.next(ct)}),Ee(Pe=>{let ct=!1;return(0,ce.of)(Pe).pipe(function mi(D,E){return(0,le.z)(b=>{const{targetSnapshot:P,guards:{canActivateChecks:z}}=b;if(!z.length)return(0,ce.of)(b);let Q=0;return(0,v.D)(z).pipe((0,he.b)(oe=>function pr(D,E,b,P){const z=D.routeConfig,Q=D._resolve;return void 0!==z?.title&&!xs(z)&&(Q[Xe]=z.title),function Ji(D,E,b,P){const z=function Rr(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===z.length)return(0,ce.of)({});const Q={};return(0,v.D)(z).pipe((0,le.z)(oe=>function Mr(D,E,b,P){const z=Qi(E)??P,Q=Sr(D,z);return Qe(Q.resolve?Q.resolve(E,b):z.runInContext(()=>Q(E,b)))}(D[oe],E,b,P).pipe((0,ae.P)(),de(Pe=>{Q[oe]=Pe}))),We(1),function qe(D){return(0,ke.U)(()=>D)}(Q),(0,ee.K)(oe=>dr(oe)?ue.E:(0,Z._)(oe)))}(Q,D,E,P).pipe((0,ke.U)(oe=>(D._resolvedData=oe,D.data=eo(D,b).resolve,z&&xs(z)&&(D.data[Xe]=z.title),null)))}(oe.route,P,D,E)),de(()=>Q++),We(1),(0,le.z)(oe=>Q===z.length?(0,ce.of)(b):ue.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),de({next:()=>ct=!0,complete:()=>{ct||(b.restoreHistory(Pe),this.cancelNavigationTransition(Pe,"",2))}}))}),de(Pe=>{const ct=new Ii(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot);this.events.next(ct)}))}),Ms(oe=>{const Pe=ct=>{const Dt=[];ct.routeConfig?.loadComponent&&!ct.routeConfig._loadedComponent&&Dt.push(this.configLoader.loadComponent(ct.routeConfig).pipe(de(Ot=>{ct.component=Ot}),(0,ke.U)(()=>{})));for(const Ot of ct.children)Dt.push(...Pe(Ot));return Dt};return u(Pe(oe.targetSnapshot.root)).pipe((0,rt.d)(),(0,xe.q)(1))}),Ms(()=>this.afterPreactivation()),(0,ke.U)(oe=>{const Pe=function to(D,E,b){const P=as(D,E._root,b?b._root:void 0);return new Hr(P,E)}(b.routeReuseStrategy,oe.targetSnapshot,oe.currentRouterState);return P={...oe,targetRouterState:Pe}}),de(oe=>{b.currentUrlTree=oe.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(oe.urlAfterRedirects,oe.rawUrl),b.routerState=oe.targetRouterState,"deferred"===b.urlUpdateStrategy&&(oe.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,oe),b.browserUrlTree=oe.urlAfterRedirects)}),((D,E,b)=>(0,ke.U)(P=>(new Ei(E,P.targetRouterState,P.currentRouterState,b).activate(D),P)))(this.rootContexts,b.routeReuseStrategy,oe=>this.events.next(oe)),de({next:oe=>{z=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Qt(oe.id,this.urlSerializer.serialize(oe.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),b.titleStrategy?.updateTitle(oe.targetRouterState.snapshot),oe.resolve(!0)},complete:()=>{z=!0}}),Ne(()=>{z||Q||this.cancelNavigationTransition(P,"",1),this.currentNavigation?.id===P.id&&(this.currentNavigation=null)}),(0,ee.K)(oe=>{if(Q=!0,Ss(oe)){Wi(oe)||(b.navigated=!0,b.restoreHistory(P,!0));const Pe=new ir(P.id,this.urlSerializer.serialize(P.extractedUrl),oe.message,oe.cancellationCode);if(this.events.next(Pe),Wi(oe)){const ct=b.urlHandlingStrategy.merge(oe.url,b.rawUrlTree),Dt={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||fo(P.source)};b.scheduleNavigation(ct,Mn,null,Dt,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{b.restoreHistory(P,!0);const Pe=new ns(P.id,this.urlSerializer.serialize(P.extractedUrl),oe,P.targetSnapshot??void 0);this.events.next(Pe);try{P.resolve(b.errorHandler(oe))}catch(ct){P.reject(ct)}}return ue.E}))}))}cancelNavigationTransition(b,P,z){const Q=new ir(b.id,this.urlSerializer.serialize(b.extractedUrl),P,z);this.events.next(Q),b.resolve(!1)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function fo(D){return D!==Mn}let po=(()=>{class D{buildTitle(b){let P,z=b.root;for(;void 0!==z;)P=this.getResolvedTitleForRoute(z)??P,z=z.children.find(Q=>Q.outlet===Ve);return P}getResolvedTitleForRoute(b){return b.data[Xe]}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:function(){return(0,d.f3M)(Do)},providedIn:"root"}),D})(),Do=(()=>{class D extends po{constructor(b){super(),this.title=b}updateTitle(b){const P=this.buildTitle(b);void 0!==P&&this.title.setTitle(P)}}return D.\u0275fac=function(b){return new(b||D)(d.LFG(tt.Dx))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),Fl=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:function(){return(0,d.f3M)(zo)},providedIn:"root"}),D})();class va{shouldDetach(E){return!1}store(E,b){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,b){return E.routeConfig===b.routeConfig}}let zo=(()=>{class D extends va{}return D.\u0275fac=function(){let E;return function(P){return(E||(E=d.n5z(D)))(P||D)}}(),D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const qi=new d.OlP("",{providedIn:"root",factory:()=>({})});let _a=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:function(){return(0,d.f3M)(go)},providedIn:"root"}),D})(),go=(()=>{class D{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,P){return b}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ms(D){throw D}function Eo(D,E,b){return E.parse("/")}const To={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ps={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fi=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(qi,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ms,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Eo,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(_a),this.routeReuseStrategy=(0,d.f3M)(Fl),this.urlCreationStrategy=(0,d.f3M)(Qn),this.titleStrategy=(0,d.f3M)(po),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Lt((0,d.f3M)(ps,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(So),this.urlSerializer=(0,d.f3M)(_t),this.location=(0,d.f3M)(at.Ye),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jr(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(b=>{this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mn,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const P="popstate"===b.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,P,b.state)},0)}))}navigateToSyncWithBrowser(b,P,z){const Q={replaceUrl:!0},oe=z?.navigationId?z:null;if(z){const ct={...z};delete ct.navigationId,delete ct.\u0275routerPageId,0!==Object.keys(ct).length&&(Q.state=ct)}const Pe=this.parseUrl(b);this.scheduleNavigation(Pe,P,oe,Q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(Zr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,P={}){const{relativeTo:z,queryParams:Q,fragment:oe,queryParamsHandling:Pe,preserveFragment:ct}=P,Dt=ct?this.currentUrlTree.fragment:oe;let Ot=null;switch(Pe){case"merge":Ot={...this.currentUrlTree.queryParams,...Q};break;case"preserve":Ot=this.currentUrlTree.queryParams;break;default:Ot=Q||null}return null!==Ot&&(Ot=this.removeEmptyProps(Ot)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,b,Ot,Dt??null)}navigateByUrl(b,P={skipLocationChange:!1}){const z=Gn(b)?b:this.parseUrl(b),Q=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(Q,Mn,null,P)}navigate(b,P={skipLocationChange:!1}){return function H(D){for(let E=0;E<D.length;E++){const b=D[E];if(null==b)throw new d.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,P),P)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let P;try{P=this.urlSerializer.parse(b)}catch(z){P=this.malformedUriErrorHandler(z,this.urlSerializer,b)}return P}isActive(b,P){let z;if(z=!0===P?{...To}:!1===P?{...Ps}:P,Gn(b))return Ie(this.currentUrlTree,b,z);const Q=this.parseUrl(b);return Ie(this.currentUrlTree,Q,z)}removeEmptyProps(b){return Object.keys(b).reduce((P,z)=>{const Q=b[z];return null!=Q&&(P[z]=Q),P},{})}scheduleNavigation(b,P,z,Q,oe){if(this.disposed)return Promise.resolve(!1);let Pe,ct,Dt,Ot;return oe?(Pe=oe.resolve,ct=oe.reject,Dt=oe.promise):Dt=new Promise((Cn,Ai)=>{Pe=Cn,ct=Ai}),Ot="computed"===this.canceledNavigationResolution?z&&z.\u0275routerPageId?z.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Ot,source:P,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:Q,resolve:Pe,reject:ct,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(Cn=>Promise.reject(Cn))}setBrowserUrl(b,P){const z=this.urlSerializer.serialize(b),Q={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(z)||P.extras.replaceUrl?this.location.replaceState(z,"",Q):this.location.go(z,"",Q)}restoreHistory(b,P=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===z?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(z)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,P){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:P}:{navigationId:b}}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),C=(()=>{class D{constructor(b,P,z,Q,oe,Pe){this.router=b,this.route=P,this.tabIndexAttribute=z,this.renderer=Q,this.el=oe,this.locationStrategy=Pe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ot.x;const ct=oe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ct||"area"===ct,this.isAnchorElement?this.subscription=b.events.subscribe(Dt=>{Dt instanceof Qt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,d.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,d.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,d.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,P,z,Q,oe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||P||z||Q||oe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const b=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(b,P){const z=this.renderer,Q=this.el.nativeElement;null!==P?z.setAttribute(Q,b,P):z.removeAttribute(Q,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(b){return new(b||D)(d.Y36(Fi),d.Y36(Hi),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(at.S$))},D.\u0275dir=d.lG2({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,P){1&b&&d.NdJ("click",function(Q){return P.onClick(Q.button,Q.ctrlKey,Q.shiftKey,Q.altKey,Q.metaKey)}),2&b&&d.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),D})(),_=(()=>{class D{get isActive(){return this._isActive}constructor(b,P,z,Q,oe){this.router=b,this.element=P,this.renderer=z,this.cdr=Q,this.link=oe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=b.events.subscribe(Pe=>{Pe instanceof Qt&&this.update()})}ngAfterContentInit(){(0,ce.of)(this.links.changes,(0,ce.of)(null)).pipe((0,y.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const b=[...this.links.toArray(),this.link].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,v.D)(b).pipe((0,y.J)()).subscribe(P=>{this._isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(b){const P=Array.isArray(b)?b:b.split(" ");this.classes=P.filter(z=>!!z)}ngOnChanges(b){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this._isActive!==b&&(this._isActive=b,this.cdr.markForCheck(),this.classes.forEach(P=>{b?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}),b&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(b))})}isLinkActive(b){const P=function R(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&b.isActive(z.urlTree,P)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.links.some(b)}}return D.\u0275fac=function(b){return new(b||D)(d.Y36(Fi),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(C,8))},D.\u0275dir=d.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(b,P,z){if(1&b&&d.Suo(z,C,5),2&b){let Q;d.iGM(Q=d.CRH())&&(P.links=Q)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),D})();class ${}let Te=(()=>{class D{constructor(b,P,z,Q,oe){this.router=b,this.injector=z,this.preloadingStrategy=Q,this.loader=oe}setUpPreloading(){this.subscription=this.router.events.pipe((0,q.h)(b=>b instanceof Qt),(0,he.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,P){const z=[];for(const Q of P){Q.providers&&!Q._injector&&(Q._injector=(0,d.MMx)(Q.providers,b,`Route: ${Q.path}`));const oe=Q._injector??b,Pe=Q._loadedInjector??oe;Q.loadChildren&&!Q._loadedRoutes&&void 0===Q.canLoad||Q.loadComponent&&!Q._loadedComponent?z.push(this.preloadConfig(oe,Q)):(Q.children||Q._loadedRoutes)&&z.push(this.processRoutes(Pe,Q.children??Q._loadedRoutes))}return(0,v.D)(z).pipe((0,y.J)())}preloadConfig(b,P){return this.preloadingStrategy.preload(P,()=>{let z;z=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(b,P):(0,ce.of)(null);const Q=z.pipe((0,le.z)(oe=>null===oe?(0,ce.of)(void 0):(P._loadedRoutes=oe.routes,P._loadedInjector=oe.injector,this.processRoutes(oe.injector??b,oe.routes))));if(P.loadComponent&&!P._loadedComponent){const oe=this.loader.loadComponent(P);return(0,v.D)([Q,oe]).pipe((0,y.J)())}return Q})}}return D.\u0275fac=function(b){return new(b||D)(d.LFG(Fi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG($),d.LFG(gs))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Ze=new d.OlP("");let ut=(()=>{class D{constructor(b,P,z,Q,oe={}){this.urlSerializer=b,this.transitions=P,this.viewportScroller=z,this.zone=Q,this.options=oe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},oe.scrollPositionRestoration=oe.scrollPositionRestoration||"disabled",oe.anchorScrolling=oe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Qt&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof yr&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yr(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return D.\u0275fac=function(b){d.$Z()},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac}),D})();var Tt=(()=>((Tt=Tt||{})[Tt.COMPLETE=0]="COMPLETE",Tt[Tt.FAILED=1]="FAILED",Tt[Tt.REDIRECTING=2]="REDIRECTING",Tt))();const cn=!1;function qt(D,E){return{\u0275kind:D,\u0275providers:E}}const wn=new d.OlP("",{providedIn:"root",factory:()=>!1});function ri(){const D=(0,d.f3M)(d.zs3);return E=>{const b=D.get(d.z2F);if(E!==b.components[0])return;const P=D.get(Fi),z=D.get(er);1===D.get(gr)&&P.initialNavigation(),D.get(kr,null,d.XFs.Optional)?.setUpPreloading(),D.get(Ze,null,d.XFs.Optional)?.init(),P.resetRootComponentType(b.componentTypes[0]),z.closed||(z.next(),z.unsubscribe())}}const er=new d.OlP(cn?"bootstrap done indicator":"",{factory:()=>new ot.x}),gr=new d.OlP(cn?"initial navigation":"",{providedIn:"root",factory:()=>1});function Qr(){let D=[];return D=cn?[{provide:d.Xts,multi:!0,useFactory:()=>{const E=(0,d.f3M)(Fi);return()=>E.events.subscribe(b=>{console.group?.(`Router Event: ${b.constructor.name}`),console.log(function Vr(D){if(!("type"in D))return`Unknown Router Event: ${D.constructor.name}`;switch(D.type){case 14:return`ActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state}, shouldActivate: ${D.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 2:return`NavigationCancel(id: ${D.id}, url: '${D.url}')`;case 16:return`NavigationSkipped(id: ${D.id}, url: '${D.url}')`;case 1:return`NavigationEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${D.id}, url: '${D.url}', error: ${D.error})`;case 0:return`NavigationStart(id: ${D.id}, url: '${D.url}')`;case 6:return`ResolveEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 5:return`ResolveStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 10:return`RouteConfigLoadEnd(path: ${D.route.path})`;case 9:return`RouteConfigLoadStart(path: ${D.route.path})`;case 4:return`RoutesRecognized(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 15:return`Scroll(anchor: '${D.anchor}', position: '${D.position?`${D.position[0]}, ${D.position[1]}`:null}')`}}(b)),console.log(b),console.groupEnd?.()})}}]:[],qt(1,D)}const kr=new d.OlP(cn?"router preloader":"");function Ca(D){return qt(0,[{provide:kr,useExisting:Te},{provide:$,useExisting:D}])}const Xs=!1,Kt=new d.OlP(Xs?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),on=[at.Ye,{provide:_t,useClass:Ye},Fi,Yr,{provide:Hi,useFactory:function Jt(D){return D.routerState.root},deps:[Fi]},gs,Xs?{provide:wn,useValue:!0}:[]];function tn(){return new d.PXZ("Router",Fi)}let si=(()=>{class D{constructor(b){}static forRoot(b,P){return{ngModule:D,providers:[on,Xs&&P?.enableTracing?Qr().\u0275providers:[],{provide:ps,multi:!0,useValue:b},{provide:Kt,useFactory:Ln,deps:[[Fi,new d.FiY,new d.tp0]]},{provide:qi,useValue:P||{}},P?.useHash?{provide:at.S$,useClass:at.Do}:{provide:at.S$,useClass:at.b0},{provide:Ze,useFactory:()=>{const D=(0,d.f3M)(at.EM),E=(0,d.f3M)(d.R0b),b=(0,d.f3M)(qi),P=(0,d.f3M)(So),z=(0,d.f3M)(_t);return b.scrollOffset&&D.setOffset(b.scrollOffset),new ut(z,P,D,E,b)}},P?.preloadingStrategy?Ca(P.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:tn},P?.initialNavigation?Mo(P):[],[{provide:qs,useFactory:ri},{provide:d.tb,multi:!0,useExisting:qs}]]}}static forChild(b){return{ngModule:D,providers:[{provide:ps,multi:!0,useValue:b}]}}}return D.\u0275fac=function(b){return new(b||D)(d.LFG(Kt,8))},D.\u0275mod=d.oAB({type:D}),D.\u0275inj=d.cJS({imports:[or]}),D})();function Ln(D){if(Xs&&D)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Mo(D){return["disabled"===D.initialNavigation?qt(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const E=(0,d.f3M)(Fi);return()=>{E.setUpLocationChangeListener()}}},{provide:gr,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?qt(2,[{provide:gr,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:E=>{const b=E.get(at.V_,Promise.resolve());return()=>b.then(()=>new Promise(P=>{const z=E.get(Fi),Q=E.get(er);(function Nt(D,E){D.events.pipe((0,q.h)(b=>b instanceof Qt||b instanceof ir||b instanceof ns||b instanceof di),(0,ke.U)(b=>b instanceof Qt||b instanceof di?Tt.COMPLETE:b instanceof ir&&(0===b.code||1===b.code)?Tt.REDIRECTING:Tt.FAILED),(0,q.h)(b=>b!==Tt.REDIRECTING),(0,xe.q)(1)).subscribe(()=>{E()})})(z,()=>{P(!0)}),E.get(So).afterPreactivation=()=>(P(!0),Q.closed?(0,ce.of)(void 0):Q),z.initialNavigation()}))}}]).\u0275providers:[]]}const qs=new d.OlP(Xs?"Router Initializer":"")},805:(Ft,Be,K)=>{"use strict";K.d(Be,{F0:()=>a,b4:()=>u,ez:()=>r,jx:()=>y,m8:()=>S,ws:()=>x});var d=K(8256),v=K(7579),ce=K(6895);let o=(()=>{class O{}return O.STARTS_WITH="startsWith",O.CONTAINS="contains",O.NOT_CONTAINS="notContains",O.ENDS_WITH="endsWith",O.EQUALS="equals",O.NOT_EQUALS="notEquals",O.IN="in",O.LESS_THAN="lt",O.LESS_THAN_OR_EQUAL_TO="lte",O.GREATER_THAN="gt",O.GREATER_THAN_OR_EQUAL_TO="gte",O.BETWEEN="between",O.IS="is",O.IS_NOT="isNot",O.BEFORE="before",O.AFTER="after",O.DATE_IS="dateIs",O.DATE_IS_NOT="dateIsNot",O.DATE_BEFORE="dateBefore",O.DATE_AFTER="dateAfter",O})(),r=(()=>{class O{constructor(){this.messageSource=new v.x,this.clearSource=new v.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(Z){Z&&this.messageSource.next(Z)}addAll(Z){Z&&Z.length&&this.messageSource.next(Z)}clear(Z){this.clearSource.next(Z||null)}}return O.\u0275fac=function(Z){return new(Z||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac}),O})(),a=(()=>{class O{constructor(){this.clickSource=new v.x,this.clickObservable=this.clickSource.asObservable()}add(Z){Z&&this.clickSource.next(Z)}}return O.\u0275fac=function(Z){return new(Z||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),u=(()=>{class O{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[o.STARTS_WITH,o.CONTAINS,o.NOT_CONTAINS,o.ENDS_WITH,o.EQUALS,o.NOT_EQUALS],numeric:[o.EQUALS,o.NOT_EQUALS,o.LESS_THAN,o.LESS_THAN_OR_EQUAL_TO,o.GREATER_THAN,o.GREATER_THAN_OR_EQUAL_TO],date:[o.DATE_IS,o.DATE_IS_NOT,o.DATE_BEFORE,o.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new v.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(Z){return this.translation[Z]}setTranslation(Z){this.translation={...this.translation,...Z},this.translationSource.next(this.translation)}}return O.\u0275fac=function(Z){return new(Z||O)},O.\u0275prov=d.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),y=(()=>{class O{constructor(Z){this.template=Z}getType(){return this.name}}return O.\u0275fac=function(Z){return new(Z||O)(d.Y36(d.Rgc))},O.\u0275dir=d.lG2({type:O,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),O})(),S=(()=>{class O{}return O.\u0275fac=function(Z){return new(Z||O)},O.\u0275mod=d.oAB({type:O}),O.\u0275inj=d.cJS({imports:[ce.ez]}),O})(),x=(()=>{class O{}return O.STARTS_WITH="startsWith",O.CONTAINS="contains",O.NOT_CONTAINS="notContains",O.ENDS_WITH="endsWith",O.EQUALS="equals",O.NOT_EQUALS="notEquals",O.NO_FILTER="noFilter",O.LT="lt",O.LTE="lte",O.GT="gt",O.GTE="gte",O.IS="is",O.IS_NOT="isNot",O.BEFORE="before",O.AFTER="after",O.CLEAR="clear",O.APPLY="apply",O.MATCH_ALL="matchAll",O.MATCH_ANY="matchAny",O.ADD_RULE="addRule",O.REMOVE_RULE="removeRule",O.ACCEPT="accept",O.REJECT="reject",O.CHOOSE="choose",O.UPLOAD="upload",O.CANCEL="cancel",O.DAY_NAMES="dayNames",O.DAY_NAMES_SHORT="dayNamesShort",O.DAY_NAMES_MIN="dayNamesMin",O.MONTH_NAMES="monthNames",O.MONTH_NAMES_SHORT="monthNamesShort",O.FIRST_DAY_OF_WEEK="firstDayOfWeek",O.TODAY="today",O.WEEK_HEADER="weekHeader",O.WEAK="weak",O.MEDIUM="medium",O.STRONG="strong",O.PASSWORD_PROMPT="passwordPrompt",O.EMPTY_MESSAGE="emptyMessage",O.EMPTY_FILTER_MESSAGE="emptyFilterMessage",O})()},5593:(Ft,Be,K)=>{"use strict";K.d(Be,{Hq:()=>u,hJ:()=>l});var d=K(6895),v=K(8256),ce=K(9592),Ue=K(1795),T=K(982);const s={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let u=(()=>{class y{constructor(x){this.el=x,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1,this._internalClasses=Object.values(s)}get label(){return this._label}set label(x){this._label=x,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(x){this._icon=x,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(x){this._loading=x,this.initialized&&(this.updateIcon(),this.setStyleClass())}get htmlElement(){return this.el.nativeElement}ngAfterViewInit(){ce.p.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const x=[s.button,s.component];return this.icon&&!this.label&&T.gb.isEmpty(this.htmlElement.textContent)&&x.push(s.iconOnly),this.loading&&(x.push(s.disabled,s.loading),!this.icon&&this.label&&x.push(s.labelOnly)),x}setStyleClass(){const x=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...x)}createLabel(){if(this.label){let x=document.createElement("span");this.icon&&!this.label&&x.setAttribute("aria-hidden","true"),x.className="p-button-label",x.appendChild(document.createTextNode(this.label)),this.htmlElement.appendChild(x)}}createIcon(){if(this.icon||this.loading){let x=document.createElement("span");x.className="p-button-icon",x.setAttribute("aria-hidden","true");let A=this.label?"p-button-icon-"+this.iconPos:null;A&&ce.p.addClass(x,A);let O=this.getIconClass();O&&ce.p.addMultipleClasses(x,O),this.htmlElement.insertBefore(x,this.htmlElement.firstChild)}}updateLabel(){let x=ce.p.findSingle(this.htmlElement,".p-button-label");this.label?x?x.textContent=this.label:this.createLabel():x&&this.htmlElement.removeChild(x)}updateIcon(){let x=ce.p.findSingle(this.htmlElement,".p-button-icon");this.icon||this.loading?x?x.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():x&&this.htmlElement.removeChild(x)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return y.\u0275fac=function(x){return new(x||y)(v.Y36(v.SBq))},y.\u0275dir=v.lG2({type:y,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),y})(),l=(()=>{class y{}return y.\u0275fac=function(x){return new(x||y)},y.\u0275mod=v.oAB({type:y}),y.\u0275inj=v.cJS({imports:[d.ez,Ue.T]}),y})()},9592:(Ft,Be,K)=>{"use strict";K.d(Be,{V:()=>v,p:()=>d});let d=(()=>{class ce{static addClass(T,fe){T&&fe&&(T.classList?T.classList.add(fe):T.className+=" "+fe)}static addMultipleClasses(T,fe){if(T&&fe)if(T.classList){let m=fe.trim().split(" ");for(let o=0;o<m.length;o++)T.classList.add(m[o])}else{let m=fe.split(" ");for(let o=0;o<m.length;o++)T.className+=" "+m[o]}}static removeClass(T,fe){T&&fe&&(T.classList?T.classList.remove(fe):T.className=T.className.replace(new RegExp("(^|\\b)"+fe.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(T,fe){return!(!T||!fe)&&(T.classList?T.classList.contains(fe):new RegExp("(^| )"+fe+"( |$)","gi").test(T.className))}static siblings(T){return Array.prototype.filter.call(T.parentNode.children,function(fe){return fe!==T})}static find(T,fe){return Array.from(T.querySelectorAll(fe))}static findSingle(T,fe){return T?T.querySelector(fe):null}static index(T){let fe=T.parentNode.childNodes,m=0;for(var o=0;o<fe.length;o++){if(fe[o]==T)return m;1==fe[o].nodeType&&m++}return-1}static indexWithinGroup(T,fe){let m=T.parentNode?T.parentNode.childNodes:[],o=0;for(var f=0;f<m.length;f++){if(m[f]==T)return o;m[f].attributes&&m[f].attributes[fe]&&1==m[f].nodeType&&o++}return-1}static appendOverlay(T,fe,m="self"){"self"!==m&&T&&fe&&this.appendChild(T,fe)}static alignOverlay(T,fe,m="self",o=!0){T&&fe&&(o&&(T.style.minWidth||(T.style.minWidth=ce.getOuterWidth(fe)+"px")),"self"===m?this.relativePosition(T,fe):this.absolutePosition(T,fe))}static relativePosition(T,fe){const m=S=>{if(S)return"relative"===getComputedStyle(S).getPropertyValue("position")?S:m(S.parentElement)},o=T.offsetParent?{width:T.offsetWidth,height:T.offsetHeight}:this.getHiddenElementDimensions(T),f=fe.offsetHeight,h=fe.getBoundingClientRect(),r=this.getWindowScrollTop(),a=this.getWindowScrollLeft(),s=this.getViewport(),p=m(T)?.getBoundingClientRect()||{top:-1*r,left:-1*a};let l,y;h.top+f+o.height>s.height?(l=h.top-p.top-o.height,T.style.transformOrigin="bottom",h.top+l<0&&(l=-1*h.top)):(l=f+h.top-p.top,T.style.transformOrigin="top"),y=o.width>s.width?-1*(h.left-p.left):h.left-p.left+o.width>s.width?-1*(h.left-p.left+o.width-s.width):h.left-p.left,T.style.top=l+"px",T.style.left=y+"px"}static absolutePosition(T,fe){const m=T.offsetParent?{width:T.offsetWidth,height:T.offsetHeight}:this.getHiddenElementDimensions(T),o=m.height,f=m.width,h=fe.offsetHeight,r=fe.offsetWidth,a=fe.getBoundingClientRect(),s=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),p=this.getViewport();let l,y;a.top+h+o>p.height?(l=a.top+s-o,T.style.transformOrigin="bottom",l<0&&(l=s)):(l=h+a.top+s,T.style.transformOrigin="top"),y=a.left+f>p.width?Math.max(0,a.left+u+r-f):a.left+u,T.style.top=l+"px",T.style.left=y+"px"}static getParents(T,fe=[]){return null===T.parentNode?fe:this.getParents(T.parentNode,fe.concat([T.parentNode]))}static getScrollableParents(T){let fe=[];if(T){let m=this.getParents(T);const o=/(auto|scroll)/,f=h=>{let r=window.getComputedStyle(h,null);return o.test(r.getPropertyValue("overflow"))||o.test(r.getPropertyValue("overflowX"))||o.test(r.getPropertyValue("overflowY"))};for(let h of m){let r=1===h.nodeType&&h.dataset.scrollselectors;if(r){let a=r.split(",");for(let s of a){let u=this.findSingle(h,s);u&&f(u)&&fe.push(u)}}9!==h.nodeType&&f(h)&&fe.push(h)}}return fe}static getHiddenElementOuterHeight(T){T.style.visibility="hidden",T.style.display="block";let fe=T.offsetHeight;return T.style.display="none",T.style.visibility="visible",fe}static getHiddenElementOuterWidth(T){T.style.visibility="hidden",T.style.display="block";let fe=T.offsetWidth;return T.style.display="none",T.style.visibility="visible",fe}static getHiddenElementDimensions(T){let fe={};return T.style.visibility="hidden",T.style.display="block",fe.width=T.offsetWidth,fe.height=T.offsetHeight,T.style.display="none",T.style.visibility="visible",fe}static scrollInView(T,fe){let m=getComputedStyle(T).getPropertyValue("borderTopWidth"),o=m?parseFloat(m):0,f=getComputedStyle(T).getPropertyValue("paddingTop"),h=f?parseFloat(f):0,r=T.getBoundingClientRect(),s=fe.getBoundingClientRect().top+document.body.scrollTop-(r.top+document.body.scrollTop)-o-h,u=T.scrollTop,p=T.clientHeight,l=this.getOuterHeight(fe);s<0?T.scrollTop=u+s:s+l>p&&(T.scrollTop=u+s-p+l)}static fadeIn(T,fe){T.style.opacity=0;let m=+new Date,o=0,f=function(){o=+T.style.opacity.replace(",",".")+((new Date).getTime()-m)/fe,T.style.opacity=o,m=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(f)||setTimeout(f,16))};f()}static fadeOut(T,fe){var m=1,h=50/fe;let r=setInterval(()=>{(m-=h)<=0&&(m=0,clearInterval(r)),T.style.opacity=m},50)}static getWindowScrollTop(){let T=document.documentElement;return(window.pageYOffset||T.scrollTop)-(T.clientTop||0)}static getWindowScrollLeft(){let T=document.documentElement;return(window.pageXOffset||T.scrollLeft)-(T.clientLeft||0)}static matches(T,fe){var m=Element.prototype;return(m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.msMatchesSelector||function(f){return-1!==[].indexOf.call(document.querySelectorAll(f),this)}).call(T,fe)}static getOuterWidth(T,fe){let m=T.offsetWidth;if(fe){let o=getComputedStyle(T);m+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return m}static getHorizontalPadding(T){let fe=getComputedStyle(T);return parseFloat(fe.paddingLeft)+parseFloat(fe.paddingRight)}static getHorizontalMargin(T){let fe=getComputedStyle(T);return parseFloat(fe.marginLeft)+parseFloat(fe.marginRight)}static innerWidth(T){let fe=T.offsetWidth,m=getComputedStyle(T);return fe+=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight),fe}static width(T){let fe=T.offsetWidth,m=getComputedStyle(T);return fe-=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight),fe}static getInnerHeight(T){let fe=T.offsetHeight,m=getComputedStyle(T);return fe+=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom),fe}static getOuterHeight(T,fe){let m=T.offsetHeight;if(fe){let o=getComputedStyle(T);m+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return m}static getHeight(T){let fe=T.offsetHeight,m=getComputedStyle(T);return fe-=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom)+parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth),fe}static getWidth(T){let fe=T.offsetWidth,m=getComputedStyle(T);return fe-=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight)+parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth),fe}static getViewport(){let T=window,fe=document,m=fe.documentElement,o=fe.getElementsByTagName("body")[0];return{width:T.innerWidth||m.clientWidth||o.clientWidth,height:T.innerHeight||m.clientHeight||o.clientHeight}}static getOffset(T){var fe=T.getBoundingClientRect();return{top:fe.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:fe.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(T,fe){let m=T.parentNode;if(!m)throw"Can't replace element";return m.replaceChild(fe,T)}static getUserAgent(){return navigator.userAgent}static isIE(){var T=window.navigator.userAgent;return T.indexOf("MSIE ")>0||(T.indexOf("Trident/")>0?(T.indexOf("rv:"),!0):T.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(T,fe){if(this.isElement(fe))fe.appendChild(T);else{if(!fe.el||!fe.el.nativeElement)throw"Cannot append "+fe+" to "+T;fe.el.nativeElement.appendChild(T)}}static removeChild(T,fe){if(this.isElement(fe))fe.removeChild(T);else{if(!fe.el||!fe.el.nativeElement)throw"Cannot remove "+T+" from "+fe;fe.el.nativeElement.removeChild(T)}}static removeElement(T){"remove"in Element.prototype?T.remove():T.parentNode.removeChild(T)}static isElement(T){return"object"==typeof HTMLElement?T instanceof HTMLElement:T&&"object"==typeof T&&null!==T&&1===T.nodeType&&"string"==typeof T.nodeName}static calculateScrollbarWidth(T){if(T){let fe=getComputedStyle(T);return T.offsetWidth-T.clientWidth-parseFloat(fe.borderLeftWidth)-parseFloat(fe.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let fe=document.createElement("div");fe.className="p-scrollbar-measure",document.body.appendChild(fe);let m=fe.offsetWidth-fe.clientWidth;return document.body.removeChild(fe),this.calculatedScrollbarWidth=m,m}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let T=document.createElement("div");T.className="p-scrollbar-measure",document.body.appendChild(T);let fe=T.offsetHeight-T.clientHeight;return document.body.removeChild(T),this.calculatedScrollbarWidth=fe,fe}static invokeElementMethod(T,fe,m){T[fe].apply(T,m)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let T=this.resolveUserAgent();this.browser={},T.browser&&(this.browser[T.browser]=!0,this.browser.version=T.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let T=navigator.userAgent.toLowerCase(),fe=/(chrome)[ \/]([\w.]+)/.exec(T)||/(webkit)[ \/]([\w.]+)/.exec(T)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(T)||/(msie) ([\w.]+)/.exec(T)||T.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(T)||[];return{browser:fe[1]||"",version:fe[2]||"0"}}static isInteger(T){return Number.isInteger?Number.isInteger(T):"number"==typeof T&&isFinite(T)&&Math.floor(T)===T}static isHidden(T){return!T||null===T.offsetParent}static isVisible(T){return T&&null!=T.offsetParent}static isExist(T){return null!==T&&typeof T<"u"&&T.nodeName&&T.parentNode}static focus(T,fe){T&&document.activeElement!==T&&T.focus(fe)}static getFocusableElements(T){let fe=ce.find(T,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),m=[];for(let o of fe)(o.offsetWidth||o.offsetHeight||o.getClientRects().length)&&m.push(o);return m}static getNextFocusableElement(T,fe=!1){const m=ce.getFocusableElements(T);let o=0;if(m&&m.length>0){const f=m.indexOf(m[0].ownerDocument.activeElement);fe?o=-1==f||0===f?m.length-1:f-1:-1!=f&&f!==m.length-1&&(o=f+1)}return m[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(T,fe){if(!T)return null;switch(T){case"document":return document;case"window":return window;case"@next":return fe?.nextElementSibling;case"@prev":return fe?.previousElementSibling;case"@parent":return fe?.parentElement;case"@grandparent":return fe?.parentElement.parentElement;default:const m=typeof T;if("string"===m)return document.querySelector(T);if("object"===m&&T.hasOwnProperty("nativeElement"))return this.isExist(T.nativeElement)?T.nativeElement:void 0;const f=(h=T)&&h.constructor&&h.call&&h.apply?T():T;return f&&9===f.nodeType||this.isExist(f)?f:null}var h}}return ce.zindex=1e3,ce.calculatedScrollbarWidth=null,ce.calculatedScrollbarHeight=null,ce})();class v{constructor(Ue,T=(()=>{})){this.element=Ue,this.listener=T}bindScrollListener(){this.scrollableParents=d.getScrollableParents(this.element);for(let Ue=0;Ue<this.scrollableParents.length;Ue++)this.scrollableParents[Ue].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let Ue=0;Ue<this.scrollableParents.length;Ue++)this.scrollableParents[Ue].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}},1740:(Ft,Be,K)=>{"use strict";K.d(Be,{j:()=>T,o:()=>Ue});var d=K(8256),v=K(6895),ce=K(433);let Ue=(()=>{class fe{constructor(o,f,h){this.el=o,this.ngModel=f,this.cd=h}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(o){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return fe.\u0275fac=function(o){return new(o||fe)(d.Y36(d.SBq),d.Y36(ce.On,8),d.Y36(d.sBO))},fe.\u0275dir=d.lG2({type:fe,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(o,f){1&o&&d.NdJ("input",function(r){return f.onInput(r)}),2&o&&d.ekj("p-filled",f.filled)}}),fe})(),T=(()=>{class fe{}return fe.\u0275fac=function(o){return new(o||fe)},fe.\u0275mod=d.oAB({type:fe}),fe.\u0275inj=d.cJS({imports:[v.ez]}),fe})()},613:(Ft,Be,K)=>{"use strict";K.d(Be,{cc:()=>a});var d=K(8256),v=K(6895),ce=K(433);const Ue=["rb"],T=function(s,u,p){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":s,"p-disabled":u,"p-radiobutton-label-focus":p}};function fe(s,u){if(1&s){const p=d.EpF();d.TgZ(0,"label",4),d.NdJ("click",function(y){d.CHM(p);const S=d.oxw();return d.KtG(S.select(y))}),d._uU(1),d.qZA()}if(2&s){const p=d.oxw(),l=d.MAs(3);d.Tol(p.labelStyleClass),d.Q6J("ngClass",d.kEZ(5,T,l.checked,p.disabled,p.focused)),d.uIk("for",p.inputId),d.xp6(1),d.Oqu(p.label)}}const m=function(s,u,p){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":s,"p-radiobutton-disabled":u,"p-radiobutton-focused":p}},o=function(s,u,p){return{"p-radiobutton-box":!0,"p-highlight":s,"p-disabled":u,"p-focus":p}},f={provide:ce.JU,useExisting:(0,d.Gpc)(()=>r),multi:!0};let h=(()=>{class s{constructor(){this.accessors=[]}add(p,l){this.accessors.push([p,l])}remove(p){this.accessors=this.accessors.filter(l=>l[1]!==p)}select(p){this.accessors.forEach(l=>{this.isSameGroup(l,p)&&l[1]!==p&&l[1].writeValue(p.value)})}isSameGroup(p,l){return!!p[0].control&&p[0].control.root===l.control.control.root&&p[1].name===l.name}}return s.\u0275fac=function(p){return new(p||s)},s.\u0275prov=d.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),r=(()=>{class s{constructor(p,l,y){this.cd=p,this.injector=l,this.registry=y,this.onClick=new d.vpe,this.onFocus=new d.vpe,this.onBlur=new d.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(ce.a5),this.checkName(),this.registry.add(this.control,this)}handleClick(p,l,y){p.preventDefault(),!this.disabled&&(this.select(p),y&&l.focus())}select(p){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:p,value:this.value}))}writeValue(p){this.checked=p==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(p){this.onModelChange=p}registerOnTouched(p){this.onModelTouched=p}setDisabledState(p){this.disabled=p,this.cd.markForCheck()}onInputFocus(p){this.focused=!0,this.onFocus.emit(p)}onInputBlur(p){this.focused=!1,this.onModelTouched(),this.onBlur.emit(p)}onChange(p){this.select(p)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return s.\u0275fac=function(p){return new(p||s)(d.Y36(d.sBO),d.Y36(d.zs3),d.Y36(h))},s.\u0275cmp=d.Xpm({type:s,selectors:[["p-radioButton"]],viewQuery:function(p,l){if(1&p&&d.Gf(Ue,5),2&p){let y;d.iGM(y=d.CRH())&&(l.inputViewChild=y.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[d._Bn([f])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(p,l){if(1&p){const y=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),d.NdJ("change",function(x){return l.onChange(x)})("focus",function(x){return l.onInputFocus(x)})("blur",function(x){return l.onInputBlur(x)}),d.qZA()(),d.TgZ(4,"div",4),d.NdJ("click",function(x){d.CHM(y);const A=d.MAs(3);return d.KtG(l.handleClick(x,A,!0))}),d._UZ(5,"span",5),d.qZA()(),d.YNc(6,fe,2,9,"label",6)}2&p&&(d.Tol(l.styleClass),d.Q6J("ngStyle",l.style)("ngClass",d.kEZ(15,m,l.checked,l.disabled,l.focused)),d.xp6(2),d.Q6J("checked",l.checked)("disabled",l.disabled),d.uIk("id",l.inputId)("name",l.name)("value",l.value)("tabindex",l.tabindex)("aria-checked",l.checked)("aria-label",l.ariaLabel)("aria-labelledby",l.ariaLabelledBy),d.xp6(2),d.Q6J("ngClass",d.kEZ(19,o,l.checked,l.disabled,l.focused)),d.xp6(2),d.Q6J("ngIf",l.label))},dependencies:[v.mk,v.O5,v.PC],encapsulation:2,changeDetection:0}),s})(),a=(()=>{class s{}return s.\u0275fac=function(p){return new(p||s)},s.\u0275mod=d.oAB({type:s}),s.\u0275inj=d.cJS({imports:[v.ez]}),s})()},1795:(Ft,Be,K)=>{"use strict";K.d(Be,{H:()=>T,T:()=>fe});var d=K(8256),v=K(6895),ce=K(9592),Ue=K(805);let T=(()=>{class m{constructor(f,h,r){this.el=f,this.zone=h,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(f){let h=this.getInk();if(!h||"none"===getComputedStyle(h,null).display)return;if(ce.p.removeClass(h,"p-ink-active"),!ce.p.getHeight(h)&&!ce.p.getWidth(h)){let u=Math.max(ce.p.getOuterWidth(this.el.nativeElement),ce.p.getOuterHeight(this.el.nativeElement));h.style.height=u+"px",h.style.width=u+"px"}let r=ce.p.getOffset(this.el.nativeElement),a=f.pageX-r.left+document.body.scrollTop-ce.p.getWidth(h)/2,s=f.pageY-r.top+document.body.scrollLeft-ce.p.getHeight(h)/2;h.style.top=s+"px",h.style.left=a+"px",ce.p.addClass(h,"p-ink-active"),this.timeout=setTimeout(()=>{let u=this.getInk();u&&ce.p.removeClass(u,"p-ink-active")},401)}getInk(){const f=this.el.nativeElement.children;for(let h=0;h<f.length;h++)if("string"==typeof f[h].className&&-1!==f[h].className.indexOf("p-ink"))return f[h];return null}resetInk(){let f=this.getInk();f&&ce.p.removeClass(f,"p-ink-active")}onAnimationEnd(f){this.timeout&&clearTimeout(this.timeout),ce.p.removeClass(f.currentTarget,"p-ink-active")}create(){let f=document.createElement("span");f.className="p-ink",this.el.nativeElement.appendChild(f),this.animationListener=this.onAnimationEnd.bind(this),f.addEventListener("animationend",this.animationListener)}remove(){let f=this.getInk();f&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),f.removeEventListener("animationend",this.animationListener),ce.p.removeElement(f))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return m.\u0275fac=function(f){return new(f||m)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Ue.b4,8))},m.\u0275dir=d.lG2({type:m,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),m})(),fe=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=d.oAB({type:m}),m.\u0275inj=d.cJS({imports:[v.ez]}),m})()},982:(Ft,Be,K)=>{"use strict";K.d(Be,{P9:()=>T,Th:()=>ce,gb:()=>d});class d{static equals(m,o,f){return f?this.resolveFieldData(m,f)===this.resolveFieldData(o,f):this.equalsByValue(m,o)}static equalsByValue(m,o){if(m===o)return!0;if(m&&o&&"object"==typeof m&&"object"==typeof o){var r,a,s,f=Array.isArray(m),h=Array.isArray(o);if(f&&h){if((a=m.length)!=o.length)return!1;for(r=a;0!=r--;)if(!this.equalsByValue(m[r],o[r]))return!1;return!0}if(f!=h)return!1;var u=m instanceof Date,p=o instanceof Date;if(u!=p)return!1;if(u&&p)return m.getTime()==o.getTime();var l=m instanceof RegExp,y=o instanceof RegExp;if(l!=y)return!1;if(l&&y)return m.toString()==o.toString();var S=Object.keys(m);if((a=S.length)!==Object.keys(o).length)return!1;for(r=a;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,S[r]))return!1;for(r=a;0!=r--;)if(!this.equalsByValue(m[s=S[r]],o[s]))return!1;return!0}return m!=m&&o!=o}static resolveFieldData(m,o){if(m&&o){if(this.isFunction(o))return o(m);if(-1==o.indexOf("."))return m[o];{let f=o.split("."),h=m;for(let r=0,a=f.length;r<a;++r){if(null==h)return null;h=h[f[r]]}return h}}return null}static isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)}static reorderArray(m,o,f){m&&o!==f&&(f>=m.length&&(f%=m.length,o%=m.length),m.splice(f,0,m.splice(o,1)[0]))}static insertIntoOrderedArray(m,o,f,h){if(f.length>0){let r=!1;for(let a=0;a<f.length;a++)if(this.findIndexInList(f[a],h)>o){f.splice(a,0,m),r=!0;break}r||f.push(m)}else f.push(m)}static findIndexInList(m,o){let f=-1;if(o)for(let h=0;h<o.length;h++)if(o[h]==m){f=h;break}return f}static contains(m,o){if(null!=m&&o&&o.length)for(let f of o)if(this.equals(m,f))return!0;return!1}static removeAccents(m){return m&&m.search(/[\xC0-\xFF]/g)>-1&&(m=m.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),m}static isEmpty(m){return null==m||""===m||Array.isArray(m)&&0===m.length||!(m instanceof Date)&&"object"==typeof m&&0===Object.keys(m).length}static isNotEmpty(m){return!this.isEmpty(m)}static compare(m,o,f,h=1){let r=-1;const a=this.isEmpty(m),s=this.isEmpty(o);return r=a&&s?0:a?h:s?-h:"string"==typeof m&&"string"==typeof o?m.localeCompare(o,f,{numeric:!0}):m<o?-1:m>o?1:0,r}static sort(m,o,f=1,h,r=1){return(1===r?f:r)*d.compare(m,o,h,f)}static merge(m,o){if(null!=m||null!=o)return null!=m&&"object"!=typeof m||null!=o&&"object"!=typeof o?null!=m&&"string"!=typeof m||null!=o&&"string"!=typeof o?o||m:[m||"",o||""].join(" "):{...m||{},...o||{}}}}var v=0;function ce(){return"pr_id_"+ ++v}var T=function Ue(){let fe=[];const h=r=>r&&parseInt(r.style.zIndex,10)||0;return{get:h,set:(r,a,s)=>{a&&(a.style.zIndex=String(((r,a)=>{let s=fe.length>0?fe[fe.length-1]:{key:r,value:a},u=s.value+(s.key===r?0:a)+1;return fe.push({key:r,value:u}),u})(r,s)))},clear:r=>{r&&((r=>{fe=fe.filter(a=>a.value!==r)})(h(r)),r.style.zIndex="")},getCurrent:()=>fe.length>0?fe[fe.length-1].value:0}}()},360:(Ft,Be,K)=>{"use strict";K.d(Be,{io:()=>hn});var d={};K.r(d),K.d(d,{Decoder:()=>Ht,Encoder:()=>Wt,PacketType:()=>Ye,protocol:()=>_t});const v=Object.create(null);v.open="0",v.close="1",v.ping="2",v.pong="3",v.message="4",v.upgrade="5",v.noop="6";const ce=Object.create(null);Object.keys(v).forEach(X=>{ce[v[X]]=X});const Ue={type:"error",data:"parser error"},T="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),fe="function"==typeof ArrayBuffer,f=(X,F)=>{const I=new FileReader;return I.onload=function(){const W=I.result.split(",")[1];F("b"+(W||""))},I.readAsDataURL(X)},h=({type:X,data:F},I,W)=>T&&F instanceof Blob?I?W(F):f(F,W):fe&&(F instanceof ArrayBuffer||(X=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(X):X&&X.buffer instanceof ArrayBuffer)(F))?I?W(F):f(new Blob([F]),W):W(v[X]+(F||"")),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let X=0;X<r.length;X++)a[r.charCodeAt(X)]=X;const p="function"==typeof ArrayBuffer,y=(X,F)=>{if(p){const I=(X=>{let W,ze,st,Xt,ln,F=.75*X.length,I=X.length,me=0;"="===X[X.length-1]&&(F--,"="===X[X.length-2]&&F--);const Xn=new ArrayBuffer(F),Pn=new Uint8Array(Xn);for(W=0;W<I;W+=4)ze=a[X.charCodeAt(W)],st=a[X.charCodeAt(W+1)],Xt=a[X.charCodeAt(W+2)],ln=a[X.charCodeAt(W+3)],Pn[me++]=ze<<2|st>>4,Pn[me++]=(15&st)<<4|Xt>>2,Pn[me++]=(3&Xt)<<6|63&ln;return Xn})(X);return S(I,F)}return{base64:!0,data:X}},S=(X,F)=>"blob"===F&&X instanceof ArrayBuffer?new Blob([X]):X,x=(X,F)=>{if("string"!=typeof X)return{type:"message",data:S(X,F)};const I=X.charAt(0);return"b"===I?{type:"message",data:y(X.substring(1),F)}:ce[I]?X.length>1?{type:ce[I],data:X.substring(1)}:{type:ce[I]}:Ue},A=String.fromCharCode(30);function ue(X){if(X)return function pe(X){for(var F in ue.prototype)X[F]=ue.prototype[F];return X}(X)}ue.prototype.on=ue.prototype.addEventListener=function(X,F){return this._callbacks=this._callbacks||{},(this._callbacks["$"+X]=this._callbacks["$"+X]||[]).push(F),this},ue.prototype.once=function(X,F){function I(){this.off(X,I),F.apply(this,arguments)}return I.fn=F,this.on(X,I),this},ue.prototype.off=ue.prototype.removeListener=ue.prototype.removeAllListeners=ue.prototype.removeEventListener=function(X,F){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var I=this._callbacks["$"+X];if(!I)return this;if(1==arguments.length)return delete this._callbacks["$"+X],this;for(var W,me=0;me<I.length;me++)if((W=I[me])===F||W.fn===F){I.splice(me,1);break}return 0===I.length&&delete this._callbacks["$"+X],this},ue.prototype.emitReserved=ue.prototype.emit=function(X){this._callbacks=this._callbacks||{};for(var F=new Array(arguments.length-1),I=this._callbacks["$"+X],W=1;W<arguments.length;W++)F[W-1]=arguments[W];if(I){W=0;for(var me=(I=I.slice(0)).length;W<me;++W)I[W].apply(this,F)}return this},ue.prototype.listeners=function(X){return this._callbacks=this._callbacks||{},this._callbacks["$"+X]||[]},ue.prototype.hasListeners=function(X){return!!this.listeners(X).length};const Ce=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Se(X,...F){return F.reduce((I,W)=>(X.hasOwnProperty(W)&&(I[W]=X[W]),I),{})}const He=Ce.setTimeout,ot=Ce.clearTimeout;function at(X,F){F.useNativeTimers?(X.setTimeoutFn=He.bind(Ce),X.clearTimeoutFn=ot.bind(Ce)):(X.setTimeoutFn=Ce.setTimeout.bind(Ce),X.clearTimeoutFn=Ce.clearTimeout.bind(Ce))}const ke=1.33;function Ee(X){return"string"==typeof X?function xe(X){let F=0,I=0;for(let W=0,me=X.length;W<me;W++)F=X.charCodeAt(W),F<128?I+=1:F<2048?I+=2:F<55296||F>=57344?I+=3:(W++,I+=4);return I}(X):Math.ceil((X.byteLength||X.size)*ke)}class Le extends Error{constructor(F,I,W){super(F),this.description=I,this.context=W,this.type="TransportError"}}class q extends ue{constructor(F){super(),this.writable=!1,at(this,F),this.opts=F,this.query=F.query,this.socket=F.socket}onError(F,I,W){return super.emitReserved("error",new Le(F,I,W)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(F){"open"===this.readyState&&this.write(F)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(F){const I=x(F,this.socket.binaryType);this.onPacket(I)}onPacket(F){super.emitReserved("packet",F)}onClose(F){this.readyState="closed",super.emitReserved("close",F)}pause(F){}}const le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ae=64,he={};let ee,Fe=0,de=0;function De(X){let F="";do{F=le[X%ae]+F,X=Math.floor(X/ae)}while(X>0);return F}function We(){const X=De(+new Date);return X!==ee?(Fe=0,ee=X):X+"."+De(Fe++)}for(;de<ae;de++)he[le[de]]=de;function $e(X){let F="";for(let I in X)X.hasOwnProperty(I)&&(F.length&&(F+="&"),F+=encodeURIComponent(I)+"="+encodeURIComponent(X[I]));return F}let Ke=!1;try{Ke=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ct=Ke;function qe(X){const F=X.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!F||Ct))return new XMLHttpRequest}catch{}if(!F)try{return new(Ce[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function Ne(){}const tt=null!=new qe({xdomain:!1}).responseType;let Xe=(()=>{class X extends ue{constructor(I,W){super(),at(this,W),this.opts=W,this.method=W.method||"GET",this.uri=I,this.async=!1!==W.async,this.data=void 0!==W.data?W.data:null,this.create()}create(){const I=Se(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");I.xdomain=!!this.opts.xd,I.xscheme=!!this.opts.xs;const W=this.xhr=new qe(I);try{W.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){W.setDisableHeaderCheck&&W.setDisableHeaderCheck(!0);for(let me in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(me)&&W.setRequestHeader(me,this.opts.extraHeaders[me])}}catch{}if("POST"===this.method)try{W.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{W.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in W&&(W.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(W.timeout=this.opts.requestTimeout),W.onreadystatechange=()=>{4===W.readyState&&(200===W.status||1223===W.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof W.status?W.status:0)},0))},W.send(this.data)}catch(me){return void this.setTimeoutFn(()=>{this.onError(me)},0)}typeof document<"u"&&(this.index=X.requestsCount++,X.requests[this.index]=this)}onError(I){this.emitReserved("error",I,this.xhr),this.cleanup(!0)}cleanup(I){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=Ne,I)try{this.xhr.abort()}catch{}typeof document<"u"&&delete X.requests[this.index],this.xhr=null}}onLoad(){const I=this.xhr.responseText;null!==I&&(this.emitReserved("data",I),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return X.requestsCount=0,X.requests={},X})();function lt(){for(let X in Xe.requests)Xe.requests.hasOwnProperty(X)&&Xe.requests[X].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",lt):"function"==typeof addEventListener&&addEventListener("onpagehide"in Ce?"pagehide":"unload",lt,!1));const vt="function"==typeof Promise&&"function"==typeof Promise.resolve?F=>Promise.resolve().then(F):(F,I)=>I(F,0),Mt=Ce.WebSocket||Ce.MozWebSocket,It=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Gt={websocket:class Lt extends q{constructor(F){super(F),this.supportsBinary=!F.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const F=this.uri(),I=this.opts.protocols,W=It?{}:Se(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(W.headers=this.opts.extraHeaders);try{this.ws=It?new Mt(F,I,W):I?new Mt(F,I):new Mt(F)}catch(me){return this.emitReserved("error",me)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=F=>this.onClose({description:"websocket connection closed",context:F}),this.ws.onmessage=F=>this.onData(F.data),this.ws.onerror=F=>this.onError("websocket error",F)}write(F){this.writable=!1;for(let I=0;I<F.length;I++){const me=I===F.length-1;h(F[I],this.supportsBinary,ze=>{try{this.ws.send(ze)}catch{}me&&vt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let F=this.query||{};const I=this.opts.secure?"wss":"ws";let W="";this.opts.port&&("wss"===I&&443!==Number(this.opts.port)||"ws"===I&&80!==Number(this.opts.port))&&(W=":"+this.opts.port),this.opts.timestampRequests&&(F[this.opts.timestampParam]=We()),this.supportsBinary||(F.b64=1);const me=$e(F);return I+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+W+this.opts.path+(me.length?"?"+me:"")}check(){return!!Mt}},polling:class Ve extends q{constructor(F){if(super(F),this.polling=!1,typeof location<"u"){const W="https:"===location.protocol;let me=location.port;me||(me=W?"443":"80"),this.xd=typeof location<"u"&&F.hostname!==location.hostname||me!==F.port,this.xs=F.secure!==W}this.supportsBinary=tt&&!(F&&F.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(F){this.readyState="pausing";const I=()=>{this.readyState="paused",F()};if(this.polling||!this.writable){let W=0;this.polling&&(W++,this.once("pollComplete",function(){--W||I()})),this.writable||(W++,this.once("drain",function(){--W||I()}))}else I()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(F){((X,F)=>{const I=X.split(A),W=[];for(let me=0;me<I.length;me++){const ze=x(I[me],F);if(W.push(ze),"error"===ze.type)break}return W})(F,this.socket.binaryType).forEach(W=>{if("opening"===this.readyState&&"open"===W.type&&this.onOpen(),"close"===W.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(W)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const F=()=>{this.write([{type:"close"}])};"open"===this.readyState?F():this.once("open",F)}write(F){this.writable=!1,((X,F)=>{const I=X.length,W=new Array(I);let me=0;X.forEach((ze,st)=>{h(ze,!1,Xt=>{W[st]=Xt,++me===I&&F(W.join(A))})})})(F,I=>{this.doWrite(I,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let F=this.query||{};const I=this.opts.secure?"https":"http";let W="";!1!==this.opts.timestampRequests&&(F[this.opts.timestampParam]=We()),!this.supportsBinary&&!F.sid&&(F.b64=1),this.opts.port&&("https"===I&&443!==Number(this.opts.port)||"http"===I&&80!==Number(this.opts.port))&&(W=":"+this.opts.port);const me=$e(F);return I+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+W+this.opts.path+(me.length?"?"+me:"")}request(F={}){return Object.assign(F,{xd:this.xd,xs:this.xs},this.opts),new Xe(this.uri(),F)}doWrite(F,I){const W=this.request({method:"POST",data:F});W.on("success",I),W.on("error",(me,ze)=>{this.onError("xhr post error",me,ze)})}doPoll(){const F=this.request();F.on("data",this.onData.bind(this)),F.on("error",(I,W)=>{this.onError("xhr poll error",I,W)}),this.pollXhr=F}}},zt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qe(X){const F=X,I=X.indexOf("["),W=X.indexOf("]");-1!=I&&-1!=W&&(X=X.substring(0,I)+X.substring(I,W).replace(/:/g,";")+X.substring(W,X.length));let me=zt.exec(X||""),ze={},st=14;for(;st--;)ze[mt[st]]=me[st]||"";return-1!=I&&-1!=W&&(ze.source=F,ze.host=ze.host.substring(1,ze.host.length-1).replace(/;/g,":"),ze.authority=ze.authority.replace("[","").replace("]","").replace(/;/g,":"),ze.ipv6uri=!0),ze.pathNames=function je(X,F){const W=F.replace(/\/{2,9}/g,"/").split("/");return("/"==F.slice(0,1)||0===F.length)&&W.splice(0,1),"/"==F.slice(-1)&&W.splice(W.length-1,1),W}(0,ze.path),ze.queryKey=function pt(X,F){const I={};return F.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(W,me,ze){me&&(I[me]=ze)}),I}(0,ze.query),ze}let ye=(()=>{class X extends ue{constructor(I,W={}){super(),this.writeBuffer=[],I&&"object"==typeof I&&(W=I,I=null),I?(I=Qe(I),W.hostname=I.host,W.secure="https"===I.protocol||"wss"===I.protocol,W.port=I.port,I.query&&(W.query=I.query)):W.host&&(W.hostname=Qe(W.host).host),at(this,W),this.secure=null!=W.secure?W.secure:typeof location<"u"&&"https:"===location.protocol,W.hostname&&!W.port&&(W.port=this.secure?"443":"80"),this.hostname=W.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=W.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=W.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},W),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function rt(X){let F={},I=X.split("&");for(let W=0,me=I.length;W<me;W++){let ze=I[W].split("=");F[decodeURIComponent(ze[0])]=decodeURIComponent(ze[1])}return F}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(I){const W=Object.assign({},this.opts.query);W.EIO=4,W.transport=I,this.id&&(W.sid=this.id);const me=Object.assign({},this.opts.transportOptions[I],this.opts,{query:W,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Gt[I](me)}open(){let I;if(this.opts.rememberUpgrade&&X.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))I="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);I=this.transports[0]}this.readyState="opening";try{I=this.createTransport(I)}catch{return this.transports.shift(),void this.open()}I.open(),this.setTransport(I)}setTransport(I){this.transport&&this.transport.removeAllListeners(),this.transport=I,I.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",W=>this.onClose("transport close",W))}probe(I){let W=this.createTransport(I),me=!1;X.priorWebsocketSuccess=!1;const ze=()=>{me||(W.send([{type:"ping",data:"probe"}]),W.once("packet",Gn=>{if(!me)if("pong"===Gn.type&&"probe"===Gn.data){if(this.upgrading=!0,this.emitReserved("upgrading",W),!W)return;X.priorWebsocketSuccess="websocket"===W.name,this.transport.pause(()=>{me||"closed"!==this.readyState&&(ci(),this.setTransport(W),W.send([{type:"upgrade"}]),this.emitReserved("upgrade",W),W=null,this.upgrading=!1,this.flush())})}else{const yi=new Error("probe error");yi.transport=W.name,this.emitReserved("upgradeError",yi)}}))};function st(){me||(me=!0,ci(),W.close(),W=null)}const Xt=Gn=>{const yi=new Error("probe error: "+Gn);yi.transport=W.name,st(),this.emitReserved("upgradeError",yi)};function ln(){Xt("transport closed")}function Xn(){Xt("socket closed")}function Pn(Gn){W&&Gn.name!==W.name&&st()}const ci=()=>{W.removeListener("open",ze),W.removeListener("error",Xt),W.removeListener("close",ln),this.off("close",Xn),this.off("upgrading",Pn)};W.once("open",ze),W.once("error",Xt),W.once("close",ln),this.once("close",Xn),this.once("upgrading",Pn),W.open()}onOpen(){if(this.readyState="open",X.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let I=0;const W=this.upgrades.length;for(;I<W;I++)this.probe(this.upgrades[I])}}onPacket(I){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",I),this.emitReserved("heartbeat"),I.type){case"open":this.onHandshake(JSON.parse(I.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const W=new Error("server error");W.code=I.data,this.onError(W);break;case"message":this.emitReserved("data",I.data),this.emitReserved("message",I.data)}}onHandshake(I){this.emitReserved("handshake",I),this.id=I.sid,this.transport.query.sid=I.sid,this.upgrades=this.filterUpgrades(I.upgrades),this.pingInterval=I.pingInterval,this.pingTimeout=I.pingTimeout,this.maxPayload=I.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const I=this.getWritablePackets();this.transport.send(I),this.prevBufferLen=I.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let W=1;for(let me=0;me<this.writeBuffer.length;me++){const ze=this.writeBuffer[me].data;if(ze&&(W+=Ee(ze)),me>0&&W>this.maxPayload)return this.writeBuffer.slice(0,me);W+=2}return this.writeBuffer}write(I,W,me){return this.sendPacket("message",I,W,me),this}send(I,W,me){return this.sendPacket("message",I,W,me),this}sendPacket(I,W,me,ze){if("function"==typeof W&&(ze=W,W=void 0),"function"==typeof me&&(ze=me,me=null),"closing"===this.readyState||"closed"===this.readyState)return;(me=me||{}).compress=!1!==me.compress;const st={type:I,data:W,options:me};this.emitReserved("packetCreate",st),this.writeBuffer.push(st),ze&&this.once("flush",ze),this.flush()}close(){const I=()=>{this.onClose("forced close"),this.transport.close()},W=()=>{this.off("upgrade",W),this.off("upgradeError",W),I()},me=()=>{this.once("upgrade",W),this.once("upgradeError",W)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?me():I()}):this.upgrading?me():I()),this}onError(I){X.priorWebsocketSuccess=!1,this.emitReserved("error",I),this.onClose("transport error",I)}onClose(I,W){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",I,W),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(I){const W=[];let me=0;const ze=I.length;for(;me<ze;me++)~this.transports.indexOf(I[me])&&W.push(I[me]);return W}}return X.protocol=4,X})();const Bt="function"==typeof ArrayBuffer,dn=X=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(X):X.buffer instanceof ArrayBuffer,bi=Object.prototype.toString,En="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===bi.call(Blob),wi="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===bi.call(File);function jn(X){return Bt&&(X instanceof ArrayBuffer||dn(X))||En&&X instanceof Blob||wi&&X instanceof File}function Yt(X,F){if(!X||"object"!=typeof X)return!1;if(Array.isArray(X)){for(let I=0,W=X.length;I<W;I++)if(Yt(X[I]))return!0;return!1}if(jn(X))return!0;if(X.toJSON&&"function"==typeof X.toJSON&&1===arguments.length)return Yt(X.toJSON(),!0);for(const I in X)if(Object.prototype.hasOwnProperty.call(X,I)&&Yt(X[I]))return!0;return!1}function Si(X){const F=[],W=X;return W.data=dt(X.data,F),W.attachments=F.length,{packet:W,buffers:F}}function dt(X,F){if(!X)return X;if(jn(X)){const I={_placeholder:!0,num:F.length};return F.push(X),I}if(Array.isArray(X)){const I=new Array(X.length);for(let W=0;W<X.length;W++)I[W]=dt(X[W],F);return I}if("object"==typeof X&&!(X instanceof Date)){const I={};for(const W in X)Object.prototype.hasOwnProperty.call(X,W)&&(I[W]=dt(X[W],F));return I}return X}function _e(X,F){return X.data=Oe(X.data,F),delete X.attachments,X}function Oe(X,F){if(!X)return X;if(X&&!0===X._placeholder){if("number"==typeof X.num&&X.num>=0&&X.num<F.length)return F[X.num];throw new Error("illegal attachments")}if(Array.isArray(X))for(let I=0;I<X.length;I++)X[I]=Oe(X[I],F);else if("object"==typeof X)for(const I in X)Object.prototype.hasOwnProperty.call(X,I)&&(X[I]=Oe(X[I],F));return X}const _t=5;var Ye=(()=>{return(X=Ye||(Ye={}))[X.CONNECT=0]="CONNECT",X[X.DISCONNECT=1]="DISCONNECT",X[X.EVENT=2]="EVENT",X[X.ACK=3]="ACK",X[X.CONNECT_ERROR=4]="CONNECT_ERROR",X[X.BINARY_EVENT=5]="BINARY_EVENT",X[X.BINARY_ACK=6]="BINARY_ACK",Ye;var X})();class Wt{constructor(F){this.replacer=F}encode(F){return F.type!==Ye.EVENT&&F.type!==Ye.ACK||!Yt(F)?[this.encodeAsString(F)]:this.encodeAsBinary({type:F.type===Ye.EVENT?Ye.BINARY_EVENT:Ye.BINARY_ACK,nsp:F.nsp,data:F.data,id:F.id})}encodeAsString(F){let I=""+F.type;return(F.type===Ye.BINARY_EVENT||F.type===Ye.BINARY_ACK)&&(I+=F.attachments+"-"),F.nsp&&"/"!==F.nsp&&(I+=F.nsp+","),null!=F.id&&(I+=F.id),null!=F.data&&(I+=JSON.stringify(F.data,this.replacer)),I}encodeAsBinary(F){const I=Si(F),W=this.encodeAsString(I.packet),me=I.buffers;return me.unshift(W),me}}class Ht extends ue{constructor(F){super(),this.reviver=F}add(F){let I;if("string"==typeof F){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");I=this.decodeString(F);const W=I.type===Ye.BINARY_EVENT;W||I.type===Ye.BINARY_ACK?(I.type=W?Ye.EVENT:Ye.ACK,this.reconstructor=new _n(I),0===I.attachments&&super.emitReserved("decoded",I)):super.emitReserved("decoded",I)}else{if(!jn(F)&&!F.base64)throw new Error("Unknown type: "+F);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");I=this.reconstructor.takeBinaryData(F),I&&(this.reconstructor=null,super.emitReserved("decoded",I))}}decodeString(F){let I=0;const W={type:Number(F.charAt(0))};if(void 0===Ye[W.type])throw new Error("unknown packet type "+W.type);if(W.type===Ye.BINARY_EVENT||W.type===Ye.BINARY_ACK){const ze=I+1;for(;"-"!==F.charAt(++I)&&I!=F.length;);const st=F.substring(ze,I);if(st!=Number(st)||"-"!==F.charAt(I))throw new Error("Illegal attachments");W.attachments=Number(st)}if("/"===F.charAt(I+1)){const ze=I+1;for(;++I&&","!==F.charAt(I)&&I!==F.length;);W.nsp=F.substring(ze,I)}else W.nsp="/";const me=F.charAt(I+1);if(""!==me&&Number(me)==me){const ze=I+1;for(;++I;){const st=F.charAt(I);if(null==st||Number(st)!=st){--I;break}if(I===F.length)break}W.id=Number(F.substring(ze,I+1))}if(F.charAt(++I)){const ze=this.tryParse(F.substr(I));if(!Ht.isPayloadValid(W.type,ze))throw new Error("invalid payload");W.data=ze}return W}tryParse(F){try{return JSON.parse(F,this.reviver)}catch{return!1}}static isPayloadValid(F,I){switch(F){case Ye.CONNECT:return"object"==typeof I;case Ye.DISCONNECT:return void 0===I;case Ye.CONNECT_ERROR:return"string"==typeof I||"object"==typeof I;case Ye.EVENT:case Ye.BINARY_EVENT:return Array.isArray(I)&&I.length>0;case Ye.ACK:case Ye.BINARY_ACK:return Array.isArray(I)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class _n{constructor(F){this.packet=F,this.buffers=[],this.reconPack=F}takeBinaryData(F){if(this.buffers.push(F),this.buffers.length===this.reconPack.attachments){const I=_e(this.reconPack,this.buffers);return this.finishedReconstruction(),I}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ut(X,F,I){return X.on(F,I),function(){X.off(F,I)}}const Tn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class li extends ue{constructor(F,I,W){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=F,this.nsp=I,W&&W.auth&&(this.auth=W.auth),this._opts=Object.assign({},W),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const F=this.io;this.subs=[Ut(F,"open",this.onopen.bind(this)),Ut(F,"packet",this.onpacket.bind(this)),Ut(F,"error",this.onerror.bind(this)),Ut(F,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...F){return F.unshift("message"),this.emit.apply(this,F),this}emit(F,...I){if(Tn.hasOwnProperty(F))throw new Error('"'+F.toString()+'" is a reserved event name');if(I.unshift(F),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(I),this;const W={type:Ye.EVENT,data:I,options:{}};if(W.options.compress=!1!==this.flags.compress,"function"==typeof I[I.length-1]){const st=this.ids++,Xt=I.pop();this._registerAckCallback(st,Xt),W.id=st}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(W),this.packet(W)):this.sendBuffer.push(W)),this.flags={},this}_registerAckCallback(F,I){var W;const me=null!==(W=this.flags.timeout)&&void 0!==W?W:this._opts.ackTimeout;if(void 0===me)return void(this.acks[F]=I);const ze=this.io.setTimeoutFn(()=>{delete this.acks[F];for(let st=0;st<this.sendBuffer.length;st++)this.sendBuffer[st].id===F&&this.sendBuffer.splice(st,1);I.call(this,new Error("operation has timed out"))},me);this.acks[F]=(...st)=>{this.io.clearTimeoutFn(ze),I.apply(this,[null,...st])}}emitWithAck(F,...I){const W=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((me,ze)=>{I.push((st,Xt)=>W?st?ze(st):me(Xt):me(st)),this.emit(F,...I)})}_addToQueue(F){let I;"function"==typeof F[F.length-1]&&(I=F.pop());const W={id:this._queueSeq++,tryCount:0,pending:!1,args:F,flags:Object.assign({fromQueue:!0},this.flags)};F.push((me,...ze)=>W!==this._queue[0]?void 0:(null!==me?W.tryCount>this._opts.retries&&(this._queue.shift(),I&&I(me)):(this._queue.shift(),I&&I(null,...ze)),W.pending=!1,this._drainQueue())),this._queue.push(W),this._drainQueue()}_drainQueue(F=!1){if(!this.connected||0===this._queue.length)return;const I=this._queue[0];I.pending&&!F||(I.pending=!0,I.tryCount++,this.flags=I.flags,this.emit.apply(this,I.args))}packet(F){F.nsp=this.nsp,this.io._packet(F)}onopen(){"function"==typeof this.auth?this.auth(F=>{this._sendConnectPacket(F)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(F){this.packet({type:Ye.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},F):F})}onerror(F){this.connected||this.emitReserved("connect_error",F)}onclose(F,I){this.connected=!1,delete this.id,this.emitReserved("disconnect",F,I)}onpacket(F){if(F.nsp===this.nsp)switch(F.type){case Ye.CONNECT:F.data&&F.data.sid?this.onconnect(F.data.sid,F.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ye.EVENT:case Ye.BINARY_EVENT:this.onevent(F);break;case Ye.ACK:case Ye.BINARY_ACK:this.onack(F);break;case Ye.DISCONNECT:this.ondisconnect();break;case Ye.CONNECT_ERROR:this.destroy();const W=new Error(F.data.message);W.data=F.data.data,this.emitReserved("connect_error",W)}}onevent(F){const I=F.data||[];null!=F.id&&I.push(this.ack(F.id)),this.connected?this.emitEvent(I):this.receiveBuffer.push(Object.freeze(I))}emitEvent(F){if(this._anyListeners&&this._anyListeners.length){const I=this._anyListeners.slice();for(const W of I)W.apply(this,F)}super.emit.apply(this,F),this._pid&&F.length&&"string"==typeof F[F.length-1]&&(this._lastOffset=F[F.length-1])}ack(F){const I=this;let W=!1;return function(...me){W||(W=!0,I.packet({type:Ye.ACK,id:F,data:me}))}}onack(F){const I=this.acks[F.id];"function"==typeof I&&(I.apply(this,F.data),delete this.acks[F.id])}onconnect(F,I){this.id=F,this.recovered=I&&this._pid===I,this._pid=I,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(F=>this.emitEvent(F)),this.receiveBuffer=[],this.sendBuffer.forEach(F=>{this.notifyOutgoingListeners(F),this.packet(F)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(F=>F()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ye.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(F){return this.flags.compress=F,this}get volatile(){return this.flags.volatile=!0,this}timeout(F){return this.flags.timeout=F,this}onAny(F){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(F),this}prependAny(F){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(F),this}offAny(F){if(!this._anyListeners)return this;if(F){const I=this._anyListeners;for(let W=0;W<I.length;W++)if(F===I[W])return I.splice(W,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(F){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(F),this}prependAnyOutgoing(F){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(F),this}offAnyOutgoing(F){if(!this._anyOutgoingListeners)return this;if(F){const I=this._anyOutgoingListeners;for(let W=0;W<I.length;W++)if(F===I[W])return I.splice(W,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(F){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const I=this._anyOutgoingListeners.slice();for(const W of I)W.apply(this,F.data)}}}function On(X){this.ms=(X=X||{}).min||100,this.max=X.max||1e4,this.factor=X.factor||2,this.jitter=X.jitter>0&&X.jitter<=1?X.jitter:0,this.attempts=0}On.prototype.duration=function(){var X=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var F=Math.random(),I=Math.floor(F*this.jitter*X);X=1&Math.floor(10*F)?X+I:X-I}return 0|Math.min(X,this.max)},On.prototype.reset=function(){this.attempts=0},On.prototype.setMin=function(X){this.ms=X},On.prototype.setMax=function(X){this.max=X},On.prototype.setJitter=function(X){this.jitter=X};class Nn extends ue{constructor(F,I){var W;super(),this.nsps={},this.subs=[],F&&"object"==typeof F&&(I=F,F=void 0),(I=I||{}).path=I.path||"/socket.io",this.opts=I,at(this,I),this.reconnection(!1!==I.reconnection),this.reconnectionAttempts(I.reconnectionAttempts||1/0),this.reconnectionDelay(I.reconnectionDelay||1e3),this.reconnectionDelayMax(I.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(W=I.randomizationFactor)&&void 0!==W?W:.5),this.backoff=new On({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==I.timeout?2e4:I.timeout),this._readyState="closed",this.uri=F;const me=I.parser||d;this.encoder=new me.Encoder,this.decoder=new me.Decoder,this._autoConnect=!1!==I.autoConnect,this._autoConnect&&this.open()}reconnection(F){return arguments.length?(this._reconnection=!!F,this):this._reconnection}reconnectionAttempts(F){return void 0===F?this._reconnectionAttempts:(this._reconnectionAttempts=F,this)}reconnectionDelay(F){var I;return void 0===F?this._reconnectionDelay:(this._reconnectionDelay=F,null===(I=this.backoff)||void 0===I||I.setMin(F),this)}randomizationFactor(F){var I;return void 0===F?this._randomizationFactor:(this._randomizationFactor=F,null===(I=this.backoff)||void 0===I||I.setJitter(F),this)}reconnectionDelayMax(F){var I;return void 0===F?this._reconnectionDelayMax:(this._reconnectionDelayMax=F,null===(I=this.backoff)||void 0===I||I.setMax(F),this)}timeout(F){return arguments.length?(this._timeout=F,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(F){if(~this._readyState.indexOf("open"))return this;this.engine=new ye(this.uri,this.opts);const I=this.engine,W=this;this._readyState="opening",this.skipReconnect=!1;const me=Ut(I,"open",function(){W.onopen(),F&&F()}),ze=Ut(I,"error",st=>{W.cleanup(),W._readyState="closed",this.emitReserved("error",st),F?F(st):W.maybeReconnectOnOpen()});if(!1!==this._timeout){const st=this._timeout;0===st&&me();const Xt=this.setTimeoutFn(()=>{me(),I.close(),I.emit("error",new Error("timeout"))},st);this.opts.autoUnref&&Xt.unref(),this.subs.push(function(){clearTimeout(Xt)})}return this.subs.push(me),this.subs.push(ze),this}connect(F){return this.open(F)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const F=this.engine;this.subs.push(Ut(F,"ping",this.onping.bind(this)),Ut(F,"data",this.ondata.bind(this)),Ut(F,"error",this.onerror.bind(this)),Ut(F,"close",this.onclose.bind(this)),Ut(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(F){try{this.decoder.add(F)}catch(I){this.onclose("parse error",I)}}ondecoded(F){vt(()=>{this.emitReserved("packet",F)},this.setTimeoutFn)}onerror(F){this.emitReserved("error",F)}socket(F,I){let W=this.nsps[F];return W?this._autoConnect&&!W.active&&W.connect():(W=new li(this,F,I),this.nsps[F]=W),W}_destroy(F){const I=Object.keys(this.nsps);for(const W of I)if(this.nsps[W].active)return;this._close()}_packet(F){const I=this.encoder.encode(F);for(let W=0;W<I.length;W++)this.engine.write(I[W],F.options)}cleanup(){this.subs.forEach(F=>F()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(F,I){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",F,I),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const F=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const I=this.backoff.duration();this._reconnecting=!0;const W=this.setTimeoutFn(()=>{F.skipReconnect||(this.emitReserved("reconnect_attempt",F.backoff.attempts),!F.skipReconnect&&F.open(me=>{me?(F._reconnecting=!1,F.reconnect(),this.emitReserved("reconnect_error",me)):F.onreconnect()}))},I);this.opts.autoUnref&&W.unref(),this.subs.push(function(){clearTimeout(W)})}}onreconnect(){const F=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",F)}}const un={};function hn(X,F){"object"==typeof X&&(F=X,X=void 0);const I=function yt(X,F="",I){let W=X;I=I||typeof location<"u"&&location,null==X&&(X=I.protocol+"//"+I.host),"string"==typeof X&&("/"===X.charAt(0)&&(X="/"===X.charAt(1)?I.protocol+X:I.host+X),/^(https?|wss?):\/\//.test(X)||(X=typeof I<"u"?I.protocol+"//"+X:"https://"+X),W=Qe(X)),W.port||(/^(http|ws)$/.test(W.protocol)?W.port="80":/^(http|ws)s$/.test(W.protocol)&&(W.port="443")),W.path=W.path||"/";const ze=-1!==W.host.indexOf(":")?"["+W.host+"]":W.host;return W.id=W.protocol+"://"+ze+":"+W.port+F,W.href=W.protocol+"://"+ze+(I&&I.port===W.port?"":":"+W.port),W}(X,(F=F||{}).path||"/socket.io"),W=I.source,me=I.id;let ln;return F.forceNew||F["force new connection"]||!1===F.multiplex||un[me]&&I.path in un[me].nsps?ln=new Nn(W,F):(un[me]||(un[me]=new Nn(W,F)),ln=un[me]),I.query&&!F.query&&(F.query=I.queryKey),ln.socket(I.path,F)}Object.assign(hn,{Manager:Nn,Socket:li,io:hn,connect:hn})}},Ft=>{Ft(Ft.s=3750)}]);